{"{\"assumptions\":{},\"sourceRoot\":\"/Users/ramireddycharitha/git-explore/utils/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/ramireddycharitha/git-explore\",\"filename\":\"/Users/ramireddycharitha/git-explore/utils/WinstonLogger.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"default\",\"root\":\"/Users/ramireddycharitha/git-explore\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.17.10:default":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = WinstonLogger;\nexports.init = init;\n\nvar _path = _interopRequireDefault(require(\"path\"));\n\nvar _os = _interopRequireDefault(require(\"os\"));\n\nvar _winston = _interopRequireDefault(require(\"winston\"));\n\nvar _jsonpathPlus = require(\"jsonpath-plus\");\n\nvar Constants = _interopRequireWildcard(require(\"../constants/Constants\"));\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nrequire(\"winston-daily-rotate-file\");\n\nconst lodash = require(\"lodash\");\n\nconst httpContext = require(\"express-http-context\");\n\nconst fs = require(\"fs\");\n\nconst {\n  format\n} = _winston.default;\nconst {\n  combine,\n  timestamp,\n  json\n} = format;\nconst SENSITIVE_DATA_MAPPINGS = {\n  \"$.request.body\": [\"password\"],\n  \"$.response.messages[:]\": [\"message\"]\n};\nconst MASK = \"XXXXXX\";\nlet loggerReference; // Parse unhandled exceptions, convert message to json object\n\nconst parseUnhandledExceptions = format(info => {\n  const input = { ...info\n  };\n\n  if (info.exception) {\n    input.message = {\n      error: info\n    };\n  }\n\n  return input;\n}); // https://github.com/winstonjs/winston#logging-levels\n// https://www.npmjs.com/package/winston-daily-rotate-file\n\nfunction WinstonLogger() {\n  const logDir = `${_os.default.homedir()}/${process.env.name}-logs/`;\n\n  if (!fs.existsSync(logDir)) {\n    fs.mkdirSync(logDir);\n  }\n\n  const logger = _winston.default.createLogger({\n    defaultMeta: {\n      service: process.env.name\n    },\n    level: \"info\",\n    format: combine(parseUnhandledExceptions(), timestamp(), json()),\n    exitOnError: false,\n    transports: [new _winston.default.transports.DailyRotateFile({\n      filename: \"all\",\n      extension: \".log\",\n      dirname: logDir,\n      maxSize: \"50m\",\n      maxFiles: \"10\",\n      handleExceptions: true,\n      handleRejections: true\n    })]\n  }); // for local write to console\n\n\n  if (process.env.NODE_ENV === \"default\") {\n    const console = new _winston.default.transports.Console({\n      handleExceptions: true,\n      handleRejections: true,\n      exitOnError: false\n    });\n    logger.add(console); // Add console transport\n  }\n\n  return logger;\n}\n\nfunction getInstanceOfLogger() {\n  if (!loggerReference) {\n    loggerReference = new WinstonLogger();\n  }\n\n  return loggerReference;\n}\n\nfunction init() {\n  loggerReference = new WinstonLogger();\n}\n\nconst replaceMask = payload => {\n  const input = { ...payload\n  };\n  Object.keys(SENSITIVE_DATA_MAPPINGS).forEach(jsonPath => {\n    if (Array.isArray(SENSITIVE_DATA_MAPPINGS[jsonPath])) {\n      SENSITIVE_DATA_MAPPINGS[jsonPath].forEach((v, k) => {\n        if (input[SENSITIVE_DATA_MAPPINGS[jsonPath][k]]) {\n          input[SENSITIVE_DATA_MAPPINGS[jsonPath][k]] = MASK;\n        }\n      });\n    }\n  });\n  return input;\n};\n\nconst maskSensitiveData = info => {\n  Object.keys(SENSITIVE_DATA_MAPPINGS).forEach(jsonPath => {\n    (0, _jsonpathPlus.JSONPath)({\n      path: jsonPath,\n      json: info,\n      callback: replaceMask\n    });\n  });\n  return info;\n}; // https://v8.dev/docs/stack-trace-api\n\n\nfunction doosraTrace() {\n  const orig = Error.prepareStackTrace;\n\n  Error.prepareStackTrace = (_, stack) => stack;\n\n  const err = new Error();\n  Error.captureStackTrace(err, log);\n  const {\n    stack\n  } = err;\n  Error.prepareStackTrace = orig;\n\n  const filename = _path.default.basename(stack[0].getFileName());\n\n  const functionName = stack[0] ? stack[0].getFunctionName() : \"\";\n  return {\n    filename,\n    functionName\n  };\n}\n\nfunction jsonStringifyLog(log) {\n  const tempLog = lodash.cloneDeep(log);\n\n  try {\n    tempLog.message = JSON.stringify(tempLog.message);\n    tempLog.request = JSON.stringify(tempLog.request);\n    tempLog.response = JSON.stringify(tempLog.response);\n  } catch (error) {\n    console.error(\"error\", {\n      error\n    });\n  }\n\n  return tempLog;\n}\n/**\n *\n * @param {*} level\n * @param {*} message\n * message, request, response values are json strings\n */\n\n\nglobal.log = function (level, message) {\n  const logLevel = level || \"info\";\n  const {\n    filename,\n    functionName\n  } = doosraTrace();\n  let log = {\n    correlationId: httpContext.get(Constants.LOGGER_CORRELATIONID) || \"\",\n    filename,\n    functionName,\n    ipAddress: httpContext.get(Constants.LOGGER_USER_IP_ADDRESS) || \"\",\n    message,\n    request: httpContext.get(Constants.LOGGER_REQUEST_PAYLOAD) || {},\n    response: httpContext.get(Constants.LOGGER_RESPONSE_PAYLOAD) || {},\n    responseTime: httpContext.get(Constants.LOGGER_RESPONSE_TIME),\n    route: httpContext.get(Constants.LOGGER_API_ROUTE) || \"\",\n    userDetails: httpContext.get(Constants.LOGGER_USER_DETAILS) || {}\n  };\n  log = maskSensitiveData(log);\n  const logger = getInstanceOfLogger(); // message, request, response are json stringified\n\n  logger.log(logLevel, jsonStringifyLog(log));\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJyZXF1aXJlIiwibG9kYXNoIiwiaHR0cENvbnRleHQiLCJmcyIsImZvcm1hdCIsIndpbnN0b24iLCJjb21iaW5lIiwidGltZXN0YW1wIiwianNvbiIsIlNFTlNJVElWRV9EQVRBX01BUFBJTkdTIiwiTUFTSyIsImxvZ2dlclJlZmVyZW5jZSIsInBhcnNlVW5oYW5kbGVkRXhjZXB0aW9ucyIsImluZm8iLCJpbnB1dCIsImV4Y2VwdGlvbiIsIm1lc3NhZ2UiLCJlcnJvciIsIldpbnN0b25Mb2dnZXIiLCJsb2dEaXIiLCJvcyIsImhvbWVkaXIiLCJwcm9jZXNzIiwiZW52IiwibmFtZSIsImV4aXN0c1N5bmMiLCJta2RpclN5bmMiLCJsb2dnZXIiLCJjcmVhdGVMb2dnZXIiLCJkZWZhdWx0TWV0YSIsInNlcnZpY2UiLCJsZXZlbCIsImV4aXRPbkVycm9yIiwidHJhbnNwb3J0cyIsIkRhaWx5Um90YXRlRmlsZSIsImZpbGVuYW1lIiwiZXh0ZW5zaW9uIiwiZGlybmFtZSIsIm1heFNpemUiLCJtYXhGaWxlcyIsImhhbmRsZUV4Y2VwdGlvbnMiLCJoYW5kbGVSZWplY3Rpb25zIiwiTk9ERV9FTlYiLCJjb25zb2xlIiwiQ29uc29sZSIsImFkZCIsImdldEluc3RhbmNlT2ZMb2dnZXIiLCJpbml0IiwicmVwbGFjZU1hc2siLCJwYXlsb2FkIiwiT2JqZWN0Iiwia2V5cyIsImZvckVhY2giLCJqc29uUGF0aCIsIkFycmF5IiwiaXNBcnJheSIsInYiLCJrIiwibWFza1NlbnNpdGl2ZURhdGEiLCJwYXRoIiwiY2FsbGJhY2siLCJkb29zcmFUcmFjZSIsIm9yaWciLCJFcnJvciIsInByZXBhcmVTdGFja1RyYWNlIiwiXyIsInN0YWNrIiwiZXJyIiwiY2FwdHVyZVN0YWNrVHJhY2UiLCJsb2ciLCJiYXNlbmFtZSIsImdldEZpbGVOYW1lIiwiZnVuY3Rpb25OYW1lIiwiZ2V0RnVuY3Rpb25OYW1lIiwianNvblN0cmluZ2lmeUxvZyIsInRlbXBMb2ciLCJjbG9uZURlZXAiLCJKU09OIiwic3RyaW5naWZ5IiwicmVxdWVzdCIsInJlc3BvbnNlIiwiZ2xvYmFsIiwibG9nTGV2ZWwiLCJjb3JyZWxhdGlvbklkIiwiZ2V0IiwiQ29uc3RhbnRzIiwiTE9HR0VSX0NPUlJFTEFUSU9OSUQiLCJpcEFkZHJlc3MiLCJMT0dHRVJfVVNFUl9JUF9BRERSRVNTIiwiTE9HR0VSX1JFUVVFU1RfUEFZTE9BRCIsIkxPR0dFUl9SRVNQT05TRV9QQVlMT0FEIiwicmVzcG9uc2VUaW1lIiwiTE9HR0VSX1JFU1BPTlNFX1RJTUUiLCJyb3V0ZSIsIkxPR0dFUl9BUElfUk9VVEUiLCJ1c2VyRGV0YWlscyIsIkxPR0dFUl9VU0VSX0RFVEFJTFMiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy9yYW1pcmVkZHljaGFyaXRoYS9naXQtZXhwbG9yZS91dGlscy8iLCJzb3VyY2VzIjpbIldpbnN0b25Mb2dnZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHBhdGggZnJvbSBcInBhdGhcIjtcbmltcG9ydCBvcyBmcm9tIFwib3NcIjtcbmltcG9ydCB3aW5zdG9uIGZyb20gXCJ3aW5zdG9uXCI7XG5pbXBvcnQgeyBKU09OUGF0aCB9IGZyb20gXCJqc29ucGF0aC1wbHVzXCI7XG5pbXBvcnQgKiBhcyBDb25zdGFudHMgZnJvbSBcIi4uL2NvbnN0YW50cy9Db25zdGFudHNcIjtcblxucmVxdWlyZShcIndpbnN0b24tZGFpbHktcm90YXRlLWZpbGVcIik7XG5jb25zdCBsb2Rhc2ggPSByZXF1aXJlKFwibG9kYXNoXCIpO1xuY29uc3QgaHR0cENvbnRleHQgPSByZXF1aXJlKFwiZXhwcmVzcy1odHRwLWNvbnRleHRcIik7XG5jb25zdCBmcyA9IHJlcXVpcmUoXCJmc1wiKTtcblxuY29uc3QgeyBmb3JtYXQgfSA9IHdpbnN0b247XG5jb25zdCB7IGNvbWJpbmUsIHRpbWVzdGFtcCwganNvbiB9ID0gZm9ybWF0O1xuY29uc3QgU0VOU0lUSVZFX0RBVEFfTUFQUElOR1MgPSB7XG4gIFwiJC5yZXF1ZXN0LmJvZHlcIjogW1wicGFzc3dvcmRcIl0sXG4gIFwiJC5yZXNwb25zZS5tZXNzYWdlc1s6XVwiOiBbXCJtZXNzYWdlXCJdLFxufTtcbmNvbnN0IE1BU0sgPSBcIlhYWFhYWFwiO1xubGV0IGxvZ2dlclJlZmVyZW5jZTtcblxuLy8gUGFyc2UgdW5oYW5kbGVkIGV4Y2VwdGlvbnMsIGNvbnZlcnQgbWVzc2FnZSB0byBqc29uIG9iamVjdFxuY29uc3QgcGFyc2VVbmhhbmRsZWRFeGNlcHRpb25zID0gZm9ybWF0KChpbmZvKSA9PiB7XG4gIGNvbnN0IGlucHV0ID0geyAuLi5pbmZvIH07XG4gIGlmIChpbmZvLmV4Y2VwdGlvbikge1xuICAgIGlucHV0Lm1lc3NhZ2UgPSB7IGVycm9yOiBpbmZvIH07XG4gIH1cbiAgcmV0dXJuIGlucHV0O1xufSk7XG5cbi8vIGh0dHBzOi8vZ2l0aHViLmNvbS93aW5zdG9uanMvd2luc3RvbiNsb2dnaW5nLWxldmVsc1xuLy8gaHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2Uvd2luc3Rvbi1kYWlseS1yb3RhdGUtZmlsZVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBXaW5zdG9uTG9nZ2VyKCkge1xuICBjb25zdCBsb2dEaXIgPSBgJHtvcy5ob21lZGlyKCl9LyR7cHJvY2Vzcy5lbnYubmFtZX0tbG9ncy9gO1xuICBpZiAoIWZzLmV4aXN0c1N5bmMobG9nRGlyKSkge1xuICAgIGZzLm1rZGlyU3luYyhsb2dEaXIpO1xuICB9XG4gIGNvbnN0IGxvZ2dlciA9IHdpbnN0b24uY3JlYXRlTG9nZ2VyKHtcbiAgICBkZWZhdWx0TWV0YToge1xuICAgICAgc2VydmljZTogcHJvY2Vzcy5lbnYubmFtZSxcbiAgICB9LFxuICAgIGxldmVsOiBcImluZm9cIixcbiAgICBmb3JtYXQ6IGNvbWJpbmUoXG4gICAgICBwYXJzZVVuaGFuZGxlZEV4Y2VwdGlvbnMoKSxcbiAgICAgIHRpbWVzdGFtcCgpLFxuICAgICAganNvbigpLFxuICAgICksXG4gICAgZXhpdE9uRXJyb3I6IGZhbHNlLFxuICAgIHRyYW5zcG9ydHM6IFtcbiAgICAgIG5ldyB3aW5zdG9uLnRyYW5zcG9ydHMuRGFpbHlSb3RhdGVGaWxlKHtcbiAgICAgICAgZmlsZW5hbWU6IFwiYWxsXCIsXG4gICAgICAgIGV4dGVuc2lvbjogXCIubG9nXCIsXG4gICAgICAgIGRpcm5hbWU6IGxvZ0RpcixcbiAgICAgICAgbWF4U2l6ZTogXCI1MG1cIixcbiAgICAgICAgbWF4RmlsZXM6IFwiMTBcIixcbiAgICAgICAgaGFuZGxlRXhjZXB0aW9uczogdHJ1ZSxcbiAgICAgICAgaGFuZGxlUmVqZWN0aW9uczogdHJ1ZSxcbiAgICAgIH0pLFxuICAgIF0sXG4gIH0pO1xuICAvLyBmb3IgbG9jYWwgd3JpdGUgdG8gY29uc29sZVxuICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09IFwiZGVmYXVsdFwiKSB7XG4gICAgY29uc3QgY29uc29sZSA9IG5ldyB3aW5zdG9uLnRyYW5zcG9ydHMuQ29uc29sZSh7XG4gICAgICBoYW5kbGVFeGNlcHRpb25zOiB0cnVlLFxuICAgICAgaGFuZGxlUmVqZWN0aW9uczogdHJ1ZSxcbiAgICAgIGV4aXRPbkVycm9yOiBmYWxzZSxcbiAgICB9KTtcbiAgICBsb2dnZXIuYWRkKGNvbnNvbGUpOyAvLyBBZGQgY29uc29sZSB0cmFuc3BvcnRcbiAgfVxuICByZXR1cm4gbG9nZ2VyO1xufVxuXG5mdW5jdGlvbiBnZXRJbnN0YW5jZU9mTG9nZ2VyKCkge1xuICBpZiAoIWxvZ2dlclJlZmVyZW5jZSkge1xuICAgIGxvZ2dlclJlZmVyZW5jZSA9IG5ldyBXaW5zdG9uTG9nZ2VyKCk7XG4gIH1cbiAgcmV0dXJuIGxvZ2dlclJlZmVyZW5jZTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGluaXQoKSB7XG4gIGxvZ2dlclJlZmVyZW5jZSA9IG5ldyBXaW5zdG9uTG9nZ2VyKCk7XG59XG5cbmNvbnN0IHJlcGxhY2VNYXNrID0gKHBheWxvYWQpID0+IHtcbiAgY29uc3QgaW5wdXQgPSB7IC4uLnBheWxvYWQgfTtcbiAgT2JqZWN0LmtleXMoU0VOU0lUSVZFX0RBVEFfTUFQUElOR1MpLmZvckVhY2goKGpzb25QYXRoKSA9PiB7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkoU0VOU0lUSVZFX0RBVEFfTUFQUElOR1NbanNvblBhdGhdKSkge1xuICAgICAgU0VOU0lUSVZFX0RBVEFfTUFQUElOR1NbanNvblBhdGhdLmZvckVhY2goKHYsIGspID0+IHtcbiAgICAgICAgaWYgKGlucHV0W1NFTlNJVElWRV9EQVRBX01BUFBJTkdTW2pzb25QYXRoXVtrXV0pIHtcbiAgICAgICAgICBpbnB1dFtTRU5TSVRJVkVfREFUQV9NQVBQSU5HU1tqc29uUGF0aF1ba11dID0gTUFTSztcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9KTtcbiAgcmV0dXJuIGlucHV0O1xufTtcblxuY29uc3QgbWFza1NlbnNpdGl2ZURhdGEgPSAoaW5mbykgPT4ge1xuICBPYmplY3Qua2V5cyhTRU5TSVRJVkVfREFUQV9NQVBQSU5HUykuZm9yRWFjaCgoanNvblBhdGgpID0+IHtcbiAgICBKU09OUGF0aCh7XG4gICAgICBwYXRoOiBqc29uUGF0aCxcbiAgICAgIGpzb246IGluZm8sXG4gICAgICBjYWxsYmFjazogcmVwbGFjZU1hc2ssXG4gICAgfSk7XG4gIH0pO1xuICByZXR1cm4gaW5mbztcbn07XG5cbi8vIGh0dHBzOi8vdjguZGV2L2RvY3Mvc3RhY2stdHJhY2UtYXBpXG5mdW5jdGlvbiBkb29zcmFUcmFjZSgpIHtcbiAgY29uc3Qgb3JpZyA9IEVycm9yLnByZXBhcmVTdGFja1RyYWNlO1xuICBFcnJvci5wcmVwYXJlU3RhY2tUcmFjZSA9IChfLCBzdGFjaykgPT4gc3RhY2s7XG4gIGNvbnN0IGVyciA9IG5ldyBFcnJvcigpO1xuICBFcnJvci5jYXB0dXJlU3RhY2tUcmFjZShlcnIsIGxvZyk7XG4gIGNvbnN0IHsgc3RhY2sgfSA9IGVycjtcbiAgRXJyb3IucHJlcGFyZVN0YWNrVHJhY2UgPSBvcmlnO1xuICBjb25zdCBmaWxlbmFtZSA9IHBhdGguYmFzZW5hbWUoc3RhY2tbMF0uZ2V0RmlsZU5hbWUoKSk7XG4gIGNvbnN0IGZ1bmN0aW9uTmFtZSA9IHN0YWNrWzBdID8gc3RhY2tbMF0uZ2V0RnVuY3Rpb25OYW1lKCkgOiBcIlwiO1xuICByZXR1cm4geyBmaWxlbmFtZSwgZnVuY3Rpb25OYW1lIH07XG59XG5cbmZ1bmN0aW9uIGpzb25TdHJpbmdpZnlMb2cobG9nKSB7XG4gIGNvbnN0IHRlbXBMb2cgPSBsb2Rhc2guY2xvbmVEZWVwKGxvZyk7XG4gIHRyeSB7XG4gICAgdGVtcExvZy5tZXNzYWdlID0gSlNPTi5zdHJpbmdpZnkodGVtcExvZy5tZXNzYWdlKTtcbiAgICB0ZW1wTG9nLnJlcXVlc3QgPSBKU09OLnN0cmluZ2lmeSh0ZW1wTG9nLnJlcXVlc3QpO1xuICAgIHRlbXBMb2cucmVzcG9uc2UgPSBKU09OLnN0cmluZ2lmeSh0ZW1wTG9nLnJlc3BvbnNlKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiZXJyb3JcIiwgeyBlcnJvciB9KTtcbiAgfVxuICByZXR1cm4gdGVtcExvZztcbn1cbi8qKlxuICpcbiAqIEBwYXJhbSB7Kn0gbGV2ZWxcbiAqIEBwYXJhbSB7Kn0gbWVzc2FnZVxuICogbWVzc2FnZSwgcmVxdWVzdCwgcmVzcG9uc2UgdmFsdWVzIGFyZSBqc29uIHN0cmluZ3NcbiAqL1xuZ2xvYmFsLmxvZyA9IGZ1bmN0aW9uIChsZXZlbCwgbWVzc2FnZSkge1xuICBjb25zdCBsb2dMZXZlbCA9IGxldmVsIHx8IFwiaW5mb1wiO1xuICBjb25zdCB7IGZpbGVuYW1lLCBmdW5jdGlvbk5hbWUgfSA9IGRvb3NyYVRyYWNlKCk7XG4gIGxldCBsb2cgPSB7XG4gICAgY29ycmVsYXRpb25JZDogaHR0cENvbnRleHQuZ2V0KENvbnN0YW50cy5MT0dHRVJfQ09SUkVMQVRJT05JRCkgfHwgXCJcIixcbiAgICBmaWxlbmFtZSxcbiAgICBmdW5jdGlvbk5hbWUsXG4gICAgaXBBZGRyZXNzOiBodHRwQ29udGV4dC5nZXQoQ29uc3RhbnRzLkxPR0dFUl9VU0VSX0lQX0FERFJFU1MpIHx8IFwiXCIsXG4gICAgbWVzc2FnZSxcbiAgICByZXF1ZXN0OiBodHRwQ29udGV4dC5nZXQoQ29uc3RhbnRzLkxPR0dFUl9SRVFVRVNUX1BBWUxPQUQpIHx8IHt9LFxuICAgIHJlc3BvbnNlOiBodHRwQ29udGV4dC5nZXQoQ29uc3RhbnRzLkxPR0dFUl9SRVNQT05TRV9QQVlMT0FEKSB8fCB7fSxcbiAgICByZXNwb25zZVRpbWU6IGh0dHBDb250ZXh0LmdldChDb25zdGFudHMuTE9HR0VSX1JFU1BPTlNFX1RJTUUpLFxuICAgIHJvdXRlOiBodHRwQ29udGV4dC5nZXQoQ29uc3RhbnRzLkxPR0dFUl9BUElfUk9VVEUpIHx8IFwiXCIsXG4gICAgdXNlckRldGFpbHM6IGh0dHBDb250ZXh0LmdldChDb25zdGFudHMuTE9HR0VSX1VTRVJfREVUQUlMUykgfHwge30sXG4gIH07XG4gIGxvZyA9IG1hc2tTZW5zaXRpdmVEYXRhKGxvZyk7XG4gIGNvbnN0IGxvZ2dlciA9IGdldEluc3RhbmNlT2ZMb2dnZXIoKTtcbiAgLy8gbWVzc2FnZSwgcmVxdWVzdCwgcmVzcG9uc2UgYXJlIGpzb24gc3RyaW5naWZpZWRcbiAgbG9nZ2VyLmxvZyhsb2dMZXZlbCwganNvblN0cmluZ2lmeUxvZyhsb2cpKTtcbn07XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQUE7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7Ozs7Ozs7O0FBRUFBLE9BQU8sQ0FBQywyQkFBRCxDQUFQOztBQUNBLE1BQU1DLE1BQU0sR0FBR0QsT0FBTyxDQUFDLFFBQUQsQ0FBdEI7O0FBQ0EsTUFBTUUsV0FBVyxHQUFHRixPQUFPLENBQUMsc0JBQUQsQ0FBM0I7O0FBQ0EsTUFBTUcsRUFBRSxHQUFHSCxPQUFPLENBQUMsSUFBRCxDQUFsQjs7QUFFQSxNQUFNO0VBQUVJO0FBQUYsSUFBYUMsZ0JBQW5CO0FBQ0EsTUFBTTtFQUFFQyxPQUFGO0VBQVdDLFNBQVg7RUFBc0JDO0FBQXRCLElBQStCSixNQUFyQztBQUNBLE1BQU1L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","map":{"version":3,"names":["require","lodash","httpContext","fs","format","winston","combine","timestamp","json","SENSITIVE_DATA_MAPPINGS","MASK","loggerReference","parseUnhandledExceptions","info","input","exception","message","error","WinstonLogger","logDir","os","homedir","process","env","name","existsSync","mkdirSync","logger","createLogger","defaultMeta","service","level","exitOnError","transports","DailyRotateFile","filename","extension","dirname","maxSize","maxFiles","handleExceptions","handleRejections","NODE_ENV","console","Console","add","getInstanceOfLogger","init","replaceMask","payload","Object","keys","forEach","jsonPath","Array","isArray","v","k","maskSensitiveData","path","callback","doosraTrace","orig","Error","prepareStackTrace","_","stack","err","captureStackTrace","log","basename","getFileName","functionName","getFunctionName","jsonStringifyLog","tempLog","cloneDeep","JSON","stringify","request","response","global","logLevel","correlationId","get","Constants","LOGGER_CORRELATIONID","ipAddress","LOGGER_USER_IP_ADDRESS","LOGGER_REQUEST_PAYLOAD","LOGGER_RESPONSE_PAYLOAD","responseTime","LOGGER_RESPONSE_TIME","route","LOGGER_API_ROUTE","userDetails","LOGGER_USER_DETAILS"],"sourceRoot":"/Users/ramireddycharitha/git-explore/utils/","sources":["WinstonLogger.js"],"sourcesContent":["import path from \"path\";\nimport os from \"os\";\nimport winston from \"winston\";\nimport { JSONPath } from \"jsonpath-plus\";\nimport * as Constants from \"../constants/Constants\";\n\nrequire(\"winston-daily-rotate-file\");\nconst lodash = require(\"lodash\");\nconst httpContext = require(\"express-http-context\");\nconst fs = require(\"fs\");\n\nconst { format } = winston;\nconst { combine, timestamp, json } = format;\nconst SENSITIVE_DATA_MAPPINGS = {\n  \"$.request.body\": [\"password\"],\n  \"$.response.messages[:]\": [\"message\"],\n};\nconst MASK = \"XXXXXX\";\nlet loggerReference;\n\n// Parse unhandled exceptions, convert message to json object\nconst parseUnhandledExceptions = format((info) => {\n  const input = { ...info };\n  if (info.exception) {\n    input.message = { error: info };\n  }\n  return input;\n});\n\n// https://github.com/winstonjs/winston#logging-levels\n// https://www.npmjs.com/package/winston-daily-rotate-file\n\nexport default function WinstonLogger() {\n  const logDir = `${os.homedir()}/${process.env.name}-logs/`;\n  if (!fs.existsSync(logDir)) {\n    fs.mkdirSync(logDir);\n  }\n  const logger = winston.createLogger({\n    defaultMeta: {\n      service: process.env.name,\n    },\n    level: \"info\",\n    format: combine(\n      parseUnhandledExceptions(),\n      timestamp(),\n      json(),\n    ),\n    exitOnError: false,\n    transports: [\n      new winston.transports.DailyRotateFile({\n        filename: \"all\",\n        extension: \".log\",\n        dirname: logDir,\n        maxSize: \"50m\",\n        maxFiles: \"10\",\n        handleExceptions: true,\n        handleRejections: true,\n      }),\n    ],\n  });\n  // for local write to console\n  if (process.env.NODE_ENV === \"default\") {\n    const console = new winston.transports.Console({\n      handleExceptions: true,\n      handleRejections: true,\n      exitOnError: false,\n    });\n    logger.add(console); // Add console transport\n  }\n  return logger;\n}\n\nfunction getInstanceOfLogger() {\n  if (!loggerReference) {\n    loggerReference = new WinstonLogger();\n  }\n  return loggerReference;\n}\n\nexport function init() {\n  loggerReference = new WinstonLogger();\n}\n\nconst replaceMask = (payload) => {\n  const input = { ...payload };\n  Object.keys(SENSITIVE_DATA_MAPPINGS).forEach((jsonPath) => {\n    if (Array.isArray(SENSITIVE_DATA_MAPPINGS[jsonPath])) {\n      SENSITIVE_DATA_MAPPINGS[jsonPath].forEach((v, k) => {\n        if (input[SENSITIVE_DATA_MAPPINGS[jsonPath][k]]) {\n          input[SENSITIVE_DATA_MAPPINGS[jsonPath][k]] = MASK;\n        }\n      });\n    }\n  });\n  return input;\n};\n\nconst maskSensitiveData = (info) => {\n  Object.keys(SENSITIVE_DATA_MAPPINGS).forEach((jsonPath) => {\n    JSONPath({\n      path: jsonPath,\n      json: info,\n      callback: replaceMask,\n    });\n  });\n  return info;\n};\n\n// https://v8.dev/docs/stack-trace-api\nfunction doosraTrace() {\n  const orig = Error.prepareStackTrace;\n  Error.prepareStackTrace = (_, stack) => stack;\n  const err = new Error();\n  Error.captureStackTrace(err, log);\n  const { stack } = err;\n  Error.prepareStackTrace = orig;\n  const filename = path.basename(stack[0].getFileName());\n  const functionName = stack[0] ? stack[0].getFunctionName() : \"\";\n  return { filename, functionName };\n}\n\nfunction jsonStringifyLog(log) {\n  const tempLog = lodash.cloneDeep(log);\n  try {\n    tempLog.message = JSON.stringify(tempLog.message);\n    tempLog.request = JSON.stringify(tempLog.request);\n    tempLog.response = JSON.stringify(tempLog.response);\n  } catch (error) {\n    console.error(\"error\", { error });\n  }\n  return tempLog;\n}\n/**\n *\n * @param {*} level\n * @param {*} message\n * message, request, response values are json strings\n */\nglobal.log = function (level, message) {\n  const logLevel = level || \"info\";\n  const { filename, functionName } = doosraTrace();\n  let log = {\n    correlationId: httpContext.get(Constants.LOGGER_CORRELATIONID) || \"\",\n    filename,\n    functionName,\n    ipAddress: httpContext.get(Constants.LOGGER_USER_IP_ADDRESS) || \"\",\n    message,\n    request: httpContext.get(Constants.LOGGER_REQUEST_PAYLOAD) || {},\n    response: httpContext.get(Constants.LOGGER_RESPONSE_PAYLOAD) || {},\n    responseTime: httpContext.get(Constants.LOGGER_RESPONSE_TIME),\n    route: httpContext.get(Constants.LOGGER_API_ROUTE) || \"\",\n    userDetails: httpContext.get(Constants.LOGGER_USER_DETAILS) || {},\n  };\n  log = maskSensitiveData(log);\n  const logger = getInstanceOfLogger();\n  // message, request, response are json stringified\n  logger.log(logLevel, jsonStringifyLog(log));\n};\n"],"mappings":"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"}},"mtime":1653643634192},"{\"assumptions\":{},\"sourceRoot\":\"/Users/ramireddycharitha/git-explore/constants/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/ramireddycharitha/git-explore\",\"filename\":\"/Users/ramireddycharitha/git-explore/constants/Constants.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"default\",\"root\":\"/Users/ramireddycharitha/git-explore\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.17.10:default":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.LOGGER_USER_IP_ADDRESS = exports.LOGGER_USER_DETAILS = exports.LOGGER_URL_REDIRECTION_OBJ = exports.LOGGER_RESPONSE_TIME = exports.LOGGER_RESPONSE_PAYLOAD = exports.LOGGER_REQUEST_START_TIME = exports.LOGGER_REQUEST_PAYLOAD = exports.LOGGER_CORRELATIONID = exports.LOGGER_API_ROUTE = void 0;\nconst LOGGER_USER_DETAILS = \"loggerUserDetails\";\nexports.LOGGER_USER_DETAILS = LOGGER_USER_DETAILS;\nconst LOGGER_REQUEST_PAYLOAD = \"loggerRequestPayload\";\nexports.LOGGER_REQUEST_PAYLOAD = LOGGER_REQUEST_PAYLOAD;\nconst LOGGER_RESPONSE_PAYLOAD = \"loggerResponsePayload\";\nexports.LOGGER_RESPONSE_PAYLOAD = LOGGER_RESPONSE_PAYLOAD;\nconst LOGGER_REQUEST_START_TIME = \"loggerRequestStartTime\";\nexports.LOGGER_REQUEST_START_TIME = LOGGER_REQUEST_START_TIME;\nconst LOGGER_API_ROUTE = \"loggerRoute\";\nexports.LOGGER_API_ROUTE = LOGGER_API_ROUTE;\nconst LOGGER_USER_IP_ADDRESS = \"loggerUserIpAddress\";\nexports.LOGGER_USER_IP_ADDRESS = LOGGER_USER_IP_ADDRESS;\nconst LOGGER_CORRELATIONID = \"loggerCorrelationId\";\nexports.LOGGER_CORRELATIONID = LOGGER_CORRELATIONID;\nconst LOGGER_RESPONSE_TIME = \"loggerResponseTime\";\nexports.LOGGER_RESPONSE_TIME = LOGGER_RESPONSE_TIME;\nconst LOGGER_URL_REDIRECTION_OBJ = \"loggerUrlRedirectionObj\";\nexports.LOGGER_URL_REDIRECTION_OBJ = LOGGER_URL_REDIRECTION_OBJ;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJMT0dHRVJfVVNFUl9ERVRBSUxTIiwiTE9HR0VSX1JFUVVFU1RfUEFZTE9BRCIsIkxPR0dFUl9SRVNQT05TRV9QQVlMT0FEIiwiTE9HR0VSX1JFUVVFU1RfU1RBUlRfVElNRSIsIkxPR0dFUl9BUElfUk9VVEUiLCJMT0dHRVJfVVNFUl9JUF9BRERSRVNTIiwiTE9HR0VSX0NPUlJFTEFUSU9OSUQiLCJMT0dHRVJfUkVTUE9OU0VfVElNRSIsIkxPR0dFUl9VUkxfUkVESVJFQ1RJT05fT0JKIl0sInNvdXJjZVJvb3QiOiIvVXNlcnMvcmFtaXJlZGR5Y2hhcml0aGEvZ2l0LWV4cGxvcmUvY29uc3RhbnRzLyIsInNvdXJjZXMiOlsiQ29uc3RhbnRzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjb25zdCBMT0dHRVJfVVNFUl9ERVRBSUxTID0gXCJsb2dnZXJVc2VyRGV0YWlsc1wiO1xuZXhwb3J0IGNvbnN0IExPR0dFUl9SRVFVRVNUX1BBWUxPQUQgPSBcImxvZ2dlclJlcXVlc3RQYXlsb2FkXCI7XG5leHBvcnQgY29uc3QgTE9HR0VSX1JFU1BPTlNFX1BBWUxPQUQgPSBcImxvZ2dlclJlc3BvbnNlUGF5bG9hZFwiO1xuZXhwb3J0IGNvbnN0IExPR0dFUl9SRVFVRVNUX1NUQVJUX1RJTUUgPSBcImxvZ2dlclJlcXVlc3RTdGFydFRpbWVcIjtcbmV4cG9ydCBjb25zdCBMT0dHRVJfQVBJX1JPVVRFID0gXCJsb2dnZXJSb3V0ZVwiO1xuZXhwb3J0IGNvbnN0IExPR0dFUl9VU0VSX0lQX0FERFJFU1MgPSBcImxvZ2dlclVzZXJJcEFkZHJlc3NcIjtcbmV4cG9ydCBjb25zdCBMT0dHRVJfQ09SUkVMQVRJT05JRCA9IFwibG9nZ2VyQ29ycmVsYXRpb25JZFwiO1xuZXhwb3J0IGNvbnN0IExPR0dFUl9SRVNQT05TRV9USU1FID0gXCJsb2dnZXJSZXNwb25zZVRpbWVcIjtcbmV4cG9ydCBjb25zdCBMT0dHRVJfVVJMX1JFRElSRUNUSU9OX09CSiA9IFwibG9nZ2VyVXJsUmVkaXJlY3Rpb25PYmpcIjtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQU8sTUFBTUEsbUJBQW1CLEdBQUcsbUJBQTVCOztBQUNBLE1BQU1DLHNCQUFzQixHQUFHLHNCQUEvQjs7QUFDQSxNQUFNQyx1QkFBdUIsR0FBRyx1QkFBaEM7O0FBQ0EsTUFBTUMseUJBQXlCLEdBQUcsd0JBQWxDOztBQUNBLE1BQU1DLGdCQUFnQixHQUFHLGFBQXpCOztBQUNBLE1BQU1DLHNCQUFzQixHQUFHLHFCQUEvQjs7QUFDQSxNQUFNQyxvQkFBb0IsR0FBRyxxQkFBN0I7O0FBQ0EsTUFBTUMsb0JBQW9CLEdBQUcsb0JBQTdCOztBQUNBLE1BQU1DLDBCQUEwQixHQUFHLHlCQUFuQyJ9","map":{"version":3,"names":["LOGGER_USER_DETAILS","LOGGER_REQUEST_PAYLOAD","LOGGER_RESPONSE_PAYLOAD","LOGGER_REQUEST_START_TIME","LOGGER_API_ROUTE","LOGGER_USER_IP_ADDRESS","LOGGER_CORRELATIONID","LOGGER_RESPONSE_TIME","LOGGER_URL_REDIRECTION_OBJ"],"sourceRoot":"/Users/ramireddycharitha/git-explore/constants/","sources":["Constants.js"],"sourcesContent":["export const LOGGER_USER_DETAILS = \"loggerUserDetails\";\nexport const LOGGER_REQUEST_PAYLOAD = \"loggerRequestPayload\";\nexport const LOGGER_RESPONSE_PAYLOAD = \"loggerResponsePayload\";\nexport const LOGGER_REQUEST_START_TIME = \"loggerRequestStartTime\";\nexport const LOGGER_API_ROUTE = \"loggerRoute\";\nexport const LOGGER_USER_IP_ADDRESS = \"loggerUserIpAddress\";\nexport const LOGGER_CORRELATIONID = \"loggerCorrelationId\";\nexport const LOGGER_RESPONSE_TIME = \"loggerResponseTime\";\nexport const LOGGER_URL_REDIRECTION_OBJ = \"loggerUrlRedirectionObj\";\n"],"mappings":";;;;;;AAAO,MAAMA,mBAAmB,GAAG,mBAA5B;;AACA,MAAMC,sBAAsB,GAAG,sBAA/B;;AACA,MAAMC,uBAAuB,GAAG,uBAAhC;;AACA,MAAMC,yBAAyB,GAAG,wBAAlC;;AACA,MAAMC,gBAAgB,GAAG,aAAzB;;AACA,MAAMC,sBAAsB,GAAG,qBAA/B;;AACA,MAAMC,oBAAoB,GAAG,qBAA7B;;AACA,MAAMC,oBAAoB,GAAG,oBAA7B;;AACA,MAAMC,0BAA0B,GAAG,yBAAnC"}},"mtime":1653643634178},"{\"assumptions\":{},\"sourceRoot\":\"/Users/ramireddycharitha/git-explore/connections/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/ramireddycharitha/git-explore\",\"filename\":\"/Users/ramireddycharitha/git-explore/connections/MainDb.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"default\",\"root\":\"/Users/ramireddycharitha/git-explore\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.17.10:default":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getDbInstance = getDbInstance;\nexports.init = init;\n\nvar _mongoose = _interopRequireDefault(require(\"mongoose\"));\n\nvar _index = _interopRequireDefault(require(\"../config/index\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/* eslint-disable import/no-import-module-exports */\nlet conn;\n\nfunction init() {\n  const RECONNECT_TIME = 5000;\n  const CONN_URL = _index.default.mainDbconfig.connString;\n\n  if (conn) {\n    return conn;\n  }\n\n  _mongoose.default.set(\"debug\", (collectionName, methodName, ...methodArgs) => {\n    // use custom function to log collection methods + arguments\n    log(\"info\", `Mongoose: ${collectionName}.${methodName}(${methodArgs.join(\", \")})`);\n  });\n\n  log(\"info\", `CONN_URL to connect to main database ${CONN_URL}`);\n  conn = _mongoose.default.createConnection(CONN_URL); //  Mongoose Connection Events\n\n  conn.on(\"error\", error => {\n    log(\"error\", {\n      error\n    });\n  });\n  conn.once(\"open\", () => {\n    log(\"info\", {\n      dBConnectionStatus: \"open\"\n    });\n  });\n  conn.on(\"connected\", () => {\n    log(\"info\", {\n      dBConnectionStatus: \"connected\"\n    });\n  });\n  conn.on(\"connecting\", () => {\n    log(\"info\", {\n      dBConnectionStatus: \"connecting\"\n    });\n  });\n  conn.on(\"reconnected\", () => {\n    log(\"info\", {\n      dBConnectionStatus: \"reconnected\"\n    });\n  });\n  conn.on(\"disconnected\", () => {\n    log(\"error\", {\n      dBConnectionStatus: `disconnected Reconnecting in ${RECONNECT_TIME / 1000}s...`\n    }); // https://github.com/automattic/mongoose/issues/5169#issuecomment-314983113\n\n    setTimeout(() => {\n      conn.openUri(CONN_URL).catch(() => {});\n    }, RECONNECT_TIME);\n  });\n  return conn;\n}\n\nfunction getDbInstance() {\n  return conn;\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb25uIiwiaW5pdCIsIlJFQ09OTkVDVF9USU1FIiwiQ09OTl9VUkwiLCJjb25maWciLCJtYWluRGJjb25maWciLCJjb25uU3RyaW5nIiwibW9uZ29vc2UiLCJzZXQiLCJjb2xsZWN0aW9uTmFtZSIsIm1ldGhvZE5hbWUiLCJtZXRob2RBcmdzIiwibG9nIiwiam9pbiIsImNyZWF0ZUNvbm5lY3Rpb24iLCJvbiIsImVycm9yIiwib25jZSIsImRCQ29ubmVjdGlvblN0YXR1cyIsInNldFRpbWVvdXQiLCJvcGVuVXJpIiwiY2F0Y2giLCJnZXREYkluc3RhbmNlIl0sInNvdXJjZVJvb3QiOiIvVXNlcnMvcmFtaXJlZGR5Y2hhcml0aGEvZ2l0LWV4cGxvcmUvY29ubmVjdGlvbnMvIiwic291cmNlcyI6WyJNYWluRGIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyogZXNsaW50LWRpc2FibGUgaW1wb3J0L25vLWltcG9ydC1tb2R1bGUtZXhwb3J0cyAqL1xuXG5pbXBvcnQgbW9uZ29vc2UgZnJvbSBcIm1vbmdvb3NlXCI7XG5pbXBvcnQgY29uZmlnIGZyb20gXCIuLi9jb25maWcvaW5kZXhcIjtcblxubGV0IGNvbm47XG5cbmV4cG9ydCBmdW5jdGlvbiBpbml0KCkge1xuICBjb25zdCBSRUNPTk5FQ1RfVElNRSA9IDUwMDA7XG4gIGNvbnN0IENPTk5fVVJMID0gY29uZmlnLm1haW5EYmNvbmZpZy5jb25uU3RyaW5nO1xuXG4gIGlmIChjb25uKSB7XG4gICAgcmV0dXJuIGNvbm47XG4gIH1cblxuICBtb25nb29zZS5zZXQoXCJkZWJ1Z1wiLCAoY29sbGVjdGlvbk5hbWUsIG1ldGhvZE5hbWUsIC4uLm1ldGhvZEFyZ3MpID0+IHtcbiAgICAvLyB1c2UgY3VzdG9tIGZ1bmN0aW9uIHRvIGxvZyBjb2xsZWN0aW9uIG1ldGhvZHMgKyBhcmd1bWVudHNcbiAgICBsb2coXCJpbmZvXCIsIGBNb25nb29zZTogJHtjb2xsZWN0aW9uTmFtZX0uJHttZXRob2ROYW1lfSgke21ldGhvZEFyZ3Muam9pbihcIiwgXCIpfSlgKTtcbiAgfSk7XG5cbiAgbG9nKFwiaW5mb1wiLCBgQ09OTl9VUkwgdG8gY29ubmVjdCB0byBtYWluIGRhdGFiYXNlICR7Q09OTl9VUkx9YCk7XG4gIGNvbm4gPSBtb25nb29zZS5jcmVhdGVDb25uZWN0aW9uKENPTk5fVVJMKTtcblxuICAvLyAgTW9uZ29vc2UgQ29ubmVjdGlvbiBFdmVudHNcbiAgY29ubi5vbihcImVycm9yXCIsIChlcnJvcikgPT4ge1xuICAgIGxvZyhcImVycm9yXCIsIHsgZXJyb3IgfSk7XG4gIH0pO1xuXG4gIGNvbm4ub25jZShcIm9wZW5cIiwgKCkgPT4ge1xuICAgIGxvZyhcImluZm9cIiwgeyBkQkNvbm5lY3Rpb25TdGF0dXM6IFwib3BlblwiIH0pO1xuICB9KTtcblxuICBjb25uLm9uKFwiY29ubmVjdGVkXCIsICgpID0+IHtcbiAgICBsb2coXCJpbmZvXCIsIHsgZEJDb25uZWN0aW9uU3RhdHVzOiBcImNvbm5lY3RlZFwiIH0pO1xuICB9KTtcblxuICBjb25uLm9uKFwiY29ubmVjdGluZ1wiLCAoKSA9PiB7XG4gICAgbG9nKFwiaW5mb1wiLCB7IGRCQ29ubmVjdGlvblN0YXR1czogXCJjb25uZWN0aW5nXCIgfSk7XG4gIH0pO1xuXG4gIGNvbm4ub24oXCJyZWNvbm5lY3RlZFwiLCAoKSA9PiB7XG4gICAgbG9nKFwiaW5mb1wiLCB7IGRCQ29ubmVjdGlvblN0YXR1czogXCJyZWNvbm5lY3RlZFwiIH0pO1xuICB9KTtcblxuICBjb25uLm9uKFwiZGlzY29ubmVjdGVkXCIsICgpID0+IHtcbiAgICBsb2coXCJlcnJvclwiLCB7IGRCQ29ubmVjdGlvblN0YXR1czogYGRpc2Nvbm5lY3RlZCBSZWNvbm5lY3RpbmcgaW4gJHtSRUNPTk5FQ1RfVElNRSAvIDEwMDB9cy4uLmAgfSk7XG4gICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL2F1dG9tYXR0aWMvbW9uZ29vc2UvaXNzdWVzLzUxNjkjaXNzdWVjb21tZW50LTMxNDk4MzExM1xuICAgIHNldFRpbWVvdXQoKCkgPT4geyBjb25uLm9wZW5VcmkoQ09OTl9VUkwpLmNhdGNoKCgpID0+IHsgfSk7IH0sIFJFQ09OTkVDVF9USU1FKTtcbiAgfSk7XG5cbiAgcmV0dXJuIGNvbm47XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXREYkluc3RhbmNlKCkge1xuICByZXR1cm4gY29ubjtcbn1cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFFQTs7QUFDQTs7OztBQUhBO0FBS0EsSUFBSUEsSUFBSjs7QUFFTyxTQUFTQyxJQUFULEdBQWdCO0VBQ3JCLE1BQU1DLGNBQWMsR0FBRyxJQUF2QjtFQUNBLE1BQU1DLFFBQVEsR0FBR0MsZUFBT0MsWUFBUCxDQUFvQkMsVUFBckM7O0VBRUEsSUFBSU4sSUFBSixFQUFVO0lBQ1IsT0FBT0EsSUFBUDtFQUNEOztFQUVETyxrQkFBU0MsR0FBVCxDQUFhLE9BQWIsRUFBc0IsQ0FBQ0MsY0FBRCxFQUFpQkMsVUFBakIsRUFBNkIsR0FBR0MsVUFBaEMsS0FBK0M7SUFDbkU7SUFDQUMsR0FBRyxDQUFDLE1BQUQsRUFBVSxhQUFZSCxjQUFlLElBQUdDLFVBQVcsSUFBR0MsVUFBVSxDQUFDRSxJQUFYLENBQWdCLElBQWhCLENBQXNCLEdBQTVFLENBQUg7RUFDRCxDQUhEOztFQUtBRCxHQUFHLENBQUMsTUFBRCxFQUFVLHdDQUF1Q1QsUUFBUyxFQUExRCxDQUFIO0VBQ0FILElBQUksR0FBR08sa0JBQVNPLGdCQUFULENBQTBCWCxRQUExQixDQUFQLENBZHFCLENBZ0JyQjs7RUFDQUgsSUFBSSxDQUFDZSxFQUFMLENBQVEsT0FBUixFQUFrQkMsS0FBRCxJQUFXO0lBQzFCSixHQUFHLENBQUMsT0FBRCxFQUFVO01BQUVJO0lBQUYsQ0FBVixDQUFIO0VBQ0QsQ0FGRDtFQUlBaEIsSUFBSSxDQUFDaUIsSUFBTCxDQUFVLE1BQVYsRUFBa0IsTUFBTTtJQUN0QkwsR0FBRyxDQUFDLE1BQUQsRUFBUztNQUFFTSxrQkFBa0IsRUFBRTtJQUF0QixDQUFULENBQUg7RUFDRCxDQUZEO0VBSUFsQixJQUFJLENBQUNlLEVBQUwsQ0FBUSxXQUFSLEVBQXFCLE1BQU07SUFDekJILEdBQUcsQ0FBQyxNQUFELEVBQVM7TUFBRU0sa0JBQWtCLEVBQUU7SUFBdEIsQ0FBVCxDQUFIO0VBQ0QsQ0FGRDtFQUlBbEIsSUFBSSxDQUFDZSxFQUFMLENBQVEsWUFBUixFQUFzQixNQUFNO0lBQzFCSCxHQUFHLENBQUMsTUFBRCxFQUFTO01BQUVNLGtCQUFrQixFQUFFO0lBQXRCLENBQVQsQ0FBSDtFQUNELENBRkQ7RUFJQWxCLElBQUksQ0FBQ2UsRUFBTCxDQUFRLGFBQVIsRUFBdUIsTUFBTTtJQUMzQkgsR0FBRyxDQUFDLE1BQUQsRUFBUztNQUFFTSxrQkFBa0IsRUFBRTtJQUF0QixDQUFULENBQUg7RUFDRCxDQUZEO0VBSUFsQixJQUFJLENBQUNlLEVBQUwsQ0FBUSxjQUFSLEVBQXdCLE1BQU07SUFDNUJILEdBQUcsQ0FBQyxPQUFELEVBQVU7TUFBRU0sa0JBQWtCLEVBQUcsZ0NBQStCaEIsY0FBYyxHQUFHLElBQUs7SUFBNUUsQ0FBVixDQUFILENBRDRCLENBRTVCOztJQUNBaUIsVUFBVSxDQUFDLE1BQU07TUFBRW5CLElBQUksQ0FBQ29CLE9BQUwsQ0FBYWpCLFFBQWIsRUFBdUJrQixLQUF2QixDQUE2QixNQUFNLENBQUcsQ0FBdEM7SUFBMEMsQ0FBbkQsRUFBcURuQixjQUFyRCxDQUFWO0VBQ0QsQ0FKRDtFQU1BLE9BQU9GLElBQVA7QUFDRDs7QUFFTSxTQUFTc0IsYUFBVCxHQUF5QjtFQUM5QixPQUFPdEIsSUFBUDtBQUNEIn0=","map":{"version":3,"names":["conn","init","RECONNECT_TIME","CONN_URL","config","mainDbconfig","connString","mongoose","set","collectionName","methodName","methodArgs","log","join","createConnection","on","error","once","dBConnectionStatus","setTimeout","openUri","catch","getDbInstance"],"sourceRoot":"/Users/ramireddycharitha/git-explore/connections/","sources":["MainDb.js"],"sourcesContent":["/* eslint-disable import/no-import-module-exports */\n\nimport mongoose from \"mongoose\";\nimport config from \"../config/index\";\n\nlet conn;\n\nexport function init() {\n  const RECONNECT_TIME = 5000;\n  const CONN_URL = config.mainDbconfig.connString;\n\n  if (conn) {\n    return conn;\n  }\n\n  mongoose.set(\"debug\", (collectionName, methodName, ...methodArgs) => {\n    // use custom function to log collection methods + arguments\n    log(\"info\", `Mongoose: ${collectionName}.${methodName}(${methodArgs.join(\", \")})`);\n  });\n\n  log(\"info\", `CONN_URL to connect to main database ${CONN_URL}`);\n  conn = mongoose.createConnection(CONN_URL);\n\n  //  Mongoose Connection Events\n  conn.on(\"error\", (error) => {\n    log(\"error\", { error });\n  });\n\n  conn.once(\"open\", () => {\n    log(\"info\", { dBConnectionStatus: \"open\" });\n  });\n\n  conn.on(\"connected\", () => {\n    log(\"info\", { dBConnectionStatus: \"connected\" });\n  });\n\n  conn.on(\"connecting\", () => {\n    log(\"info\", { dBConnectionStatus: \"connecting\" });\n  });\n\n  conn.on(\"reconnected\", () => {\n    log(\"info\", { dBConnectionStatus: \"reconnected\" });\n  });\n\n  conn.on(\"disconnected\", () => {\n    log(\"error\", { dBConnectionStatus: `disconnected Reconnecting in ${RECONNECT_TIME / 1000}s...` });\n    // https://github.com/automattic/mongoose/issues/5169#issuecomment-314983113\n    setTimeout(() => { conn.openUri(CONN_URL).catch(() => { }); }, RECONNECT_TIME);\n  });\n\n  return conn;\n}\n\nexport function getDbInstance() {\n  return conn;\n}\n"],"mappings":";;;;;;;;AAEA;;AACA;;;;AAHA;AAKA,IAAIA,IAAJ;;AAEO,SAASC,IAAT,GAAgB;EACrB,MAAMC,cAAc,GAAG,IAAvB;EACA,MAAMC,QAAQ,GAAGC,eAAOC,YAAP,CAAoBC,UAArC;;EAEA,IAAIN,IAAJ,EAAU;IACR,OAAOA,IAAP;EACD;;EAEDO,kBAASC,GAAT,CAAa,OAAb,EAAsB,CAACC,cAAD,EAAiBC,UAAjB,EAA6B,GAAGC,UAAhC,KAA+C;IACnE;IACAC,GAAG,CAAC,MAAD,EAAU,aAAYH,cAAe,IAAGC,UAAW,IAAGC,UAAU,CAACE,IAAX,CAAgB,IAAhB,CAAsB,GAA5E,CAAH;EACD,CAHD;;EAKAD,GAAG,CAAC,MAAD,EAAU,wCAAuCT,QAAS,EAA1D,CAAH;EACAH,IAAI,GAAGO,kBAASO,gBAAT,CAA0BX,QAA1B,CAAP,CAdqB,CAgBrB;;EACAH,IAAI,CAACe,EAAL,CAAQ,OAAR,EAAkBC,KAAD,IAAW;IAC1BJ,GAAG,CAAC,OAAD,EAAU;MAAEI;IAAF,CAAV,CAAH;EACD,CAFD;EAIAhB,IAAI,CAACiB,IAAL,CAAU,MAAV,EAAkB,MAAM;IACtBL,GAAG,CAAC,MAAD,EAAS;MAAEM,kBAAkB,EAAE;IAAtB,CAAT,CAAH;EACD,CAFD;EAIAlB,IAAI,CAACe,EAAL,CAAQ,WAAR,EAAqB,MAAM;IACzBH,GAAG,CAAC,MAAD,EAAS;MAAEM,kBAAkB,EAAE;IAAtB,CAAT,CAAH;EACD,CAFD;EAIAlB,IAAI,CAACe,EAAL,CAAQ,YAAR,EAAsB,MAAM;IAC1BH,GAAG,CAAC,MAAD,EAAS;MAAEM,kBAAkB,EAAE;IAAtB,CAAT,CAAH;EACD,CAFD;EAIAlB,IAAI,CAACe,EAAL,CAAQ,aAAR,EAAuB,MAAM;IAC3BH,GAAG,CAAC,MAAD,EAAS;MAAEM,kBAAkB,EAAE;IAAtB,CAAT,CAAH;EACD,CAFD;EAIAlB,IAAI,CAACe,EAAL,CAAQ,cAAR,EAAwB,MAAM;IAC5BH,GAAG,CAAC,OAAD,EAAU;MAAEM,kBAAkB,EAAG,gCAA+BhB,cAAc,GAAG,IAAK;IAA5E,CAAV,CAAH,CAD4B,CAE5B;;IACAiB,UAAU,CAAC,MAAM;MAAEnB,IAAI,CAACoB,OAAL,CAAajB,QAAb,EAAuBkB,KAAvB,CAA6B,MAAM,CAAG,CAAtC;IAA0C,CAAnD,EAAqDnB,cAArD,CAAV;EACD,CAJD;EAMA,OAAOF,IAAP;AACD;;AAEM,SAASsB,aAAT,GAAyB;EAC9B,OAAOtB,IAAP;AACD"}},"mtime":1653643634177},"{\"assumptions\":{},\"sourceRoot\":\"/Users/ramireddycharitha/git-explore/config/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/ramireddycharitha/git-explore\",\"filename\":\"/Users/ramireddycharitha/git-explore/config/index.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"default\",\"root\":\"/Users/ramireddycharitha/git-explore\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.17.10:default":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _default2 = _interopRequireDefault(require(\"./default\"));\n\nvar _dev = _interopRequireDefault(require(\"./dev\"));\n\nvar _prod = _interopRequireDefault(require(\"./prod\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst config = () => {\n  // process.env.NODE_ENV = \"default\";\n  switch (process.env.NODE_ENV) {\n    case \"default\":\n      return _default2.default;\n\n    case \"dev\":\n      return _dev.default;\n\n    case \"production\":\n      return _prod.default;\n\n    default:\n      throw new Error(\"Config variables not set\");\n  }\n};\n\nvar _default = config();\n\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb25maWciLCJwcm9jZXNzIiwiZW52IiwiTk9ERV9FTlYiLCJsb2NhbENvbmZpZyIsImRldkNvbmZpZyIsInByb2RDb25maWciLCJFcnJvciJdLCJzb3VyY2VSb290IjoiL1VzZXJzL3JhbWlyZWRkeWNoYXJpdGhhL2dpdC1leHBsb3JlL2NvbmZpZy8iLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBsb2NhbENvbmZpZyBmcm9tIFwiLi9kZWZhdWx0XCI7XG5pbXBvcnQgZGV2Q29uZmlnIGZyb20gXCIuL2RldlwiO1xuaW1wb3J0IHByb2RDb25maWcgZnJvbSBcIi4vcHJvZFwiO1xuXG5jb25zdCBjb25maWcgPSAoKSA9PiB7XG4gIC8vIHByb2Nlc3MuZW52Lk5PREVfRU5WID0gXCJkZWZhdWx0XCI7XG4gIHN3aXRjaCAocHJvY2Vzcy5lbnYuTk9ERV9FTlYpIHtcbiAgICBjYXNlIFwiZGVmYXVsdFwiOlxuICAgICAgcmV0dXJuIGxvY2FsQ29uZmlnO1xuICAgIGNhc2UgXCJkZXZcIjpcbiAgICAgIHJldHVybiBkZXZDb25maWc7XG4gICAgY2FzZSBcInByb2R1Y3Rpb25cIjpcbiAgICAgIHJldHVybiBwcm9kQ29uZmlnO1xuICAgIGRlZmF1bHQ6XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDb25maWcgdmFyaWFibGVzIG5vdCBzZXRcIik7XG4gIH1cbn07XG5leHBvcnQgZGVmYXVsdCBjb25maWcoKTtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOztBQUNBOztBQUNBOzs7O0FBRUEsTUFBTUEsTUFBTSxHQUFHLE1BQU07RUFDbkI7RUFDQSxRQUFRQyxPQUFPLENBQUNDLEdBQVIsQ0FBWUMsUUFBcEI7SUFDRSxLQUFLLFNBQUw7TUFDRSxPQUFPQyxpQkFBUDs7SUFDRixLQUFLLEtBQUw7TUFDRSxPQUFPQyxZQUFQOztJQUNGLEtBQUssWUFBTDtNQUNFLE9BQU9DLGFBQVA7O0lBQ0Y7TUFDRSxNQUFNLElBQUlDLEtBQUosQ0FBVSwwQkFBVixDQUFOO0VBUko7QUFVRCxDQVpEOztlQWFlUCxNQUFNLEUifQ==","map":{"version":3,"names":["config","process","env","NODE_ENV","localConfig","devConfig","prodConfig","Error"],"sourceRoot":"/Users/ramireddycharitha/git-explore/config/","sources":["index.js"],"sourcesContent":["import localConfig from \"./default\";\nimport devConfig from \"./dev\";\nimport prodConfig from \"./prod\";\n\nconst config = () => {\n  // process.env.NODE_ENV = \"default\";\n  switch (process.env.NODE_ENV) {\n    case \"default\":\n      return localConfig;\n    case \"dev\":\n      return devConfig;\n    case \"production\":\n      return prodConfig;\n    default:\n      throw new Error(\"Config variables not set\");\n  }\n};\nexport default config();\n"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;;;AAEA,MAAMA,MAAM,GAAG,MAAM;EACnB;EACA,QAAQC,OAAO,CAACC,GAAR,CAAYC,QAApB;IACE,KAAK,SAAL;MACE,OAAOC,iBAAP;;IACF,KAAK,KAAL;MACE,OAAOC,YAAP;;IACF,KAAK,YAAL;MACE,OAAOC,aAAP;;IACF;MACE,MAAM,IAAIC,KAAJ,CAAU,0BAAV,CAAN;EARJ;AAUD,CAZD;;eAaeP,MAAM,E"}},"mtime":1653643634176},"{\"assumptions\":{},\"sourceRoot\":\"/Users/ramireddycharitha/git-explore/config/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/ramireddycharitha/git-explore\",\"filename\":\"/Users/ramireddycharitha/git-explore/config/default.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"default\",\"root\":\"/Users/ramireddycharitha/git-explore\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.17.10:default":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _default = {\n  mainDbconfig: {\n    connString: \"mongodb://localhost:27017/lc_metro_db\"\n  },\n  analyticsDbConfig: {\n    connString: \"mongodb://localhost:27017/analyticsdb\"\n  },\n  redisConfig: {\n    connString: \"redis://localhost:6379\"\n  },\n  application_url: ' https://0f77-111-93-26-74.in.ngrok.io/v1/organisation/outbound-call',\n  sentry_dsn: process.env.SENTRY_DSN,\n  application_url: \"http://localhost:4000\"\n};\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJtYWluRGJjb25maWciLCJjb25uU3RyaW5nIiwiYW5hbHl0aWNzRGJDb25maWciLCJyZWRpc0NvbmZpZyIsImFwcGxpY2F0aW9uX3VybCIsInNlbnRyeV9kc24iLCJwcm9jZXNzIiwiZW52IiwiU0VOVFJZX0RTTiJdLCJzb3VyY2VSb290IjoiL1VzZXJzL3JhbWlyZWRkeWNoYXJpdGhhL2dpdC1leHBsb3JlL2NvbmZpZy8iLCJzb3VyY2VzIjpbImRlZmF1bHQuanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQge1xuICBtYWluRGJjb25maWc6IHtcbiAgICBjb25uU3RyaW5nOiBcIm1vbmdvZGI6Ly9sb2NhbGhvc3Q6MjcwMTcvbGNfbWV0cm9fZGJcIixcbiAgfSxcbiAgYW5hbHl0aWNzRGJDb25maWc6IHtcbiAgICBjb25uU3RyaW5nOiBcIm1vbmdvZGI6Ly9sb2NhbGhvc3Q6MjcwMTcvYW5hbHl0aWNzZGJcIixcbiAgfSxcbiAgcmVkaXNDb25maWc6IHtcbiAgICBjb25uU3RyaW5nOiBcInJlZGlzOi8vbG9jYWxob3N0OjYzNzlcIixcbiAgfSxcbiAgYXBwbGljYXRpb25fdXJsIDogJyBodHRwczovLzBmNzctMTExLTkzLTI2LTc0LmluLm5ncm9rLmlvL3YxL29yZ2FuaXNhdGlvbi9vdXRib3VuZC1jYWxsJyxcbiAgc2VudHJ5X2RzbjogcHJvY2Vzcy5lbnYuU0VOVFJZX0RTTixcbiAgYXBwbGljYXRpb25fdXJsOlwiaHR0cDovL2xvY2FsaG9zdDo0MDAwXCJcbn07XG4iXSwibWFwcGluZ3MiOiI7Ozs7OztlQUFlO0VBQ2JBLFlBQVksRUFBRTtJQUNaQyxVQUFVLEVBQUU7RUFEQSxDQUREO0VBSWJDLGlCQUFpQixFQUFFO0lBQ2pCRCxVQUFVLEVBQUU7RUFESyxDQUpOO0VBT2JFLFdBQVcsRUFBRTtJQUNYRixVQUFVLEVBQUU7RUFERCxDQVBBO0VBVWJHLGVBQWUsRUFBRyxzRUFWTDtFQVdiQyxVQUFVLEVBQUVDLE9BQU8sQ0FBQ0MsR0FBUixDQUFZQyxVQVhYO0VBWWJKLGVBQWUsRUFBQztBQVpILEMifQ==","map":{"version":3,"names":["mainDbconfig","connString","analyticsDbConfig","redisConfig","application_url","sentry_dsn","process","env","SENTRY_DSN"],"sourceRoot":"/Users/ramireddycharitha/git-explore/config/","sources":["default.js"],"sourcesContent":["export default {\n  mainDbconfig: {\n    connString: \"mongodb://localhost:27017/lc_metro_db\",\n  },\n  analyticsDbConfig: {\n    connString: \"mongodb://localhost:27017/analyticsdb\",\n  },\n  redisConfig: {\n    connString: \"redis://localhost:6379\",\n  },\n  application_url : ' https://0f77-111-93-26-74.in.ngrok.io/v1/organisation/outbound-call',\n  sentry_dsn: process.env.SENTRY_DSN,\n  application_url:\"http://localhost:4000\"\n};\n"],"mappings":";;;;;;eAAe;EACbA,YAAY,EAAE;IACZC,UAAU,EAAE;EADA,CADD;EAIbC,iBAAiB,EAAE;IACjBD,UAAU,EAAE;EADK,CAJN;EAObE,WAAW,EAAE;IACXF,UAAU,EAAE;EADD,CAPA;EAUbG,eAAe,EAAG,sEAVL;EAWbC,UAAU,EAAEC,OAAO,CAACC,GAAR,CAAYC,UAXX;EAYbJ,eAAe,EAAC;AAZH,C"}},"mtime":1654085554318},"{\"assumptions\":{},\"sourceRoot\":\"/Users/ramireddycharitha/git-explore/config/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/ramireddycharitha/git-explore\",\"filename\":\"/Users/ramireddycharitha/git-explore/config/dev.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"default\",\"root\":\"/Users/ramireddycharitha/git-explore\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.17.10:default":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nrequire(\"dotenv/config\");\n\nvar _default = {\n  mainDbconfig: {\n    connString: process.env.MAIN_DB_CONN_STRING // Change all required config to env variables\n\n  },\n  analyticsDbConfig: {\n    connString: process.env.ANALYTICS_DB_CONN_STRING\n  },\n  redisConfig: {\n    connString: \"redis://localhost:6379\"\n  },\n  sentry_dsn: process.env.SENTRY_DSN\n};\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJtYWluRGJjb25maWciLCJjb25uU3RyaW5nIiwicHJvY2VzcyIsImVudiIsIk1BSU5fREJfQ09OTl9TVFJJTkciLCJhbmFseXRpY3NEYkNvbmZpZyIsIkFOQUxZVElDU19EQl9DT05OX1NUUklORyIsInJlZGlzQ29uZmlnIiwic2VudHJ5X2RzbiIsIlNFTlRSWV9EU04iXSwic291cmNlUm9vdCI6Ii9Vc2Vycy9yYW1pcmVkZHljaGFyaXRoYS9naXQtZXhwbG9yZS9jb25maWcvIiwic291cmNlcyI6WyJkZXYuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFwiZG90ZW52L2NvbmZpZ1wiO1xuXG5leHBvcnQgZGVmYXVsdCB7XG4gIG1haW5EYmNvbmZpZzoge1xuICAgIGNvbm5TdHJpbmc6IHByb2Nlc3MuZW52Lk1BSU5fREJfQ09OTl9TVFJJTkcsIC8vIENoYW5nZSBhbGwgcmVxdWlyZWQgY29uZmlnIHRvIGVudiB2YXJpYWJsZXNcbiAgfSxcbiAgYW5hbHl0aWNzRGJDb25maWc6IHtcbiAgICBjb25uU3RyaW5nOiBwcm9jZXNzLmVudi5BTkFMWVRJQ1NfREJfQ09OTl9TVFJJTkcsXG4gIH0sXG4gIHJlZGlzQ29uZmlnOiB7XG4gICAgY29ublN0cmluZzogXCJyZWRpczovL2xvY2FsaG9zdDo2Mzc5XCIsXG4gIH0sXG4gIHNlbnRyeV9kc246IHByb2Nlc3MuZW52LlNFTlRSWV9EU04sXG59O1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7O2VBRWU7RUFDYkEsWUFBWSxFQUFFO0lBQ1pDLFVBQVUsRUFBRUMsT0FBTyxDQUFDQyxHQUFSLENBQVlDLG1CQURaLENBQ2lDOztFQURqQyxDQUREO0VBSWJDLGlCQUFpQixFQUFFO0lBQ2pCSixVQUFVLEVBQUVDLE9BQU8sQ0FBQ0MsR0FBUixDQUFZRztFQURQLENBSk47RUFPYkMsV0FBVyxFQUFFO0lBQ1hOLFVBQVUsRUFBRTtFQURELENBUEE7RUFVYk8sVUFBVSxFQUFFTixPQUFPLENBQUNDLEdBQVIsQ0FBWU07QUFWWCxDIn0=","map":{"version":3,"names":["mainDbconfig","connString","process","env","MAIN_DB_CONN_STRING","analyticsDbConfig","ANALYTICS_DB_CONN_STRING","redisConfig","sentry_dsn","SENTRY_DSN"],"sourceRoot":"/Users/ramireddycharitha/git-explore/config/","sources":["dev.js"],"sourcesContent":["import \"dotenv/config\";\n\nexport default {\n  mainDbconfig: {\n    connString: process.env.MAIN_DB_CONN_STRING, // Change all required config to env variables\n  },\n  analyticsDbConfig: {\n    connString: process.env.ANALYTICS_DB_CONN_STRING,\n  },\n  redisConfig: {\n    connString: \"redis://localhost:6379\",\n  },\n  sentry_dsn: process.env.SENTRY_DSN,\n};\n"],"mappings":";;;;;;;AAAA;;eAEe;EACbA,YAAY,EAAE;IACZC,UAAU,EAAEC,OAAO,CAACC,GAAR,CAAYC,mBADZ,CACiC;;EADjC,CADD;EAIbC,iBAAiB,EAAE;IACjBJ,UAAU,EAAEC,OAAO,CAACC,GAAR,CAAYG;EADP,CAJN;EAObC,WAAW,EAAE;IACXN,UAAU,EAAE;EADD,CAPA;EAUbO,UAAU,EAAEN,OAAO,CAACC,GAAR,CAAYM;AAVX,C"}},"mtime":1653643634175},"{\"assumptions\":{},\"sourceRoot\":\"/Users/ramireddycharitha/git-explore/config/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/ramireddycharitha/git-explore\",\"filename\":\"/Users/ramireddycharitha/git-explore/config/prod.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"default\",\"root\":\"/Users/ramireddycharitha/git-explore\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.17.10:default":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nrequire(\"dotenv/config\");\n\nvar _default = {\n  mainDbconfig: {\n    connString: process.env.MAIN_DB_CONN_STRING // Change all required config to env variables\n\n  },\n  analyticsDbConfig: {\n    connString: process.env.ANALYTICS_DB_CONN_STRING\n  },\n  redisConfig: {\n    connString: \"redis://localhost:6379\"\n  },\n  sentry_dsn: process.env.SENTRY_DSN\n};\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJtYWluRGJjb25maWciLCJjb25uU3RyaW5nIiwicHJvY2VzcyIsImVudiIsIk1BSU5fREJfQ09OTl9TVFJJTkciLCJhbmFseXRpY3NEYkNvbmZpZyIsIkFOQUxZVElDU19EQl9DT05OX1NUUklORyIsInJlZGlzQ29uZmlnIiwic2VudHJ5X2RzbiIsIlNFTlRSWV9EU04iXSwic291cmNlUm9vdCI6Ii9Vc2Vycy9yYW1pcmVkZHljaGFyaXRoYS9naXQtZXhwbG9yZS9jb25maWcvIiwic291cmNlcyI6WyJwcm9kLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBcImRvdGVudi9jb25maWdcIjtcblxuZXhwb3J0IGRlZmF1bHQge1xuICBtYWluRGJjb25maWc6IHtcbiAgICBjb25uU3RyaW5nOiBwcm9jZXNzLmVudi5NQUlOX0RCX0NPTk5fU1RSSU5HLCAvLyBDaGFuZ2UgYWxsIHJlcXVpcmVkIGNvbmZpZyB0byBlbnYgdmFyaWFibGVzXG4gIH0sXG4gIGFuYWx5dGljc0RiQ29uZmlnOiB7XG4gICAgY29ublN0cmluZzogcHJvY2Vzcy5lbnYuQU5BTFlUSUNTX0RCX0NPTk5fU1RSSU5HLFxuICB9LFxuICByZWRpc0NvbmZpZzoge1xuICAgIGNvbm5TdHJpbmc6IFwicmVkaXM6Ly9sb2NhbGhvc3Q6NjM3OVwiLFxuICB9LFxuICBzZW50cnlfZHNuOiBwcm9jZXNzLmVudi5TRU5UUllfRFNOLFxufTtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOztlQUVlO0VBQ2JBLFlBQVksRUFBRTtJQUNaQyxVQUFVLEVBQUVDLE9BQU8sQ0FBQ0MsR0FBUixDQUFZQyxtQkFEWixDQUNpQzs7RUFEakMsQ0FERDtFQUliQyxpQkFBaUIsRUFBRTtJQUNqQkosVUFBVSxFQUFFQyxPQUFPLENBQUNDLEdBQVIsQ0FBWUc7RUFEUCxDQUpOO0VBT2JDLFdBQVcsRUFBRTtJQUNYTixVQUFVLEVBQUU7RUFERCxDQVBBO0VBVWJPLFVBQVUsRUFBRU4sT0FBTyxDQUFDQyxHQUFSLENBQVlNO0FBVlgsQyJ9","map":{"version":3,"names":["mainDbconfig","connString","process","env","MAIN_DB_CONN_STRING","analyticsDbConfig","ANALYTICS_DB_CONN_STRING","redisConfig","sentry_dsn","SENTRY_DSN"],"sourceRoot":"/Users/ramireddycharitha/git-explore/config/","sources":["prod.js"],"sourcesContent":["import \"dotenv/config\";\n\nexport default {\n  mainDbconfig: {\n    connString: process.env.MAIN_DB_CONN_STRING, // Change all required config to env variables\n  },\n  analyticsDbConfig: {\n    connString: process.env.ANALYTICS_DB_CONN_STRING,\n  },\n  redisConfig: {\n    connString: \"redis://localhost:6379\",\n  },\n  sentry_dsn: process.env.SENTRY_DSN,\n};\n"],"mappings":";;;;;;;AAAA;;eAEe;EACbA,YAAY,EAAE;IACZC,UAAU,EAAEC,OAAO,CAACC,GAAR,CAAYC,mBADZ,CACiC;;EADjC,CADD;EAIbC,iBAAiB,EAAE;IACjBJ,UAAU,EAAEC,OAAO,CAACC,GAAR,CAAYG;EADP,CAJN;EAObC,WAAW,EAAE;IACXN,UAAU,EAAE;EADD,CAPA;EAUbO,UAAU,EAAEN,OAAO,CAACC,GAAR,CAAYM;AAVX,C"}},"mtime":1653643634176},"{\"assumptions\":{},\"sourceRoot\":\"/Users/ramireddycharitha/git-explore/connections/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/ramireddycharitha/git-explore\",\"filename\":\"/Users/ramireddycharitha/git-explore/connections/AnalyticsDb.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"default\",\"root\":\"/Users/ramireddycharitha/git-explore\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.17.10:default":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getDbInstance = getDbInstance;\nexports.init = init;\n\nvar _mongoose = _interopRequireDefault(require(\"mongoose\"));\n\nvar _index = _interopRequireDefault(require(\"../config/index\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/* eslint-disable import/no-import-module-exports */\nlet conn;\n\nfunction init() {\n  const RECONNECT_TIME = 5000;\n  const CONN_URL = _index.default.analyticsDbConfig.connString;\n\n  if (conn) {\n    return conn;\n  }\n\n  log(\"info\", `CONN_URL to connect to analytics database ${CONN_URL}`);\n  conn = _mongoose.default.createConnection(CONN_URL); //  Mongoose Connection Events\n\n  conn.on(\"error\", error => {\n    log(\"error\", {\n      error\n    });\n  });\n  conn.once(\"open\", () => {\n    log(\"info\", {\n      dBConnectionStatus: \"open\"\n    });\n  });\n  conn.on(\"connected\", () => {\n    log(\"info\", {\n      dBConnectionStatus: \"connected\"\n    });\n  });\n  conn.on(\"connecting\", () => {\n    log(\"info\", {\n      dBConnectionStatus: \"connecting\"\n    });\n  });\n  conn.on(\"reconnected\", () => {\n    log(\"info\", {\n      dBConnectionStatus: \"reconnected\"\n    });\n  });\n  conn.on(\"disconnected\", () => {\n    log(\"error\", {\n      dBConnectionStatus: `disconnected Reconnecting in ${RECONNECT_TIME / 1000}s...`\n    }); // https://github.com/automattic/mongoose/issues/5169#issuecomment-314983113\n\n    setTimeout(() => {\n      conn.openUri(CONN_URL).catch(() => {});\n    }, RECONNECT_TIME);\n  });\n  return conn;\n}\n\nfunction getDbInstance() {\n  return conn;\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb25uIiwiaW5pdCIsIlJFQ09OTkVDVF9USU1FIiwiQ09OTl9VUkwiLCJjb25maWciLCJhbmFseXRpY3NEYkNvbmZpZyIsImNvbm5TdHJpbmciLCJsb2ciLCJtb25nb29zZSIsImNyZWF0ZUNvbm5lY3Rpb24iLCJvbiIsImVycm9yIiwib25jZSIsImRCQ29ubmVjdGlvblN0YXR1cyIsInNldFRpbWVvdXQiLCJvcGVuVXJpIiwiY2F0Y2giLCJnZXREYkluc3RhbmNlIl0sInNvdXJjZVJvb3QiOiIvVXNlcnMvcmFtaXJlZGR5Y2hhcml0aGEvZ2l0LWV4cGxvcmUvY29ubmVjdGlvbnMvIiwic291cmNlcyI6WyJBbmFseXRpY3NEYi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiBlc2xpbnQtZGlzYWJsZSBpbXBvcnQvbm8taW1wb3J0LW1vZHVsZS1leHBvcnRzICovXG5cbmltcG9ydCBtb25nb29zZSBmcm9tIFwibW9uZ29vc2VcIjtcbmltcG9ydCBjb25maWcgZnJvbSBcIi4uL2NvbmZpZy9pbmRleFwiO1xuXG5sZXQgY29ubjtcblxuZXhwb3J0IGZ1bmN0aW9uIGluaXQoKSB7XG4gIGNvbnN0IFJFQ09OTkVDVF9USU1FID0gNTAwMDtcbiAgY29uc3QgQ09OTl9VUkwgPSBjb25maWcuYW5hbHl0aWNzRGJDb25maWcuY29ublN0cmluZztcblxuICBpZiAoY29ubikge1xuICAgIHJldHVybiBjb25uO1xuICB9XG5cbiAgbG9nKFwiaW5mb1wiLCBgQ09OTl9VUkwgdG8gY29ubmVjdCB0byBhbmFseXRpY3MgZGF0YWJhc2UgJHtDT05OX1VSTH1gKTtcbiAgY29ubiA9IG1vbmdvb3NlLmNyZWF0ZUNvbm5lY3Rpb24oQ09OTl9VUkwpO1xuXG4gIC8vICBNb25nb29zZSBDb25uZWN0aW9uIEV2ZW50c1xuICBjb25uLm9uKFwiZXJyb3JcIiwgKGVycm9yKSA9PiB7XG4gICAgbG9nKFwiZXJyb3JcIiwgeyBlcnJvciB9KTtcbiAgfSk7XG5cbiAgY29ubi5vbmNlKFwib3BlblwiLCAoKSA9PiB7XG4gICAgbG9nKFwiaW5mb1wiLCB7IGRCQ29ubmVjdGlvblN0YXR1czogXCJvcGVuXCIgfSk7XG4gIH0pO1xuXG4gIGNvbm4ub24oXCJjb25uZWN0ZWRcIiwgKCkgPT4ge1xuICAgIGxvZyhcImluZm9cIiwgeyBkQkNvbm5lY3Rpb25TdGF0dXM6IFwiY29ubmVjdGVkXCIgfSk7XG4gIH0pO1xuXG4gIGNvbm4ub24oXCJjb25uZWN0aW5nXCIsICgpID0+IHtcbiAgICBsb2coXCJpbmZvXCIsIHsgZEJDb25uZWN0aW9uU3RhdHVzOiBcImNvbm5lY3RpbmdcIiB9KTtcbiAgfSk7XG5cbiAgY29ubi5vbihcInJlY29ubmVjdGVkXCIsICgpID0+IHtcbiAgICBsb2coXCJpbmZvXCIsIHsgZEJDb25uZWN0aW9uU3RhdHVzOiBcInJlY29ubmVjdGVkXCIgfSk7XG4gIH0pO1xuXG4gIGNvbm4ub24oXCJkaXNjb25uZWN0ZWRcIiwgKCkgPT4ge1xuICAgIGxvZyhcImVycm9yXCIsIHsgZEJDb25uZWN0aW9uU3RhdHVzOiBgZGlzY29ubmVjdGVkIFJlY29ubmVjdGluZyBpbiAke1JFQ09OTkVDVF9USU1FIC8gMTAwMH1zLi4uYCB9KTtcbiAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vYXV0b21hdHRpYy9tb25nb29zZS9pc3N1ZXMvNTE2OSNpc3N1ZWNvbW1lbnQtMzE0OTgzMTEzXG4gICAgc2V0VGltZW91dCgoKSA9PiB7IGNvbm4ub3BlblVyaShDT05OX1VSTCkuY2F0Y2goKCkgPT4geyB9KTsgfSwgUkVDT05ORUNUX1RJTUUpO1xuICB9KTtcblxuICByZXR1cm4gY29ubjtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldERiSW5zdGFuY2UoKSB7XG4gIHJldHVybiBjb25uO1xufVxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUVBOztBQUNBOzs7O0FBSEE7QUFLQSxJQUFJQSxJQUFKOztBQUVPLFNBQVNDLElBQVQsR0FBZ0I7RUFDckIsTUFBTUMsY0FBYyxHQUFHLElBQXZCO0VBQ0EsTUFBTUMsUUFBUSxHQUFHQyxlQUFPQyxpQkFBUCxDQUF5QkMsVUFBMUM7O0VBRUEsSUFBSU4sSUFBSixFQUFVO0lBQ1IsT0FBT0EsSUFBUDtFQUNEOztFQUVETyxHQUFHLENBQUMsTUFBRCxFQUFVLDZDQUE0Q0osUUFBUyxFQUEvRCxDQUFIO0VBQ0FILElBQUksR0FBR1Esa0JBQVNDLGdCQUFULENBQTBCTixRQUExQixDQUFQLENBVHFCLENBV3JCOztFQUNBSCxJQUFJLENBQUNVLEVBQUwsQ0FBUSxPQUFSLEVBQWtCQyxLQUFELElBQVc7SUFDMUJKLEdBQUcsQ0FBQyxPQUFELEVBQVU7TUFBRUk7SUFBRixDQUFWLENBQUg7RUFDRCxDQUZEO0VBSUFYLElBQUksQ0FBQ1ksSUFBTCxDQUFVLE1BQVYsRUFBa0IsTUFBTTtJQUN0QkwsR0FBRyxDQUFDLE1BQUQsRUFBUztNQUFFTSxrQkFBa0IsRUFBRTtJQUF0QixDQUFULENBQUg7RUFDRCxDQUZEO0VBSUFiLElBQUksQ0FBQ1UsRUFBTCxDQUFRLFdBQVIsRUFBcUIsTUFBTTtJQUN6QkgsR0FBRyxDQUFDLE1BQUQsRUFBUztNQUFFTSxrQkFBa0IsRUFBRTtJQUF0QixDQUFULENBQUg7RUFDRCxDQUZEO0VBSUFiLElBQUksQ0FBQ1UsRUFBTCxDQUFRLFlBQVIsRUFBc0IsTUFBTTtJQUMxQkgsR0FBRyxDQUFDLE1BQUQsRUFBUztNQUFFTSxrQkFBa0IsRUFBRTtJQUF0QixDQUFULENBQUg7RUFDRCxDQUZEO0VBSUFiLElBQUksQ0FBQ1UsRUFBTCxDQUFRLGFBQVIsRUFBdUIsTUFBTTtJQUMzQkgsR0FBRyxDQUFDLE1BQUQsRUFBUztNQUFFTSxrQkFBa0IsRUFBRTtJQUF0QixDQUFULENBQUg7RUFDRCxDQUZEO0VBSUFiLElBQUksQ0FBQ1UsRUFBTCxDQUFRLGNBQVIsRUFBd0IsTUFBTTtJQUM1QkgsR0FBRyxDQUFDLE9BQUQsRUFBVTtNQUFFTSxrQkFBa0IsRUFBRyxnQ0FBK0JYLGNBQWMsR0FBRyxJQUFLO0lBQTVFLENBQVYsQ0FBSCxDQUQ0QixDQUU1Qjs7SUFDQVksVUFBVSxDQUFDLE1BQU07TUFBRWQsSUFBSSxDQUFDZSxPQUFMLENBQWFaLFFBQWIsRUFBdUJhLEtBQXZCLENBQTZCLE1BQU0sQ0FBRyxDQUF0QztJQUEwQyxDQUFuRCxFQUFxRGQsY0FBckQsQ0FBVjtFQUNELENBSkQ7RUFNQSxPQUFPRixJQUFQO0FBQ0Q7O0FBRU0sU0FBU2lCLGFBQVQsR0FBeUI7RUFDOUIsT0FBT2pCLElBQVA7QUFDRCJ9","map":{"version":3,"names":["conn","init","RECONNECT_TIME","CONN_URL","config","analyticsDbConfig","connString","log","mongoose","createConnection","on","error","once","dBConnectionStatus","setTimeout","openUri","catch","getDbInstance"],"sourceRoot":"/Users/ramireddycharitha/git-explore/connections/","sources":["AnalyticsDb.js"],"sourcesContent":["/* eslint-disable import/no-import-module-exports */\n\nimport mongoose from \"mongoose\";\nimport config from \"../config/index\";\n\nlet conn;\n\nexport function init() {\n  const RECONNECT_TIME = 5000;\n  const CONN_URL = config.analyticsDbConfig.connString;\n\n  if (conn) {\n    return conn;\n  }\n\n  log(\"info\", `CONN_URL to connect to analytics database ${CONN_URL}`);\n  conn = mongoose.createConnection(CONN_URL);\n\n  //  Mongoose Connection Events\n  conn.on(\"error\", (error) => {\n    log(\"error\", { error });\n  });\n\n  conn.once(\"open\", () => {\n    log(\"info\", { dBConnectionStatus: \"open\" });\n  });\n\n  conn.on(\"connected\", () => {\n    log(\"info\", { dBConnectionStatus: \"connected\" });\n  });\n\n  conn.on(\"connecting\", () => {\n    log(\"info\", { dBConnectionStatus: \"connecting\" });\n  });\n\n  conn.on(\"reconnected\", () => {\n    log(\"info\", { dBConnectionStatus: \"reconnected\" });\n  });\n\n  conn.on(\"disconnected\", () => {\n    log(\"error\", { dBConnectionStatus: `disconnected Reconnecting in ${RECONNECT_TIME / 1000}s...` });\n    // https://github.com/automattic/mongoose/issues/5169#issuecomment-314983113\n    setTimeout(() => { conn.openUri(CONN_URL).catch(() => { }); }, RECONNECT_TIME);\n  });\n\n  return conn;\n}\n\nexport function getDbInstance() {\n  return conn;\n}\n"],"mappings":";;;;;;;;AAEA;;AACA;;;;AAHA;AAKA,IAAIA,IAAJ;;AAEO,SAASC,IAAT,GAAgB;EACrB,MAAMC,cAAc,GAAG,IAAvB;EACA,MAAMC,QAAQ,GAAGC,eAAOC,iBAAP,CAAyBC,UAA1C;;EAEA,IAAIN,IAAJ,EAAU;IACR,OAAOA,IAAP;EACD;;EAEDO,GAAG,CAAC,MAAD,EAAU,6CAA4CJ,QAAS,EAA/D,CAAH;EACAH,IAAI,GAAGQ,kBAASC,gBAAT,CAA0BN,QAA1B,CAAP,CATqB,CAWrB;;EACAH,IAAI,CAACU,EAAL,CAAQ,OAAR,EAAkBC,KAAD,IAAW;IAC1BJ,GAAG,CAAC,OAAD,EAAU;MAAEI;IAAF,CAAV,CAAH;EACD,CAFD;EAIAX,IAAI,CAACY,IAAL,CAAU,MAAV,EAAkB,MAAM;IACtBL,GAAG,CAAC,MAAD,EAAS;MAAEM,kBAAkB,EAAE;IAAtB,CAAT,CAAH;EACD,CAFD;EAIAb,IAAI,CAACU,EAAL,CAAQ,WAAR,EAAqB,MAAM;IACzBH,GAAG,CAAC,MAAD,EAAS;MAAEM,kBAAkB,EAAE;IAAtB,CAAT,CAAH;EACD,CAFD;EAIAb,IAAI,CAACU,EAAL,CAAQ,YAAR,EAAsB,MAAM;IAC1BH,GAAG,CAAC,MAAD,EAAS;MAAEM,kBAAkB,EAAE;IAAtB,CAAT,CAAH;EACD,CAFD;EAIAb,IAAI,CAACU,EAAL,CAAQ,aAAR,EAAuB,MAAM;IAC3BH,GAAG,CAAC,MAAD,EAAS;MAAEM,kBAAkB,EAAE;IAAtB,CAAT,CAAH;EACD,CAFD;EAIAb,IAAI,CAACU,EAAL,CAAQ,cAAR,EAAwB,MAAM;IAC5BH,GAAG,CAAC,OAAD,EAAU;MAAEM,kBAAkB,EAAG,gCAA+BX,cAAc,GAAG,IAAK;IAA5E,CAAV,CAAH,CAD4B,CAE5B;;IACAY,UAAU,CAAC,MAAM;MAAEd,IAAI,CAACe,OAAL,CAAaZ,QAAb,EAAuBa,KAAvB,CAA6B,MAAM,CAAG,CAAtC;IAA0C,CAAnD,EAAqDd,cAArD,CAAV;EACD,CAJD;EAMA,OAAOF,IAAP;AACD;;AAEM,SAASiB,aAAT,GAAyB;EAC9B,OAAOjB,IAAP;AACD"}},"mtime":1653643634176},"{\"assumptions\":{},\"sourceRoot\":\"/Users/ramireddycharitha/git-explore/connections/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/ramireddycharitha/git-explore\",\"filename\":\"/Users/ramireddycharitha/git-explore/connections/RedisClient.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"default\",\"root\":\"/Users/ramireddycharitha/git-explore\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.17.10:default":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.RedisClient = void 0;\nexports.getDbInstance = getDbInstance;\nexports.init = init;\n\nvar _redis = require(\"redis\");\n\nvar _index = _interopRequireDefault(require(\"../config/index\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// eslint-disable-next-line import/no-mutable-exports\nlet RedisClient;\nexports.RedisClient = RedisClient;\n\nfunction init() {\n  const CONN_URL = _index.default.redisConfig.connString;\n\n  if (RedisClient) {\n    return RedisClient;\n  }\n\n  log(\"info\", `CONN_URL to connect to redis ${CONN_URL}`);\n  exports.RedisClient = RedisClient = (0, _redis.createClient)({\n    url: CONN_URL\n  }); //  Redis Connection Events\n\n  RedisClient.on(\"connect\", () => log(\"info\", {\n    redisConnection: \"connect\"\n  }));\n  RedisClient.on(\"ready\", () => log(\"info\", {\n    redisConnection: \"ready\"\n  }));\n  RedisClient.on(\"reconnecting\", () => log(\"info\", {\n    redisConnection: \"reconnecting\"\n  }));\n  RedisClient.on(\"end\", () => log(\"info\", {\n    redisConnection: \"disconnected\"\n  }));\n  RedisClient.on(\"error\", error => log(\"info\", {\n    error\n  }));\n\n  try {\n    RedisClient.connect();\n  } catch (error) {\n    log(\"error\", {\n      error\n    });\n  }\n\n  return RedisClient;\n}\n\nfunction getDbInstance() {\n  return RedisClient;\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJSZWRpc0NsaWVudCIsImluaXQiLCJDT05OX1VSTCIsImNvbmZpZyIsInJlZGlzQ29uZmlnIiwiY29ublN0cmluZyIsImxvZyIsInVybCIsIm9uIiwicmVkaXNDb25uZWN0aW9uIiwiZXJyb3IiLCJjb25uZWN0IiwiZ2V0RGJJbnN0YW5jZSJdLCJzb3VyY2VSb290IjoiL1VzZXJzL3JhbWlyZWRkeWNoYXJpdGhhL2dpdC1leHBsb3JlL2Nvbm5lY3Rpb25zLyIsInNvdXJjZXMiOlsiUmVkaXNDbGllbnQuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY3JlYXRlQ2xpZW50IH0gZnJvbSBcInJlZGlzXCI7XG5pbXBvcnQgY29uZmlnIGZyb20gXCIuLi9jb25maWcvaW5kZXhcIjtcblxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGltcG9ydC9uby1tdXRhYmxlLWV4cG9ydHNcbmV4cG9ydCBsZXQgUmVkaXNDbGllbnQ7XG5cbmV4cG9ydCBmdW5jdGlvbiBpbml0KCkge1xuICBjb25zdCBDT05OX1VSTCA9IGNvbmZpZy5yZWRpc0NvbmZpZy5jb25uU3RyaW5nO1xuXG4gIGlmIChSZWRpc0NsaWVudCkge1xuICAgIHJldHVybiBSZWRpc0NsaWVudDtcbiAgfVxuXG4gIGxvZyhcImluZm9cIiwgYENPTk5fVVJMIHRvIGNvbm5lY3QgdG8gcmVkaXMgJHtDT05OX1VSTH1gKTtcblxuICBSZWRpc0NsaWVudCA9IGNyZWF0ZUNsaWVudCh7XG4gICAgdXJsOiBDT05OX1VSTCxcbiAgfSk7XG5cbiAgLy8gIFJlZGlzIENvbm5lY3Rpb24gRXZlbnRzXG4gIFJlZGlzQ2xpZW50Lm9uKFwiY29ubmVjdFwiLCAoKSA9PiBsb2coXCJpbmZvXCIsIHsgcmVkaXNDb25uZWN0aW9uOiBcImNvbm5lY3RcIiB9KSk7XG4gIFJlZGlzQ2xpZW50Lm9uKFwicmVhZHlcIiwgKCkgPT4gbG9nKFwiaW5mb1wiLCB7IHJlZGlzQ29ubmVjdGlvbjogXCJyZWFkeVwiIH0pKTtcbiAgUmVkaXNDbGllbnQub24oXCJyZWNvbm5lY3RpbmdcIiwgKCkgPT4gbG9nKFwiaW5mb1wiLCB7IHJlZGlzQ29ubmVjdGlvbjogXCJyZWNvbm5lY3RpbmdcIiB9KSk7XG4gIFJlZGlzQ2xpZW50Lm9uKFwiZW5kXCIsICgpID0+IGxvZyhcImluZm9cIiwgeyByZWRpc0Nvbm5lY3Rpb246IFwiZGlzY29ubmVjdGVkXCIgfSkpO1xuICBSZWRpc0NsaWVudC5vbihcImVycm9yXCIsIChlcnJvcikgPT4gbG9nKFwiaW5mb1wiLCB7IGVycm9yIH0pKTtcbiAgdHJ5IHtcbiAgICBSZWRpc0NsaWVudC5jb25uZWN0KCk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgbG9nKFwiZXJyb3JcIiwgeyBlcnJvciB9KTtcbiAgfVxuXG4gIHJldHVybiBSZWRpc0NsaWVudDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldERiSW5zdGFuY2UoKSB7XG4gIHJldHVybiBSZWRpc0NsaWVudDtcbn1cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQUE7O0FBQ0E7Ozs7QUFFQTtBQUNPLElBQUlBLFdBQUo7OztBQUVBLFNBQVNDLElBQVQsR0FBZ0I7RUFDckIsTUFBTUMsUUFBUSxHQUFHQyxlQUFPQyxXQUFQLENBQW1CQyxVQUFwQzs7RUFFQSxJQUFJTCxXQUFKLEVBQWlCO0lBQ2YsT0FBT0EsV0FBUDtFQUNEOztFQUVETSxHQUFHLENBQUMsTUFBRCxFQUFVLGdDQUErQkosUUFBUyxFQUFsRCxDQUFIO0VBRUEsc0JBQUFGLFdBQVcsR0FBRyx5QkFBYTtJQUN6Qk8sR0FBRyxFQUFFTDtFQURvQixDQUFiLENBQWQsQ0FUcUIsQ0FhckI7O0VBQ0FGLFdBQVcsQ0FBQ1EsRUFBWixDQUFlLFNBQWYsRUFBMEIsTUFBTUYsR0FBRyxDQUFDLE1BQUQsRUFBUztJQUFFRyxlQUFlLEVBQUU7RUFBbkIsQ0FBVCxDQUFuQztFQUNBVCxXQUFXLENBQUNRLEVBQVosQ0FBZSxPQUFmLEVBQXdCLE1BQU1GLEdBQUcsQ0FBQyxNQUFELEVBQVM7SUFBRUcsZUFBZSxFQUFFO0VBQW5CLENBQVQsQ0FBakM7RUFDQVQsV0FBVyxDQUFDUSxFQUFaLENBQWUsY0FBZixFQUErQixNQUFNRixHQUFHLENBQUMsTUFBRCxFQUFTO0lBQUVHLGVBQWUsRUFBRTtFQUFuQixDQUFULENBQXhDO0VBQ0FULFdBQVcsQ0FBQ1EsRUFBWixDQUFlLEtBQWYsRUFBc0IsTUFBTUYsR0FBRyxDQUFDLE1BQUQsRUFBUztJQUFFRyxlQUFlLEVBQUU7RUFBbkIsQ0FBVCxDQUEvQjtFQUNBVCxXQUFXLENBQUNRLEVBQVosQ0FBZSxPQUFmLEVBQXlCRSxLQUFELElBQVdKLEdBQUcsQ0FBQyxNQUFELEVBQVM7SUFBRUk7RUFBRixDQUFULENBQXRDOztFQUNBLElBQUk7SUFDRlYsV0FBVyxDQUFDVyxPQUFaO0VBQ0QsQ0FGRCxDQUVFLE9BQU9ELEtBQVAsRUFBYztJQUNkSixHQUFHLENBQUMsT0FBRCxFQUFVO01BQUVJO0lBQUYsQ0FBVixDQUFIO0VBQ0Q7O0VBRUQsT0FBT1YsV0FBUDtBQUNEOztBQUVNLFNBQVNZLGFBQVQsR0FBeUI7RUFDOUIsT0FBT1osV0FBUDtBQUNEIn0=","map":{"version":3,"names":["RedisClient","init","CONN_URL","config","redisConfig","connString","log","url","on","redisConnection","error","connect","getDbInstance"],"sourceRoot":"/Users/ramireddycharitha/git-explore/connections/","sources":["RedisClient.js"],"sourcesContent":["import { createClient } from \"redis\";\nimport config from \"../config/index\";\n\n// eslint-disable-next-line import/no-mutable-exports\nexport let RedisClient;\n\nexport function init() {\n  const CONN_URL = config.redisConfig.connString;\n\n  if (RedisClient) {\n    return RedisClient;\n  }\n\n  log(\"info\", `CONN_URL to connect to redis ${CONN_URL}`);\n\n  RedisClient = createClient({\n    url: CONN_URL,\n  });\n\n  //  Redis Connection Events\n  RedisClient.on(\"connect\", () => log(\"info\", { redisConnection: \"connect\" }));\n  RedisClient.on(\"ready\", () => log(\"info\", { redisConnection: \"ready\" }));\n  RedisClient.on(\"reconnecting\", () => log(\"info\", { redisConnection: \"reconnecting\" }));\n  RedisClient.on(\"end\", () => log(\"info\", { redisConnection: \"disconnected\" }));\n  RedisClient.on(\"error\", (error) => log(\"info\", { error }));\n  try {\n    RedisClient.connect();\n  } catch (error) {\n    log(\"error\", { error });\n  }\n\n  return RedisClient;\n}\n\nexport function getDbInstance() {\n  return RedisClient;\n}\n"],"mappings":";;;;;;;;;AAAA;;AACA;;;;AAEA;AACO,IAAIA,WAAJ;;;AAEA,SAASC,IAAT,GAAgB;EACrB,MAAMC,QAAQ,GAAGC,eAAOC,WAAP,CAAmBC,UAApC;;EAEA,IAAIL,WAAJ,EAAiB;IACf,OAAOA,WAAP;EACD;;EAEDM,GAAG,CAAC,MAAD,EAAU,gCAA+BJ,QAAS,EAAlD,CAAH;EAEA,sBAAAF,WAAW,GAAG,yBAAa;IACzBO,GAAG,EAAEL;EADoB,CAAb,CAAd,CATqB,CAarB;;EACAF,WAAW,CAACQ,EAAZ,CAAe,SAAf,EAA0B,MAAMF,GAAG,CAAC,MAAD,EAAS;IAAEG,eAAe,EAAE;EAAnB,CAAT,CAAnC;EACAT,WAAW,CAACQ,EAAZ,CAAe,OAAf,EAAwB,MAAMF,GAAG,CAAC,MAAD,EAAS;IAAEG,eAAe,EAAE;EAAnB,CAAT,CAAjC;EACAT,WAAW,CAACQ,EAAZ,CAAe,cAAf,EAA+B,MAAMF,GAAG,CAAC,MAAD,EAAS;IAAEG,eAAe,EAAE;EAAnB,CAAT,CAAxC;EACAT,WAAW,CAACQ,EAAZ,CAAe,KAAf,EAAsB,MAAMF,GAAG,CAAC,MAAD,EAAS;IAAEG,eAAe,EAAE;EAAnB,CAAT,CAA/B;EACAT,WAAW,CAACQ,EAAZ,CAAe,OAAf,EAAyBE,KAAD,IAAWJ,GAAG,CAAC,MAAD,EAAS;IAAEI;EAAF,CAAT,CAAtC;;EACA,IAAI;IACFV,WAAW,CAACW,OAAZ;EACD,CAFD,CAEE,OAAOD,KAAP,EAAc;IACdJ,GAAG,CAAC,OAAD,EAAU;MAAEI;IAAF,CAAV,CAAH;EACD;;EAED,OAAOV,WAAP;AACD;;AAEM,SAASY,aAAT,GAAyB;EAC9B,OAAOZ,WAAP;AACD"}},"mtime":1653643634177},"{\"assumptions\":{},\"sourceRoot\":\"/Users/ramireddycharitha/git-explore/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/ramireddycharitha/git-explore\",\"filename\":\"/Users/ramireddycharitha/git-explore/app.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"default\",\"root\":\"/Users/ramireddycharitha/git-explore\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.17.10:default":{"value":{"code":"\"use strict\";\n\nvar _express = _interopRequireDefault(require(\"express\"));\n\nvar Sentry = _interopRequireWildcard(require(\"@sentry/node\"));\n\nvar _cors = _interopRequireDefault(require(\"cors\"));\n\nvar _bodyParser = _interopRequireDefault(require(\"body-parser\"));\n\nrequire(\"express-async-errors\");\n\nvar _User = _interopRequireDefault(require(\"./routes/User\"));\n\nvar _Outboundcall = _interopRequireDefault(require(\"./routes/Outboundcall\"));\n\nvar _Health = _interopRequireDefault(require(\"./routes/Health\"));\n\nvar _index = _interopRequireDefault(require(\"./config/index\"));\n\nvar _RequestLogger = _interopRequireDefault(require(\"./middlewares/RequestLogger\"));\n\nvar _Auth = require(\"./middlewares/Auth\");\n\nvar _ResponseLogger = require(\"./middlewares/ResponseLogger\");\n\nvar _SchemaValidator = require(\"./middlewares/SchemaValidator\");\n\nvar HttpContextMiddleware = _interopRequireWildcard(require(\"./middlewares/HttpContextMiddleware\"));\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/* eslint-disable import/no-import-module-exports */\n// Module Imports\n// Default Imports\n// Named Imports\nconst httpContext = require(\"express-http-context\");\n\nconst app = (0, _express.default)(); // init sentry\n\nSentry.init({\n  dsn: _index.default.sentry_dsn,\n  environment: process.env.NODE_ENV,\n  // name is set in ecosystem config file\n  serverName: process.env.name,\n  // ignore middleware errors\n  ignoreErrors: [/^Non-Error exception captured$/]\n});\napp.use(_bodyParser.default.json());\napp.use((0, _cors.default)()); // init httpcontext\n\napp.use(httpContext.middleware); // set http context\n\napp.use(HttpContextMiddleware.setHttpContextMetrics);\napp.use(HttpContextMiddleware.setHttpContextUserDetails);\napp.use(HttpContextMiddleware.setHttpContextRequestPayload);\napp.use(\"*\", [_RequestLogger.default, _Auth.checks, _SchemaValidator.validate]);\napp.use(\"/v1/health\", _Health.default);\napp.use(\"/v1/user\", _User.default);\napp.use(\"/v1/organisation/outbound-call\", _Outboundcall.default); // The error handler must be before any other error middleware and after all controllers\n\napp.use(Sentry.Handlers.errorHandler()); // attach response payload\n\napp.use(HttpContextMiddleware.setHttpContextResponsePayload); // attach response payload on error\n\napp.use(HttpContextMiddleware.setHttpContextErrorResponsePayload);\napp.use(\"*\", [_ResponseLogger.resSuccessLog, _ResponseLogger.resErrorLog]);\nmodule.exports = app;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJodHRwQ29udGV4dCIsInJlcXVpcmUiLCJhcHAiLCJTZW50cnkiLCJpbml0IiwiZHNuIiwiY29uZmlnIiwic2VudHJ5X2RzbiIsImVudmlyb25tZW50IiwicHJvY2VzcyIsImVudiIsIk5PREVfRU5WIiwic2VydmVyTmFtZSIsIm5hbWUiLCJpZ25vcmVFcnJvcnMiLCJ1c2UiLCJib2R5UGFyc2VyIiwianNvbiIsIm1pZGRsZXdhcmUiLCJIdHRwQ29udGV4dE1pZGRsZXdhcmUiLCJzZXRIdHRwQ29udGV4dE1ldHJpY3MiLCJzZXRIdHRwQ29udGV4dFVzZXJEZXRhaWxzIiwic2V0SHR0cENvbnRleHRSZXF1ZXN0UGF5bG9hZCIsInJlcUxvZyIsImNoZWNrcyIsInZhbGlkYXRlIiwiaGVhbHRoIiwidXNlciIsIk91dGJvdW5kY2FsbCIsIkhhbmRsZXJzIiwiZXJyb3JIYW5kbGVyIiwic2V0SHR0cENvbnRleHRSZXNwb25zZVBheWxvYWQiLCJzZXRIdHRwQ29udGV4dEVycm9yUmVzcG9uc2VQYXlsb2FkIiwicmVzU3VjY2Vzc0xvZyIsInJlc0Vycm9yTG9nIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiL1VzZXJzL3JhbWlyZWRkeWNoYXJpdGhhL2dpdC1leHBsb3JlLyIsInNvdXJjZXMiOlsiYXBwLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIGVzbGludC1kaXNhYmxlIGltcG9ydC9uby1pbXBvcnQtbW9kdWxlLWV4cG9ydHMgKi9cbi8vIE1vZHVsZSBJbXBvcnRzXG5pbXBvcnQgZXhwcmVzcyBmcm9tIFwiZXhwcmVzc1wiO1xuaW1wb3J0ICogYXMgU2VudHJ5IGZyb20gXCJAc2VudHJ5L25vZGVcIjtcbmltcG9ydCBjb3JzIGZyb20gXCJjb3JzXCI7XG5pbXBvcnQgYm9keVBhcnNlciBmcm9tIFwiYm9keS1wYXJzZXJcIjtcbmltcG9ydCBcImV4cHJlc3MtYXN5bmMtZXJyb3JzXCI7XG5cbi8vIERlZmF1bHQgSW1wb3J0c1xuaW1wb3J0IHVzZXIgZnJvbSBcIi4vcm91dGVzL1VzZXJcIjtcbmltcG9ydCBPdXRib3VuZGNhbGwgZnJvbSBcIi4vcm91dGVzL091dGJvdW5kY2FsbFwiO1xuaW1wb3J0IGhlYWx0aCBmcm9tIFwiLi9yb3V0ZXMvSGVhbHRoXCI7XG5pbXBvcnQgY29uZmlnIGZyb20gXCIuL2NvbmZpZy9pbmRleFwiO1xuXG5pbXBvcnQgcmVxTG9nIGZyb20gXCIuL21pZGRsZXdhcmVzL1JlcXVlc3RMb2dnZXJcIjtcblxuLy8gTmFtZWQgSW1wb3J0c1xuaW1wb3J0IHsgY2hlY2tzIH0gZnJvbSBcIi4vbWlkZGxld2FyZXMvQXV0aFwiO1xuaW1wb3J0IHsgcmVzU3VjY2Vzc0xvZywgcmVzRXJyb3JMb2cgfSBmcm9tIFwiLi9taWRkbGV3YXJlcy9SZXNwb25zZUxvZ2dlclwiO1xuaW1wb3J0IHsgdmFsaWRhdGUgfSBmcm9tIFwiLi9taWRkbGV3YXJlcy9TY2hlbWFWYWxpZGF0b3JcIjtcbmltcG9ydCAqIGFzIEh0dHBDb250ZXh0TWlkZGxld2FyZSBmcm9tIFwiLi9taWRkbGV3YXJlcy9IdHRwQ29udGV4dE1pZGRsZXdhcmVcIjtcblxuY29uc3QgaHR0cENvbnRleHQgPSByZXF1aXJlKFwiZXhwcmVzcy1odHRwLWNvbnRleHRcIik7XG5cbmNvbnN0IGFwcCA9IGV4cHJlc3MoKTtcblxuLy8gaW5pdCBzZW50cnlcblNlbnRyeS5pbml0KHtcbiAgZHNuOiBjb25maWcuc2VudHJ5X2RzbixcbiAgZW52aXJvbm1lbnQ6IHByb2Nlc3MuZW52Lk5PREVfRU5WLFxuICAvLyBuYW1lIGlzIHNldCBpbiBlY29zeXN0ZW0gY29uZmlnIGZpbGVcbiAgc2VydmVyTmFtZTogcHJvY2Vzcy5lbnYubmFtZSxcbiAgLy8gaWdub3JlIG1pZGRsZXdhcmUgZXJyb3JzXG4gIGlnbm9yZUVycm9yczogWy9eTm9uLUVycm9yIGV4Y2VwdGlvbiBjYXB0dXJlZCQvXSxcbn0pO1xuYXBwLnVzZShib2R5UGFyc2VyLmpzb24oKSk7XG5hcHAudXNlKGNvcnMoKSk7XG4vLyBpbml0IGh0dHBjb250ZXh0XG5hcHAudXNlKGh0dHBDb250ZXh0Lm1pZGRsZXdhcmUpO1xuXG4vLyBzZXQgaHR0cCBjb250ZXh0XG5hcHAudXNlKEh0dHBDb250ZXh0TWlkZGxld2FyZS5zZXRIdHRwQ29udGV4dE1ldHJpY3MpO1xuYXBwLnVzZShIdHRwQ29udGV4dE1pZGRsZXdhcmUuc2V0SHR0cENvbnRleHRVc2VyRGV0YWlscyk7XG5hcHAudXNlKEh0dHBDb250ZXh0TWlkZGxld2FyZS5zZXRIdHRwQ29udGV4dFJlcXVlc3RQYXlsb2FkKTtcblxuYXBwLnVzZShcIipcIiwgW3JlcUxvZywgY2hlY2tzLCB2YWxpZGF0ZV0pO1xuYXBwLnVzZShcIi92MS9oZWFsdGhcIiwgaGVhbHRoKTtcbmFwcC51c2UoXCIvdjEvdXNlclwiLCB1c2VyKTtcbmFwcC51c2UoXCIvdjEvb3JnYW5pc2F0aW9uL291dGJvdW5kLWNhbGxcIiwgT3V0Ym91bmRjYWxsKTtcblxuLy8gVGhlIGVycm9yIGhhbmRsZXIgbXVzdCBiZSBiZWZvcmUgYW55IG90aGVyIGVycm9yIG1pZGRsZXdhcmUgYW5kIGFmdGVyIGFsbCBjb250cm9sbGVyc1xuYXBwLnVzZShTZW50cnkuSGFuZGxlcnMuZXJyb3JIYW5kbGVyKCkpO1xuXG4vLyBhdHRhY2ggcmVzcG9uc2UgcGF5bG9hZFxuYXBwLnVzZShIdHRwQ29udGV4dE1pZGRsZXdhcmUuc2V0SHR0cENvbnRleHRSZXNwb25zZVBheWxvYWQpO1xuXG4vLyBhdHRhY2ggcmVzcG9uc2UgcGF5bG9hZCBvbiBlcnJvclxuYXBwLnVzZShIdHRwQ29udGV4dE1pZGRsZXdhcmUuc2V0SHR0cENvbnRleHRFcnJvclJlc3BvbnNlUGF5bG9hZCk7XG5cbmFwcC51c2UoXCIqXCIsIFtyZXNTdWNjZXNzTG9nLCByZXNFcnJvckxvZ10pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGFwcDtcbiJdLCJtYXBwaW5ncyI6Ijs7QUFFQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFHQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFFQTs7QUFHQTs7QUFDQTs7QUFDQTs7QUFDQTs7Ozs7Ozs7QUFwQkE7QUFDQTtBQU9BO0FBUUE7QUFNQSxNQUFNQSxXQUFXLEdBQUdDLE9BQU8sQ0FBQyxzQkFBRCxDQUEzQjs7QUFFQSxNQUFNQyxHQUFHLEdBQUcsdUJBQVosQyxDQUVBOztBQUNBQyxNQUFNLENBQUNDLElBQVAsQ0FBWTtFQUNWQyxHQUFHLEVBQUVDLGVBQU9DLFVBREY7RUFFVkMsV0FBVyxFQUFFQyxPQUFPLENBQUNDLEdBQVIsQ0FBWUMsUUFGZjtFQUdWO0VBQ0FDLFVBQVUsRUFBRUgsT0FBTyxDQUFDQyxHQUFSLENBQVlHLElBSmQ7RUFLVjtFQUNBQyxZQUFZLEVBQUUsQ0FBQyxnQ0FBRDtBQU5KLENBQVo7QUFRQVosR0FBRyxDQUFDYSxHQUFKLENBQVFDLG9CQUFXQyxJQUFYLEVBQVI7QUFDQWYsR0FBRyxDQUFDYSxHQUFKLENBQVEsb0JBQVIsRSxDQUNBOztBQUNBYixHQUFHLENBQUNhLEdBQUosQ0FBUWYsV0FBVyxDQUFDa0IsVUFBcEIsRSxDQUVBOztBQUNBaEIsR0FBRyxDQUFDYSxHQUFKLENBQVFJLHFCQUFxQixDQUFDQyxxQkFBOUI7QUFDQWxCLEdBQUcsQ0FBQ2EsR0FBSixDQUFRSSxxQkFBcUIsQ0FBQ0UseUJBQTlCO0FBQ0FuQixHQUFHLENBQUNhLEdBQUosQ0FBUUkscUJBQXFCLENBQUNHLDRCQUE5QjtBQUVBcEIsR0FBRyxDQUFDYSxHQUFKLENBQVEsR0FBUixFQUFhLENBQUNRLHNCQUFELEVBQVNDLFlBQVQsRUFBaUJDLHlCQUFqQixDQUFiO0FBQ0F2QixHQUFHLENBQUNhLEdBQUosQ0FBUSxZQUFSLEVBQXNCVyxlQUF0QjtBQUNBeEIsR0FBRyxDQUFDYSxHQUFKLENBQVEsVUFBUixFQUFvQlksYUFBcEI7QUFDQXpCLEdBQUcsQ0FBQ2EsR0FBSixDQUFRLGdDQUFSLEVBQTBDYSxxQkFBMUMsRSxDQUVBOztBQUNBMUIsR0FBRyxDQUFDYSxHQUFKLENBQVFaLE1BQU0sQ0FBQzBCLFFBQVAsQ0FBZ0JDLFlBQWhCLEVBQVIsRSxDQUVBOztBQUNBNUIsR0FBRyxDQUFDYSxHQUFKLENBQVFJLHFCQUFxQixDQUFDWSw2QkFBOUIsRSxDQUVBOztBQUNBN0IsR0FBRyxDQUFDYSxHQUFKLENBQVFJLHFCQUFxQixDQUFDYSxrQ0FBOUI7QUFFQTlCLEdBQUcsQ0FBQ2EsR0FBSixDQUFRLEdBQVIsRUFBYSxDQUFDa0IsNkJBQUQsRUFBZ0JDLDJCQUFoQixDQUFiO0FBRUFDLE1BQU0sQ0FBQ0MsT0FBUCxHQUFpQmxDLEdBQWpCIn0=","map":{"version":3,"names":["httpContext","require","app","Sentry","init","dsn","config","sentry_dsn","environment","process","env","NODE_ENV","serverName","name","ignoreErrors","use","bodyParser","json","middleware","HttpContextMiddleware","setHttpContextMetrics","setHttpContextUserDetails","setHttpContextRequestPayload","reqLog","checks","validate","health","user","Outboundcall","Handlers","errorHandler","setHttpContextResponsePayload","setHttpContextErrorResponsePayload","resSuccessLog","resErrorLog","module","exports"],"sourceRoot":"/Users/ramireddycharitha/git-explore/","sources":["app.js"],"sourcesContent":["/* eslint-disable import/no-import-module-exports */\n// Module Imports\nimport express from \"express\";\nimport * as Sentry from \"@sentry/node\";\nimport cors from \"cors\";\nimport bodyParser from \"body-parser\";\nimport \"express-async-errors\";\n\n// Default Imports\nimport user from \"./routes/User\";\nimport Outboundcall from \"./routes/Outboundcall\";\nimport health from \"./routes/Health\";\nimport config from \"./config/index\";\n\nimport reqLog from \"./middlewares/RequestLogger\";\n\n// Named Imports\nimport { checks } from \"./middlewares/Auth\";\nimport { resSuccessLog, resErrorLog } from \"./middlewares/ResponseLogger\";\nimport { validate } from \"./middlewares/SchemaValidator\";\nimport * as HttpContextMiddleware from \"./middlewares/HttpContextMiddleware\";\n\nconst httpContext = require(\"express-http-context\");\n\nconst app = express();\n\n// init sentry\nSentry.init({\n  dsn: config.sentry_dsn,\n  environment: process.env.NODE_ENV,\n  // name is set in ecosystem config file\n  serverName: process.env.name,\n  // ignore middleware errors\n  ignoreErrors: [/^Non-Error exception captured$/],\n});\napp.use(bodyParser.json());\napp.use(cors());\n// init httpcontext\napp.use(httpContext.middleware);\n\n// set http context\napp.use(HttpContextMiddleware.setHttpContextMetrics);\napp.use(HttpContextMiddleware.setHttpContextUserDetails);\napp.use(HttpContextMiddleware.setHttpContextRequestPayload);\n\napp.use(\"*\", [reqLog, checks, validate]);\napp.use(\"/v1/health\", health);\napp.use(\"/v1/user\", user);\napp.use(\"/v1/organisation/outbound-call\", Outboundcall);\n\n// The error handler must be before any other error middleware and after all controllers\napp.use(Sentry.Handlers.errorHandler());\n\n// attach response payload\napp.use(HttpContextMiddleware.setHttpContextResponsePayload);\n\n// attach response payload on error\napp.use(HttpContextMiddleware.setHttpContextErrorResponsePayload);\n\napp.use(\"*\", [resSuccessLog, resErrorLog]);\n\nmodule.exports = app;\n"],"mappings":";;AAEA;;AACA;;AACA;;AACA;;AACA;;AAGA;;AACA;;AACA;;AACA;;AAEA;;AAGA;;AACA;;AACA;;AACA;;;;;;;;AApBA;AACA;AAOA;AAQA;AAMA,MAAMA,WAAW,GAAGC,OAAO,CAAC,sBAAD,CAA3B;;AAEA,MAAMC,GAAG,GAAG,uBAAZ,C,CAEA;;AACAC,MAAM,CAACC,IAAP,CAAY;EACVC,GAAG,EAAEC,eAAOC,UADF;EAEVC,WAAW,EAAEC,OAAO,CAACC,GAAR,CAAYC,QAFf;EAGV;EACAC,UAAU,EAAEH,OAAO,CAACC,GAAR,CAAYG,IAJd;EAKV;EACAC,YAAY,EAAE,CAAC,gCAAD;AANJ,CAAZ;AAQAZ,GAAG,CAACa,GAAJ,CAAQC,oBAAWC,IAAX,EAAR;AACAf,GAAG,CAACa,GAAJ,CAAQ,oBAAR,E,CACA;;AACAb,GAAG,CAACa,GAAJ,CAAQf,WAAW,CAACkB,UAApB,E,CAEA;;AACAhB,GAAG,CAACa,GAAJ,CAAQI,qBAAqB,CAACC,qBAA9B;AACAlB,GAAG,CAACa,GAAJ,CAAQI,qBAAqB,CAACE,yBAA9B;AACAnB,GAAG,CAACa,GAAJ,CAAQI,qBAAqB,CAACG,4BAA9B;AAEApB,GAAG,CAACa,GAAJ,CAAQ,GAAR,EAAa,CAACQ,sBAAD,EAASC,YAAT,EAAiBC,yBAAjB,CAAb;AACAvB,GAAG,CAACa,GAAJ,CAAQ,YAAR,EAAsBW,eAAtB;AACAxB,GAAG,CAACa,GAAJ,CAAQ,UAAR,EAAoBY,aAApB;AACAzB,GAAG,CAACa,GAAJ,CAAQ,gCAAR,EAA0Ca,qBAA1C,E,CAEA;;AACA1B,GAAG,CAACa,GAAJ,CAAQZ,MAAM,CAAC0B,QAAP,CAAgBC,YAAhB,EAAR,E,CAEA;;AACA5B,GAAG,CAACa,GAAJ,CAAQI,qBAAqB,CAACY,6BAA9B,E,CAEA;;AACA7B,GAAG,CAACa,GAAJ,CAAQI,qBAAqB,CAACa,kCAA9B;AAEA9B,GAAG,CAACa,GAAJ,CAAQ,GAAR,EAAa,CAACkB,6BAAD,EAAgBC,2BAAhB,CAAb;AAEAC,MAAM,CAACC,OAAP,GAAiBlC,GAAjB"}},"mtime":1653653756267},"{\"assumptions\":{},\"sourceRoot\":\"/Users/ramireddycharitha/git-explore/routes/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/ramireddycharitha/git-explore\",\"filename\":\"/Users/ramireddycharitha/git-explore/routes/User.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"default\",\"root\":\"/Users/ramireddycharitha/git-explore\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.17.10:default":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _express = require(\"express\");\n\nvar UserController = _interopRequireWildcard(require(\"../controllers/UserController\"));\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nconst router = (0, _express.Router)();\nrouter.post(\"/register\", UserController.register);\nrouter.get(\"/user-details\", UserController.getUserDetails);\nrouter.put(\"/user-details\", UserController.updateUserDetails);\nvar _default = router;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJyb3V0ZXIiLCJwb3N0IiwiVXNlckNvbnRyb2xsZXIiLCJyZWdpc3RlciIsImdldCIsImdldFVzZXJEZXRhaWxzIiwicHV0IiwidXBkYXRlVXNlckRldGFpbHMiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy9yYW1pcmVkZHljaGFyaXRoYS9naXQtZXhwbG9yZS9yb3V0ZXMvIiwic291cmNlcyI6WyJVc2VyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFJvdXRlciB9IGZyb20gXCJleHByZXNzXCI7XG5pbXBvcnQgKiBhcyBVc2VyQ29udHJvbGxlciBmcm9tIFwiLi4vY29udHJvbGxlcnMvVXNlckNvbnRyb2xsZXJcIjtcblxuY29uc3Qgcm91dGVyID0gUm91dGVyKCk7XG5cbnJvdXRlci5wb3N0KFwiL3JlZ2lzdGVyXCIsIFVzZXJDb250cm9sbGVyLnJlZ2lzdGVyKTtcbnJvdXRlci5nZXQoXCIvdXNlci1kZXRhaWxzXCIsIFVzZXJDb250cm9sbGVyLmdldFVzZXJEZXRhaWxzKTtcbnJvdXRlci5wdXQoXCIvdXNlci1kZXRhaWxzXCIsIFVzZXJDb250cm9sbGVyLnVwZGF0ZVVzZXJEZXRhaWxzKTtcblxuZXhwb3J0IGRlZmF1bHQgcm91dGVyO1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7O0FBQ0E7Ozs7OztBQUVBLE1BQU1BLE1BQU0sR0FBRyxzQkFBZjtBQUVBQSxNQUFNLENBQUNDLElBQVAsQ0FBWSxXQUFaLEVBQXlCQyxjQUFjLENBQUNDLFFBQXhDO0FBQ0FILE1BQU0sQ0FBQ0ksR0FBUCxDQUFXLGVBQVgsRUFBNEJGLGNBQWMsQ0FBQ0csY0FBM0M7QUFDQUwsTUFBTSxDQUFDTSxHQUFQLENBQVcsZUFBWCxFQUE0QkosY0FBYyxDQUFDSyxpQkFBM0M7ZUFFZVAsTSJ9","map":{"version":3,"names":["router","post","UserController","register","get","getUserDetails","put","updateUserDetails"],"sourceRoot":"/Users/ramireddycharitha/git-explore/routes/","sources":["User.js"],"sourcesContent":["import { Router } from \"express\";\nimport * as UserController from \"../controllers/UserController\";\n\nconst router = Router();\n\nrouter.post(\"/register\", UserController.register);\nrouter.get(\"/user-details\", UserController.getUserDetails);\nrouter.put(\"/user-details\", UserController.updateUserDetails);\n\nexport default router;\n"],"mappings":";;;;;;;AAAA;;AACA;;;;;;AAEA,MAAMA,MAAM,GAAG,sBAAf;AAEAA,MAAM,CAACC,IAAP,CAAY,WAAZ,EAAyBC,cAAc,CAACC,QAAxC;AACAH,MAAM,CAACI,GAAP,CAAW,eAAX,EAA4BF,cAAc,CAACG,cAA3C;AACAL,MAAM,CAACM,GAAP,CAAW,eAAX,EAA4BJ,cAAc,CAACK,iBAA3C;eAEeP,M"}},"mtime":1653643634187},"{\"assumptions\":{},\"sourceRoot\":\"/Users/ramireddycharitha/git-explore/controllers/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/ramireddycharitha/git-explore\",\"filename\":\"/Users/ramireddycharitha/git-explore/controllers/UserController.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"default\",\"root\":\"/Users/ramireddycharitha/git-explore\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.17.10:default":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.updateUserDetails = exports.register = exports.getUserDetails = void 0;\n\nvar Auth = _interopRequireWildcard(require(\"../middlewares/Auth\"));\n\nvar UserService = _interopRequireWildcard(require(\"../services/UserService\"));\n\nvar _Keys = require(\"../constants/Keys\");\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nconst register = async (req, res, next) => {\n  const {\n    mobileNo,\n    password,\n    firstName,\n    lastName\n  } = req.body;\n  const userDetails = {\n    mobileNo,\n    password,\n    firstName,\n    lastName\n  };\n  const clientDetails = {\n    apiKey: req.header(_Keys.HEADER_API_KEY)\n  };\n  const userObj = await UserService.registerUser(userDetails, clientDetails);\n  req.session = Auth.createSessionObj(userObj);\n  res.data = {\n    userDetails: userObj,\n    sessiontoken: req.session\n  };\n  next();\n};\n\nexports.register = register;\n\nconst getUserDetails = async (req, res, next) => {\n  const sessionObj = await Auth.getSessionObj(req);\n  const {\n    mobileNo\n  } = sessionObj;\n  const userObj = await UserService.getUserDetails(mobileNo);\n  res.data = userObj;\n  next();\n};\n\nexports.getUserDetails = getUserDetails;\n\nconst updateUserDetails = async (req, res, next) => {\n  const {\n    firstName,\n    lastName,\n    alternateMobileNo,\n    email\n  } = req.body;\n  const sessionObj = await Auth.getSessionObj(req);\n  const {\n    mobileNo\n  } = sessionObj;\n  const userDetails = {\n    firstName,\n    lastName,\n    alternateMobileNo,\n    email,\n    mobileNo\n  };\n  await UserService.updateUserDetails(userDetails);\n  res.data = { ...userDetails\n  };\n  next();\n};\n\nexports.updateUserDetails = updateUserDetails;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJyZWdpc3RlciIsInJlcSIsInJlcyIsIm5leHQiLCJtb2JpbGVObyIsInBhc3N3b3JkIiwiZmlyc3ROYW1lIiwibGFzdE5hbWUiLCJib2R5IiwidXNlckRldGFpbHMiLCJjbGllbnREZXRhaWxzIiwiYXBpS2V5IiwiaGVhZGVyIiwiSEVBREVSX0FQSV9LRVkiLCJ1c2VyT2JqIiwiVXNlclNlcnZpY2UiLCJyZWdpc3RlclVzZXIiLCJzZXNzaW9uIiwiQXV0aCIsImNyZWF0ZVNlc3Npb25PYmoiLCJkYXRhIiwic2Vzc2lvbnRva2VuIiwiZ2V0VXNlckRldGFpbHMiLCJzZXNzaW9uT2JqIiwiZ2V0U2Vzc2lvbk9iaiIsInVwZGF0ZVVzZXJEZXRhaWxzIiwiYWx0ZXJuYXRlTW9iaWxlTm8iLCJlbWFpbCJdLCJzb3VyY2VSb290IjoiL1VzZXJzL3JhbWlyZWRkeWNoYXJpdGhhL2dpdC1leHBsb3JlL2NvbnRyb2xsZXJzLyIsInNvdXJjZXMiOlsiVXNlckNvbnRyb2xsZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgQXV0aCBmcm9tIFwiLi4vbWlkZGxld2FyZXMvQXV0aFwiO1xuaW1wb3J0ICogYXMgVXNlclNlcnZpY2UgZnJvbSBcIi4uL3NlcnZpY2VzL1VzZXJTZXJ2aWNlXCI7XG5pbXBvcnQge1xuICBIRUFERVJfQVBJX0tFWSxcbn0gZnJvbSBcIi4uL2NvbnN0YW50cy9LZXlzXCI7XG5cbmV4cG9ydCBjb25zdCByZWdpc3RlciA9IGFzeW5jIChyZXEsIHJlcywgbmV4dCkgPT4ge1xuICBjb25zdCB7XG4gICAgbW9iaWxlTm8sIHBhc3N3b3JkLCBmaXJzdE5hbWUsIGxhc3ROYW1lLFxuICB9ID0gcmVxLmJvZHk7XG4gIGNvbnN0IHVzZXJEZXRhaWxzID0ge1xuICAgIG1vYmlsZU5vLFxuICAgIHBhc3N3b3JkLFxuICAgIGZpcnN0TmFtZSxcbiAgICBsYXN0TmFtZSxcbiAgfTtcbiAgY29uc3QgY2xpZW50RGV0YWlscyA9IHtcbiAgICBhcGlLZXk6IHJlcS5oZWFkZXIoSEVBREVSX0FQSV9LRVkpLFxuICB9O1xuICBjb25zdCB1c2VyT2JqID0gYXdhaXQgVXNlclNlcnZpY2UucmVnaXN0ZXJVc2VyKHVzZXJEZXRhaWxzLCBjbGllbnREZXRhaWxzKTtcbiAgcmVxLnNlc3Npb24gPSBBdXRoLmNyZWF0ZVNlc3Npb25PYmoodXNlck9iaik7XG4gIHJlcy5kYXRhID0ge1xuICAgIHVzZXJEZXRhaWxzOiB1c2VyT2JqLFxuICAgIHNlc3Npb250b2tlbjogcmVxLnNlc3Npb24sXG4gIH07XG4gIG5leHQoKTtcbn07XG5cbmV4cG9ydCBjb25zdCBnZXRVc2VyRGV0YWlscyA9IGFzeW5jIChyZXEsIHJlcywgbmV4dCkgPT4ge1xuICBjb25zdCBzZXNzaW9uT2JqID0gYXdhaXQgQXV0aC5nZXRTZXNzaW9uT2JqKHJlcSk7XG4gIGNvbnN0IHsgbW9iaWxlTm8gfSA9IHNlc3Npb25PYmo7XG4gIGNvbnN0IHVzZXJPYmogPSBhd2FpdCBVc2VyU2VydmljZS5nZXRVc2VyRGV0YWlscyhtb2JpbGVObyk7XG4gIHJlcy5kYXRhID0gdXNlck9iajtcbiAgbmV4dCgpO1xufTtcblxuZXhwb3J0IGNvbnN0IHVwZGF0ZVVzZXJEZXRhaWxzID0gYXN5bmMgKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gIGNvbnN0IHtcbiAgICBmaXJzdE5hbWUsIGxhc3ROYW1lLCBhbHRlcm5hdGVNb2JpbGVObywgZW1haWwsXG4gIH0gPSByZXEuYm9keTtcbiAgY29uc3Qgc2Vzc2lvbk9iaiA9IGF3YWl0IEF1dGguZ2V0U2Vzc2lvbk9iaihyZXEpO1xuICBjb25zdCB7IG1vYmlsZU5vIH0gPSBzZXNzaW9uT2JqO1xuICBjb25zdCB1c2VyRGV0YWlscyA9IHtcbiAgICBmaXJzdE5hbWUsXG4gICAgbGFzdE5hbWUsXG4gICAgYWx0ZXJuYXRlTW9iaWxlTm8sXG4gICAgZW1haWwsXG4gICAgbW9iaWxlTm8sXG4gIH07XG4gIGF3YWl0IFVzZXJTZXJ2aWNlLnVwZGF0ZVVzZXJEZXRhaWxzKHVzZXJEZXRhaWxzKTtcbiAgcmVzLmRhdGEgPSB7XG4gICAgLi4udXNlckRldGFpbHMsXG4gIH07XG4gIG5leHQoKTtcbn07XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTs7QUFDQTs7QUFDQTs7Ozs7O0FBSU8sTUFBTUEsUUFBUSxHQUFHLE9BQU9DLEdBQVAsRUFBWUMsR0FBWixFQUFpQkMsSUFBakIsS0FBMEI7RUFDaEQsTUFBTTtJQUNKQyxRQURJO0lBQ01DLFFBRE47SUFDZ0JDLFNBRGhCO0lBQzJCQztFQUQzQixJQUVGTixHQUFHLENBQUNPLElBRlI7RUFHQSxNQUFNQyxXQUFXLEdBQUc7SUFDbEJMLFFBRGtCO0lBRWxCQyxRQUZrQjtJQUdsQkMsU0FIa0I7SUFJbEJDO0VBSmtCLENBQXBCO0VBTUEsTUFBTUcsYUFBYSxHQUFHO0lBQ3BCQyxNQUFNLEVBQUVWLEdBQUcsQ0FBQ1csTUFBSixDQUFXQyxvQkFBWDtFQURZLENBQXRCO0VBR0EsTUFBTUMsT0FBTyxHQUFHLE1BQU1DLFdBQVcsQ0FBQ0MsWUFBWixDQUF5QlAsV0FBekIsRUFBc0NDLGFBQXRDLENBQXRCO0VBQ0FULEdBQUcsQ0FBQ2dCLE9BQUosR0FBY0MsSUFBSSxDQUFDQyxnQkFBTCxDQUFzQkwsT0FBdEIsQ0FBZDtFQUNBWixHQUFHLENBQUNrQixJQUFKLEdBQVc7SUFDVFgsV0FBVyxFQUFFSyxPQURKO0lBRVRPLFlBQVksRUFBRXBCLEdBQUcsQ0FBQ2dCO0VBRlQsQ0FBWDtFQUlBZCxJQUFJO0FBQ0wsQ0FwQk07Ozs7QUFzQkEsTUFBTW1CLGNBQWMsR0FBRyxPQUFPckIsR0FBUCxFQUFZQyxHQUFaLEVBQWlCQyxJQUFqQixLQUEwQjtFQUN0RCxNQUFNb0IsVUFBVSxHQUFHLE1BQU1MLElBQUksQ0FBQ00sYUFBTCxDQUFtQnZCLEdBQW5CLENBQXpCO0VBQ0EsTUFBTTtJQUFFRztFQUFGLElBQWVtQixVQUFyQjtFQUNBLE1BQU1ULE9BQU8sR0FBRyxNQUFNQyxXQUFXLENBQUNPLGNBQVosQ0FBMkJsQixRQUEzQixDQUF0QjtFQUNBRixHQUFHLENBQUNrQixJQUFKLEdBQVdOLE9BQVg7RUFDQVgsSUFBSTtBQUNMLENBTk07Ozs7QUFRQSxNQUFNc0IsaUJBQWlCLEdBQUcsT0FBT3hCLEdBQVAsRUFBWUMsR0FBWixFQUFpQkMsSUFBakIsS0FBMEI7RUFDekQsTUFBTTtJQUNKRyxTQURJO0lBQ09DLFFBRFA7SUFDaUJtQixpQkFEakI7SUFDb0NDO0VBRHBDLElBRUYxQixHQUFHLENBQUNPLElBRlI7RUFHQSxNQUFNZSxVQUFVLEdBQUcsTUFBTUwsSUFBSSxDQUFDTSxhQUFMLENBQW1CdkIsR0FBbkIsQ0FBekI7RUFDQSxNQUFNO0lBQUVHO0VBQUYsSUFBZW1CLFVBQXJCO0VBQ0EsTUFBTWQsV0FBVyxHQUFHO0lBQ2xCSCxTQURrQjtJQUVsQkMsUUFGa0I7SUFHbEJtQixpQkFIa0I7SUFJbEJDLEtBSmtCO0lBS2xCdkI7RUFMa0IsQ0FBcEI7RUFPQSxNQUFNVyxXQUFXLENBQUNVLGlCQUFaLENBQThCaEIsV0FBOUIsQ0FBTjtFQUNBUCxHQUFHLENBQUNrQixJQUFKLEdBQVcsRUFDVCxHQUFHWDtFQURNLENBQVg7RUFHQU4sSUFBSTtBQUNMLENBbEJNIn0=","map":{"version":3,"names":["register","req","res","next","mobileNo","password","firstName","lastName","body","userDetails","clientDetails","apiKey","header","HEADER_API_KEY","userObj","UserService","registerUser","session","Auth","createSessionObj","data","sessiontoken","getUserDetails","sessionObj","getSessionObj","updateUserDetails","alternateMobileNo","email"],"sourceRoot":"/Users/ramireddycharitha/git-explore/controllers/","sources":["UserController.js"],"sourcesContent":["import * as Auth from \"../middlewares/Auth\";\nimport * as UserService from \"../services/UserService\";\nimport {\n  HEADER_API_KEY,\n} from \"../constants/Keys\";\n\nexport const register = async (req, res, next) => {\n  const {\n    mobileNo, password, firstName, lastName,\n  } = req.body;\n  const userDetails = {\n    mobileNo,\n    password,\n    firstName,\n    lastName,\n  };\n  const clientDetails = {\n    apiKey: req.header(HEADER_API_KEY),\n  };\n  const userObj = await UserService.registerUser(userDetails, clientDetails);\n  req.session = Auth.createSessionObj(userObj);\n  res.data = {\n    userDetails: userObj,\n    sessiontoken: req.session,\n  };\n  next();\n};\n\nexport const getUserDetails = async (req, res, next) => {\n  const sessionObj = await Auth.getSessionObj(req);\n  const { mobileNo } = sessionObj;\n  const userObj = await UserService.getUserDetails(mobileNo);\n  res.data = userObj;\n  next();\n};\n\nexport const updateUserDetails = async (req, res, next) => {\n  const {\n    firstName, lastName, alternateMobileNo, email,\n  } = req.body;\n  const sessionObj = await Auth.getSessionObj(req);\n  const { mobileNo } = sessionObj;\n  const userDetails = {\n    firstName,\n    lastName,\n    alternateMobileNo,\n    email,\n    mobileNo,\n  };\n  await UserService.updateUserDetails(userDetails);\n  res.data = {\n    ...userDetails,\n  };\n  next();\n};\n"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;;;;;AAIO,MAAMA,QAAQ,GAAG,OAAOC,GAAP,EAAYC,GAAZ,EAAiBC,IAAjB,KAA0B;EAChD,MAAM;IACJC,QADI;IACMC,QADN;IACgBC,SADhB;IAC2BC;EAD3B,IAEFN,GAAG,CAACO,IAFR;EAGA,MAAMC,WAAW,GAAG;IAClBL,QADkB;IAElBC,QAFkB;IAGlBC,SAHkB;IAIlBC;EAJkB,CAApB;EAMA,MAAMG,aAAa,GAAG;IACpBC,MAAM,EAAEV,GAAG,CAACW,MAAJ,CAAWC,oBAAX;EADY,CAAtB;EAGA,MAAMC,OAAO,GAAG,MAAMC,WAAW,CAACC,YAAZ,CAAyBP,WAAzB,EAAsCC,aAAtC,CAAtB;EACAT,GAAG,CAACgB,OAAJ,GAAcC,IAAI,CAACC,gBAAL,CAAsBL,OAAtB,CAAd;EACAZ,GAAG,CAACkB,IAAJ,GAAW;IACTX,WAAW,EAAEK,OADJ;IAETO,YAAY,EAAEpB,GAAG,CAACgB;EAFT,CAAX;EAIAd,IAAI;AACL,CApBM;;;;AAsBA,MAAMmB,cAAc,GAAG,OAAOrB,GAAP,EAAYC,GAAZ,EAAiBC,IAAjB,KAA0B;EACtD,MAAMoB,UAAU,GAAG,MAAML,IAAI,CAACM,aAAL,CAAmBvB,GAAnB,CAAzB;EACA,MAAM;IAAEG;EAAF,IAAemB,UAArB;EACA,MAAMT,OAAO,GAAG,MAAMC,WAAW,CAACO,cAAZ,CAA2BlB,QAA3B,CAAtB;EACAF,GAAG,CAACkB,IAAJ,GAAWN,OAAX;EACAX,IAAI;AACL,CANM;;;;AAQA,MAAMsB,iBAAiB,GAAG,OAAOxB,GAAP,EAAYC,GAAZ,EAAiBC,IAAjB,KAA0B;EACzD,MAAM;IACJG,SADI;IACOC,QADP;IACiBmB,iBADjB;IACoCC;EADpC,IAEF1B,GAAG,CAACO,IAFR;EAGA,MAAMe,UAAU,GAAG,MAAML,IAAI,CAACM,aAAL,CAAmBvB,GAAnB,CAAzB;EACA,MAAM;IAAEG;EAAF,IAAemB,UAArB;EACA,MAAMd,WAAW,GAAG;IAClBH,SADkB;IAElBC,QAFkB;IAGlBmB,iBAHkB;IAIlBC,KAJkB;IAKlBvB;EALkB,CAApB;EAOA,MAAMW,WAAW,CAACU,iBAAZ,CAA8BhB,WAA9B,CAAN;EACAP,GAAG,CAACkB,IAAJ,GAAW,EACT,GAAGX;EADM,CAAX;EAGAN,IAAI;AACL,CAlBM"}},"mtime":1653643634180},"{\"assumptions\":{},\"sourceRoot\":\"/Users/ramireddycharitha/git-explore/middlewares/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/ramireddycharitha/git-explore\",\"filename\":\"/Users/ramireddycharitha/git-explore/middlewares/Auth.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"default\",\"root\":\"/Users/ramireddycharitha/git-explore\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.17.10:default":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.setMetrics = exports.getSessionObj = exports.createSessionObj = exports.checks = void 0;\n\nvar _path = _interopRequireDefault(require(\"path\"));\n\nvar _jsonwebtoken = _interopRequireDefault(require(\"jsonwebtoken\"));\n\nvar _fs = _interopRequireDefault(require(\"fs\"));\n\nvar _crypto = _interopRequireDefault(require(\"crypto\"));\n\nvar Constants = _interopRequireWildcard(require(\"../constants/Constants\"));\n\nvar ErrorUtils = _interopRequireWildcard(require(\"../errors/ErrorUtils\"));\n\nvar AbstractModels = _interopRequireWildcard(require(\"../models/AbstractModels\"));\n\nvar _index = require(\"../models/mainDbSchema/index\");\n\nvar _RedisClient = require(\"../connections/RedisClient\");\n\nvar _Credentials = require(\"../constants/Credentials\");\n\nvar _Keys = require(\"../constants/Keys\");\n\nvar _util = require(\"util\");\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst httpContext = require(\"express-http-context\"); // Static data can be read using require or fs\n\n\nlet newSessionRoutes = _fs.default.readFileSync(_path.default.resolve(__dirname, \"NewSessionRoutes.json\"), \"utf8\");\n\nnewSessionRoutes = JSON.parse(newSessionRoutes);\n\nlet authenticatedRoutes = _fs.default.readFileSync(_path.default.resolve(__dirname, \"./AuthenticatedRoutes.json\"), \"utf8\");\n\nauthenticatedRoutes = JSON.parse(authenticatedRoutes);\n\nconst uuid = require(\"uuid\");\n\nconst healthCheckRoutes = require(\"./HealthCheckRoutes.json\");\n\nconst noAPIKeyRoutes = require(\"./NoClientIdRoutes.json\");\n\nconst noSessionRoutes = require(\"./NoSessionRoutes.json\");\n\nconst routeMaps = [newSessionRoutes, authenticatedRoutes, noSessionRoutes, noAPIKeyRoutes, healthCheckRoutes];\n\nconst getRouteCategory = routeMapsIndex => {\n  let routeCategory = \"others\";\n\n  if (routeMapsIndex === 0) {\n    routeCategory = \"newSessionRoutes\";\n  } else if (routeMapsIndex === 1) {\n    routeCategory = \"authenticatedRoutes\";\n  } else if (routeMapsIndex === 2) {\n    routeCategory = \"noSessionRoutes\";\n  } else if (routeMapsIndex === 3) {\n    routeCategory = \"noAPIKeyRoutes\";\n  } else if (routeMapsIndex === 4) {\n    routeCategory = \"healthCheckRoutes\";\n  }\n\n  return routeCategory;\n};\n\nconst checkApiKeyValidity = async req => {\n  const apiKey = req.header(_Keys.HEADER_API_KEY);\n  console.log(\"******************\" + apiKey);\n  const selectCondition = {\n    metro_auth_key: apiKey\n  };\n  console.log(\"+++++++++++++++++++\" + JSON.stringify(selectCondition));\n  const projectCondition = {\n    metro_auth_key: 1,\n    _id: 0\n  };\n  console.log(\"+++++++++++++++++++\" + JSON.stringify(projectCondition));\n  const isValidAPIKey = await AbstractModels.mongoFindOne(_index.Clients, selectCondition, projectCondition);\n  console.log(\"********************\" + isValidAPIKey);\n  return isValidAPIKey;\n};\n\nconst getRedisSession = async sessionId => {\n  try {\n    // @hotfix: For backward compatibility preprending \"sess:\" to sessionId\n    const redisSession = await _RedisClient.RedisClient.get(`sess:${sessionId}`);\n    return redisSession;\n  } catch (error) {\n    log(\"error\", {\n      error\n    });\n    throw ErrorUtils.redisConnectionError();\n  }\n};\n\nconst decrypt = text => {\n  let resultChiper = \"\";\n\n  const decipher = _crypto.default.createDecipher(_Credentials.ALGORITHM, _Credentials.PASSWORD); // console.log(\"+++++++++++++ length is \"+ text,text.length);\n\n\n  resultChiper = decipher.update(text, \"hex\", \"utf8\");\n  resultChiper += decipher.final(\"utf8\");\n  return resultChiper;\n};\n\nconst getSessionObj = async req => {\n  const sessiontoken = req.header(_Keys.HEADER_SESSION_TOKEN);\n  if (!sessiontoken) throw ErrorUtils.InvalidSessionToken(); // const session = jwt.verify(sessiontoken, SECREAT);\n\n  const sessionId = decrypt(sessiontoken);\n  let session = await getRedisSession(sessionId);\n  log(\"info\", {\n    session,\n    sessionId,\n    sessiontoken\n  });\n\n  if (!session) {\n    throw ErrorUtils.InvalidSessionToken();\n  }\n\n  try {\n    session = JSON.parse(session);\n  } catch (error) {\n    throw ErrorUtils.InvalidSessionToken();\n  }\n\n  console.log(\"the returned value formthe session is +++++++++++++++\" + session);\n  return session;\n};\n\nexports.getSessionObj = getSessionObj;\n\nconst getRouteObj = (originalUrl, httpMethod) => {\n  let routeObj = {};\n  const normalizedURL = originalUrl.toLowerCase().split(\"?\")[0];\n  const index = normalizedURL.lastIndexOf(\"/\");\n  const baseURL = normalizedURL.substring(0, index);\n  let isRouteObjFound = false;\n\n  for (let i = 0; i < routeMaps.length; i++) {\n    const routeMap = routeMaps[i];\n\n    if (routeMap && routeMap[httpMethod]) {\n      if (routeMap[httpMethod][normalizedURL]) {\n        routeObj = routeMap[httpMethod][normalizedURL];\n        isRouteObjFound = true;\n      } else if (routeMap[httpMethod][`${baseURL}/:param`] && index !== normalizedURL.length - 1) {\n        routeObj = routeMap[httpMethod][`${baseURL}/:param`];\n        isRouteObjFound = true;\n      }\n\n      if (isRouteObjFound) {\n        routeObj.httpMethod = httpMethod;\n        routeObj.baseURL = baseURL;\n        routeObj.normalizedURL = normalizedURL;\n        routeObj.routeCategory = getRouteCategory(i);\n        break;\n      }\n    }\n  } // If route is not found from RoutesMap it shoud be treated as others\n\n\n  if (!isRouteObjFound) {\n    routeObj.httpMethod = httpMethod;\n    routeObj.baseURL = baseURL;\n    routeObj.normalizedURL = normalizedURL;\n    routeObj.routeCategory = \"others\";\n  }\n\n  return routeObj;\n}; // @hotfix: For backward compatibility\n// Business & consumer user roles are stored in different keys in session\n// Possible values for users_business_portal_role are \"admin\" & \"user\"\n\n\nasync function getUserRoles(req) {\n  const session = await getSessionObj(req); // console.log('*****************************'+JSON.stringify(session));\n\n  const {\n    users_business_portal_role: userRoles\n  } = session; // console.log(\"+++++++++++ the role of user is \"+JSON.stringify(userRoles))\n\n  return [].concat(userRoles).map(value => value.toUpperCase());\n}\n\nconst checkAutorization = async req => {\n  let isAuthorizedToAccessRoute = false; // console.log(\"in the check authorization rule--------------------------\");\n\n  const userRoles = await getUserRoles(req);\n  const routeAutorizedRoles = req.routeObj?.roles || [];\n\n  if (routeAutorizedRoles?.filter(value => userRoles.includes(value.toUpperCase()))?.length > 0) {\n    isAuthorizedToAccessRoute = true;\n  }\n\n  return isAuthorizedToAccessRoute;\n};\n\nconst checkBlockListedUser = async () => {\n  // @hotfix: Rewrite this logic according to service need\n  const isBlockedUser = false;\n  return isBlockedUser; // let isBlockedUser = false;\n  // const session = await getSessionObj(req);\n  // const { mobileNo } = session;\n  // const selectCondition = {\n  //   mobileNo,\n  //   isBlockedUser: true,\n  // };\n  // const projectCondition = {\n  //   mobileNo: 1,\n  //   _id: 0,\n  // };\n  // const userObj = await AbstractModels.mongoFindOne(\n  //   Users,\n  //   selectCondition,\n  //   projectCondition,\n  // );\n  // if (userObj) {\n  //   isBlockedUser = true;\n  // }\n  // return isBlockedUser;\n};\n\nconst createSessionObj = data => {\n  const session = _jsonwebtoken.default.sign(data, _Credentials.SECREAT, {\n    expiresIn: 60 * 60 * 24 * 30\n  }); // default is in sec\n\n\n  return session;\n};\n/*\n1.newSessionRoutes\n2.authenticatedRoutes(api key check,sessoin token check,Authorize check,blocklist users check)\n3.noSessionRoutes(api key check)\n4.noAPIKeyRoutes\n5.healthCheckRoutes(Dont' store Audits)\n6.others\n\nFor each req store req, res audits\n*/\n\n\nexports.createSessionObj = createSessionObj;\n\nconst checks = async (req, res, next) => {\n  const {\n    routeCategory\n  } = req.routeObj;\n  console.log(\"++++++++++++++++++++++++THIS IS ROUTE CATEGORY          \" + routeCategory);\n\n  if (routeCategory === \"others\") {\n    const error = ErrorUtils.InvalidRequest();\n    next(error);\n  } else if (routeCategory === \"healthCheckRoutes\") {\n    next();\n  } else if (routeCategory === \"noAPIKeyRoutes\") {\n    next();\n  } else if (routeCategory === \"noSessionRoutes\" || routeCategory === \"newSessionRoutes\") {\n    const isValidAPIKey = await checkApiKeyValidity(req);\n\n    if (!isValidAPIKey) {\n      const error = ErrorUtils.InvalidAPIKey();\n      next(error);\n    } else {\n      next();\n    }\n  } else if (routeCategory === \"authenticatedRoutes\") {\n    // 1.api key check 2.session token check 3.autorization check 4.blocklisted user check\n    const isValidAPIKey = await checkApiKeyValidity(req);\n    const session = await getSessionObj(req);\n\n    if (!session) {\n      const error = ErrorUtils.InvalidSessionToken();\n      next(error);\n    } else {\n      const isAuthorizedToAccessRoute = await checkAutorization(req); // console.log('***************** is authorized user '+isAuthorizedToAccessRoute);\n\n      const isBlockListeduser = await checkBlockListedUser();\n\n      if (!isValidAPIKey) {\n        const error = ErrorUtils.InvalidAPIKey();\n        next(error);\n      } else if (isBlockListeduser) {\n        const error = ErrorUtils.BlockListedUser();\n        next(error);\n      } else if (!isAuthorizedToAccessRoute) {\n        const error = ErrorUtils.InvalidAuthorization();\n        next(error);\n      } else {\n        req.sesssion = session;\n        next();\n      }\n    }\n  }\n};\n\nexports.checks = checks;\n\nconst setMetrics = (req, res) => {\n  const {\n    originalUrl\n  } = req;\n  const httpMethod = req.method;\n  const routeObj = getRouteObj(originalUrl, httpMethod); // console.log(\"CHecking++++++++++++ \"+JSON.stringify(routeObj));\n\n  routeObj.startTime = new Date().getTime();\n  let correlationId = req.get(Constants.LOGGER_CORRELATIONID);\n\n  if (!correlationId) {\n    // generate and set uuid v4 version\n    correlationId = uuid.v4();\n    httpContext.set(Constants.LOGGER_CORRELATIONID, correlationId); // inject correlationId in headers\n\n    req.headers.correlationId = httpContext.get(Constants.LOGGER_CORRELATIONID);\n    res.set(\"CorrelationId\", httpContext.get(Constants.LOGGER_CORRELATIONID));\n  }\n\n  return routeObj;\n};\n\nexports.setMetrics = setMetrics;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJodHRwQ29udGV4dCIsInJlcXVpcmUiLCJuZXdTZXNzaW9uUm91dGVzIiwiZnMiLCJyZWFkRmlsZVN5bmMiLCJwYXRoIiwicmVzb2x2ZSIsIl9fZGlybmFtZSIsIkpTT04iLCJwYXJzZSIsImF1dGhlbnRpY2F0ZWRSb3V0ZXMiLCJ1dWlkIiwiaGVhbHRoQ2hlY2tSb3V0ZXMiLCJub0FQSUtleVJvdXRlcyIsIm5vU2Vzc2lvblJvdXRlcyIsInJvdXRlTWFwcyIsImdldFJvdXRlQ2F0ZWdvcnkiLCJyb3V0ZU1hcHNJbmRleCIsInJvdXRlQ2F0ZWdvcnkiLCJjaGVja0FwaUtleVZhbGlkaXR5IiwicmVxIiwiYXBpS2V5IiwiaGVhZGVyIiwiSEVBREVSX0FQSV9LRVkiLCJjb25zb2xlIiwibG9nIiwic2VsZWN0Q29uZGl0aW9uIiwibWV0cm9fYXV0aF9rZXkiLCJzdHJpbmdpZnkiLCJwcm9qZWN0Q29uZGl0aW9uIiwiX2lkIiwiaXNWYWxpZEFQSUtleSIsIkFic3RyYWN0TW9kZWxzIiwibW9uZ29GaW5kT25lIiwiQ2xpZW50cyIsImdldFJlZGlzU2Vzc2lvbiIsInNlc3Npb25JZCIsInJlZGlzU2Vzc2lvbiIsIlJlZGlzQ2xpZW50IiwiZ2V0IiwiZXJyb3IiLCJFcnJvclV0aWxzIiwicmVkaXNDb25uZWN0aW9uRXJyb3IiLCJkZWNyeXB0IiwidGV4dCIsInJlc3VsdENoaXBlciIsImRlY2lwaGVyIiwiY3J5cHRvIiwiY3JlYXRlRGVjaXBoZXIiLCJBTEdPUklUSE0iLCJQQVNTV09SRCIsInVwZGF0ZSIsImZpbmFsIiwiZ2V0U2Vzc2lvbk9iaiIsInNlc3Npb250b2tlbiIsIkhFQURFUl9TRVNTSU9OX1RPS0VOIiwiSW52YWxpZFNlc3Npb25Ub2tlbiIsInNlc3Npb24iLCJnZXRSb3V0ZU9iaiIsIm9yaWdpbmFsVXJsIiwiaHR0cE1ldGhvZCIsInJvdXRlT2JqIiwibm9ybWFsaXplZFVSTCIsInRvTG93ZXJDYXNlIiwic3BsaXQiLCJpbmRleCIsImxhc3RJbmRleE9mIiwiYmFzZVVSTCIsInN1YnN0cmluZyIsImlzUm91dGVPYmpGb3VuZCIsImkiLCJsZW5ndGgiLCJyb3V0ZU1hcCIsImdldFVzZXJSb2xlcyIsInVzZXJzX2J1c2luZXNzX3BvcnRhbF9yb2xlIiwidXNlclJvbGVzIiwiY29uY2F0IiwibWFwIiwidmFsdWUiLCJ0b1VwcGVyQ2FzZSIsImNoZWNrQXV0b3JpemF0aW9uIiwiaXNBdXRob3JpemVkVG9BY2Nlc3NSb3V0ZSIsInJvdXRlQXV0b3JpemVkUm9sZXMiLCJyb2xlcyIsImZpbHRlciIsImluY2x1ZGVzIiwiY2hlY2tCbG9ja0xpc3RlZFVzZXIiLCJpc0Jsb2NrZWRVc2VyIiwiY3JlYXRlU2Vzc2lvbk9iaiIsImRhdGEiLCJqd3QiLCJzaWduIiwiU0VDUkVBVCIsImV4cGlyZXNJbiIsImNoZWNrcyIsInJlcyIsIm5leHQiLCJJbnZhbGlkUmVxdWVzdCIsIkludmFsaWRBUElLZXkiLCJpc0Jsb2NrTGlzdGVkdXNlciIsIkJsb2NrTGlzdGVkVXNlciIsIkludmFsaWRBdXRob3JpemF0aW9uIiwic2Vzc3Npb24iLCJzZXRNZXRyaWNzIiwibWV0aG9kIiwic3RhcnRUaW1lIiwiRGF0ZSIsImdldFRpbWUiLCJjb3JyZWxhdGlvbklkIiwiQ29uc3RhbnRzIiwiTE9HR0VSX0NPUlJFTEFUSU9OSUQiLCJ2NCIsInNldCIsImhlYWRlcnMiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy9yYW1pcmVkZHljaGFyaXRoYS9naXQtZXhwbG9yZS9taWRkbGV3YXJlcy8iLCJzb3VyY2VzIjpbIkF1dGguanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHBhdGggZnJvbSBcInBhdGhcIjtcbmltcG9ydCBqd3QgZnJvbSBcImpzb253ZWJ0b2tlblwiO1xuaW1wb3J0IGZzIGZyb20gXCJmc1wiO1xuaW1wb3J0IGNyeXB0byBmcm9tIFwiY3J5cHRvXCI7XG5pbXBvcnQgKiBhcyBDb25zdGFudHMgZnJvbSBcIi4uL2NvbnN0YW50cy9Db25zdGFudHNcIjtcblxuaW1wb3J0ICogYXMgRXJyb3JVdGlscyBmcm9tIFwiLi4vZXJyb3JzL0Vycm9yVXRpbHNcIjtcbmltcG9ydCAqIGFzIEFic3RyYWN0TW9kZWxzIGZyb20gXCIuLi9tb2RlbHMvQWJzdHJhY3RNb2RlbHNcIjtcbmltcG9ydCB7IENsaWVudHMgfSBmcm9tIFwiLi4vbW9kZWxzL21haW5EYlNjaGVtYS9pbmRleFwiO1xuXG5pbXBvcnQgeyBSZWRpc0NsaWVudCB9IGZyb20gXCIuLi9jb25uZWN0aW9ucy9SZWRpc0NsaWVudFwiO1xuXG5pbXBvcnQge1xuICBTRUNSRUFULCBBTEdPUklUSE0sIFBBU1NXT1JELFxufSBmcm9tIFwiLi4vY29uc3RhbnRzL0NyZWRlbnRpYWxzXCI7XG5cbmltcG9ydCB7XG4gIEhFQURFUl9BUElfS0VZLCBIRUFERVJfU0VTU0lPTl9UT0tFTixcbn0gZnJvbSBcIi4uL2NvbnN0YW50cy9LZXlzXCI7XG5pbXBvcnQgeyBkZXByZWNhdGUgfSBmcm9tIFwidXRpbFwiO1xuXG5jb25zdCBodHRwQ29udGV4dCA9IHJlcXVpcmUoXCJleHByZXNzLWh0dHAtY29udGV4dFwiKTtcblxuLy8gU3RhdGljIGRhdGEgY2FuIGJlIHJlYWQgdXNpbmcgcmVxdWlyZSBvciBmc1xubGV0IG5ld1Nlc3Npb25Sb3V0ZXMgPSBmcy5yZWFkRmlsZVN5bmMoXG4gIHBhdGgucmVzb2x2ZShfX2Rpcm5hbWUsIFwiTmV3U2Vzc2lvblJvdXRlcy5qc29uXCIpLFxuICBcInV0ZjhcIixcbik7XG5uZXdTZXNzaW9uUm91dGVzID0gSlNPTi5wYXJzZShuZXdTZXNzaW9uUm91dGVzKTtcblxubGV0IGF1dGhlbnRpY2F0ZWRSb3V0ZXMgPSBmcy5yZWFkRmlsZVN5bmMoXG4gIHBhdGgucmVzb2x2ZShfX2Rpcm5hbWUsIFwiLi9BdXRoZW50aWNhdGVkUm91dGVzLmpzb25cIiksXG4gIFwidXRmOFwiLFxuKTtcbmF1dGhlbnRpY2F0ZWRSb3V0ZXMgPSBKU09OLnBhcnNlKGF1dGhlbnRpY2F0ZWRSb3V0ZXMpO1xuXG5jb25zdCB1dWlkID0gcmVxdWlyZShcInV1aWRcIik7XG5jb25zdCBoZWFsdGhDaGVja1JvdXRlcyA9IHJlcXVpcmUoXCIuL0hlYWx0aENoZWNrUm91dGVzLmpzb25cIik7XG5jb25zdCBub0FQSUtleVJvdXRlcyA9IHJlcXVpcmUoXCIuL05vQ2xpZW50SWRSb3V0ZXMuanNvblwiKTtcbmNvbnN0IG5vU2Vzc2lvblJvdXRlcyA9IHJlcXVpcmUoXCIuL05vU2Vzc2lvblJvdXRlcy5qc29uXCIpO1xuXG5jb25zdCByb3V0ZU1hcHMgPSBbXG4gIG5ld1Nlc3Npb25Sb3V0ZXMsXG4gIGF1dGhlbnRpY2F0ZWRSb3V0ZXMsXG4gIG5vU2Vzc2lvblJvdXRlcyxcbiAgbm9BUElLZXlSb3V0ZXMsXG4gIGhlYWx0aENoZWNrUm91dGVzLFxuXTtcblxuY29uc3QgZ2V0Um91dGVDYXRlZ29yeSA9IChyb3V0ZU1hcHNJbmRleCkgPT4ge1xuICBsZXQgcm91dGVDYXRlZ29yeSA9IFwib3RoZXJzXCI7XG4gIGlmIChyb3V0ZU1hcHNJbmRleCA9PT0gMCkge1xuICAgIHJvdXRlQ2F0ZWdvcnkgPSBcIm5ld1Nlc3Npb25Sb3V0ZXNcIjtcbiAgfSBlbHNlIGlmIChyb3V0ZU1hcHNJbmRleCA9PT0gMSkge1xuICAgIHJvdXRlQ2F0ZWdvcnkgPSBcImF1dGhlbnRpY2F0ZWRSb3V0ZXNcIjtcbiAgfSBlbHNlIGlmIChyb3V0ZU1hcHNJbmRleCA9PT0gMikge1xuICAgIHJvdXRlQ2F0ZWdvcnkgPSBcIm5vU2Vzc2lvblJvdXRlc1wiO1xuICB9IGVsc2UgaWYgKHJvdXRlTWFwc0luZGV4ID09PSAzKSB7XG4gICAgcm91dGVDYXRlZ29yeSA9IFwibm9BUElLZXlSb3V0ZXNcIjtcbiAgfSBlbHNlIGlmIChyb3V0ZU1hcHNJbmRleCA9PT0gNCkge1xuICAgIHJvdXRlQ2F0ZWdvcnkgPSBcImhlYWx0aENoZWNrUm91dGVzXCI7XG4gIH1cbiAgcmV0dXJuIHJvdXRlQ2F0ZWdvcnk7XG59O1xuXG5jb25zdCBjaGVja0FwaUtleVZhbGlkaXR5ID0gYXN5bmMgKHJlcSkgPT4ge1xuICBjb25zdCBhcGlLZXkgPSByZXEuaGVhZGVyKEhFQURFUl9BUElfS0VZKTtcbiAgY29uc29sZS5sb2coXCIqKioqKioqKioqKioqKioqKipcIithcGlLZXkpO1xuICBjb25zdCBzZWxlY3RDb25kaXRpb24gPSB7XG4gICAgbWV0cm9fYXV0aF9rZXk6IGFwaUtleSxcbiAgfTtcbiAgY29uc29sZS5sb2coXCIrKysrKysrKysrKysrKysrKysrXCIrSlNPTi5zdHJpbmdpZnkoc2VsZWN0Q29uZGl0aW9uKSk7XG4gIGNvbnN0IHByb2plY3RDb25kaXRpb24gPSB7XG4gICAgbWV0cm9fYXV0aF9rZXk6IDEsXG4gICAgX2lkOiAwLFxuICB9O1xuICBjb25zb2xlLmxvZyhcIisrKysrKysrKysrKysrKysrKytcIitKU09OLnN0cmluZ2lmeShwcm9qZWN0Q29uZGl0aW9uKSk7XG4gIGNvbnN0IGlzVmFsaWRBUElLZXkgPSBhd2FpdCBBYnN0cmFjdE1vZGVscy5tb25nb0ZpbmRPbmUoXG4gICAgQ2xpZW50cyxcbiAgICBzZWxlY3RDb25kaXRpb24sXG4gICAgcHJvamVjdENvbmRpdGlvbixcbiAgKTtcbiAgY29uc29sZS5sb2coXCIqKioqKioqKioqKioqKioqKioqKlwiK2lzVmFsaWRBUElLZXkpO1xuICByZXR1cm4gaXNWYWxpZEFQSUtleTtcbn07XG5cbmNvbnN0IGdldFJlZGlzU2Vzc2lvbiA9IGFzeW5jIChzZXNzaW9uSWQpID0+IHtcbiAgdHJ5IHtcbiAgICAvLyBAaG90Zml4OiBGb3IgYmFja3dhcmQgY29tcGF0aWJpbGl0eSBwcmVwcmVuZGluZyBcInNlc3M6XCIgdG8gc2Vzc2lvbklkXG4gICAgY29uc3QgcmVkaXNTZXNzaW9uID0gYXdhaXQgUmVkaXNDbGllbnQuZ2V0KGBzZXNzOiR7c2Vzc2lvbklkfWApO1xuICAgIHJldHVybiByZWRpc1Nlc3Npb247XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgbG9nKFwiZXJyb3JcIiwgeyBlcnJvciB9KTtcbiAgICB0aHJvdyBFcnJvclV0aWxzLnJlZGlzQ29ubmVjdGlvbkVycm9yKCk7XG4gIH1cbn07XG5cbmNvbnN0IGRlY3J5cHQgPSAodGV4dCkgPT4ge1xuICBsZXQgcmVzdWx0Q2hpcGVyID0gXCJcIjtcbiAgY29uc3QgZGVjaXBoZXIgPSBjcnlwdG8uY3JlYXRlRGVjaXBoZXIoQUxHT1JJVEhNLCBQQVNTV09SRCk7XG4gIC8vIGNvbnNvbGUubG9nKFwiKysrKysrKysrKysrKyBsZW5ndGggaXMgXCIrIHRleHQsdGV4dC5sZW5ndGgpO1xuICByZXN1bHRDaGlwZXIgPSBkZWNpcGhlci51cGRhdGUodGV4dCwgXCJoZXhcIiwgXCJ1dGY4XCIpO1xuICByZXN1bHRDaGlwZXIgKz0gZGVjaXBoZXIuZmluYWwoXCJ1dGY4XCIpO1xuICByZXR1cm4gcmVzdWx0Q2hpcGVyO1xufTtcblxuZXhwb3J0IGNvbnN0IGdldFNlc3Npb25PYmogPSBhc3luYyAocmVxKSA9PiB7XG4gIGNvbnN0IHNlc3Npb250b2tlbiA9IHJlcS5oZWFkZXIoSEVBREVSX1NFU1NJT05fVE9LRU4pO1xuICBpZiAoIXNlc3Npb250b2tlbikgdGhyb3cgRXJyb3JVdGlscy5JbnZhbGlkU2Vzc2lvblRva2VuKCk7XG4gIC8vIGNvbnN0IHNlc3Npb24gPSBqd3QudmVyaWZ5KHNlc3Npb250b2tlbiwgU0VDUkVBVCk7XG5cbiAgY29uc3Qgc2Vzc2lvbklkID0gZGVjcnlwdChzZXNzaW9udG9rZW4pO1xuICBsZXQgc2Vzc2lvbiA9IGF3YWl0IGdldFJlZGlzU2Vzc2lvbihzZXNzaW9uSWQpO1xuICBsb2coXCJpbmZvXCIsIHsgc2Vzc2lvbiwgc2Vzc2lvbklkLCBzZXNzaW9udG9rZW4gfSk7XG5cbiAgaWYgKCFzZXNzaW9uKSB7XG4gICAgdGhyb3cgRXJyb3JVdGlscy5JbnZhbGlkU2Vzc2lvblRva2VuKCk7XG4gIH1cbiAgdHJ5IHtcbiAgICBzZXNzaW9uID0gSlNPTi5wYXJzZShzZXNzaW9uKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICB0aHJvdyBFcnJvclV0aWxzLkludmFsaWRTZXNzaW9uVG9rZW4oKTtcbiAgfVxuICBjb25zb2xlLmxvZyhcInRoZSByZXR1cm5lZCB2YWx1ZSBmb3JtdGhlIHNlc3Npb24gaXMgKysrKysrKysrKysrKysrXCIrc2Vzc2lvbik7XG4gIHJldHVybiBzZXNzaW9uO1xufTtcbmNvbnN0IGdldFJvdXRlT2JqID0gKG9yaWdpbmFsVXJsLCBodHRwTWV0aG9kKSA9PiB7XG4gIGxldCByb3V0ZU9iaiA9IHt9O1xuICBjb25zdCBub3JtYWxpemVkVVJMID0gb3JpZ2luYWxVcmwudG9Mb3dlckNhc2UoKS5zcGxpdChcIj9cIilbMF07XG4gIGNvbnN0IGluZGV4ID0gbm9ybWFsaXplZFVSTC5sYXN0SW5kZXhPZihcIi9cIik7XG4gIGNvbnN0IGJhc2VVUkwgPSBub3JtYWxpemVkVVJMLnN1YnN0cmluZygwLCBpbmRleCk7XG4gIGxldCBpc1JvdXRlT2JqRm91bmQgPSBmYWxzZTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCByb3V0ZU1hcHMubGVuZ3RoOyBpKyspIHtcbiAgICBjb25zdCByb3V0ZU1hcCA9IHJvdXRlTWFwc1tpXTtcbiAgICBpZiAocm91dGVNYXAgJiYgcm91dGVNYXBbaHR0cE1ldGhvZF0pIHtcbiAgICAgIGlmIChyb3V0ZU1hcFtodHRwTWV0aG9kXVtub3JtYWxpemVkVVJMXSkge1xuICAgICAgICByb3V0ZU9iaiA9IHJvdXRlTWFwW2h0dHBNZXRob2RdW25vcm1hbGl6ZWRVUkxdO1xuICAgICAgICBpc1JvdXRlT2JqRm91bmQgPSB0cnVlO1xuICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgcm91dGVNYXBbaHR0cE1ldGhvZF1bYCR7YmFzZVVSTH0vOnBhcmFtYF1cbiAgICAgICAgJiYgaW5kZXggIT09IG5vcm1hbGl6ZWRVUkwubGVuZ3RoIC0gMVxuICAgICAgKSB7XG4gICAgICAgIHJvdXRlT2JqID0gcm91dGVNYXBbaHR0cE1ldGhvZF1bYCR7YmFzZVVSTH0vOnBhcmFtYF07XG4gICAgICAgIGlzUm91dGVPYmpGb3VuZCA9IHRydWU7XG4gICAgICB9XG4gICAgICBpZiAoaXNSb3V0ZU9iakZvdW5kKSB7XG4gICAgICAgIHJvdXRlT2JqLmh0dHBNZXRob2QgPSBodHRwTWV0aG9kO1xuICAgICAgICByb3V0ZU9iai5iYXNlVVJMID0gYmFzZVVSTDtcbiAgICAgICAgcm91dGVPYmoubm9ybWFsaXplZFVSTCA9IG5vcm1hbGl6ZWRVUkw7XG4gICAgICAgIHJvdXRlT2JqLnJvdXRlQ2F0ZWdvcnkgPSBnZXRSb3V0ZUNhdGVnb3J5KGkpO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgLy8gSWYgcm91dGUgaXMgbm90IGZvdW5kIGZyb20gUm91dGVzTWFwIGl0IHNob3VkIGJlIHRyZWF0ZWQgYXMgb3RoZXJzXG4gIGlmICghaXNSb3V0ZU9iakZvdW5kKSB7XG4gICAgcm91dGVPYmouaHR0cE1ldGhvZCA9IGh0dHBNZXRob2Q7XG4gICAgcm91dGVPYmouYmFzZVVSTCA9IGJhc2VVUkw7XG4gICAgcm91dGVPYmoubm9ybWFsaXplZFVSTCA9IG5vcm1hbGl6ZWRVUkw7XG4gICAgcm91dGVPYmoucm91dGVDYXRlZ29yeSA9IFwib3RoZXJzXCI7XG4gIH1cbiAgcmV0dXJuIHJvdXRlT2JqO1xufTtcblxuLy8gQGhvdGZpeDogRm9yIGJhY2t3YXJkIGNvbXBhdGliaWxpdHlcbi8vIEJ1c2luZXNzICYgY29uc3VtZXIgdXNlciByb2xlcyBhcmUgc3RvcmVkIGluIGRpZmZlcmVudCBrZXlzIGluIHNlc3Npb25cbi8vIFBvc3NpYmxlIHZhbHVlcyBmb3IgdXNlcnNfYnVzaW5lc3NfcG9ydGFsX3JvbGUgYXJlIFwiYWRtaW5cIiAmIFwidXNlclwiXG5hc3luYyBmdW5jdGlvbiBnZXRVc2VyUm9sZXMocmVxKSB7XG4gIGNvbnN0IHNlc3Npb24gPSBhd2FpdCBnZXRTZXNzaW9uT2JqKHJlcSk7XG4gIC8vIGNvbnNvbGUubG9nKCcqKioqKioqKioqKioqKioqKioqKioqKioqKioqKicrSlNPTi5zdHJpbmdpZnkoc2Vzc2lvbikpO1xuICBjb25zdCB7IHVzZXJzX2J1c2luZXNzX3BvcnRhbF9yb2xlOiB1c2VyUm9sZXMgfSA9IHNlc3Npb247XG4gIC8vIGNvbnNvbGUubG9nKFwiKysrKysrKysrKysgdGhlIHJvbGUgb2YgdXNlciBpcyBcIitKU09OLnN0cmluZ2lmeSh1c2VyUm9sZXMpKVxuICByZXR1cm4gW10uY29uY2F0KHVzZXJSb2xlcykubWFwKCh2YWx1ZSkgPT4gdmFsdWUudG9VcHBlckNhc2UoKSk7XG59XG5cbmNvbnN0IGNoZWNrQXV0b3JpemF0aW9uID0gYXN5bmMgKHJlcSkgPT4ge1xuICBsZXQgaXNBdXRob3JpemVkVG9BY2Nlc3NSb3V0ZSA9IGZhbHNlO1xuICAvLyBjb25zb2xlLmxvZyhcImluIHRoZSBjaGVjayBhdXRob3JpemF0aW9uIHJ1bGUtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVwiKTtcbiAgY29uc3QgdXNlclJvbGVzID0gYXdhaXQgZ2V0VXNlclJvbGVzKHJlcSk7XG4gIGNvbnN0IHJvdXRlQXV0b3JpemVkUm9sZXMgPSByZXEucm91dGVPYmo/LnJvbGVzIHx8IFtdO1xuICBpZiAocm91dGVBdXRvcml6ZWRSb2xlcz8uZmlsdGVyKCh2YWx1ZSkgPT4gdXNlclJvbGVzLmluY2x1ZGVzKHZhbHVlLnRvVXBwZXJDYXNlKCkpKT8ubGVuZ3RoID4gMCkge1xuICAgIGlzQXV0aG9yaXplZFRvQWNjZXNzUm91dGUgPSB0cnVlO1xuICB9XG4gIHJldHVybiBpc0F1dGhvcml6ZWRUb0FjY2Vzc1JvdXRlO1xufTtcblxuY29uc3QgY2hlY2tCbG9ja0xpc3RlZFVzZXIgPSBhc3luYyAoKSA9PiB7XG4gIC8vIEBob3RmaXg6IFJld3JpdGUgdGhpcyBsb2dpYyBhY2NvcmRpbmcgdG8gc2VydmljZSBuZWVkXG4gIGNvbnN0IGlzQmxvY2tlZFVzZXIgPSBmYWxzZTtcbiAgcmV0dXJuIGlzQmxvY2tlZFVzZXI7XG4gIC8vIGxldCBpc0Jsb2NrZWRVc2VyID0gZmFsc2U7XG4gIC8vIGNvbnN0IHNlc3Npb24gPSBhd2FpdCBnZXRTZXNzaW9uT2JqKHJlcSk7XG4gIC8vIGNvbnN0IHsgbW9iaWxlTm8gfSA9IHNlc3Npb247XG4gIC8vIGNvbnN0IHNlbGVjdENvbmRpdGlvbiA9IHtcbiAgLy8gICBtb2JpbGVObyxcbiAgLy8gICBpc0Jsb2NrZWRVc2VyOiB0cnVlLFxuICAvLyB9O1xuICAvLyBjb25zdCBwcm9qZWN0Q29uZGl0aW9uID0ge1xuICAvLyAgIG1vYmlsZU5vOiAxLFxuICAvLyAgIF9pZDogMCxcbiAgLy8gfTtcbiAgLy8gY29uc3QgdXNlck9iaiA9IGF3YWl0IEFic3RyYWN0TW9kZWxzLm1vbmdvRmluZE9uZShcbiAgLy8gICBVc2VycyxcbiAgLy8gICBzZWxlY3RDb25kaXRpb24sXG4gIC8vICAgcHJvamVjdENvbmRpdGlvbixcbiAgLy8gKTtcbiAgLy8gaWYgKHVzZXJPYmopIHtcbiAgLy8gICBpc0Jsb2NrZWRVc2VyID0gdHJ1ZTtcbiAgLy8gfVxuICAvLyByZXR1cm4gaXNCbG9ja2VkVXNlcjtcbn07XG5cbmV4cG9ydCBjb25zdCBjcmVhdGVTZXNzaW9uT2JqID0gKGRhdGEpID0+IHtcbiAgY29uc3Qgc2Vzc2lvbiA9IGp3dC5zaWduKGRhdGEsIFNFQ1JFQVQsIHsgZXhwaXJlc0luOiA2MCAqIDYwICogMjQgKiAzMCB9KTsgLy8gZGVmYXVsdCBpcyBpbiBzZWNcbiAgcmV0dXJuIHNlc3Npb247XG59O1xuXG4vKlxuMS5uZXdTZXNzaW9uUm91dGVzXG4yLmF1dGhlbnRpY2F0ZWRSb3V0ZXMoYXBpIGtleSBjaGVjayxzZXNzb2luIHRva2VuIGNoZWNrLEF1dGhvcml6ZSBjaGVjayxibG9ja2xpc3QgdXNlcnMgY2hlY2spXG4zLm5vU2Vzc2lvblJvdXRlcyhhcGkga2V5IGNoZWNrKVxuNC5ub0FQSUtleVJvdXRlc1xuNS5oZWFsdGhDaGVja1JvdXRlcyhEb250JyBzdG9yZSBBdWRpdHMpXG42Lm90aGVyc1xuXG5Gb3IgZWFjaCByZXEgc3RvcmUgcmVxLCByZXMgYXVkaXRzXG4qL1xuXG5leHBvcnQgY29uc3QgY2hlY2tzID0gYXN5bmMgKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gIGNvbnN0IHsgcm91dGVDYXRlZ29yeSB9ID0gcmVxLnJvdXRlT2JqO1xuICBjb25zb2xlLmxvZyhcIisrKysrKysrKysrKysrKysrKysrKysrK1RISVMgSVMgUk9VVEUgQ0FURUdPUlkgICAgICAgICAgXCIrcm91dGVDYXRlZ29yeSk7XG4gIGlmIChyb3V0ZUNhdGVnb3J5ID09PSBcIm90aGVyc1wiKSB7XG4gICAgY29uc3QgZXJyb3IgPSBFcnJvclV0aWxzLkludmFsaWRSZXF1ZXN0KCk7XG4gICAgbmV4dChlcnJvcik7XG4gIH0gZWxzZSBpZiAocm91dGVDYXRlZ29yeSA9PT0gXCJoZWFsdGhDaGVja1JvdXRlc1wiKSB7XG4gICAgbmV4dCgpO1xuICB9IGVsc2UgaWYgKHJvdXRlQ2F0ZWdvcnkgPT09IFwibm9BUElLZXlSb3V0ZXNcIikge1xuICAgIG5leHQoKTtcbiAgfSBlbHNlIGlmIChcbiAgICByb3V0ZUNhdGVnb3J5ID09PSBcIm5vU2Vzc2lvblJvdXRlc1wiXG4gICAgfHwgcm91dGVDYXRlZ29yeSA9PT0gXCJuZXdTZXNzaW9uUm91dGVzXCJcbiAgKSB7XG4gICAgY29uc3QgaXNWYWxpZEFQSUtleSA9IGF3YWl0IGNoZWNrQXBpS2V5VmFsaWRpdHkocmVxKTtcbiAgICBpZiAoIWlzVmFsaWRBUElLZXkpIHtcbiAgICAgIGNvbnN0IGVycm9yID0gRXJyb3JVdGlscy5JbnZhbGlkQVBJS2V5KCk7XG4gICAgICBuZXh0KGVycm9yKTtcbiAgICB9IGVsc2Uge1xuICAgICAgbmV4dCgpO1xuICAgIH1cbiAgfSBlbHNlIGlmIChyb3V0ZUNhdGVnb3J5ID09PSBcImF1dGhlbnRpY2F0ZWRSb3V0ZXNcIikge1xuICAgIC8vIDEuYXBpIGtleSBjaGVjayAyLnNlc3Npb24gdG9rZW4gY2hlY2sgMy5hdXRvcml6YXRpb24gY2hlY2sgNC5ibG9ja2xpc3RlZCB1c2VyIGNoZWNrXG4gICAgY29uc3QgaXNWYWxpZEFQSUtleSA9IGF3YWl0IGNoZWNrQXBpS2V5VmFsaWRpdHkocmVxKTtcbiAgICBjb25zdCBzZXNzaW9uID0gYXdhaXQgZ2V0U2Vzc2lvbk9iaihyZXEpO1xuICAgIGlmICghc2Vzc2lvbikge1xuICAgICAgY29uc3QgZXJyb3IgPSBFcnJvclV0aWxzLkludmFsaWRTZXNzaW9uVG9rZW4oKTtcbiAgICAgIG5leHQoZXJyb3IpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBpc0F1dGhvcml6ZWRUb0FjY2Vzc1JvdXRlID0gYXdhaXQgY2hlY2tBdXRvcml6YXRpb24ocmVxKTtcbiAgICAgIC8vIGNvbnNvbGUubG9nKCcqKioqKioqKioqKioqKioqKiBpcyBhdXRob3JpemVkIHVzZXIgJytpc0F1dGhvcml6ZWRUb0FjY2Vzc1JvdXRlKTtcbiAgICAgIGNvbnN0IGlzQmxvY2tMaXN0ZWR1c2VyID0gYXdhaXQgY2hlY2tCbG9ja0xpc3RlZFVzZXIoKTtcbiAgICAgIGlmICghaXNWYWxpZEFQSUtleSkge1xuICAgICAgICBjb25zdCBlcnJvciA9IEVycm9yVXRpbHMuSW52YWxpZEFQSUtleSgpO1xuICAgICAgICBuZXh0KGVycm9yKTtcbiAgICAgIH0gZWxzZSBpZiAoaXNCbG9ja0xpc3RlZHVzZXIpIHtcbiAgICAgICAgY29uc3QgZXJyb3IgPSBFcnJvclV0aWxzLkJsb2NrTGlzdGVkVXNlcigpO1xuICAgICAgICBuZXh0KGVycm9yKTtcbiAgICAgIH0gZWxzZSBpZiAoIWlzQXV0aG9yaXplZFRvQWNjZXNzUm91dGUpIHtcbiAgICAgICAgY29uc3QgZXJyb3IgPSBFcnJvclV0aWxzLkludmFsaWRBdXRob3JpemF0aW9uKCk7XG4gICAgICAgIG5leHQoZXJyb3IpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVxLnNlc3NzaW9uID0gc2Vzc2lvbjtcbiAgICAgICAgbmV4dCgpO1xuICAgICAgfVxuICAgIH1cbiAgfVxufTtcblxuZXhwb3J0IGNvbnN0IHNldE1ldHJpY3MgPSAocmVxLCByZXMpID0+IHtcbiAgY29uc3QgeyBvcmlnaW5hbFVybCB9ID0gcmVxO1xuICBjb25zdCBodHRwTWV0aG9kID0gcmVxLm1ldGhvZDtcbiAgY29uc3Qgcm91dGVPYmogPSBnZXRSb3V0ZU9iaihvcmlnaW5hbFVybCwgaHR0cE1ldGhvZCk7XG4gIC8vIGNvbnNvbGUubG9nKFwiQ0hlY2tpbmcrKysrKysrKysrKysgXCIrSlNPTi5zdHJpbmdpZnkocm91dGVPYmopKTtcbiAgcm91dGVPYmouc3RhcnRUaW1lID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG5cbiAgbGV0IGNvcnJlbGF0aW9uSWQgPSByZXEuZ2V0KENvbnN0YW50cy5MT0dHRVJfQ09SUkVMQVRJT05JRCk7XG4gIGlmICghY29ycmVsYXRpb25JZCkge1xuICAgIC8vIGdlbmVyYXRlIGFuZCBzZXQgdXVpZCB2NCB2ZXJzaW9uXG4gICAgY29ycmVsYXRpb25JZCA9IHV1aWQudjQoKTtcbiAgICBodHRwQ29udGV4dC5zZXQoQ29uc3RhbnRzLkxPR0dFUl9DT1JSRUxBVElPTklELCBjb3JyZWxhdGlvbklkKTtcbiAgICAvLyBpbmplY3QgY29ycmVsYXRpb25JZCBpbiBoZWFkZXJzXG4gICAgcmVxLmhlYWRlcnMuY29ycmVsYXRpb25JZCA9IGh0dHBDb250ZXh0LmdldChDb25zdGFudHMuTE9HR0VSX0NPUlJFTEFUSU9OSUQpO1xuICAgIHJlcy5zZXQoXCJDb3JyZWxhdGlvbklkXCIsIGh0dHBDb250ZXh0LmdldChDb25zdGFudHMuTE9HR0VSX0NPUlJFTEFUSU9OSUQpKTtcbiAgfVxuXG4gIHJldHVybiByb3V0ZU9iajtcbn07XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFFQTs7QUFDQTs7QUFDQTs7QUFFQTs7QUFFQTs7QUFJQTs7QUFHQTs7Ozs7Ozs7QUFFQSxNQUFNQSxXQUFXLEdBQUdDLE9BQU8sQ0FBQyxzQkFBRCxDQUEzQixDLENBRUE7OztBQUNBLElBQUlDLGdCQUFnQixHQUFHQyxZQUFHQyxZQUFILENBQ3JCQyxjQUFLQyxP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","map":{"version":3,"names":["httpContext","require","newSessionRoutes","fs","readFileSync","path","resolve","__dirname","JSON","parse","authenticatedRoutes","uuid","healthCheckRoutes","noAPIKeyRoutes","noSessionRoutes","routeMaps","getRouteCategory","routeMapsIndex","routeCategory","checkApiKeyValidity","req","apiKey","header","HEADER_API_KEY","console","log","selectCondition","metro_auth_key","stringify","projectCondition","_id","isValidAPIKey","AbstractModels","mongoFindOne","Clients","getRedisSession","sessionId","redisSession","RedisClient","get","error","ErrorUtils","redisConnectionError","decrypt","text","resultChiper","decipher","crypto","createDecipher","ALGORITHM","PASSWORD","update","final","getSessionObj","sessiontoken","HEADER_SESSION_TOKEN","InvalidSessionToken","session","getRouteObj","originalUrl","httpMethod","routeObj","normalizedURL","toLowerCase","split","index","lastIndexOf","baseURL","substring","isRouteObjFound","i","length","routeMap","getUserRoles","users_business_portal_role","userRoles","concat","map","value","toUpperCase","checkAutorization","isAuthorizedToAccessRoute","routeAutorizedRoles","roles","filter","includes","checkBlockListedUser","isBlockedUser","createSessionObj","data","jwt","sign","SECREAT","expiresIn","checks","res","next","InvalidRequest","InvalidAPIKey","isBlockListeduser","BlockListedUser","InvalidAuthorization","sesssion","setMetrics","method","startTime","Date","getTime","correlationId","Constants","LOGGER_CORRELATIONID","v4","set","headers"],"sourceRoot":"/Users/ramireddycharitha/git-explore/middlewares/","sources":["Auth.js"],"sourcesContent":["import path from \"path\";\nimport jwt from \"jsonwebtoken\";\nimport fs from \"fs\";\nimport crypto from \"crypto\";\nimport * as Constants from \"../constants/Constants\";\n\nimport * as ErrorUtils from \"../errors/ErrorUtils\";\nimport * as AbstractModels from \"../models/AbstractModels\";\nimport { Clients } from \"../models/mainDbSchema/index\";\n\nimport { RedisClient } from \"../connections/RedisClient\";\n\nimport {\n  SECREAT, ALGORITHM, PASSWORD,\n} from \"../constants/Credentials\";\n\nimport {\n  HEADER_API_KEY, HEADER_SESSION_TOKEN,\n} from \"../constants/Keys\";\nimport { deprecate } from \"util\";\n\nconst httpContext = require(\"express-http-context\");\n\n// Static data can be read using require or fs\nlet newSessionRoutes = fs.readFileSync(\n  path.resolve(__dirname, \"NewSessionRoutes.json\"),\n  \"utf8\",\n);\nnewSessionRoutes = JSON.parse(newSessionRoutes);\n\nlet authenticatedRoutes = fs.readFileSync(\n  path.resolve(__dirname, \"./AuthenticatedRoutes.json\"),\n  \"utf8\",\n);\nauthenticatedRoutes = JSON.parse(authenticatedRoutes);\n\nconst uuid = require(\"uuid\");\nconst healthCheckRoutes = require(\"./HealthCheckRoutes.json\");\nconst noAPIKeyRoutes = require(\"./NoClientIdRoutes.json\");\nconst noSessionRoutes = require(\"./NoSessionRoutes.json\");\n\nconst routeMaps = [\n  newSessionRoutes,\n  authenticatedRoutes,\n  noSessionRoutes,\n  noAPIKeyRoutes,\n  healthCheckRoutes,\n];\n\nconst getRouteCategory = (routeMapsIndex) => {\n  let routeCategory = \"others\";\n  if (routeMapsIndex === 0) {\n    routeCategory = \"newSessionRoutes\";\n  } else if (routeMapsIndex === 1) {\n    routeCategory = \"authenticatedRoutes\";\n  } else if (routeMapsIndex === 2) {\n    routeCategory = \"noSessionRoutes\";\n  } else if (routeMapsIndex === 3) {\n    routeCategory = \"noAPIKeyRoutes\";\n  } else if (routeMapsIndex === 4) {\n    routeCategory = \"healthCheckRoutes\";\n  }\n  return routeCategory;\n};\n\nconst checkApiKeyValidity = async (req) => {\n  const apiKey = req.header(HEADER_API_KEY);\n  console.log(\"******************\"+apiKey);\n  const selectCondition = {\n    metro_auth_key: apiKey,\n  };\n  console.log(\"+++++++++++++++++++\"+JSON.stringify(selectCondition));\n  const projectCondition = {\n    metro_auth_key: 1,\n    _id: 0,\n  };\n  console.log(\"+++++++++++++++++++\"+JSON.stringify(projectCondition));\n  const isValidAPIKey = await AbstractModels.mongoFindOne(\n    Clients,\n    selectCondition,\n    projectCondition,\n  );\n  console.log(\"********************\"+isValidAPIKey);\n  return isValidAPIKey;\n};\n\nconst getRedisSession = async (sessionId) => {\n  try {\n    // @hotfix: For backward compatibility preprending \"sess:\" to sessionId\n    const redisSession = await RedisClient.get(`sess:${sessionId}`);\n    return redisSession;\n  } catch (error) {\n    log(\"error\", { error });\n    throw ErrorUtils.redisConnectionError();\n  }\n};\n\nconst decrypt = (text) => {\n  let resultChiper = \"\";\n  const decipher = crypto.createDecipher(ALGORITHM, PASSWORD);\n  // console.log(\"+++++++++++++ length is \"+ text,text.length);\n  resultChiper = decipher.update(text, \"hex\", \"utf8\");\n  resultChiper += decipher.final(\"utf8\");\n  return resultChiper;\n};\n\nexport const getSessionObj = async (req) => {\n  const sessiontoken = req.header(HEADER_SESSION_TOKEN);\n  if (!sessiontoken) throw ErrorUtils.InvalidSessionToken();\n  // const session = jwt.verify(sessiontoken, SECREAT);\n\n  const sessionId = decrypt(sessiontoken);\n  let session = await getRedisSession(sessionId);\n  log(\"info\", { session, sessionId, sessiontoken });\n\n  if (!session) {\n    throw ErrorUtils.InvalidSessionToken();\n  }\n  try {\n    session = JSON.parse(session);\n  } catch (error) {\n    throw ErrorUtils.InvalidSessionToken();\n  }\n  console.log(\"the returned value formthe session is +++++++++++++++\"+session);\n  return session;\n};\nconst getRouteObj = (originalUrl, httpMethod) => {\n  let routeObj = {};\n  const normalizedURL = originalUrl.toLowerCase().split(\"?\")[0];\n  const index = normalizedURL.lastIndexOf(\"/\");\n  const baseURL = normalizedURL.substring(0, index);\n  let isRouteObjFound = false;\n  for (let i = 0; i < routeMaps.length; i++) {\n    const routeMap = routeMaps[i];\n    if (routeMap && routeMap[httpMethod]) {\n      if (routeMap[httpMethod][normalizedURL]) {\n        routeObj = routeMap[httpMethod][normalizedURL];\n        isRouteObjFound = true;\n      } else if (\n        routeMap[httpMethod][`${baseURL}/:param`]\n        && index !== normalizedURL.length - 1\n      ) {\n        routeObj = routeMap[httpMethod][`${baseURL}/:param`];\n        isRouteObjFound = true;\n      }\n      if (isRouteObjFound) {\n        routeObj.httpMethod = httpMethod;\n        routeObj.baseURL = baseURL;\n        routeObj.normalizedURL = normalizedURL;\n        routeObj.routeCategory = getRouteCategory(i);\n        break;\n      }\n    }\n  }\n  // If route is not found from RoutesMap it shoud be treated as others\n  if (!isRouteObjFound) {\n    routeObj.httpMethod = httpMethod;\n    routeObj.baseURL = baseURL;\n    routeObj.normalizedURL = normalizedURL;\n    routeObj.routeCategory = \"others\";\n  }\n  return routeObj;\n};\n\n// @hotfix: For backward compatibility\n// Business & consumer user roles are stored in different keys in session\n// Possible values for users_business_portal_role are \"admin\" & \"user\"\nasync function getUserRoles(req) {\n  const session = await getSessionObj(req);\n  // console.log('*****************************'+JSON.stringify(session));\n  const { users_business_portal_role: userRoles } = session;\n  // console.log(\"+++++++++++ the role of user is \"+JSON.stringify(userRoles))\n  return [].concat(userRoles).map((value) => value.toUpperCase());\n}\n\nconst checkAutorization = async (req) => {\n  let isAuthorizedToAccessRoute = false;\n  // console.log(\"in the check authorization rule--------------------------\");\n  const userRoles = await getUserRoles(req);\n  const routeAutorizedRoles = req.routeObj?.roles || [];\n  if (routeAutorizedRoles?.filter((value) => userRoles.includes(value.toUpperCase()))?.length > 0) {\n    isAuthorizedToAccessRoute = true;\n  }\n  return isAuthorizedToAccessRoute;\n};\n\nconst checkBlockListedUser = async () => {\n  // @hotfix: Rewrite this logic according to service need\n  const isBlockedUser = false;\n  return isBlockedUser;\n  // let isBlockedUser = false;\n  // const session = await getSessionObj(req);\n  // const { mobileNo } = session;\n  // const selectCondition = {\n  //   mobileNo,\n  //   isBlockedUser: true,\n  // };\n  // const projectCondition = {\n  //   mobileNo: 1,\n  //   _id: 0,\n  // };\n  // const userObj = await AbstractModels.mongoFindOne(\n  //   Users,\n  //   selectCondition,\n  //   projectCondition,\n  // );\n  // if (userObj) {\n  //   isBlockedUser = true;\n  // }\n  // return isBlockedUser;\n};\n\nexport const createSessionObj = (data) => {\n  const session = jwt.sign(data, SECREAT, { expiresIn: 60 * 60 * 24 * 30 }); // default is in sec\n  return session;\n};\n\n/*\n1.newSessionRoutes\n2.authenticatedRoutes(api key check,sessoin token check,Authorize check,blocklist users check)\n3.noSessionRoutes(api key check)\n4.noAPIKeyRoutes\n5.healthCheckRoutes(Dont' store Audits)\n6.others\n\nFor each req store req, res audits\n*/\n\nexport const checks = async (req, res, next) => {\n  const { routeCategory } = req.routeObj;\n  console.log(\"++++++++++++++++++++++++THIS IS ROUTE CATEGORY          \"+routeCategory);\n  if (routeCategory === \"others\") {\n    const error = ErrorUtils.InvalidRequest();\n    next(error);\n  } else if (routeCategory === \"healthCheckRoutes\") {\n    next();\n  } else if (routeCategory === \"noAPIKeyRoutes\") {\n    next();\n  } else if (\n    routeCategory === \"noSessionRoutes\"\n    || routeCategory === \"newSessionRoutes\"\n  ) {\n    const isValidAPIKey = await checkApiKeyValidity(req);\n    if (!isValidAPIKey) {\n      const error = ErrorUtils.InvalidAPIKey();\n      next(error);\n    } else {\n      next();\n    }\n  } else if (routeCategory === \"authenticatedRoutes\") {\n    // 1.api key check 2.session token check 3.autorization check 4.blocklisted user check\n    const isValidAPIKey = await checkApiKeyValidity(req);\n    const session = await getSessionObj(req);\n    if (!session) {\n      const error = ErrorUtils.InvalidSessionToken();\n      next(error);\n    } else {\n      const isAuthorizedToAccessRoute = await checkAutorization(req);\n      // console.log('***************** is authorized user '+isAuthorizedToAccessRoute);\n      const isBlockListeduser = await checkBlockListedUser();\n      if (!isValidAPIKey) {\n        const error = ErrorUtils.InvalidAPIKey();\n        next(error);\n      } else if (isBlockListeduser) {\n        const error = ErrorUtils.BlockListedUser();\n        next(error);\n      } else if (!isAuthorizedToAccessRoute) {\n        const error = ErrorUtils.InvalidAuthorization();\n        next(error);\n      } else {\n        req.sesssion = session;\n        next();\n      }\n    }\n  }\n};\n\nexport const setMetrics = (req, res) => {\n  const { originalUrl } = req;\n  const httpMethod = req.method;\n  const routeObj = getRouteObj(originalUrl, httpMethod);\n  // console.log(\"CHecking++++++++++++ \"+JSON.stringify(routeObj));\n  routeObj.startTime = new Date().getTime();\n\n  let correlationId = req.get(Constants.LOGGER_CORRELATIONID);\n  if (!correlationId) {\n    // generate and set uuid v4 version\n    correlationId = uuid.v4();\n    httpContext.set(Constants.LOGGER_CORRELATIONID, correlationId);\n    // inject correlationId in headers\n    req.headers.correlationId = httpContext.get(Constants.LOGGER_CORRELATIONID);\n    res.set(\"CorrelationId\", httpContext.get(Constants.LOGGER_CORRELATIONID));\n  }\n\n  return routeObj;\n};\n"],"mappings":"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"}},"mtime":1654085554340},"{\"assumptions\":{},\"sourceRoot\":\"/Users/ramireddycharitha/git-explore/errors/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/ramireddycharitha/git-explore\",\"filename\":\"/Users/ramireddycharitha/git-explore/errors/ErrorUtils.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"default\",\"root\":\"/Users/ramireddycharitha/git-explore\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.17.10:default":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.BlockListedUser = BlockListedUser;\nexports.DataAlreadyExists = DataAlreadyExists;\nexports.DataNotFound = DataNotFound;\nexports.ExpiredUser = ExpiredUser;\nexports.IncorrectOTP = IncorrectOTP;\nexports.InternalServerError = InternalServerError;\nexports.InvalidAPIKey = InvalidAPIKey;\nexports.InvalidAuthorization = InvalidAuthorization;\nexports.InvalidPasswordError = InvalidPasswordError;\nexports.InvalidRequest = InvalidRequest;\nexports.InvalidSchemaError = InvalidSchemaError;\nexports.InvalidSessionToken = InvalidSessionToken;\nexports.InvalidUserError = InvalidUserError;\nexports.MongoError = MongoError;\nexports.NotRegisteredUser = NotRegisteredUser;\nexports.UnableCallSameNo = UnableCallSameNo;\nexports.UserNotFoundError = UserNotFoundError;\nexports.businessDidNumberNotFound = businessDidNumberNotFound;\nexports.organisaitonNotExists = organisaitonNotExists;\nexports.redisConnectionError = redisConnectionError;\n\nvar ErrorType = _interopRequireWildcard(require(\"../constants/ErrorConstants\"));\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nconst RESPONSE_STATUS_400_BAD_REQUEST = 400;\nconst RESPONSE_STATUS_401_UNAUTHORIZED = 401;\nconst RESPONSE_STATUS_403_FORBIDDEN = 403;\nconst RESPONSE_STATUS_404_NOT_FOUND = 404;\nconst RESPONSE_STATUS_409_CONFLICT = 409;\nconst RESPONSE_STATUS_500_INTERNAL_SERVER_ERROR = 500;\n\nfunction ErrorUtils(functionName, customMessage, httpResponseStatusCode) {\n  Error.captureStackTrace(this, functionName || ErrorUtils);\n  this.name = this.constructor.name;\n  this.message = customMessage?.message;\n  this.code = customMessage?.code;\n  this.statusCode = httpResponseStatusCode;\n}\n\nfunction InvalidRequest() {\n  return new ErrorUtils(InvalidRequest, ErrorType.INVALID_REQUEST, RESPONSE_STATUS_400_BAD_REQUEST);\n}\n\nfunction InvalidAPIKey() {\n  return new ErrorUtils(InvalidAPIKey, ErrorType.INVALID_API_KEY, RESPONSE_STATUS_400_BAD_REQUEST);\n}\n\nfunction InvalidSessionToken() {\n  return new ErrorUtils(InvalidSessionToken, ErrorType.INVALID_SESSION_TOKEN, RESPONSE_STATUS_400_BAD_REQUEST);\n}\n\nfunction InvalidAuthorization() {\n  return new ErrorUtils(InvalidAuthorization, ErrorType.INVALID_AUTHORIZATION, RESPONSE_STATUS_401_UNAUTHORIZED);\n}\n\nfunction BlockListedUser() {\n  return new ErrorUtils(BlockListedUser, ErrorType.BLOCK_LISTED_USER, RESPONSE_STATUS_403_FORBIDDEN);\n}\n\nfunction UserNotFoundError() {\n  return new ErrorUtils(UserNotFoundError, ErrorType.USER_DOES_NOT_EXIST, RESPONSE_STATUS_404_NOT_FOUND);\n}\n\nfunction InvalidPasswordError() {\n  return new ErrorUtils(InvalidPasswordError, ErrorType.INVALID_PASSWORD, RESPONSE_STATUS_401_UNAUTHORIZED);\n}\n\nfunction InvalidSchemaError() {\n  return new ErrorUtils(InvalidSchemaError, ErrorType.INVALID_SCHEMA.code, RESPONSE_STATUS_500_INTERNAL_SERVER_ERROR);\n}\n\nfunction InternalServerError() {\n  return new ErrorUtils(InternalServerError, ErrorType.INTERNAL_SERVER_ERR, RESPONSE_STATUS_500_INTERNAL_SERVER_ERROR);\n}\n\nfunction DataNotFound() {\n  return new ErrorUtils(DataNotFound, ErrorType.DATA_NOT_FOUND, RESPONSE_STATUS_404_NOT_FOUND);\n}\n\nfunction MongoError() {\n  return new ErrorUtils(MongoError, ErrorType.MONGO_ERROR, RESPONSE_STATUS_500_INTERNAL_SERVER_ERROR);\n}\n\nfunction DataAlreadyExists() {\n  return new ErrorUtils(DataAlreadyExists, ErrorType.DATA_ALREADY_EXISTS, RESPONSE_STATUS_409_CONFLICT);\n}\n\nfunction IncorrectOTP() {\n  return new ErrorUtils(IncorrectOTP, ErrorType.INCORRECT_OTP, RESPONSE_STATUS_401_UNAUTHORIZED);\n}\n\nfunction InvalidUserError() {\n  return new ErrorUtils(InvalidUserError, ErrorType.INVALID_USER, RESPONSE_STATUS_401_UNAUTHORIZED);\n}\n\nfunction ExpiredUser() {\n  return new ErrorUtils(ExpiredUser, ErrorType.EXPIRED_USER, RESPONSE_STATUS_403_FORBIDDEN);\n}\n\nfunction NotRegisteredUser() {\n  return new ErrorUtils(NotRegisteredUser, ErrorType.NOT_REGISTERED_USER, RESPONSE_STATUS_404_NOT_FOUND);\n}\n\nfunction redisConnectionError() {\n  return new ErrorUtils(redisConnectionError, ErrorType.REDIS_CONNECTION_ERROR, RESPONSE_STATUS_500_INTERNAL_SERVER_ERROR);\n}\n\nfunction organisaitonNotExists() {\n  return new ErrorUtils(organisaitonNotExists, ErrorType.ORGANISATION_NOT_EXISTS, RESPONSE_STATUS_404_NOT_FOUND);\n}\n\nfunction businessDidNumberNotFound() {\n  return new ErrorUtils(businessDidNumberNotFound, ErrorType.BUSINESS_DID_NUMBER_NOT_FOUND, RESPONSE_STATUS_404_NOT_FOUND);\n}\n\nfunction UnableCallSameNo() {\n  return new ErrorUtils(UnableCallSameNo, ErrorType.BUSINESS_DID_NUMBER_UNABLE_CALL_SAME_NO, RESPONSE_STATUS_400_BAD_REQUEST);\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJSRVNQT05TRV9TVEFUVVNfNDAwX0JBRF9SRVFVRVNUIiwiUkVTUE9OU0VfU1RBVFVTXzQwMV9VTkFVVEhPUklaRUQiLCJSRVNQT05TRV9TVEFUVVNfNDAzX0ZPUkJJRERFTiIsIlJFU1BPTlNFX1NUQVRVU180MDRfTk9UX0ZPVU5EIiwiUkVTUE9OU0VfU1RBVFVTXzQwOV9DT05GTElDVCIsIlJFU1BPTlNFX1NUQVRVU181MDBfSU5URVJOQUxfU0VSVkVSX0VSUk9SIiwiRXJyb3JVdGlscyIsImZ1bmN0aW9uTmFtZSIsImN1c3RvbU1lc3NhZ2UiLCJodHRwUmVzcG9uc2VTdGF0dXNDb2RlIiwiRXJyb3IiLCJjYXB0dXJlU3RhY2tUcmFjZSIsIm5hbWUiLCJjb25zdHJ1Y3RvciIsIm1lc3NhZ2UiLCJjb2RlIiwic3RhdHVzQ29kZSIsIkludmFsaWRSZXF1ZXN0IiwiRXJyb3JUeXBlIiwiSU5WQUxJRF9SRVFVRVNUIiwiSW52YWxpZEFQSUtleSIsIklOVkFMSURfQVBJX0tFWSIsIkludmFsaWRTZXNzaW9uVG9rZW4iLCJJTlZBTElEX1NFU1NJT05fVE9LRU4iLCJJbnZhbGlkQXV0aG9yaXphdGlvbiIsIklOVkFMSURfQVVUSE9SSVpBVElPTiIsIkJsb2NrTGlzdGVkVXNlciIsIkJMT0NLX0xJU1RFRF9VU0VSIiwiVXNlck5vdEZvdW5kRXJyb3IiLCJVU0VSX0RPRVNfTk9UX0VYSVNUIiwiSW52YWxpZFBhc3N3b3JkRXJyb3IiLCJJTlZBTElEX1BBU1NXT1JEIiwiSW52YWxpZFNjaGVtYUVycm9yIiwiSU5WQUxJRF9TQ0hFTUEiLCJJbnRlcm5hbFNlcnZlckVycm9yIiwiSU5URVJOQUxfU0VSVkVSX0VSUiIsIkRhdGFOb3RGb3VuZCIsIkRBVEFfTk9UX0ZPVU5EIiwiTW9uZ29FcnJvciIsIk1PTkdPX0VSUk9SIiwiRGF0YUFscmVhZHlFeGlzdHMiLCJEQVRBX0FMUkVBRFlfRVhJU1RTIiwiSW5jb3JyZWN0T1RQIiwiSU5DT1JSRUNUX09UUCIsIkludmFsaWRVc2VyRXJyb3IiLCJJTlZBTElEX1VTRVIiLCJFeHBpcmVkVXNlciIsIkVYUElSRURfVVNFUiIsIk5vdFJlZ2lzdGVyZWRVc2VyIiwiTk9UX1JFR0lTVEVSRURfVVNFUiIsInJlZGlzQ29ubmVjdGlvbkVycm9yIiwiUkVESVNfQ09OTkVDVElPTl9FUlJPUiIsIm9yZ2FuaXNhaXRvbk5vdEV4aXN0cyIsIk9SR0FOSVNBVElPTl9OT1RfRVhJU1RTIiwiYnVzaW5lc3NEaWROdW1iZXJOb3RGb3VuZCIsIkJVU0lORVNTX0RJRF9OVU1CRVJfTk9UX0ZPVU5EIiwiVW5hYmxlQ2FsbFNhbWVObyIsIkJVU0lORVNTX0RJRF9OVU1CRVJfVU5BQkxFX0NBTExfU0FNRV9OTyJdLCJzb3VyY2VSb290IjoiL1VzZXJzL3JhbWlyZWRkeWNoYXJpdGhhL2dpdC1leHBsb3JlL2Vycm9ycy8iLCJzb3VyY2VzIjpbIkVycm9yVXRpbHMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgRXJyb3JUeXBlIGZyb20gXCIuLi9jb25zdGFudHMvRXJyb3JDb25zdGFudHNcIjtcblxuY29uc3QgUkVTUE9OU0VfU1RBVFVTXzQwMF9CQURfUkVRVUVTVCA9IDQwMDtcbmNvbnN0IFJFU1BPTlNFX1NUQVRVU180MDFfVU5BVVRIT1JJWkVEID0gNDAxO1xuY29uc3QgUkVTUE9OU0VfU1RBVFVTXzQwM19GT1JCSURERU4gPSA0MDM7XG5jb25zdCBSRVNQT05TRV9TVEFUVVNfNDA0X05PVF9GT1VORCA9IDQwNDtcbmNvbnN0IFJFU1BPTlNFX1NUQVRVU180MDlfQ09ORkxJQ1QgPSA0MDk7XG5cbmNvbnN0IFJFU1BPTlNFX1NUQVRVU181MDBfSU5URVJOQUxfU0VSVkVSX0VSUk9SID0gNTAwO1xuXG5mdW5jdGlvbiBFcnJvclV0aWxzKGZ1bmN0aW9uTmFtZSwgY3VzdG9tTWVzc2FnZSwgaHR0cFJlc3BvbnNlU3RhdHVzQ29kZSkge1xuICBFcnJvci5jYXB0dXJlU3RhY2tUcmFjZSh0aGlzLCBmdW5jdGlvbk5hbWUgfHwgRXJyb3JVdGlscyk7XG4gIHRoaXMubmFtZSA9IHRoaXMuY29uc3RydWN0b3IubmFtZTtcbiAgdGhpcy5tZXNzYWdlID0gY3VzdG9tTWVzc2FnZT8ubWVzc2FnZTtcbiAgdGhpcy5jb2RlID0gY3VzdG9tTWVzc2FnZT8uY29kZTtcbiAgdGhpcy5zdGF0dXNDb2RlID0gaHR0cFJlc3BvbnNlU3RhdHVzQ29kZTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIEludmFsaWRSZXF1ZXN0KCkge1xuICByZXR1cm4gbmV3IEVycm9yVXRpbHMoXG4gICAgSW52YWxpZFJlcXVlc3QsXG4gICAgRXJyb3JUeXBlLklOVkFMSURfUkVRVUVTVCxcbiAgICBSRVNQT05TRV9TVEFUVVNfNDAwX0JBRF9SRVFVRVNULFxuICApO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gSW52YWxpZEFQSUtleSgpIHtcbiAgcmV0dXJuIG5ldyBFcnJvclV0aWxzKFxuICAgIEludmFsaWRBUElLZXksXG4gICAgRXJyb3JUeXBlLklOVkFMSURfQVBJX0tFWSxcbiAgICBSRVNQT05TRV9TVEFUVVNfNDAwX0JBRF9SRVFVRVNULFxuICApO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gSW52YWxpZFNlc3Npb25Ub2tlbigpIHtcbiAgcmV0dXJuIG5ldyBFcnJvclV0aWxzKFxuICAgIEludmFsaWRTZXNzaW9uVG9rZW4sXG4gICAgRXJyb3JUeXBlLklOVkFMSURfU0VTU0lPTl9UT0tFTixcbiAgICBSRVNQT05TRV9TVEFUVVNfNDAwX0JBRF9SRVFVRVNULFxuICApO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gSW52YWxpZEF1dGhvcml6YXRpb24oKSB7XG4gIHJldHVybiBuZXcgRXJyb3JVdGlscyhcbiAgICBJbnZhbGlkQXV0aG9yaXphdGlvbixcbiAgICBFcnJvclR5cGUuSU5WQUxJRF9BVVRIT1JJWkFUSU9OLFxuICAgIFJFU1BPTlNFX1NUQVRVU180MDFfVU5BVVRIT1JJWkVELFxuICApO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gQmxvY2tMaXN0ZWRVc2VyKCkge1xuICByZXR1cm4gbmV3IEVycm9yVXRpbHMoXG4gICAgQmxvY2tMaXN0ZWRVc2VyLFxuICAgIEVycm9yVHlwZS5CTE9DS19MSVNURURfVVNFUixcbiAgICBSRVNQT05TRV9TVEFUVVNfNDAzX0ZPUkJJRERFTixcbiAgKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIFVzZXJOb3RGb3VuZEVycm9yKCkge1xuICByZXR1cm4gbmV3IEVycm9yVXRpbHMoXG4gICAgVXNlck5vdEZvdW5kRXJyb3IsXG4gICAgRXJyb3JUeXBlLlVTRVJfRE9FU19OT1RfRVhJU1QsXG4gICAgUkVTUE9OU0VfU1RBVFVTXzQwNF9OT1RfRk9VTkQsXG4gICk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBJbnZhbGlkUGFzc3dvcmRFcnJvcigpIHtcbiAgcmV0dXJuIG5ldyBFcnJvclV0aWxzKFxuICAgIEludmFsaWRQYXNzd29yZEVycm9yLFxuICAgIEVycm9yVHlwZS5JTlZBTElEX1BBU1NXT1JELFxuICAgIFJFU1BPTlNFX1NUQVRVU180MDFfVU5BVVRIT1JJWkVELFxuICApO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gSW52YWxpZFNjaGVtYUVycm9yKCkge1xuICByZXR1cm4gbmV3IEVycm9yVXRpbHMoXG4gICAgSW52YWxpZFNjaGVtYUVycm9yLFxuICAgIEVycm9yVHlwZS5JTlZBTElEX1NDSEVNQS5jb2RlLFxuICAgIFJFU1BPTlNFX1NUQVRVU181MDBfSU5URVJOQUxfU0VSVkVSX0VSUk9SLFxuICApO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gSW50ZXJuYWxTZXJ2ZXJFcnJvcigpIHtcbiAgcmV0dXJuIG5ldyBFcnJvclV0aWxzKFxuICAgIEludGVybmFsU2VydmVyRXJyb3IsXG4gICAgRXJyb3JUeXBlLklOVEVSTkFMX1NFUlZFUl9FUlIsXG4gICAgUkVTUE9OU0VfU1RBVFVTXzUwMF9JTlRFUk5BTF9TRVJWRVJfRVJST1IsXG4gICk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBEYXRhTm90Rm91bmQoKSB7XG4gIHJldHVybiBuZXcgRXJyb3JVdGlscyhcbiAgICBEYXRhTm90Rm91bmQsXG4gICAgRXJyb3JUeXBlLkRBVEFfTk9UX0ZPVU5ELFxuICAgIFJFU1BPTlNFX1NUQVRVU180MDRfTk9UX0ZPVU5ELFxuICApO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gTW9uZ29FcnJvcigpIHtcbiAgcmV0dXJuIG5ldyBFcnJvclV0aWxzKFxuICAgIE1vbmdvRXJyb3IsXG4gICAgRXJyb3JUeXBlLk1PTkdPX0VSUk9SLFxuICAgIFJFU1BPTlNFX1NUQVRVU181MDBfSU5URVJOQUxfU0VSVkVSX0VSUk9SLFxuICApO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gRGF0YUFscmVhZHlFeGlzdHMoKSB7XG4gIHJldHVybiBuZXcgRXJyb3JVdGlscyhcbiAgICBEYXRhQWxyZWFkeUV4aXN0cyxcbiAgICBFcnJvclR5cGUuREFUQV9BTFJFQURZX0VYSVNUUyxcbiAgICBSRVNQT05TRV9TVEFUVVNfNDA5X0NPTkZMSUNULFxuICApO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gSW5jb3JyZWN0T1RQKCkge1xuICByZXR1cm4gbmV3IEVycm9yVXRpbHMoXG4gICAgSW5jb3JyZWN0T1RQLFxuICAgIEVycm9yVHlwZS5JTkNPUlJFQ1RfT1RQLFxuICAgIFJFU1BPTlNFX1NUQVRVU180MDFfVU5BVVRIT1JJWkVELFxuICApO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gSW52YWxpZFVzZXJFcnJvcigpIHtcbiAgcmV0dXJuIG5ldyBFcnJvclV0aWxzKFxuICAgIEludmFsaWRVc2VyRXJyb3IsXG4gICAgRXJyb3JUeXBlLklOVkFMSURfVVNFUixcbiAgICBSRVNQT05TRV9TVEFUVVNfNDAxX1VOQVVUSE9SSVpFRCxcbiAgKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIEV4cGlyZWRVc2VyKCkge1xuICByZXR1cm4gbmV3IEVycm9yVXRpbHMoXG4gICAgRXhwaXJlZFVzZXIsXG4gICAgRXJyb3JUeXBlLkVYUElSRURfVVNFUixcbiAgICBSRVNQT05TRV9TVEFUVVNfNDAzX0ZPUkJJRERFTixcbiAgKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIE5vdFJlZ2lzdGVyZWRVc2VyKCkge1xuICByZXR1cm4gbmV3IEVycm9yVXRpbHMoXG4gICAgTm90UmVnaXN0ZXJlZFVzZXIsXG4gICAgRXJyb3JUeXBlLk5PVF9SRUdJU1RFUkVEX1VTRVIsXG4gICAgUkVTUE9OU0VfU1RBVFVTXzQwNF9OT1RfRk9VTkQsXG4gICk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiByZWRpc0Nvbm5lY3Rpb25FcnJvcigpIHtcbiAgcmV0dXJuIG5ldyBFcnJvclV0aWxzKFxuICAgIHJlZGlzQ29ubmVjdGlvbkVycm9yLFxuICAgIEVycm9yVHlwZS5SRURJU19DT05ORUNUSU9OX0VSUk9SLFxuICAgIFJFU1BPTlNFX1NUQVRVU181MDBfSU5URVJOQUxfU0VSVkVSX0VSUk9SLFxuICApO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gb3JnYW5pc2FpdG9uTm90RXhpc3RzKClcbntcbiAgcmV0dXJuIG5ldyBFcnJvclV0aWxzKFxuICAgIG9yZ2FuaXNhaXRvbk5vdEV4aXN0cyxcbiAgICBFcnJvclR5cGUuT1JHQU5JU0FUSU9OX05PVF9FWElTVFMsXG4gICAgUkVTUE9OU0VfU1RBVFVTXzQwNF9OT1RfRk9VTkRcbiAgKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGJ1c2luZXNzRGlkTnVtYmVyTm90Rm91bmQoKVxue1xuICByZXR1cm4gbmV3IEVycm9yVXRpbHMoXG4gICAgYnVzaW5lc3NEaWROdW1iZXJOb3RGb3VuZCxcbiAgICBFcnJvclR5cGUuQlVTSU5FU1NfRElEX05VTUJFUl9OT1RfRk9VTkQsXG4gICAgUkVTUE9OU0VfU1RBVFVTXzQwNF9OT1RfRk9VTkRcbiAgKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIFVuYWJsZUNhbGxTYW1lTm8oKVxue1xuICByZXR1cm4gbmV3IEVycm9yVXRpbHMoXG4gICAgVW5hYmxlQ2FsbFNhbWVObyxcbiAgICBFcnJvclR5cGUuQlVTSU5FU1NfRElEX05VTUJFUl9VTkFCTEVfQ0FMTF9T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","map":{"version":3,"names":["RESPONSE_STATUS_400_BAD_REQUEST","RESPONSE_STATUS_401_UNAUTHORIZED","RESPONSE_STATUS_403_FORBIDDEN","RESPONSE_STATUS_404_NOT_FOUND","RESPONSE_STATUS_409_CONFLICT","RESPONSE_STATUS_500_INTERNAL_SERVER_ERROR","ErrorUtils","functionName","customMessage","httpResponseStatusCode","Error","captureStackTrace","name","constructor","message","code","statusCode","InvalidRequest","ErrorType","INVALID_REQUEST","InvalidAPIKey","INVALID_API_KEY","InvalidSessionToken","INVALID_SESSION_TOKEN","InvalidAuthorization","INVALID_AUTHORIZATION","BlockListedUser","BLOCK_LISTED_USER","UserNotFoundError","USER_DOES_NOT_EXIST","InvalidPasswordError","INVALID_PASSWORD","InvalidSchemaError","INVALID_SCHEMA","InternalServerError","INTERNAL_SERVER_ERR","DataNotFound","DATA_NOT_FOUND","MongoError","MONGO_ERROR","DataAlreadyExists","DATA_ALREADY_EXISTS","IncorrectOTP","INCORRECT_OTP","InvalidUserError","INVALID_USER","ExpiredUser","EXPIRED_USER","NotRegisteredUser","NOT_REGISTERED_USER","redisConnectionError","REDIS_CONNECTION_ERROR","organisaitonNotExists","ORGANISATION_NOT_EXISTS","businessDidNumberNotFound","BUSINESS_DID_NUMBER_NOT_FOUND","UnableCallSameNo","BUSINESS_DID_NUMBER_UNABLE_CALL_SAME_NO"],"sourceRoot":"/Users/ramireddycharitha/git-explore/errors/","sources":["ErrorUtils.js"],"sourcesContent":["import * as ErrorType from \"../constants/ErrorConstants\";\n\nconst RESPONSE_STATUS_400_BAD_REQUEST = 400;\nconst RESPONSE_STATUS_401_UNAUTHORIZED = 401;\nconst RESPONSE_STATUS_403_FORBIDDEN = 403;\nconst RESPONSE_STATUS_404_NOT_FOUND = 404;\nconst RESPONSE_STATUS_409_CONFLICT = 409;\n\nconst RESPONSE_STATUS_500_INTERNAL_SERVER_ERROR = 500;\n\nfunction ErrorUtils(functionName, customMessage, httpResponseStatusCode) {\n  Error.captureStackTrace(this, functionName || ErrorUtils);\n  this.name = this.constructor.name;\n  this.message = customMessage?.message;\n  this.code = customMessage?.code;\n  this.statusCode = httpResponseStatusCode;\n}\n\nexport function InvalidRequest() {\n  return new ErrorUtils(\n    InvalidRequest,\n    ErrorType.INVALID_REQUEST,\n    RESPONSE_STATUS_400_BAD_REQUEST,\n  );\n}\n\nexport function InvalidAPIKey() {\n  return new ErrorUtils(\n    InvalidAPIKey,\n    ErrorType.INVALID_API_KEY,\n    RESPONSE_STATUS_400_BAD_REQUEST,\n  );\n}\n\nexport function InvalidSessionToken() {\n  return new ErrorUtils(\n    InvalidSessionToken,\n    ErrorType.INVALID_SESSION_TOKEN,\n    RESPONSE_STATUS_400_BAD_REQUEST,\n  );\n}\n\nexport function InvalidAuthorization() {\n  return new ErrorUtils(\n    InvalidAuthorization,\n    ErrorType.INVALID_AUTHORIZATION,\n    RESPONSE_STATUS_401_UNAUTHORIZED,\n  );\n}\n\nexport function BlockListedUser() {\n  return new ErrorUtils(\n    BlockListedUser,\n    ErrorType.BLOCK_LISTED_USER,\n    RESPONSE_STATUS_403_FORBIDDEN,\n  );\n}\n\nexport function UserNotFoundError() {\n  return new ErrorUtils(\n    UserNotFoundError,\n    ErrorType.USER_DOES_NOT_EXIST,\n    RESPONSE_STATUS_404_NOT_FOUND,\n  );\n}\n\nexport function InvalidPasswordError() {\n  return new ErrorUtils(\n    InvalidPasswordError,\n    ErrorType.INVALID_PASSWORD,\n    RESPONSE_STATUS_401_UNAUTHORIZED,\n  );\n}\n\nexport function InvalidSchemaError() {\n  return new ErrorUtils(\n    InvalidSchemaError,\n    ErrorType.INVALID_SCHEMA.code,\n    RESPONSE_STATUS_500_INTERNAL_SERVER_ERROR,\n  );\n}\n\nexport function InternalServerError() {\n  return new ErrorUtils(\n    InternalServerError,\n    ErrorType.INTERNAL_SERVER_ERR,\n    RESPONSE_STATUS_500_INTERNAL_SERVER_ERROR,\n  );\n}\n\nexport function DataNotFound() {\n  return new ErrorUtils(\n    DataNotFound,\n    ErrorType.DATA_NOT_FOUND,\n    RESPONSE_STATUS_404_NOT_FOUND,\n  );\n}\n\nexport function MongoError() {\n  return new ErrorUtils(\n    MongoError,\n    ErrorType.MONGO_ERROR,\n    RESPONSE_STATUS_500_INTERNAL_SERVER_ERROR,\n  );\n}\n\nexport function DataAlreadyExists() {\n  return new ErrorUtils(\n    DataAlreadyExists,\n    ErrorType.DATA_ALREADY_EXISTS,\n    RESPONSE_STATUS_409_CONFLICT,\n  );\n}\n\nexport function IncorrectOTP() {\n  return new ErrorUtils(\n    IncorrectOTP,\n    ErrorType.INCORRECT_OTP,\n    RESPONSE_STATUS_401_UNAUTHORIZED,\n  );\n}\n\nexport function InvalidUserError() {\n  return new ErrorUtils(\n    InvalidUserError,\n    ErrorType.INVALID_USER,\n    RESPONSE_STATUS_401_UNAUTHORIZED,\n  );\n}\n\nexport function ExpiredUser() {\n  return new ErrorUtils(\n    ExpiredUser,\n    ErrorType.EXPIRED_USER,\n    RESPONSE_STATUS_403_FORBIDDEN,\n  );\n}\n\nexport function NotRegisteredUser() {\n  return new ErrorUtils(\n    NotRegisteredUser,\n    ErrorType.NOT_REGISTERED_USER,\n    RESPONSE_STATUS_404_NOT_FOUND,\n  );\n}\n\nexport function redisConnectionError() {\n  return new ErrorUtils(\n    redisConnectionError,\n    ErrorType.REDIS_CONNECTION_ERROR,\n    RESPONSE_STATUS_500_INTERNAL_SERVER_ERROR,\n  );\n}\n\nexport function organisaitonNotExists()\n{\n  return new ErrorUtils(\n    organisaitonNotExists,\n    ErrorType.ORGANISATION_NOT_EXISTS,\n    RESPONSE_STATUS_404_NOT_FOUND\n  );\n}\n\nexport function businessDidNumberNotFound()\n{\n  return new ErrorUtils(\n    businessDidNumberNotFound,\n    ErrorType.BUSINESS_DID_NUMBER_NOT_FOUND,\n    RESPONSE_STATUS_404_NOT_FOUND\n  );\n}\n\nexport function UnableCallSameNo()\n{\n  return new ErrorUtils(\n    UnableCallSameNo,\n    ErrorType.BUSINESS_DID_NUMBER_UNABLE_CALL_SAME_NO,\n    RESPONSE_STATUS_400_BAD_REQUEST\n  )\n}\n"],"mappings":"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"}},"mtime":1654085554335},"{\"assumptions\":{},\"sourceRoot\":\"/Users/ramireddycharitha/git-explore/constants/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/ramireddycharitha/git-explore\",\"filename\":\"/Users/ramireddycharitha/git-explore/constants/ErrorConstants.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"default\",\"root\":\"/Users/ramireddycharitha/git-explore\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.17.10:default":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.USER_DOES_NOT_EXIST = exports.REDIS_CONNECTION_ERROR = exports.ORGANISATION_NOT_EXISTS = exports.NOT_REGISTERED_USER = exports.MONGO_ERROR = exports.INVALID_SESSION_TOKEN = exports.INVALID_SCHEMA = exports.INVALID_REQUEST = exports.INVALID_PASSWORD = exports.INVALID_AUTHORIZATION = exports.INVALID_API_KEY = exports.INTERNAL_SERVER_ERR = exports.INCORRECT_OTP = exports.EXPIRED_USER = exports.DATA_NOT_FOUND = exports.DATA_ALREADY_EXISTS = exports.BUSINESS_DID_NUMBER_UNABLE_CALL_SAME_NO = exports.BUSINESS_DID_NUMBER_NOT_FOUND = exports.BLOCK_LISTED_USER = void 0;\nconst INTERNAL_SERVER_ERR = {\n  code: 1000,\n  message: \"Internal Server Error. Something went wrong!\"\n};\nexports.INTERNAL_SERVER_ERR = INTERNAL_SERVER_ERR;\nconst INVALID_REQUEST = {\n  code: 1001,\n  message: \"invalid request\"\n};\nexports.INVALID_REQUEST = INVALID_REQUEST;\nconst INVALID_API_KEY = {\n  code: 1002,\n  message: \"invalid api key id\"\n};\nexports.INVALID_API_KEY = INVALID_API_KEY;\nconst INVALID_SESSION_TOKEN = {\n  code: 1003,\n  message: \"invalid session token\"\n};\nexports.INVALID_SESSION_TOKEN = INVALID_SESSION_TOKEN;\nconst INVALID_AUTHORIZATION = {\n  code: 1004,\n  message: \"invalid authorization\"\n};\nexports.INVALID_AUTHORIZATION = INVALID_AUTHORIZATION;\nconst BLOCK_LISTED_USER = {\n  code: 1005,\n  message: \"invalid authorization\"\n};\nexports.BLOCK_LISTED_USER = BLOCK_LISTED_USER;\nconst USER_DOES_NOT_EXIST = {\n  code: 1006,\n  message: \"User does not exist\"\n};\nexports.USER_DOES_NOT_EXIST = USER_DOES_NOT_EXIST;\nconst INCORRECT_OTP = {\n  code: 1007,\n  message: \"Incorrect OTP\"\n};\nexports.INCORRECT_OTP = INCORRECT_OTP;\nconst INVALID_PASSWORD = {\n  code: 1008,\n  message: \"Invalid Password\"\n};\nexports.INVALID_PASSWORD = INVALID_PASSWORD;\nconst INVALID_SCHEMA = {\n  code: 1009,\n  message: \"Invalid schema or Missing Data sent\"\n};\nexports.INVALID_SCHEMA = INVALID_SCHEMA;\nconst DATA_NOT_FOUND = {\n  code: 1010,\n  message: \"Data not found\"\n};\nexports.DATA_NOT_FOUND = DATA_NOT_FOUND;\nconst MONGO_ERROR = {\n  code: 1011,\n  message: \"Error in Mongo Query\"\n};\nexports.MONGO_ERROR = MONGO_ERROR;\nconst DATA_ALREADY_EXISTS = {\n  code: 1012,\n  message: \"Data already exist\"\n};\nexports.DATA_ALREADY_EXISTS = DATA_ALREADY_EXISTS;\nconst EXPIRED_USER = {\n  code: 1016,\n  message: \"Expired user\"\n};\nexports.EXPIRED_USER = EXPIRED_USER;\nconst NOT_REGISTERED_USER = {\n  code: 1017,\n  message: \"Not registered user\"\n};\nexports.NOT_REGISTERED_USER = NOT_REGISTERED_USER;\nconst REDIS_CONNECTION_ERROR = {\n  code: 1018,\n  message: \"Redis connection error\"\n};\nexports.REDIS_CONNECTION_ERROR = REDIS_CONNECTION_ERROR;\nconst ORGANISATION_NOT_EXISTS = {\n  code: 1019,\n  messsage: \"Organisation does not exists\"\n};\nexports.ORGANISATION_NOT_EXISTS = ORGANISATION_NOT_EXISTS;\nconst BUSINESS_DID_NUMBER_NOT_FOUND = {\n  code: 1020,\n  messsage: \"Business DID Number Is Not Found\"\n};\nexports.BUSINESS_DID_NUMBER_NOT_FOUND = BUSINESS_DID_NUMBER_NOT_FOUND;\nconst BUSINESS_DID_NUMBER_UNABLE_CALL_SAME_NO = {\n  code: 1021,\n  message: \"Unable To Call The Same Business DID Number\"\n};\nexports.BUSINESS_DID_NUMBER_UNABLE_CALL_SAME_NO = BUSINESS_DID_NUMBER_UNABLE_CALL_SAME_NO;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJJTlRFUk5BTF9TRVJWRVJfRVJSIiwiY29kZSIsIm1lc3NhZ2UiLCJJTlZBTElEX1JFUVVFU1QiLCJJTlZBTElEX0FQSV9LRVkiLCJJTlZBTElEX1NFU1NJT05fVE9LRU4iLCJJTlZBTElEX0FVVEhPUklaQVRJT04iLCJCTE9DS19MSVNURURfVVNFUiIsIlVTRVJfRE9FU19OT1RfRVhJU1QiLCJJTkNPUlJFQ1RfT1RQIiwiSU5WQUxJRF9QQVNTV09SRCIsIklOVkFMSURfU0NIRU1BIiwiREFUQV9OT1RfRk9VTkQiLCJNT05HT19FUlJPUiIsIkRBVEFfQUxSRUFEWV9FWElTVFMiLCJFWFBJUkVEX1VTRVIiLCJOT1RfUkVHSVNURVJFRF9VU0VSIiwiUkVESVNfQ09OTkVDVElPTl9FUlJPUiIsIk9SR0FOSVNBVElPTl9OT1RfRVhJU1RTIiwibWVzc3NhZ2UiLCJCVVNJTkVTU19ESURfTlVNQkVSX05PVF9GT1VORCIsIkJVU0lORVNTX0RJRF9OVU1CRVJfVU5BQkxFX0NBTExfU0FNRV9OTyJdLCJzb3VyY2VSb290IjoiL1VzZXJzL3JhbWlyZWRkeWNoYXJpdGhhL2dpdC1leHBsb3JlL2NvbnN0YW50cy8iLCJzb3VyY2VzIjpbIkVycm9yQ29uc3RhbnRzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjb25zdCBJTlRFUk5BTF9TRVJWRVJfRVJSID0ge1xuICBjb2RlOiAxMDAwLFxuICBtZXNzYWdlOiBcIkludGVybmFsIFNlcnZlciBFcnJvci4gU29tZXRoaW5nIHdlbnQgd3JvbmchXCIsXG59O1xuXG5leHBvcnQgY29uc3QgSU5WQUxJRF9SRVFVRVNUID0ge1xuICBjb2RlOiAxMDAxLFxuICBtZXNzYWdlOiBcImludmFsaWQgcmVxdWVzdFwiLFxufTtcblxuZXhwb3J0IGNvbnN0IElOVkFMSURfQVBJX0tFWSA9IHtcbiAgY29kZTogMTAwMixcbiAgbWVzc2FnZTogXCJpbnZhbGlkIGFwaSBrZXkgaWRcIixcbn07XG5cbmV4cG9ydCBjb25zdCBJTlZBTElEX1NFU1NJT05fVE9LRU4gPSB7XG4gIGNvZGU6IDEwMDMsXG4gIG1lc3NhZ2U6IFwiaW52YWxpZCBzZXNzaW9uIHRva2VuXCIsXG59O1xuXG5leHBvcnQgY29uc3QgSU5WQUxJRF9BVVRIT1JJWkFUSU9OID0ge1xuICBjb2RlOiAxMDA0LFxuICBtZXNzYWdlOiBcImludmFsaWQgYXV0aG9yaXphdGlvblwiLFxufTtcblxuZXhwb3J0IGNvbnN0IEJMT0NLX0xJU1RFRF9VU0VSID0ge1xuICBjb2RlOiAxMDA1LFxuICBtZXNzYWdlOiBcImludmFsaWQgYXV0aG9yaXphdGlvblwiLFxufTtcblxuZXhwb3J0IGNvbnN0IFVTRVJfRE9FU19OT1RfRVhJU1QgPSB7XG4gIGNvZGU6IDEwMDYsXG4gIG1lc3NhZ2U6IFwiVXNlciBkb2VzIG5vdCBleGlzdFwiLFxufTtcblxuZXhwb3J0IGNvbnN0IElOQ09SUkVDVF9PVFAgPSB7XG4gIGNvZGU6IDEwMDcsXG4gIG1lc3NhZ2U6IFwiSW5jb3JyZWN0IE9UUFwiLFxufTtcblxuZXhwb3J0IGNvbnN0IElOVkFMSURfUEFTU1dPUkQgPSB7XG4gIGNvZGU6IDEwMDgsXG4gIG1lc3NhZ2U6IFwiSW52YWxpZCBQYXNzd29yZFwiLFxufTtcblxuZXhwb3J0IGNvbnN0IElOVkFMSURfU0NIRU1BID0ge1xuICBjb2RlOiAxMDA5LFxuICBtZXNzYWdlOiBcIkludmFsaWQgc2NoZW1hIG9yIE1pc3NpbmcgRGF0YSBzZW50XCIsXG59O1xuXG5leHBvcnQgY29uc3QgREFUQV9OT1RfRk9VTkQgPSB7XG4gIGNvZGU6IDEwMTAsXG4gIG1lc3NhZ2U6IFwiRGF0YSBub3QgZm91bmRcIixcbn07XG5cbmV4cG9ydCBjb25zdCBNT05HT19FUlJPUiA9IHtcbiAgY29kZTogMTAxMSxcbiAgbWVzc2FnZTogXCJFcnJvciBpbiBNb25nbyBRdWVyeVwiLFxufTtcblxuZXhwb3J0IGNvbnN0IERBVEFfQUxSRUFEWV9FWElTVFMgPSB7XG4gIGNvZGU6IDEwMTIsXG4gIG1lc3NhZ2U6IFwiRGF0YSBhbHJlYWR5IGV4aXN0XCIsXG59O1xuXG5leHBvcnQgY29uc3QgRVhQSVJFRF9VU0VSID0ge1xuICBjb2RlOiAxMDE2LFxuICBtZXNzYWdlOiBcIkV4cGlyZWQgdXNlclwiLFxufTtcblxuZXhwb3J0IGNvbnN0IE5PVF9SRUdJU1RFUkVEX1VTRVIgPSB7XG4gIGNvZGU6IDEwMTcsXG4gIG1lc3NhZ2U6IFwiTm90IHJlZ2lzdGVyZWQgdXNlclwiLFxufTtcblxuZXhwb3J0IGNvbnN0IFJFRElTX0NPTk5FQ1RJT05fRVJST1IgPSB7XG4gIGNvZGU6IDEwMTgsXG4gIG1lc3NhZ2U6IFwiUmVkaXMgY29ubmVjdGlvbiBlcnJvclwiLFxufTtcbmV4cG9ydCBjb25zdCBPUkdBTklTQVRJT05fTk9UX0VYSVNUUyA9XG57XG4gIGNvZGUgOjEwMTksXG4gIG1lc3NzYWdlOlwiT3JnYW5pc2F0aW9uIGRvZXMgbm90IGV4aXN0c1wiXG59XG5cbmV4cG9ydCBjb25zdCBCVVNJTkVTU19ESURfTlVNQkVSX05PVF9GT1VORCA9XG57XG4gIGNvZGUgOjEwMjAsXG4gIG1lc3NzYWdlOlwiQnVzaW5lc3MgRElEIE51bWJlciBJcyBOb3QgRm91bmRcIlxufVxuZXhwb3J0IGNvbnN0IEJVU0lORVNTX0RJRF9OVU1CRVJfVU5BQkxFX0NBTExfU0FNRV9OTz1cbntcbiAgY29kZSA6IDEwMjEsXG4gIG1lc3NhZ2U6XCJVbmFibGUgVG8gQ2FsbCBUaGUgU2FtZSBCdXNpbmVzcyBESUQgTnVtYmVyXCJcbn1cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQU8sTUFBTUEsbUJBQW1CLEdBQUc7RUFDakNDLElBQUksRUFBRSxJQUQyQjtFQUVqQ0MsT0FBTyxFQUFFO0FBRndCLENBQTVCOztBQUtBLE1BQU1DLGVBQWUsR0FBRztFQUM3QkYsSUFBSSxFQUFFLElBRHVCO0VBRTdCQyxPQUFPLEVBQUU7QUFGb0IsQ0FBeEI7O0FBS0EsTUFBTUUsZUFBZSxHQUFHO0VBQzdCSCxJQUFJLEVBQUUsSUFEdUI7RUFFN0JDLE9BQU8sRUFBRTtBQUZvQixDQUF4Qjs7QUFLQSxNQUFNRyxxQkFBcUIsR0FBRztFQUNuQ0osSUFBSSxFQUFFLElBRDZCO0VBRW5DQyxPQUFPLEVBQUU7QUFGMEIsQ0FBOUI7O0FBS0EsTUFBTUkscUJBQXFCLEdBQUc7RUFDbkNMLElBQUksRUFBRSxJQUQ2QjtFQUVuQ0MsT0FBTyxFQUFFO0FBRjBCLENBQTlCOztBQUtBLE1BQU1LLGlCQUFpQixHQUFHO0VBQy9CTixJQUFJLEVBQUUsSUFEeUI7RUFFL0JDLE9BQU8sRUFBRTtBQUZzQixDQUExQjs7QUFLQSxNQUFNTSxtQkFBbUIsR0FBRztFQUNqQ1AsSUFBSSxFQUFFLElBRDJCO0VBRWpDQyxPQUFPLEVBQUU7QUFGd0IsQ0FBNUI7O0FBS0EsTUFBTU8sYUFBYSxHQUFHO0VBQzNCUixJQUFJLEVBQUUsSUFEcUI7RUFFM0JDLE9BQU8sRUFBRTtBQUZrQixDQUF0Qjs7QUFLQSxNQUFNUSxnQkFBZ0IsR0FBRztFQUM5QlQsSUFBSSxFQUFFLElBRHdCO0VBRTlCQyxPQUFPLEVBQUU7QUFGcUIsQ0FBekI7O0FBS0EsTUFBTVMsY0FBYyxHQUFHO0VBQzVCVixJQUFJLEVBQUUsSUFEc0I7RUFFNUJDLE9BQU8sRUFBRTtBQUZtQixDQUF2Qjs7QUFLQSxNQUFNVSxjQUFjLEdBQUc7RUFDNUJYLElBQUksRUFBRSxJQURzQjtFQUU1QkMsT0FBTyxFQUFFO0FBRm1CLENBQXZCOztBQUtBLE1BQU1XLFdBQVcsR0FBRztFQUN6QlosSUFBSSxFQUFFLElBRG1CO0VBRXpCQyxPQUFPLEVBQUU7QUFGZ0IsQ0FBcEI7O0FBS0EsTUFBTVksbUJBQW1CLEdBQUc7RUFDakNiLElBQUksRUFBRSxJQUQyQjtFQUVqQ0MsT0FBTyxFQUFFO0FBRndCLENBQTVCOztBQUtBLE1BQU1hLFlBQVksR0FBRztFQUMxQmQsSUFBSSxFQUFFLElBRG9CO0VBRTFCQyxPQUFPLEVBQUU7QUFGaUIsQ0FBckI7O0FBS0EsTUFBTWMsbUJBQW1CLEdBQUc7RUFDakNmLElBQUksRUFBRSxJQUQyQjtFQUVqQ0MsT0FBTyxFQUFFO0FBRndCLENBQTVCOztBQUtBLE1BQU1lLHNCQUFzQixHQUFHO0VBQ3BDaEIsSUFBSSxFQUFFLElBRDhCO0VBRXBDQyxPQUFPLEVBQUU7QUFGMkIsQ0FBL0I7O0FBSUEsTUFBTWdCLHVCQUF1QixHQUNwQztFQUNFakIsSUFBSSxFQUFFLElBRFI7RUFFRWtCLFFBQVEsRUFBQztBQUZYLENBRE87O0FBTUEsTUFBTUMsNkJBQTZCLEdBQzFDO0VBQ0VuQixJQUFJLEVBQUUsSUFEUjtFQUVFa0IsUUFBUSxFQUFDO0FBRlgsQ0FETzs7QUFLQSxNQUFNRSx1Q0FBdUMsR0FDcEQ7RUFDRXBCLElBQUksRUFBRyxJQURUO0VBRUVDLE9BQU8sRUFBQztBQUZWLENBRE8ifQ==","map":{"version":3,"names":["INTERNAL_SERVER_ERR","code","message","INVALID_REQUEST","INVALID_API_KEY","INVALID_SESSION_TOKEN","INVALID_AUTHORIZATION","BLOCK_LISTED_USER","USER_DOES_NOT_EXIST","INCORRECT_OTP","INVALID_PASSWORD","INVALID_SCHEMA","DATA_NOT_FOUND","MONGO_ERROR","DATA_ALREADY_EXISTS","EXPIRED_USER","NOT_REGISTERED_USER","REDIS_CONNECTION_ERROR","ORGANISATION_NOT_EXISTS","messsage","BUSINESS_DID_NUMBER_NOT_FOUND","BUSINESS_DID_NUMBER_UNABLE_CALL_SAME_NO"],"sourceRoot":"/Users/ramireddycharitha/git-explore/constants/","sources":["ErrorConstants.js"],"sourcesContent":["export const INTERNAL_SERVER_ERR = {\n  code: 1000,\n  message: \"Internal Server Error. Something went wrong!\",\n};\n\nexport const INVALID_REQUEST = {\n  code: 1001,\n  message: \"invalid request\",\n};\n\nexport const INVALID_API_KEY = {\n  code: 1002,\n  message: \"invalid api key id\",\n};\n\nexport const INVALID_SESSION_TOKEN = {\n  code: 1003,\n  message: \"invalid session token\",\n};\n\nexport const INVALID_AUTHORIZATION = {\n  code: 1004,\n  message: \"invalid authorization\",\n};\n\nexport const BLOCK_LISTED_USER = {\n  code: 1005,\n  message: \"invalid authorization\",\n};\n\nexport const USER_DOES_NOT_EXIST = {\n  code: 1006,\n  message: \"User does not exist\",\n};\n\nexport const INCORRECT_OTP = {\n  code: 1007,\n  message: \"Incorrect OTP\",\n};\n\nexport const INVALID_PASSWORD = {\n  code: 1008,\n  message: \"Invalid Password\",\n};\n\nexport const INVALID_SCHEMA = {\n  code: 1009,\n  message: \"Invalid schema or Missing Data sent\",\n};\n\nexport const DATA_NOT_FOUND = {\n  code: 1010,\n  message: \"Data not found\",\n};\n\nexport const MONGO_ERROR = {\n  code: 1011,\n  message: \"Error in Mongo Query\",\n};\n\nexport const DATA_ALREADY_EXISTS = {\n  code: 1012,\n  message: \"Data already exist\",\n};\n\nexport const EXPIRED_USER = {\n  code: 1016,\n  message: \"Expired user\",\n};\n\nexport const NOT_REGISTERED_USER = {\n  code: 1017,\n  message: \"Not registered user\",\n};\n\nexport const REDIS_CONNECTION_ERROR = {\n  code: 1018,\n  message: \"Redis connection error\",\n};\nexport const ORGANISATION_NOT_EXISTS =\n{\n  code :1019,\n  messsage:\"Organisation does not exists\"\n}\n\nexport const BUSINESS_DID_NUMBER_NOT_FOUND =\n{\n  code :1020,\n  messsage:\"Business DID Number Is Not Found\"\n}\nexport const BUSINESS_DID_NUMBER_UNABLE_CALL_SAME_NO=\n{\n  code : 1021,\n  message:\"Unable To Call The Same Business DID Number\"\n}\n"],"mappings":";;;;;;AAAO,MAAMA,mBAAmB,GAAG;EACjCC,IAAI,EAAE,IAD2B;EAEjCC,OAAO,EAAE;AAFwB,CAA5B;;AAKA,MAAMC,eAAe,GAAG;EAC7BF,IAAI,EAAE,IADuB;EAE7BC,OAAO,EAAE;AAFoB,CAAxB;;AAKA,MAAME,eAAe,GAAG;EAC7BH,IAAI,EAAE,IADuB;EAE7BC,OAAO,EAAE;AAFoB,CAAxB;;AAKA,MAAMG,qBAAqB,GAAG;EACnCJ,IAAI,EAAE,IAD6B;EAEnCC,OAAO,EAAE;AAF0B,CAA9B;;AAKA,MAAMI,qBAAqB,GAAG;EACnCL,IAAI,EAAE,IAD6B;EAEnCC,OAAO,EAAE;AAF0B,CAA9B;;AAKA,MAAMK,iBAAiB,GAAG;EAC/BN,IAAI,EAAE,IADyB;EAE/BC,OAAO,EAAE;AAFsB,CAA1B;;AAKA,MAAMM,mBAAmB,GAAG;EACjCP,IAAI,EAAE,IAD2B;EAEjCC,OAAO,EAAE;AAFwB,CAA5B;;AAKA,MAAMO,aAAa,GAAG;EAC3BR,IAAI,EAAE,IADqB;EAE3BC,OAAO,EAAE;AAFkB,CAAtB;;AAKA,MAAMQ,gBAAgB,GAAG;EAC9BT,IAAI,EAAE,IADwB;EAE9BC,OAAO,EAAE;AAFqB,CAAzB;;AAKA,MAAMS,cAAc,GAAG;EAC5BV,IAAI,EAAE,IADsB;EAE5BC,OAAO,EAAE;AAFmB,CAAvB;;AAKA,MAAMU,cAAc,GAAG;EAC5BX,IAAI,EAAE,IADsB;EAE5BC,OAAO,EAAE;AAFmB,CAAvB;;AAKA,MAAMW,WAAW,GAAG;EACzBZ,IAAI,EAAE,IADmB;EAEzBC,OAAO,EAAE;AAFgB,CAApB;;AAKA,MAAMY,mBAAmB,GAAG;EACjCb,IAAI,EAAE,IAD2B;EAEjCC,OAAO,EAAE;AAFwB,CAA5B;;AAKA,MAAMa,YAAY,GAAG;EAC1Bd,IAAI,EAAE,IADoB;EAE1BC,OAAO,EAAE;AAFiB,CAArB;;AAKA,MAAMc,mBAAmB,GAAG;EACjCf,IAAI,EAAE,IAD2B;EAEjCC,OAAO,EAAE;AAFwB,CAA5B;;AAKA,MAAMe,sBAAsB,GAAG;EACpChB,IAAI,EAAE,IAD8B;EAEpCC,OAAO,EAAE;AAF2B,CAA/B;;AAIA,MAAMgB,uBAAuB,GACpC;EACEjB,IAAI,EAAE,IADR;EAEEkB,QAAQ,EAAC;AAFX,CADO;;AAMA,MAAMC,6BAA6B,GAC1C;EACEnB,IAAI,EAAE,IADR;EAEEkB,QAAQ,EAAC;AAFX,CADO;;AAKA,MAAME,uCAAuC,GACpD;EACEpB,IAAI,EAAG,IADT;EAEEC,OAAO,EAAC;AAFV,CADO"}},"mtime":1654085554324},"{\"assumptions\":{},\"sourceRoot\":\"/Users/ramireddycharitha/git-explore/models/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/ramireddycharitha/git-explore\",\"filename\":\"/Users/ramireddycharitha/git-explore/models/AbstractModels.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"default\",\"root\":\"/Users/ramireddycharitha/git-explore\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.17.10:default":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.mongoUpsertOne = exports.mongoUpdateOne = exports.mongoUpdateMany = exports.mongoInsertOne = exports.mongoInsertMany = exports.mongoFindWithSort = exports.mongoFindOneWithOutLean = exports.mongoFindOneAndUpdate = exports.mongoFindOneAndRemove = exports.mongoFindOne = exports.mongoFindMany = exports.mongoFindCursor = exports.mongoDistinct = exports.mongoDeleteOne = exports.mongoDeleteMany = exports.mongoCount = exports.mongoAggregate = void 0;\n\nconst mongoFindOne = async (col, findCondition, selectCondition = {}) => {\n  const result = await col.findOne(findCondition).select(selectCondition).lean().exec();\n  console.log(\"===== from the mongo find one \" + JSON.stringify(result));\n  return result;\n};\n\nexports.mongoFindOne = mongoFindOne;\n\nconst mongoFindOneWithOutLean = async (col, findCondition, selectCondition = {}) => {\n  const result = await col.findOne(findCondition).select(selectCondition).exec();\n  return result;\n};\n\nexports.mongoFindOneWithOutLean = mongoFindOneWithOutLean;\n\nconst mongoFindWithSort = async (col, findCondition, selectCondition = {}, limit = 0, sortCondition = {\n  _id: -1\n}) => {\n  const result = await col.find(findCondition).select(selectCondition).sort(sortCondition).limit(limit).lean().exec();\n  return result;\n};\n\nexports.mongoFindWithSort = mongoFindWithSort;\n\nconst mongoFindMany = async (col, findCondition, selectCondition = {}, limit = 0) => {\n  const result = await col.find(findCondition).select(selectCondition).limit(limit).lean().exec();\n  return result;\n};\n\nexports.mongoFindMany = mongoFindMany;\n\nconst mongoFindCursor = async (col, findCondition, selectCondition = {}, limit = 0) => {\n  const cursor = await col.find(findCondition).select(selectCondition).limit(limit).lean().cursor();\n  return cursor;\n};\n\nexports.mongoFindCursor = mongoFindCursor;\n\nconst mongoCount = async (col, findCondition) => {\n  const count = await col.count(findCondition);\n  return count;\n};\n\nexports.mongoCount = mongoCount;\n\nconst mongoUpdateOne = async (col, findCondition, updateCondition) => {\n  await col.updateOne(findCondition, updateCondition);\n};\n\nexports.mongoUpdateOne = mongoUpdateOne;\n\nconst mongoUpsertOne = async (col, findCondition, updateCondition) => {\n  await col.updateOne(findCondition, updateCondition, {\n    upsert: true\n  });\n};\n\nexports.mongoUpsertOne = mongoUpsertOne;\n\nconst mongoUpdateMany = async (col, findCondition, updateCondition) => {\n  await col.updateOne(findCondition, updateCondition, {\n    multi: true\n  });\n};\n\nexports.mongoUpdateMany = mongoUpdateMany;\n\nconst mongoAggregate = async (col, aggregateCondition) => {\n  const result = col.aggregate(aggregateCondition);\n  return result;\n};\n\nexports.mongoAggregate = mongoAggregate;\n\nconst mongoDeleteOne = async (col, findCondition) => {\n  await col.deleteOne(findCondition);\n};\n\nexports.mongoDeleteOne = mongoDeleteOne;\n\nconst mongoDeleteMany = async (col, findCondition) => {\n  await col.deleteMany(findCondition);\n};\n\nexports.mongoDeleteMany = mongoDeleteMany;\n\nconst mongoInsertOne = async (col, doc) => {\n  const moongooseDoc = col(doc);\n  const result = await moongooseDoc.save();\n  return result;\n};\n\nexports.mongoInsertOne = mongoInsertOne;\n\nconst mongoInsertMany = async (col, docs) => {\n  await col.insertMany(docs);\n};\n\nexports.mongoInsertMany = mongoInsertMany;\n\nconst mongoDistinct = async (col, string, findCondition) => {\n  const result = await col.distinct(string, findCondition);\n  return result;\n};\n\nexports.mongoDistinct = mongoDistinct;\n\nconst mongoFindOneAndUpdate = async (col, findCondition, updateCondition, returnCondition) => {\n  console.log(\"+++++ the col is\" + JSON.stringify(col));\n  console.log(\"+++++ the find cond  is\" + JSON.stringify(findCondition));\n  console.log(\"+++++ the update cond  is\" + JSON.stringify(updateCondition));\n  const result = await col.findOneAndUpdate(findCondition, updateCondition, returnCondition);\n  console.log(\"+++++++++++++++++++FIND AND UPDATE\" + result);\n  return result;\n};\n\nexports.mongoFindOneAndUpdate = mongoFindOneAndUpdate;\n\nconst mongoFindOneAndRemove = async (col, findCondition) => {\n  const result = await col.findOneAndRemove(findCondition);\n  return result;\n};\n\nexports.mongoFindOneAndRemove = mongoFindOneAndRemove;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJtb25nb0ZpbmRPbmUiLCJjb2wiLCJmaW5kQ29uZGl0aW9uIiwic2VsZWN0Q29uZGl0aW9uIiwicmVzdWx0IiwiZmluZE9uZSIsInNlbGVjdCIsImxlYW4iLCJleGVjIiwiY29uc29sZSIsImxvZyIsIkpTT04iLCJzdHJpbmdpZnkiLCJtb25nb0ZpbmRPbmVXaXRoT3V0TGVhbiIsIm1vbmdvRmluZFdpdGhTb3J0IiwibGltaXQiLCJzb3J0Q29uZGl0aW9uIiwiX2lkIiwiZmluZCIsInNvcnQiLCJtb25nb0ZpbmRNYW55IiwibW9uZ29GaW5kQ3Vyc29yIiwiY3Vyc29yIiwibW9uZ29Db3VudCIsImNvdW50IiwibW9uZ29VcGRhdGVPbmUiLCJ1cGRhdGVDb25kaXRpb24iLCJ1cGRhdGVPbmUiLCJtb25nb1Vwc2VydE9uZSIsInVwc2VydCIsIm1vbmdvVXBkYXRlTWFueSIsIm11bHRpIiwibW9uZ29BZ2dyZWdhdGUiLCJhZ2dyZWdhdGVDb25kaXRpb24iLCJhZ2dyZWdhdGUiLCJtb25nb0RlbGV0ZU9uZSIsImRlbGV0ZU9uZSIsIm1vbmdvRGVsZXRlTWFueSIsImRlbGV0ZU1hbnkiLCJtb25nb0luc2VydE9uZSIsImRvYyIsIm1vb25nb29zZURvYyIsInNhdmUiLCJtb25nb0luc2VydE1hbnkiLCJkb2NzIiwiaW5zZXJ0TWFueSIsIm1vbmdvRGlzdGluY3QiLCJzdHJpbmciLCJkaXN0aW5jdCIsIm1vbmdvRmluZE9uZUFuZFVwZGF0ZSIsInJldHVybkNvbmRpdGlvbiIsImZpbmRPbmVBbmRVcGRhdGUiLCJtb25nb0ZpbmRPbmVBbmRSZW1vdmUiLCJmaW5kT25lQW5kUmVtb3ZlIl0sInNvdXJjZVJvb3QiOiIvVXNlcnMvcmFtaXJlZGR5Y2hhcml0aGEvZ2l0LWV4cGxvcmUvbW9kZWxzLyIsInNvdXJjZXMiOlsiQWJzdHJhY3RNb2RlbHMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNvbnN0IG1vbmdvRmluZE9uZSA9IGFzeW5jIChcbiAgY29sLFxuICBmaW5kQ29uZGl0aW9uLFxuICBzZWxlY3RDb25kaXRpb24gPSB7fSxcbikgPT4ge1xuICBjb25zdCByZXN1bHQgPSBhd2FpdCBjb2xcbiAgICAuZmluZE9uZShmaW5kQ29uZGl0aW9uKVxuICAgIC5zZWxlY3Qoc2VsZWN0Q29uZGl0aW9uKVxuICAgIC5sZWFuKClcbiAgICAuZXhlYygpO1xuICBjb25zb2xlLmxvZyhcIj09PT09IGZyb20gdGhlIG1vbmdvIGZpbmQgb25lIFwiK0pTT04uc3RyaW5naWZ5KHJlc3VsdCkpO1xuICByZXR1cm4gcmVzdWx0O1xufTtcblxuZXhwb3J0IGNvbnN0IG1vbmdvRmluZE9uZVdpdGhPdXRMZWFuID0gYXN5bmMgKFxuICBjb2wsXG4gIGZpbmRDb25kaXRpb24sXG4gIHNlbGVjdENvbmRpdGlvbiA9IHt9LFxuKSA9PiB7XG4gIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNvbFxuICAgIC5maW5kT25lKGZpbmRDb25kaXRpb24pXG4gICAgLnNlbGVjdChzZWxlY3RDb25kaXRpb24pXG4gICAgLmV4ZWMoKTtcbiAgcmV0dXJuIHJlc3VsdDtcbn07XG5cbmV4cG9ydCBjb25zdCBtb25nb0ZpbmRXaXRoU29ydCA9IGFzeW5jIChcbiAgY29sLFxuICBmaW5kQ29uZGl0aW9uLFxuICBzZWxlY3RDb25kaXRpb24gPSB7fSxcbiAgbGltaXQgPSAwLFxuICBzb3J0Q29uZGl0aW9uID0geyBfaWQ6IC0xIH0sXG4pID0+IHtcbiAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY29sXG4gICAgLmZpbmQoZmluZENvbmRpdGlvbilcbiAgICAuc2VsZWN0KHNlbGVjdENvbmRpdGlvbilcbiAgICAuc29ydChzb3J0Q29uZGl0aW9uKVxuICAgIC5saW1pdChsaW1pdClcbiAgICAubGVhbigpXG4gICAgLmV4ZWMoKTtcbiAgcmV0dXJuIHJlc3VsdDtcbn07XG5cbmV4cG9ydCBjb25zdCBtb25nb0ZpbmRNYW55ID0gYXN5bmMgKFxuICBjb2wsXG4gIGZpbmRDb25kaXRpb24sXG4gIHNlbGVjdENvbmRpdGlvbiA9IHt9LFxuICBsaW1pdCA9IDAsXG4pID0+IHtcbiAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY29sXG4gICAgLmZpbmQoZmluZENvbmRpdGlvbilcbiAgICAuc2VsZWN0KHNlbGVjdENvbmRpdGlvbilcbiAgICAubGltaXQobGltaXQpXG4gICAgLmxlYW4oKVxuICAgIC5leGVjKCk7XG4gIHJldHVybiByZXN1bHQ7XG59O1xuXG5leHBvcnQgY29uc3QgbW9uZ29GaW5kQ3Vyc29yID0gYXN5bmMgKFxuICBjb2wsXG4gIGZpbmRDb25kaXRpb24sXG4gIHNlbGVjdENvbmRpdGlvbiA9IHt9LFxuICBsaW1pdCA9IDAsXG4pID0+IHtcbiAgY29uc3QgY3Vyc29yID0gYXdhaXQgY29sXG4gICAgLmZpbmQoZmluZENvbmRpdGlvbilcbiAgICAuc2VsZWN0KHNlbGVjdENvbmRpdGlvbilcbiAgICAubGltaXQobGltaXQpXG4gICAgLmxlYW4oKVxuICAgIC5jdXJzb3IoKTtcbiAgcmV0dXJuIGN1cnNvcjtcbn07XG5cbmV4cG9ydCBjb25zdCBtb25nb0NvdW50ID0gYXN5bmMgKGNvbCwgZmluZENvbmRpdGlvbikgPT4ge1xuICBjb25zdCBjb3VudCA9IGF3YWl0IGNvbC5jb3VudChmaW5kQ29uZGl0aW9uKTtcbiAgcmV0dXJuIGNvdW50O1xufTtcblxuZXhwb3J0IGNvbnN0IG1vbmdvVXBkYXRlT25lID0gYXN5bmMgKGNvbCwgZmluZENvbmRpdGlvbiwgdXBkYXRlQ29uZGl0aW9uKSA9PiB7XG4gIGF3YWl0IGNvbC51cGRhdGVPbmUoZmluZENvbmRpdGlvbiwgdXBkYXRlQ29uZGl0aW9uKTtcbn07XG5cbmV4cG9ydCBjb25zdCBtb25nb1Vwc2VydE9uZSA9IGFzeW5jIChjb2wsIGZpbmRDb25kaXRpb24sIHVwZGF0ZUNvbmRpdGlvbikgPT4ge1xuICBhd2FpdCBjb2wudXBkYXRlT25lKGZpbmRDb25kaXRpb24sIHVwZGF0ZUNvbmRpdGlvbiwgeyB1cHNlcnQ6IHRydWUgfSk7XG59O1xuXG5leHBvcnQgY29uc3QgbW9uZ29VcGRhdGVNYW55ID0gYXN5bmMgKGNvbCwgZmluZENvbmRpdGlvbiwgdXBkYXRlQ29uZGl0aW9uKSA9PiB7XG4gIGF3YWl0IGNvbC51cGRhdGVPbmUoZmluZENvbmRpdGlvbiwgdXBkYXRlQ29uZGl0aW9uLCB7IG11bHRpOiB0cnVlIH0pO1xufTtcblxuZXhwb3J0IGNvbnN0IG1vbmdvQWdncmVnYXRlID0gYXN5bmMgKGNvbCwgYWdncmVnYXRlQ29uZGl0aW9uKSA9PiB7XG4gIGNvbnN0IHJlc3VsdCA9IGNvbC5hZ2dyZWdhdGUoYWdncmVnYXRlQ29uZGl0aW9uKTtcbiAgcmV0dXJuIHJlc3VsdDtcbn07XG5cbmV4cG9ydCBjb25zdCBtb25nb0RlbGV0ZU9uZSA9IGFzeW5jIChjb2wsIGZpbmRDb25kaXRpb24pID0+IHtcbiAgYXdhaXQgY29sLmRlbGV0ZU9uZShmaW5kQ29uZGl0aW9uKTtcbn07XG5cbmV4cG9ydCBjb25zdCBtb25nb0RlbGV0ZU1hbnkgPSBhc3luYyAoY29sLCBmaW5kQ29uZGl0aW9uKSA9PiB7XG4gIGF3YWl0IGNvbC5kZWxldGVNYW55KGZpbmRDb25kaXRpb24pO1xufTtcblxuZXhwb3J0IGNvbnN0IG1vbmdvSW5zZXJ0T25lID0gYXN5bmMgKGNvbCwgZG9jKSA9PiB7XG4gIGNvbnN0IG1vb25nb29zZURvYyA9IGNvbChkb2MpO1xuICBjb25zdCByZXN1bHQgPSBhd2FpdCBtb29uZ29vc2VEb2Muc2F2ZSgpO1xuICByZXR1cm4gcmVzdWx0O1xufTtcblxuZXhwb3J0IGNvbnN0IG1vbmdvSW5zZXJ0TWFueSA9IGFzeW5jIChjb2wsIGRvY3MpID0+IHtcbiAgYXdhaXQgY29sLmluc2VydE1hbnkoZG9jcyk7XG59O1xuXG5leHBvcnQgY29uc3QgbW9uZ29EaXN0aW5jdCA9IGFzeW5jIChjb2wsIHN0cmluZywgZmluZENvbmRpdGlvbikgPT4ge1xuICBjb25zdCByZXN1bHQgPSBhd2FpdCBjb2wuZGlzdGluY3Qoc3RyaW5nLCBmaW5kQ29uZGl0aW9uKTtcbiAgcmV0dXJuIHJlc3VsdDtcbn07XG5cbmV4cG9ydCBjb25zdCBtb25nb0ZpbmRPbmVBbmRVcGRhdGUgPSBhc3luYyAoXG4gIGNvbCxcbiAgZmluZENvbmRpdGlvbixcbiAgdXBkYXRlQ29uZGl0aW9uLFxuICByZXR1cm5Db25kaXRpb24sXG4pID0+IHtcbiAgY29uc29sZS5sb2coXCIrKysrKyB0aGUgY29sIGlzXCIrSlNPTi5zdHJpbmdpZnkoY29sKSk7XG4gIGNvbnNvbGUubG9nKFwiKysrKysgdGhlIGZpbmQgY29uZCAgaXNcIitKU09OLnN0cmluZ2lmeShmaW5kQ29uZGl0aW9uKSk7XG4gIGNvbnNvbGUubG9nKFwiKysrKysgdGhlIHVwZGF0ZSBjb25kICBpc1wiK0pTT04uc3RyaW5naWZ5KHVwZGF0ZUNvbmRpdGlvbikpO1xuICBjb25zdCByZXN1bHQgPSBhd2FpdCBjb2wuZmluZE9uZUFuZFVwZGF0ZShcbiAgICBmaW5kQ29uZGl0aW9uLFxuICAgIHVwZGF0ZUNvbmRpdGlvbixcbiAgICByZXR1cm5Db25kaXRpb24sXG4gICk7XG4gIGNvbnNvbGUubG9nKFwiKysrKysrKysrKysrKysrKysrK0ZJTkQgQU5EIFVQREFURVwiKyByZXN1bHQpO1xuICByZXR1cm4gcmVzdWx0O1xuICBcbn07XG5cbmV4cG9ydCBjb25zdCBtb25nb0ZpbmRPbmVBbmRSZW1vdmUgPSBhc3luYyAoY29sLCBmaW5kQ29uZGl0aW9uKSA9PiB7XG4gIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNvbC5maW5kT25lQW5kUmVtb3ZlKGZpbmRDb25kaXRpb24pO1xuICByZXR1cm4gcmVzdWx0O1xufTtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFPLE1BQU1BLFlBQVksR0FBRyxPQUMxQkMsR0FEMEIsRUFFMUJDLGFBRjBCLEVBRzFCQyxlQUFlLEdBQUcsRUFIUSxLQUl2QjtFQUNILE1BQU1DLE1BQU0sR0FBRyxNQUFNSCxHQUFHLENBQ3JCSSxPQURrQixDQUNWSCxhQURVLEVBRWxCSSxNQUZrQixDQUVYSCxlQUZXLEVBR2xCSSxJQUhrQixHQUls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","map":{"version":3,"names":["mongoFindOne","col","findCondition","selectCondition","result","findOne","select","lean","exec","console","log","JSON","stringify","mongoFindOneWithOutLean","mongoFindWithSort","limit","sortCondition","_id","find","sort","mongoFindMany","mongoFindCursor","cursor","mongoCount","count","mongoUpdateOne","updateCondition","updateOne","mongoUpsertOne","upsert","mongoUpdateMany","multi","mongoAggregate","aggregateCondition","aggregate","mongoDeleteOne","deleteOne","mongoDeleteMany","deleteMany","mongoInsertOne","doc","moongooseDoc","save","mongoInsertMany","docs","insertMany","mongoDistinct","string","distinct","mongoFindOneAndUpdate","returnCondition","findOneAndUpdate","mongoFindOneAndRemove","findOneAndRemove"],"sourceRoot":"/Users/ramireddycharitha/git-explore/models/","sources":["AbstractModels.js"],"sourcesContent":["export const mongoFindOne = async (\n  col,\n  findCondition,\n  selectCondition = {},\n) => {\n  const result = await col\n    .findOne(findCondition)\n    .select(selectCondition)\n    .lean()\n    .exec();\n  console.log(\"===== from the mongo find one \"+JSON.stringify(result));\n  return result;\n};\n\nexport const mongoFindOneWithOutLean = async (\n  col,\n  findCondition,\n  selectCondition = {},\n) => {\n  const result = await col\n    .findOne(findCondition)\n    .select(selectCondition)\n    .exec();\n  return result;\n};\n\nexport const mongoFindWithSort = async (\n  col,\n  findCondition,\n  selectCondition = {},\n  limit = 0,\n  sortCondition = { _id: -1 },\n) => {\n  const result = await col\n    .find(findCondition)\n    .select(selectCondition)\n    .sort(sortCondition)\n    .limit(limit)\n    .lean()\n    .exec();\n  return result;\n};\n\nexport const mongoFindMany = async (\n  col,\n  findCondition,\n  selectCondition = {},\n  limit = 0,\n) => {\n  const result = await col\n    .find(findCondition)\n    .select(selectCondition)\n    .limit(limit)\n    .lean()\n    .exec();\n  return result;\n};\n\nexport const mongoFindCursor = async (\n  col,\n  findCondition,\n  selectCondition = {},\n  limit = 0,\n) => {\n  const cursor = await col\n    .find(findCondition)\n    .select(selectCondition)\n    .limit(limit)\n    .lean()\n    .cursor();\n  return cursor;\n};\n\nexport const mongoCount = async (col, findCondition) => {\n  const count = await col.count(findCondition);\n  return count;\n};\n\nexport const mongoUpdateOne = async (col, findCondition, updateCondition) => {\n  await col.updateOne(findCondition, updateCondition);\n};\n\nexport const mongoUpsertOne = async (col, findCondition, updateCondition) => {\n  await col.updateOne(findCondition, updateCondition, { upsert: true });\n};\n\nexport const mongoUpdateMany = async (col, findCondition, updateCondition) => {\n  await col.updateOne(findCondition, updateCondition, { multi: true });\n};\n\nexport const mongoAggregate = async (col, aggregateCondition) => {\n  const result = col.aggregate(aggregateCondition);\n  return result;\n};\n\nexport const mongoDeleteOne = async (col, findCondition) => {\n  await col.deleteOne(findCondition);\n};\n\nexport const mongoDeleteMany = async (col, findCondition) => {\n  await col.deleteMany(findCondition);\n};\n\nexport const mongoInsertOne = async (col, doc) => {\n  const moongooseDoc = col(doc);\n  const result = await moongooseDoc.save();\n  return result;\n};\n\nexport const mongoInsertMany = async (col, docs) => {\n  await col.insertMany(docs);\n};\n\nexport const mongoDistinct = async (col, string, findCondition) => {\n  const result = await col.distinct(string, findCondition);\n  return result;\n};\n\nexport const mongoFindOneAndUpdate = async (\n  col,\n  findCondition,\n  updateCondition,\n  returnCondition,\n) => {\n  console.log(\"+++++ the col is\"+JSON.stringify(col));\n  console.log(\"+++++ the find cond  is\"+JSON.stringify(findCondition));\n  console.log(\"+++++ the update cond  is\"+JSON.stringify(updateCondition));\n  const result = await col.findOneAndUpdate(\n    findCondition,\n    updateCondition,\n    returnCondition,\n  );\n  console.log(\"+++++++++++++++++++FIND AND UPDATE\"+ result);\n  return result;\n  \n};\n\nexport const mongoFindOneAndRemove = async (col, findCondition) => {\n  const result = await col.findOneAndRemove(findCondition);\n  return result;\n};\n"],"mappings":";;;;;;;AAAO,MAAMA,YAAY,GAAG,OAC1BC,GAD0B,EAE1BC,aAF0B,EAG1BC,eAAe,GAAG,EAHQ,KAIvB;EACH,MAAMC,MAAM,GAAG,MAAMH,GAAG,CACrBI,OADkB,CACVH,aADU,EAElBI,MAFkB,CAEXH,eAFW,EAGlBI,IAHkB,GAIlBC,IAJkB,EAArB;EAKAC,OAAO,CAACC,GAAR,CAAY,mCAAiCC,IAAI,CAACC,SAAL,CAAeR,MAAf,CAA7C;EACA,OAAOA,MAAP;AACD,CAZM;;;;AAcA,MAAMS,uBAAuB,GAAG,OACrCZ,GADqC,EAErCC,aAFqC,EAGrCC,eAAe,GAAG,EAHmB,KAIlC;EACH,MAAMC,MAAM,GAAG,MAAMH,GAAG,CACrBI,OADkB,CACVH,aADU,EAElBI,MAFkB,CAEXH,eAFW,EAGlBK,IAHkB,EAArB;EAIA,OAAOJ,MAAP;AACD,CAVM;;;;AAYA,MAAMU,iBAAiB,GAAG,OAC/Bb,GAD+B,EAE/BC,aAF+B,EAG/BC,eAAe,GAAG,EAHa,EAI/BY,KAAK,GAAG,CAJuB,EAK/BC,aAAa,GAAG;EAAEC,GAAG,EAAE,CAAC;AAAR,CALe,KAM5B;EACH,MAAMb,MAAM,GAAG,MAAMH,GAAG,CACrBiB,IADkB,CACbhB,aADa,EAElBI,MAFkB,CAEXH,eAFW,EAGlBgB,IAHkB,CAGbH,aAHa,EAIlBD,KAJkB,CAIZA,KAJY,EAKlBR,IALkB,GAMlBC,IANkB,EAArB;EAOA,OAAOJ,MAAP;AACD,CAfM;;;;AAiBA,MAAMgB,aAAa,GAAG,OAC3BnB,GAD2B,EAE3BC,aAF2B,EAG3BC,eAAe,GAAG,EAHS,EAI3BY,KAAK,GAAG,CAJmB,KAKxB;EACH,MAAMX,MAAM,GAAG,MAAMH,GAAG,CACrBiB,IADkB,CACbhB,aADa,EAElBI,MAFkB,CAEXH,eAFW,EAGlBY,KAHkB,CAGZA,KAHY,EAIlBR,IAJkB,GAKlBC,IALkB,EAArB;EAMA,OAAOJ,MAAP;AACD,CAbM;;;;AAeA,MAAMiB,eAAe,GAAG,OAC7BpB,GAD6B,EAE7BC,aAF6B,EAG7BC,eAAe,GAAG,EAHW,EAI7BY,KAAK,GAAG,CAJqB,KAK1B;EACH,MAAMO,MAAM,GAAG,MAAMrB,GAAG,CACrBiB,IADkB,CACbhB,aADa,EAElBI,MAFkB,CAEXH,eAFW,EAGlBY,KAHkB,CAGZA,KAHY,EAIlBR,IAJkB,GAKlBe,MALkB,EAArB;EAMA,OAAOA,MAAP;AACD,CAbM;;;;AAeA,MAAMC,UAAU,GAAG,OAAOtB,GAAP,EAAYC,aAAZ,KAA8B;EACtD,MAAMsB,KAAK,GAAG,MAAMvB,GAAG,CAACuB,KAAJ,CAAUtB,aAAV,CAApB;EACA,OAAOsB,KAAP;AACD,CAHM;;;;AAKA,MAAMC,cAAc,GAAG,OAAOxB,GAAP,EAAYC,aAAZ,EAA2BwB,eAA3B,KAA+C;EAC3E,MAAMzB,GAAG,CAAC0B,SAAJ,CAAczB,aAAd,EAA6BwB,eAA7B,CAAN;AACD,CAFM;;;;AAIA,MAAME,cAAc,GAAG,OAAO3B,GAAP,EAAYC,aAAZ,EAA2BwB,eAA3B,KAA+C;EAC3E,MAAMzB,GAAG,CAAC0B,SAAJ,CAAczB,aAAd,EAA6BwB,eAA7B,EAA8C;IAAEG,MAAM,EAAE;EAAV,CAA9C,CAAN;AACD,CAFM;;;;AAIA,MAAMC,eAAe,GAAG,OAAO7B,GAAP,EAAYC,aAAZ,EAA2BwB,eAA3B,KAA+C;EAC5E,MAAMzB,GAAG,CAAC0B,SAAJ,CAAczB,aAAd,EAA6BwB,eAA7B,EAA8C;IAAEK,KAAK,EAAE;EAAT,CAA9C,CAAN;AACD,CAFM;;;;AAIA,MAAMC,cAAc,GAAG,OAAO/B,GAAP,EAAYgC,kBAAZ,KAAmC;EAC/D,MAAM7B,MAAM,GAAGH,GAAG,CAACiC,SAAJ,CAAcD,kBAAd,CAAf;EACA,OAAO7B,MAAP;AACD,CAHM;;;;AAKA,MAAM+B,cAAc,GAAG,OAAOlC,GAAP,EAAYC,aAAZ,KAA8B;EAC1D,MAAMD,GAAG,CAACmC,SAAJ,CAAclC,aAAd,CAAN;AACD,CAFM;;;;AAIA,MAAMmC,eAAe,GAAG,OAAOpC,GAAP,EAAYC,aAAZ,KAA8B;EAC3D,MAAMD,GAAG,CAACqC,UAAJ,CAAepC,aAAf,CAAN;AACD,CAFM;;;;AAIA,MAAMqC,cAAc,GAAG,OAAOtC,GAAP,EAAYuC,GAAZ,KAAoB;EAChD,MAAMC,YAAY,GAAGxC,GAAG,CAACuC,GAAD,CAAxB;EACA,MAAMpC,MAAM,GAAG,MAAMqC,YAAY,CAACC,IAAb,EAArB;EACA,OAAOtC,MAAP;AACD,CAJM;;;;AAMA,MAAMuC,eAAe,GAAG,OAAO1C,GAAP,EAAY2C,IAAZ,KAAqB;EAClD,MAAM3C,GAAG,CAAC4C,UAAJ,CAAeD,IAAf,CAAN;AACD,CAFM;;;;AAIA,MAAME,aAAa,GAAG,OAAO7C,GAAP,EAAY8C,MAAZ,EAAoB7C,aAApB,KAAsC;EACjE,MAAME,MAAM,GAAG,MAAMH,GAAG,CAAC+C,QAAJ,CAAaD,MAAb,EAAqB7C,aAArB,CAArB;EACA,OAAOE,MAAP;AACD,CAHM;;;;AAKA,MAAM6C,qBAAqB,GAAG,OACnChD,GADmC,EAEnCC,aAFmC,EAGnCwB,eAHmC,EAInCwB,eAJmC,KAKhC;EACHzC,OAAO,CAACC,GAAR,CAAY,qBAAmBC,IAAI,CAACC,SAAL,CAAeX,GAAf,CAA/B;EACAQ,OAAO,CAACC,GAAR,CAAY,4BAA0BC,IAAI,CAACC,SAAL,CAAeV,aAAf,CAAtC;EACAO,OAAO,CAACC,GAAR,CAAY,8BAA4BC,IAAI,CAACC,SAAL,CAAec,eAAf,CAAxC;EACA,MAAMtB,MAAM,GAAG,MAAMH,GAAG,CAACkD,gBAAJ,CACnBjD,aADmB,EAEnBwB,eAFmB,EAGnBwB,eAHmB,CAArB;EAKAzC,OAAO,CAACC,GAAR,CAAY,uCAAsCN,MAAlD;EACA,OAAOA,MAAP;AAED,CAjBM;;;;AAmBA,MAAMgD,qBAAqB,GAAG,OAAOnD,GAAP,EAAYC,aAAZ,KAA8B;EACjE,MAAME,MAAM,GAAG,MAAMH,GAAG,CAACoD,gBAAJ,CAAqBnD,aAArB,CAArB;EACA,OAAOE,MAAP;AACD,CAHM"}},"mtime":1654085554350},"{\"assumptions\":{},\"sourceRoot\":\"/Users/ramireddycharitha/git-explore/models/mainDbSchema/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/ramireddycharitha/git-explore\",\"filename\":\"/Users/ramireddycharitha/git-explore/models/mainDbSchema/index.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"default\",\"root\":\"/Users/ramireddycharitha/git-explore\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.17.10:default":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Users = exports.Organisations = exports.IVRVirtualProfile = exports.Clients = exports.BusinessDIDNumbers = exports.BusinessCalls = void 0;\n\nvar mainDbConnection = _interopRequireWildcard(require(\"../../connections/MainDb\"));\n\nvar _ClientsSchema = _interopRequireDefault(require(\"./ClientsSchema\"));\n\nvar _UsersSchema = _interopRequireDefault(require(\"./UsersSchema\"));\n\nvar _OrganisationSchema = _interopRequireDefault(require(\"./OrganisationSchema\"));\n\nvar _IVRVirtualprofileSchema = _interopRequireDefault(require(\"./IVRVirtualprofileSchema\"));\n\nvar _BussinesscallSchema = _interopRequireDefault(require(\"./BussinesscallSchema\"));\n\nvar _BussinessDIDNumbersSchema = _interopRequireDefault(require(\"./BussinessDIDNumbersSchema\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nconst conn = mainDbConnection.getDbInstance();\nconst Users = conn.model(\"Users\", _UsersSchema.default, \"Users\"); // @hotfix: Collection name is Client (singular)\n// We can use plural name through out the code (Collection name can be changed while migrating)\n\nexports.Users = Users;\nconst Clients = conn.model(\"Clients\", _ClientsSchema.default, \"Client\");\nexports.Clients = Clients;\nconst Organisations = conn.model(\"Organisations\", _OrganisationSchema.default, \"Organisations\");\nexports.Organisations = Organisations;\nconst IVRVirtualProfile = conn.model(\"IVRVirtualProfile\", _IVRVirtualprofileSchema.default, \"IVRVirtualProfile\");\nexports.IVRVirtualProfile = IVRVirtualProfile;\nconst BusinessCalls = conn.model(\"BusinessCalls\", _BussinesscallSchema.default, \"BusinessCalls\");\nexports.BusinessCalls = BusinessCalls;\nconst BusinessDIDNumbers = conn.model(\"BusinessDIDNumbers\", _BussinessDIDNumbersSchema.default, \"BusinessDIDNumbers\");\nexports.BusinessDIDNumbers = BusinessDIDNumbers;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb25uIiwibWFpbkRiQ29ubmVjdGlvbiIsImdldERiSW5zdGFuY2UiLCJVc2VycyIsIm1vZGVsIiwiVXNlcnNTY2hlbWEiLCJDbGllbnRzIiwiQ2xpZW50c1NjaGVtYSIsIk9yZ2FuaXNhdGlvbnMiLCJPcmdhbmlzYXRpb25TY2hlbWEiLCJJVlJWaXJ0dWFsUHJvZmlsZSIsIklWUlZpcnR1YWxwcm9maWxlU2NoZW1hIiwiQnVzaW5lc3NDYWxscyIsIkJ1c3NpbmVzc2NhbGxTY2hlbWEiLCJCdXNpbmVzc0RJRE51bWJlcnMiLCJCdXNpbmVzc0RJRE51bWJlcnNTY2hlbWEiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy9yYW1pcmVkZHljaGFyaXRoYS9naXQtZXhwbG9yZS9tb2RlbHMvbWFpbkRiU2NoZW1hLyIsInNvdXJjZXMiOlsiaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgbWFpbkRiQ29ubmVjdGlvbiBmcm9tIFwiLi4vLi4vY29ubmVjdGlvbnMvTWFpbkRiXCI7XG5pbXBvcnQgQ2xpZW50c1NjaGVtYSBmcm9tIFwiLi9DbGllbnRzU2NoZW1hXCI7XG5pbXBvcnQgVXNlcnNTY2hlbWEgZnJvbSBcIi4vVXNlcnNTY2hlbWFcIjtcbmltcG9ydCBPcmdhbmlzYXRpb25TY2hlbWEgZnJvbSBcIi4vT3JnYW5pc2F0aW9uU2NoZW1hXCI7XG5pbXBvcnQgSVZSVmlydHVhbHByb2ZpbGVTY2hlbWEgZnJvbSBcIi4vSVZSVmlydHVhbHByb2ZpbGVTY2hlbWFcIjtcbmltcG9ydCBCdXNzaW5lc3NjYWxsU2NoZW1hIGZyb20gXCIuL0J1c3NpbmVzc2NhbGxTY2hlbWFcIjtcbmltcG9ydCBCdXNpbmVzc0RJRE51bWJlcnNTY2hlbWEgZnJvbSBcIi4vQnVzc2luZXNzRElETnVtYmVyc1NjaGVtYVwiO1xuXG5jb25zdCBjb25uID0gbWFpbkRiQ29ubmVjdGlvbi5nZXREYkluc3RhbmNlKCk7XG5leHBvcnQgY29uc3QgVXNlcnMgPSBjb25uLm1vZGVsKFwiVXNlcnNcIiwgVXNlcnNTY2hlbWEsIFwiVXNlcnNcIik7XG4vLyBAaG90Zml4OiBDb2xsZWN0aW9uIG5hbWUgaXMgQ2xpZW50IChzaW5ndWxhcilcbi8vIFdlIGNhbiB1c2UgcGx1cmFsIG5hbWUgdGhyb3VnaCBvdXQgdGhlIGNvZGUgKENvbGxlY3Rpb24gbmFtZSBjYW4gYmUgY2hhbmdlZCB3aGlsZSBtaWdyYXRpbmcpXG5leHBvcnQgY29uc3QgQ2xpZW50cyA9IGNvbm4ubW9kZWwoXCJDbGllbnRzXCIsIENsaWVudHNTY2hlbWEsIFwiQ2xpZW50XCIpO1xuXG5leHBvcnQgY29uc3QgT3JnYW5pc2F0aW9ucyA9IGNvbm4ubW9kZWwoXCJPcmdhbmlzYXRpb25zXCIsIE9yZ2FuaXNhdGlvblNjaGVtYSwgXCJPcmdhbmlzYXRpb25zXCIpO1xuZXhwb3J0IGNvbnN0IElWUlZpcnR1YWxQcm9maWxlID0gY29ubi5tb2RlbChcIklWUlZpcnR1YWxQcm9maWxlXCIsIElWUlZpcnR1YWxwcm9maWxlU2NoZW1hLCBcIklWUlZpcnR1YWxQcm9maWxlXCIpO1xuZXhwb3J0IGNvbnN0IEJ1c2luZXNzQ2FsbHMgPSBjb25uLm1vZGVsKFwiQnVzaW5lc3NDYWxsc1wiLCBCdXNzaW5lc3NjYWxsU2NoZW1hLCBcIkJ1c2luZXNzQ2FsbHNcIik7XG5leHBvcnQgY29uc3QgQnVzaW5lc3NESUROdW1iZXJzID0gY29ubi5tb2RlbChcIkJ1c2luZXNzRElETnVtYmVyc1wiLEJ1c2luZXNzRElETnVtYmVyc1NjaGVtYSxcIkJ1c2luZXNzRElETnVtYmVyc1wiKTtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOzs7Ozs7OztBQUVBLE1BQU1BLElBQUksR0FBR0MsZ0JBQWdCLENBQUNDLGFBQWpCLEVBQWI7QUFDTyxNQUFNQyxLQUFLLEdBQUdILElBQUksQ0FBQ0ksS0FBTCxDQUFXLE9BQVgsRUFBb0JDLG9CQUFwQixFQUFpQyxPQUFqQyxDQUFkLEMsQ0FDUDtBQUNBOzs7QUFDTyxNQUFNQyxPQUFPLEdBQUdOLElBQUksQ0FBQ0ksS0FBTCxDQUFXLFNBQVgsRUFBc0JHLHNCQUF0QixFQUFxQyxRQUFyQyxDQUFoQjs7QUFFQSxNQUFNQyxhQUFhLEdBQUdSLElBQUksQ0FBQ0ksS0FBTCxDQUFXLGVBQVgsRUFBNEJLLDJCQUE1QixFQUFnRCxlQUFoRCxDQUF0Qjs7QUFDQSxNQUFNQyxpQkFBaUIsR0FBR1YsSUFBSSxDQUFDSSxLQUFMLENBQVcsbUJBQVgsRUFBZ0NPLGdDQUFoQyxFQUF5RCxtQkFBekQsQ0FBMUI7O0FBQ0EsTUFBTUMsYUFBYSxHQUFHWixJQUFJLENBQUNJLEtBQUwsQ0FBVyxlQUFYLEVBQTRCUyw0QkFBNUIsRUFBaUQsZUFBakQsQ0FBdEI7O0FBQ0EsTUFBTUMsa0JBQWtCLEdBQUdkLElBQUksQ0FBQ0ksS0FBTCxDQUFXLG9CQUFYLEVBQWdDVyxrQ0FBaEMsRUFBeUQsb0JBQXpELENBQTNCIn0=","map":{"version":3,"names":["conn","mainDbConnection","getDbInstance","Users","model","UsersSchema","Clients","ClientsSchema","Organisations","OrganisationSchema","IVRVirtualProfile","IVRVirtualprofileSchema","BusinessCalls","BussinesscallSchema","BusinessDIDNumbers","BusinessDIDNumbersSchema"],"sourceRoot":"/Users/ramireddycharitha/git-explore/models/mainDbSchema/","sources":["index.js"],"sourcesContent":["import * as mainDbConnection from \"../../connections/MainDb\";\nimport ClientsSchema from \"./ClientsSchema\";\nimport UsersSchema from \"./UsersSchema\";\nimport OrganisationSchema from \"./OrganisationSchema\";\nimport IVRVirtualprofileSchema from \"./IVRVirtualprofileSchema\";\nimport BussinesscallSchema from \"./BussinesscallSchema\";\nimport BusinessDIDNumbersSchema from \"./BussinessDIDNumbersSchema\";\n\nconst conn = mainDbConnection.getDbInstance();\nexport const Users = conn.model(\"Users\", UsersSchema, \"Users\");\n// @hotfix: Collection name is Client (singular)\n// We can use plural name through out the code (Collection name can be changed while migrating)\nexport const Clients = conn.model(\"Clients\", ClientsSchema, \"Client\");\n\nexport const Organisations = conn.model(\"Organisations\", OrganisationSchema, \"Organisations\");\nexport const IVRVirtualProfile = conn.model(\"IVRVirtualProfile\", IVRVirtualprofileSchema, \"IVRVirtualProfile\");\nexport const BusinessCalls = conn.model(\"BusinessCalls\", BussinesscallSchema, \"BusinessCalls\");\nexport const BusinessDIDNumbers = conn.model(\"BusinessDIDNumbers\",BusinessDIDNumbersSchema,\"BusinessDIDNumbers\");\n"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;;;;;;;AAEA,MAAMA,IAAI,GAAGC,gBAAgB,CAACC,aAAjB,EAAb;AACO,MAAMC,KAAK,GAAGH,IAAI,CAACI,KAAL,CAAW,OAAX,EAAoBC,oBAApB,EAAiC,OAAjC,CAAd,C,CACP;AACA;;;AACO,MAAMC,OAAO,GAAGN,IAAI,CAACI,KAAL,CAAW,SAAX,EAAsBG,sBAAtB,EAAqC,QAArC,CAAhB;;AAEA,MAAMC,aAAa,GAAGR,IAAI,CAACI,KAAL,CAAW,eAAX,EAA4BK,2BAA5B,EAAgD,eAAhD,CAAtB;;AACA,MAAMC,iBAAiB,GAAGV,IAAI,CAACI,KAAL,CAAW,mBAAX,EAAgCO,gCAAhC,EAAyD,mBAAzD,CAA1B;;AACA,MAAMC,aAAa,GAAGZ,IAAI,CAACI,KAAL,CAAW,eAAX,EAA4BS,4BAA5B,EAAiD,eAAjD,CAAtB;;AACA,MAAMC,kBAAkB,GAAGd,IAAI,CAACI,KAAL,CAAW,oBAAX,EAAgCW,kCAAhC,EAAyD,oBAAzD,CAA3B"}},"mtime":1654085554360},"{\"assumptions\":{},\"sourceRoot\":\"/Users/ramireddycharitha/git-explore/models/mainDbSchema/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/ramireddycharitha/git-explore\",\"filename\":\"/Users/ramireddycharitha/git-explore/models/mainDbSchema/ClientsSchema.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"default\",\"root\":\"/Users/ramireddycharitha/git-explore\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.17.10:default":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _mongoose = require(\"mongoose\");\n\nconst ClientsSchema = new _mongoose.Schema({\n  metro_auth_key: {\n    type: String\n  }\n});\nvar _default = ClientsSchema;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJDbGllbnRzU2NoZW1hIiwiU2NoZW1hIiwibWV0cm9fYXV0aF9rZXkiLCJ0eXBlIiwiU3RyaW5nIl0sInNvdXJjZVJvb3QiOiIvVXNlcnMvcmFtaXJlZGR5Y2hhcml0aGEvZ2l0LWV4cGxvcmUvbW9kZWxzL21haW5EYlNjaGVtYS8iLCJzb3VyY2VzIjpbIkNsaWVudHNTY2hlbWEuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgU2NoZW1hIH0gZnJvbSBcIm1vbmdvb3NlXCI7XG5cbmNvbnN0IENsaWVudHNTY2hlbWEgPSBuZXcgU2NoZW1hKHtcbiAgbWV0cm9fYXV0aF9rZXk6IHtcbiAgICB0eXBlOiBTdHJpbmcsXG4gIH0sXG59KTtcblxuZXhwb3J0IGRlZmF1bHQgQ2xpZW50c1NjaGVtYTtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOztBQUVBLE1BQU1BLGFBQWEsR0FBRyxJQUFJQyxnQkFBSixDQUFXO0VBQy9CQyxjQUFjLEVBQUU7SUFDZEMsSUFBSSxFQUFFQztFQURRO0FBRGUsQ0FBWCxDQUF0QjtlQU1lSixhIn0=","map":{"version":3,"names":["ClientsSchema","Schema","metro_auth_key","type","String"],"sourceRoot":"/Users/ramireddycharitha/git-explore/models/mainDbSchema/","sources":["ClientsSchema.js"],"sourcesContent":["import { Schema } from \"mongoose\";\n\nconst ClientsSchema = new Schema({\n  metro_auth_key: {\n    type: String,\n  },\n});\n\nexport default ClientsSchema;\n"],"mappings":";;;;;;;AAAA;;AAEA,MAAMA,aAAa,GAAG,IAAIC,gBAAJ,CAAW;EAC/BC,cAAc,EAAE;IACdC,IAAI,EAAEC;EADQ;AADe,CAAX,CAAtB;eAMeJ,a"}},"mtime":1653643634186},"{\"assumptions\":{},\"sourceRoot\":\"/Users/ramireddycharitha/git-explore/models/mainDbSchema/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/ramireddycharitha/git-explore\",\"filename\":\"/Users/ramireddycharitha/git-explore/models/mainDbSchema/UsersSchema.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"default\",\"root\":\"/Users/ramireddycharitha/git-explore\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.17.10:default":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _mongoose = require(\"mongoose\");\n\nconst UsersSchema = new _mongoose.Schema({\n  password: {\n    type: String\n  },\n  firstName: {\n    type: String\n  },\n  lastName: {\n    required: false,\n    type: String\n  },\n  mobileNo: {\n    type: String\n  },\n  alternateMobileNo: {\n    type: String\n  },\n  email: {\n    type: String\n  },\n  clientId: {\n    required: true,\n    type: String\n  },\n  userType: {\n    type: Array,\n    required: true\n  },\n  sessionToken: {\n    type: String\n  },\n  isBlockedUser: {\n    type: Boolean\n  },\n  createdAt: {\n    type: Date,\n    default: Date.now\n  },\n  updatedAt: {\n    type: Date,\n    default: Date.now\n  }\n});\nvar _default = UsersSchema;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJVc2Vyc1NjaGVtYSIsIlNjaGVtYSIsInBhc3N3b3JkIiwidHlwZSIsIlN0cmluZyIsImZpcnN0TmFtZSIsImxhc3ROYW1lIiwicmVxdWlyZWQiLCJtb2JpbGVObyIsImFsdGVybmF0ZU1vYmlsZU5vIiwiZW1haWwiLCJjbGllbnRJZCIsInVzZXJUeXBlIiwiQXJyYXkiLCJzZXNzaW9uVG9rZW4iLCJpc0Jsb2NrZWRVc2VyIiwiQm9vbGVhbiIsImNyZWF0ZWRBdCIsIkRhdGUiLCJkZWZhdWx0Iiwibm93IiwidXBkYXRlZEF0Il0sInNvdXJjZVJvb3QiOiIvVXNlcnMvcmFtaXJlZGR5Y2hhcml0aGEvZ2l0LWV4cGxvcmUvbW9kZWxzL21haW5EYlNjaGVtYS8iLCJzb3VyY2VzIjpbIlVzZXJzU2NoZW1hLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFNjaGVtYSB9IGZyb20gXCJtb25nb29zZVwiO1xuXG5jb25zdCBVc2Vyc1NjaGVtYSA9IG5ldyBTY2hlbWEoe1xuICBwYXNzd29yZDoge1xuICAgIHR5cGU6IFN0cmluZyxcbiAgfSxcbiAgZmlyc3ROYW1lOiB7XG4gICAgdHlwZTogU3RyaW5nLFxuICB9LFxuICBsYXN0TmFtZToge1xuICAgIHJlcXVpcmVkOiBmYWxzZSxcbiAgICB0eXBlOiBTdHJpbmcsXG4gIH0sXG4gIG1vYmlsZU5vOiB7XG4gICAgdHlwZTogU3RyaW5nLFxuICB9LFxuICBhbHRlcm5hdGVNb2JpbGVObzoge1xuICAgIHR5cGU6IFN0cmluZyxcbiAgfSxcbiAgZW1haWw6IHtcbiAgICB0eXBlOiBTdHJpbmcsXG4gIH0sXG4gIGNsaWVudElkOiB7XG4gICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgdHlwZTogU3RyaW5nLFxuICB9LFxuICB1c2VyVHlwZToge1xuICAgIHR5cGU6IEFycmF5LFxuICAgIHJlcXVpcmVkOiB0cnVlLFxuICB9LFxuICBzZXNzaW9uVG9rZW46IHtcbiAgICB0eXBlOiBTdHJpbmcsXG4gIH0sXG4gIGlzQmxvY2tlZFVzZXI6IHtcbiAgICB0eXBlOiBCb29sZWFuLFxuICB9LFxuICBjcmVhdGVkQXQ6IHtcbiAgICB0eXBlOiBEYXRlLFxuICAgIGRlZmF1bHQ6IERhdGUubm93LFxuICB9LFxuICB1cGRhdGVkQXQ6IHtcbiAgICB0eXBlOiBEYXRlLFxuICAgIGRlZmF1bHQ6IERhdGUubm93LFxuICB9LFxufSk7XG5cbmV4cG9ydCBkZWZhdWx0IFVzZXJzU2NoZW1hO1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7O0FBRUEsTUFBTUEsV0FBVyxHQUFHLElBQUlDLGdCQUFKLENBQVc7RUFDN0JDLFFBQVEsRUFBRTtJQUNSQyxJQUFJLEVBQUVDO0VBREUsQ0FEbUI7RUFJN0JDLFNBQVMsRUFBRTtJQUNURixJQUFJLEVBQUVDO0VBREcsQ0FKa0I7RUFPN0JFLFFBQVEsRUFBRTtJQUNSQyxRQUFRLEVBQUUsS0FERjtJQUVSSixJQUFJLEVBQUVDO0VBRkUsQ0FQbUI7RUFXN0JJLFFBQVEsRUFBRTtJQUNSTCxJQUFJLEVBQUVDO0VBREUsQ0FYbUI7RUFjN0JLLGlCQUFpQixFQUFFO0lBQ2pCTixJQUFJLEVBQUVDO0VBRFcsQ0FkVTtFQWlCN0JNLEtBQUssRUFBRTtJQUNMUCxJQUFJLEVBQUVDO0VBREQsQ0FqQnNCO0VBb0I3Qk8sUUFBUSxFQUFFO0lBQ1JKLFFBQVEsRUFBRSxJQURGO0lBRVJKLElBQUksRUFBRUM7RUFGRSxDQXBCbUI7RUF3QjdCUSxRQUFRLEVBQUU7SUFDUlQsSUFBSSxFQUFFVSxLQURFO0lBRVJOLFFBQVEsRUFBRTtFQUZGLENBeEJtQjtFQTRCN0JPLFlBQVksRUFBRTtJQUNaWCxJQUFJLEVBQUVDO0VBRE0sQ0E1QmU7RUErQjdCVyxhQUFhLEVBQUU7SUFDYlosSUFBSSxFQUFFYTtFQURPLENBL0JjO0VBa0M3QkMsU0FBUyxFQUFFO0lBQ1RkLElBQUksRUFBRWUsSUFERztJQUVUQyxPQUFPLEVBQUVELElBQUksQ0FBQ0U7RUFGTCxDQWxDa0I7RUFzQzdCQyxTQUFTLEVBQUU7SUFDVGxCLElBQUksRUFBRWUsSUFERztJQUVUQyxPQUFPLEVBQUVELElBQUksQ0FBQ0U7RUFGTDtBQXRDa0IsQ0FBWCxDQUFwQjtlQTRDZXBCLFcifQ==","map":{"version":3,"names":["UsersSchema","Schema","password","type","String","firstName","lastName","required","mobileNo","alternateMobileNo","email","clientId","userType","Array","sessionToken","isBlockedUser","Boolean","createdAt","Date","default","now","updatedAt"],"sourceRoot":"/Users/ramireddycharitha/git-explore/models/mainDbSchema/","sources":["UsersSchema.js"],"sourcesContent":["import { Schema } from \"mongoose\";\n\nconst UsersSchema = new Schema({\n  password: {\n    type: String,\n  },\n  firstName: {\n    type: String,\n  },\n  lastName: {\n    required: false,\n    type: String,\n  },\n  mobileNo: {\n    type: String,\n  },\n  alternateMobileNo: {\n    type: String,\n  },\n  email: {\n    type: String,\n  },\n  clientId: {\n    required: true,\n    type: String,\n  },\n  userType: {\n    type: Array,\n    required: true,\n  },\n  sessionToken: {\n    type: String,\n  },\n  isBlockedUser: {\n    type: Boolean,\n  },\n  createdAt: {\n    type: Date,\n    default: Date.now,\n  },\n  updatedAt: {\n    type: Date,\n    default: Date.now,\n  },\n});\n\nexport default UsersSchema;\n"],"mappings":";;;;;;;AAAA;;AAEA,MAAMA,WAAW,GAAG,IAAIC,gBAAJ,CAAW;EAC7BC,QAAQ,EAAE;IACRC,IAAI,EAAEC;EADE,CADmB;EAI7BC,SAAS,EAAE;IACTF,IAAI,EAAEC;EADG,CAJkB;EAO7BE,QAAQ,EAAE;IACRC,QAAQ,EAAE,KADF;IAERJ,IAAI,EAAEC;EAFE,CAPmB;EAW7BI,QAAQ,EAAE;IACRL,IAAI,EAAEC;EADE,CAXmB;EAc7BK,iBAAiB,EAAE;IACjBN,IAAI,EAAEC;EADW,CAdU;EAiB7BM,KAAK,EAAE;IACLP,IAAI,EAAEC;EADD,CAjBsB;EAoB7BO,QAAQ,EAAE;IACRJ,QAAQ,EAAE,IADF;IAERJ,IAAI,EAAEC;EAFE,CApBmB;EAwB7BQ,QAAQ,EAAE;IACRT,IAAI,EAAEU,KADE;IAERN,QAAQ,EAAE;EAFF,CAxBmB;EA4B7BO,YAAY,EAAE;IACZX,IAAI,EAAEC;EADM,CA5Be;EA+B7BW,aAAa,EAAE;IACbZ,IAAI,EAAEa;EADO,CA/Bc;EAkC7BC,SAAS,EAAE;IACTd,IAAI,EAAEe,IADG;IAETC,OAAO,EAAED,IAAI,CAACE;EAFL,CAlCkB;EAsC7BC,SAAS,EAAE;IACTlB,IAAI,EAAEe,IADG;IAETC,OAAO,EAAED,IAAI,CAACE;EAFL;AAtCkB,CAAX,CAApB;eA4CepB,W"}},"mtime":1653643634186},"{\"assumptions\":{},\"sourceRoot\":\"/Users/ramireddycharitha/git-explore/models/mainDbSchema/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/ramireddycharitha/git-explore\",\"filename\":\"/Users/ramireddycharitha/git-explore/models/mainDbSchema/OrganisationSchema.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"default\",\"root\":\"/Users/ramireddycharitha/git-explore\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.17.10:default":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _MainDb = _interopRequireDefault(require(\"../../connections/MainDb\"));\n\nvar _mongoose = require(\"mongoose\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// import { Organisations } from \".\";\nconst Organisations = new _mongoose.Schema({\n  organisation_id: {\n    type: String,\n    required: true,\n    unique: true\n  },\n  name: {\n    type: String,\n    required: true\n  },\n  email: {\n    type: String\n  },\n  logo: {\n    type: String\n  },\n  client_id: {\n    type: String\n  },\n  contact_name: {\n    type: String\n  },\n  phone_number: {\n    type: String\n  },\n  address: {\n    type: Object\n  },\n  plan: {\n    type: String\n  },\n  status: {\n    type: String,\n    // [\"CREATED\", \"ACTIVE\", \"INACTIVE\"]\n    default: 'CREATED'\n  },\n  created_at: {\n    type: Date,\n    default: Date.now\n  },\n  updated_at: {\n    type: Date,\n    getDbInstance: _MainDb.default\n  },\n  deleted_at: {\n    type: Date\n  },\n  call_priority_routing: {\n    type: Boolean,\n    default: false\n  },\n  isOrgOutboundCallEnabled: {\n    type: Boolean,\n    default: false\n  },\n  call_minutes_available: {\n    type: Number,\n    default: 0\n  },\n  callerTuneUrl: {\n    type: String\n  },\n  is_caller_tune_enable: {\n    type: Boolean,\n    default: false\n  }\n}, {\n  timestamps: {\n    createdAt: 'created_at',\n    updatedAt: 'updated_at'\n  }\n}); // const Organisations = mongo_db.model(\n//   'Organisations',\n//   OrganisationsSchema,\n//   'Organisations'\n// );\n\nvar _default = Organisations; // export default Organisations = getDbInstance();\n\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJPcmdhbmlzYXRpb25zIiwiU2NoZW1hIiwib3JnYW5pc2F0aW9uX2lkIiwidHlwZSIsIlN0cmluZyIsInJlcXVpcmVkIiwidW5pcXVlIiwibmFtZSIsImVtYWlsIiwibG9nbyIsImNsaWVudF9pZCIsImNvbnRhY3RfbmFtZSIsInBob25lX251bWJlciIsImFkZHJlc3MiLCJPYmplY3QiLCJwbGFuIiwic3RhdHVzIiwiZGVmYXVsdCIsImNyZWF0ZWRfYXQiLCJEYXRlIiwibm93IiwidXBkYXRlZF9hdCIsImdldERiSW5zdGFuY2UiLCJkZWxldGVkX2F0IiwiY2FsbF9wcmlvcml0eV9yb3V0aW5nIiwiQm9vbGVhbiIsImlzT3JnT3V0Ym91bmRDYWxsRW5hYmxlZCIsImNhbGxfbWludXRlc19hdmFpbGFibGUiLCJOdW1iZXIiLCJjYWxsZXJUdW5lVXJsIiwiaXNfY2FsbGVyX3R1bmVfZW5hYmxlIiwidGltZXN0YW1wcyIsImNyZWF0ZWRBdCIsInVwZGF0ZWRBdCJdLCJzb3VyY2VSb290IjoiL1VzZXJzL3JhbWlyZWRkeWNoYXJpdGhhL2dpdC1leHBsb3JlL21vZGVscy9tYWluRGJTY2hlbWEvIiwic291cmNlcyI6WyJPcmdhbmlzYXRpb25TY2hlbWEuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGdldERiSW5zdGFuY2UgZnJvbSBcIi4uLy4uL2Nvbm5lY3Rpb25zL01haW5EYlwiO1xuaW1wb3J0IHsgU2NoZW1hIH0gZnJvbSAnbW9uZ29vc2UnO1xuLy8gaW1wb3J0IHsgT3JnYW5pc2F0aW9ucyB9IGZyb20gXCIuXCI7XG5cbmNvbnN0IE9yZ2FuaXNhdGlvbnMgPSBuZXcgU2NoZW1hKFxuICB7XG4gICAgb3JnYW5pc2F0aW9uX2lkOiB7XG4gICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgIHVuaXF1ZTogdHJ1ZVxuICAgIH0sXG4gICAgbmFtZToge1xuICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgcmVxdWlyZWQ6IHRydWVcbiAgICB9LFxuICAgIGVtYWlsOiB7XG4gICAgICB0eXBlOiBTdHJpbmdcbiAgICB9LFxuICAgIGxvZ286IHtcbiAgICAgIHR5cGU6IFN0cmluZ1xuICAgIH0sXG4gICAgY2xpZW50X2lkOiB7XG4gICAgICB0eXBlOiBTdHJpbmdcbiAgICB9LFxuICAgIGNvbnRhY3RfbmFtZToge1xuICAgICAgdHlwZTogU3RyaW5nXG4gICAgfSxcbiAgICBwaG9uZV9udW1iZXI6IHtcbiAgICAgIHR5cGU6IFN0cmluZ1xuICAgIH0sXG4gICAgYWRkcmVzczoge1xuICAgICAgdHlwZTogT2JqZWN0XG4gICAgfSxcbiAgICBwbGFuOiB7XG4gICAgICB0eXBlOiBTdHJpbmdcbiAgICB9LFxuICAgIHN0YXR1czoge1xuICAgICAgdHlwZTogU3RyaW5nLCAvLyBbXCJDUkVBVEVEXCIsIFwiQUNUSVZFXCIsIFwiSU5BQ1RJVkVcIl1cbiAgICAgIGRlZmF1bHQ6ICdDUkVBVEVEJ1xuICAgIH0sXG4gICAgY3JlYXRlZF9hdDoge1xuICAgICAgdHlwZTogRGF0ZSxcbiAgICAgIGRlZmF1bHQ6IERhdGUubm93XG4gICAgfSxcbiAgICB1cGRhdGVkX2F0OiB7XG4gICAgICB0eXBlOiBEYXRlLGdldERiSW5zdGFuY2VcbiAgICB9LFxuICAgIGRlbGV0ZWRfYXQ6IHtcbiAgICAgIHR5cGU6IERhdGVcbiAgICB9LFxuICAgIGNhbGxfcHJpb3JpdHlfcm91dGluZzoge1xuICAgICAgdHlwZTogQm9vbGVhbixcbiAgICAgIGRlZmF1bHQ6IGZhbHNlXG4gICAgfSxcbiAgICBpc09yZ091dGJvdW5kQ2FsbEVuYWJsZWQ6IHtcbiAgICAgIHR5cGU6IEJvb2xlYW4sXG4gICAgICBkZWZhdWx0OiBmYWxzZVxuICAgIH0sXG4gICAgY2FsbF9taW51dGVzX2F2YWlsYWJsZToge1xuICAgICAgdHlwZTogTnVtYmVyLFxuICAgICAgZGVmYXVsdDogMFxuICAgIH0sXG4gICAgY2FsbGVyVHVuZVVybDoge1xuICAgICAgdHlwZTogU3RyaW5nXG4gICAgfSxcbiAgICBpc19jYWxsZXJfdHVuZV9lbmFibGU6IHtcbiAgICAgIHR5cGU6IEJvb2xlYW4sXG4gICAgICBkZWZhdWx0OiBmYWxzZVxuICAgIH1cbiAgfSxcbiAgeyB0aW1lc3RhbXBzOiB7IGNyZWF0ZWRBdDogJ2NyZWF0ZWRfYXQnLCB1cGRhdGVkQXQ6ICd1cGRhdGVkX2F0JyB9IH1cbik7XG5cbi8vIGNvbnN0IE9yZ2FuaXNhdGlvbnMgPSBtb25nb19kYi5tb2RlbChcbi8vICAgJ09yZ2FuaXNhdGlvbnMnLFxuLy8gICBPcmdhbmlzYXRpb25zU2NoZW1hLFxuLy8gICAnT3JnYW5pc2F0aW9ucydcbi8vICk7XG5leHBvcnQgZGVmYXVsdCBPcmdhbmlzYXRpb25zO1xuLy8gZXhwb3J0IGRlZmF1bHQgT3JnYW5pc2F0aW9ucyA9IGdldERiSW5zdGFuY2UoKTsiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTs7QUFDQTs7OztBQUNBO0FBRUEsTUFBTUEsYUFBYSxHQUFHLElBQUlDLGdCQUFKLENBQ3BCO0VBQ0VDLGVBQWUsRUFBRTtJQUNmQyxJQUFJLEVBQUVDLE1BRFM7SUFFZkMsUUFBUSxFQUFFLElBRks7SUFHZkMsTUFBTSxFQUFFO0VBSE8sQ0FEbkI7RUFNRUMsSUFBSSxFQUFFO0lBQ0pKLElBQUksRUFBRUMsTUFERjtJQUVKQyxRQUFRLEVBQUU7RUFGTixDQU5SO0VBVUVHLEtBQUssRUFBRTtJQUNMTCxJQUFJLEVBQUVDO0VBREQsQ0FWVDtFQWFFSyxJQUFJLEVBQUU7SUFDSk4sSUFBSSxFQUFFQztFQURGLENBYlI7RUFnQkVNLFNBQVMsRUFBRTtJQUNUUCxJQUFJLEVBQUVDO0VBREcsQ0FoQmI7RUFtQkVPLFlBQVksRUFBRTtJQUNaUixJQUFJLEVBQUVDO0VBRE0sQ0FuQmhCO0VBc0JFUSxZQUFZLEVBQUU7SUFDWlQsSUFBSSxFQUFFQztFQURNLENBdEJoQjtFQXlCRVMsT0FBTyxFQUFFO0lBQ1BWLElBQUksRUFBRVc7RUFEQyxDQXpCWDtFQTRCRUMsSUFBSSxFQUFFO0lBQ0paLElBQUksRUFBRUM7RUFERixDQTVCUjtFQStCRVksTUFBTSxFQUFFO0lBQ05iLElBQUksRUFBRUMsTUFEQTtJQUNRO0lBQ2RhLE9BQU8sRUFBRTtFQUZILENBL0JWO0VBbUNFQyxVQUFVLEVBQUU7SUFDVmYsSUFBSSxFQUFFZ0IsSUFESTtJQUVWRixPQUFPLEVBQUVFLElBQUksQ0FBQ0M7RUFGSixDQW5DZDtFQXVDRUMsVUFBVSxFQUFFO0lBQ1ZsQixJQUFJLEVBQUVnQixJQURJO0lBQ0NHLGFBQWEsRUFBYkE7RUFERCxDQXZDZDtFQTBDRUMsVUFBVSxFQUFFO0lBQ1ZwQixJQUFJLEVBQUVnQjtFQURJLENBMUNkO0VBNkNFSyxxQkFBcUIsRUFBRTtJQUNyQnJCLElBQUksRUFBRXNCLE9BRGU7SUFFckJSLE9BQU8sRUFBRTtFQUZZLENBN0N6QjtFQWlERVMsd0JBQXdCLEVBQUU7SUFDeEJ2QixJQUFJLEVBQUVzQixPQURrQjtJQUV4QlIsT0FBTyxFQUFFO0VBRmUsQ0FqRDVCO0VBcURFVSxzQkFBc0IsRUFBRTtJQUN0QnhCLElBQUksRUFBRXlCLE1BRGdCO0lBRXRCWCxPQUFPLEVBQUU7RUFGYSxDQXJEMUI7RUF5REVZLGFBQWEsRUFBRTtJQUNiMUIsSUFBSSxFQUFFQztFQURPLENBekRqQjtFQTRERTBCLHFCQUFxQixFQUFFO0lBQ3JCM0IsSUFBSSxFQUFFc0IsT0FEZTtJQUVyQlIsT0FBTyxFQUFFO0VBRlk7QUE1RHpCLENBRG9CLEVBa0VwQjtFQUFFYyxVQUFVLEVBQUU7SUFBRUMsU0FBUyxFQUFFLFlBQWI7SUFBMkJDLFNBQVMsRUFBRTtFQUF0QztBQUFkLENBbEVvQixDQUF0QixDLENBcUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O2VBQ2VqQyxhLEVBQ2YifQ==","map":{"version":3,"names":["Organisations","Schema","organisation_id","type","String","required","unique","name","email","logo","client_id","contact_name","phone_number","address","Object","plan","status","default","created_at","Date","now","updated_at","getDbInstance","deleted_at","call_priority_routing","Boolean","isOrgOutboundCallEnabled","call_minutes_available","Number","callerTuneUrl","is_caller_tune_enable","timestamps","createdAt","updatedAt"],"sourceRoot":"/Users/ramireddycharitha/git-explore/models/mainDbSchema/","sources":["OrganisationSchema.js"],"sourcesContent":["import getDbInstance from \"../../connections/MainDb\";\nimport { Schema } from 'mongoose';\n// import { Organisations } from \".\";\n\nconst Organisations = new Schema(\n  {\n    organisation_id: {\n      type: String,\n      required: true,\n      unique: true\n    },\n    name: {\n      type: String,\n      required: true\n    },\n    email: {\n      type: String\n    },\n    logo: {\n      type: String\n    },\n    client_id: {\n      type: String\n    },\n    contact_name: {\n      type: String\n    },\n    phone_number: {\n      type: String\n    },\n    address: {\n      type: Object\n    },\n    plan: {\n      type: String\n    },\n    status: {\n      type: String, // [\"CREATED\", \"ACTIVE\", \"INACTIVE\"]\n      default: 'CREATED'\n    },\n    created_at: {\n      type: Date,\n      default: Date.now\n    },\n    updated_at: {\n      type: Date,getDbInstance\n    },\n    deleted_at: {\n      type: Date\n    },\n    call_priority_routing: {\n      type: Boolean,\n      default: false\n    },\n    isOrgOutboundCallEnabled: {\n      type: Boolean,\n      default: false\n    },\n    call_minutes_available: {\n      type: Number,\n      default: 0\n    },\n    callerTuneUrl: {\n      type: String\n    },\n    is_caller_tune_enable: {\n      type: Boolean,\n      default: false\n    }\n  },\n  { timestamps: { createdAt: 'created_at', updatedAt: 'updated_at' } }\n);\n\n// const Organisations = mongo_db.model(\n//   'Organisations',\n//   OrganisationsSchema,\n//   'Organisations'\n// );\nexport default Organisations;\n// export default Organisations = getDbInstance();"],"mappings":";;;;;;;AAAA;;AACA;;;;AACA;AAEA,MAAMA,aAAa,GAAG,IAAIC,gBAAJ,CACpB;EACEC,eAAe,EAAE;IACfC,IAAI,EAAEC,MADS;IAEfC,QAAQ,EAAE,IAFK;IAGfC,MAAM,EAAE;EAHO,CADnB;EAMEC,IAAI,EAAE;IACJJ,IAAI,EAAEC,MADF;IAEJC,QAAQ,EAAE;EAFN,CANR;EAUEG,KAAK,EAAE;IACLL,IAAI,EAAEC;EADD,CAVT;EAaEK,IAAI,EAAE;IACJN,IAAI,EAAEC;EADF,CAbR;EAgBEM,SAAS,EAAE;IACTP,IAAI,EAAEC;EADG,CAhBb;EAmBEO,YAAY,EAAE;IACZR,IAAI,EAAEC;EADM,CAnBhB;EAsBEQ,YAAY,EAAE;IACZT,IAAI,EAAEC;EADM,CAtBhB;EAyBES,OAAO,EAAE;IACPV,IAAI,EAAEW;EADC,CAzBX;EA4BEC,IAAI,EAAE;IACJZ,IAAI,EAAEC;EADF,CA5BR;EA+BEY,MAAM,EAAE;IACNb,IAAI,EAAEC,MADA;IACQ;IACda,OAAO,EAAE;EAFH,CA/BV;EAmCEC,UAAU,EAAE;IACVf,IAAI,EAAEgB,IADI;IAEVF,OAAO,EAAEE,IAAI,CAACC;EAFJ,CAnCd;EAuCEC,UAAU,EAAE;IACVlB,IAAI,EAAEgB,IADI;IACCG,aAAa,EAAbA;EADD,CAvCd;EA0CEC,UAAU,EAAE;IACVpB,IAAI,EAAEgB;EADI,CA1Cd;EA6CEK,qBAAqB,EAAE;IACrBrB,IAAI,EAAEsB,OADe;IAErBR,OAAO,EAAE;EAFY,CA7CzB;EAiDES,wBAAwB,EAAE;IACxBvB,IAAI,EAAEsB,OADkB;IAExBR,OAAO,EAAE;EAFe,CAjD5B;EAqDEU,sBAAsB,EAAE;IACtBxB,IAAI,EAAEyB,MADgB;IAEtBX,OAAO,EAAE;EAFa,CArD1B;EAyDEY,aAAa,EAAE;IACb1B,IAAI,EAAEC;EADO,CAzDjB;EA4DE0B,qBAAqB,EAAE;IACrB3B,IAAI,EAAEsB,OADe;IAErBR,OAAO,EAAE;EAFY;AA5DzB,CADoB,EAkEpB;EAAEc,UAAU,EAAE;IAAEC,SAAS,EAAE,YAAb;IAA2BC,SAAS,EAAE;EAAtC;AAAd,CAlEoB,CAAtB,C,CAqEA;AACA;AACA;AACA;AACA;;eACejC,a,EACf"}},"mtime":1653973523780},"{\"assumptions\":{},\"sourceRoot\":\"/Users/ramireddycharitha/git-explore/models/mainDbSchema/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/ramireddycharitha/git-explore\",\"filename\":\"/Users/ramireddycharitha/git-explore/models/mainDbSchema/IVRVirtualprofileSchema.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"default\",\"root\":\"/Users/ramireddycharitha/git-explore\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.17.10:default":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _MainDb = _interopRequireDefault(require(\"../../connections/MainDb\"));\n\nvar _mongoose = require(\"mongoose\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst FcmTokenSchema = new _mongoose.Schema({\n  firebase_token: String,\n  os: String,\n  // eg: iOS\n  os_version: String,\n  // eg: 13.2.2\n  device_id: String,\n  // eg: iPhone 7.1\n  device_unique_id: String,\n  // eg: FCDBD8EF-62FC-4ECB-B2F5-92C9E79AC7F9\n  session_id: String,\n  created_at: {\n    type: Date,\n    default: Date.now\n  },\n  status: {\n    type: String,\n    default: 'ACTIVE'\n  }\n});\nconst IVRVirtualProfileSchema = new _mongoose.Schema({\n  user_id: {\n    type: String,\n    required: true\n  },\n  organization_id: {\n    type: String\n  },\n  group_id: {\n    type: String\n  },\n  v_mobile_no: {\n    type: String\n  },\n  v_mobile_nos: [{\n    type: String\n  }],\n  zvr_name: {\n    type: String\n  },\n  zvr_mobile_no: {\n    type: String,\n    required: true\n  },\n  zvr_email: {\n    type: String\n  },\n  zvr_link: {\n    type: String\n  },\n  password: {\n    type: String // required: true,\n\n  },\n  encryption_key: {\n    type: String,\n    required: true\n  },\n  location: {\n    type: Object\n  },\n  address: {\n    type: String\n  },\n  landmarks: {\n    type: Array\n  },\n  instruction_text: {\n    type: String\n  },\n  lm_audio_list: {\n    type: Array,\n    default: []\n  },\n  avail_audio_list: {\n    type: Array,\n    default: []\n  },\n  mm_url: {\n    type: String\n  },\n  ref_code: {\n    type: String,\n    unique: true\n  },\n  ref_count: {\n    type: Number,\n    default: 0\n  },\n  credits: {\n    type: Number,\n    default: 0\n  },\n  refered_by: {\n    type: String\n  },\n  refered_by_code: {\n    type: String\n  },\n  random_code: {\n    type: String\n  },\n  roles: {\n    type: Array\n  },\n  client_id: {\n    type: String\n  },\n  session_id: {\n    type: String\n  },\n  session_ids: {\n    type: Array\n  },\n  status: {\n    type: String,\n    default: 'ACTIVE'\n  },\n  waitlist_category: {\n    type: String\n  },\n  statuses: {\n    type: Object\n  },\n  reg_ec_sites: {\n    type: Object,\n    default: {}\n  },\n  active: {\n    type: Boolean,\n    default: true\n  },\n  is_transitioned: {\n    type: Boolean\n  },\n  is_droppedoff: {\n    type: Boolean\n  },\n  call_filter_id: {\n    type: String\n  },\n  call_filter_off_time_id: {\n    type: String\n  },\n  inactivated_at: {\n    type: Date\n  },\n  activate_at: {\n    type: Date\n  },\n  free_trial_cancelled_at: {\n    type: Date\n  },\n  initial_activated_at: {\n    type: Date\n  },\n  call_limit: {\n    type: Number,\n    default: 6000\n  },\n  is_business_account: {\n    type: Boolean,\n    default: false\n  },\n  cc_client_ids: {\n    type: Array,\n    default: []\n  },\n  trusted_services: {\n    type: Array,\n    default: []\n  },\n  plans_stack: {\n    type: Array,\n    default: []\n  },\n  numbers_sent: {\n    type: Object\n  },\n  alloted_v_mobile_no: {\n    type: String\n  },\n  alloted_at: {\n    type: Date\n  },\n  numbers_sent_at: {\n    type: Date\n  },\n  expire_on: {\n    type: Date\n  },\n  expired_at: {\n    type: Date\n  },\n  subscriptions: {\n    type: Array\n  },\n  firebase_tokens: [FcmTokenSchema],\n  firebase_token: {\n    // Deprecated: Instead use firebase_tokens\n    type: String\n  },\n  subscription_id: {\n    type: String\n  },\n  subscription_status: {\n    type: String\n  },\n  registered_at: {\n    type: Date,\n    default: Date.now\n  },\n  created_at: {\n    type: Date,\n    default: Date.now\n  },\n  waitlist_at: {\n    type: Date\n  },\n  livelist_at: {\n    type: Date\n  },\n  updated_at: {\n    type: Date,\n    default: Date.now\n  },\n  free_trial: {\n    type: Boolean\n  },\n  free_trial_start_at: {\n    type: Date\n  },\n  free_trial_end_at: {\n    type: Date\n  },\n  free_trial_cancel_at: {\n    type: Date\n  },\n  change_to_vmn: {\n    type: String\n  },\n  sign_up_type: {\n    type: String\n  },\n  signup_ip: {\n    type: String\n  },\n  upgraded_to_pro: {\n    // will be true only of users who upgrade to pro from essential / free\n    type: Boolean,\n    default: false\n  },\n  // is_permanent_call_block_on: {\n  //   type: Boolean,\n  //   default: false,\n  // },\n  organisation: {\n    type: Object\n  },\n  is_deleted: {\n    type: Boolean,\n    default: false\n  },\n  deleted_at: {\n    type: Date\n  },\n  upgradation_in_process: {\n    type: Boolean\n  },\n  source: {\n    type: String // IAP_IOS,IAP_ANDROID...\n\n  },\n  is_manual_referral_code: {\n    type: Boolean\n  },\n  v_mobile_no_details: {\n    type: Object\n  },\n  has_locked: {\n    type: Boolean,\n    default: false\n  },\n  is_pro: {\n    type: Boolean,\n    default: false\n  },\n  is_kyc_completed: {\n    type: Boolean\n  },\n  is_kyc_mandatory: {\n    type: Boolean\n  },\n  user_type: {\n    type: String,\n    default: 'CONSUMER'\n  },\n  terminated_at: {\n    type: Date\n  },\n  do_ekyc_later: {\n    type: Boolean\n  },\n  preferences: {\n    type: Object,\n    default: {\n      onboard_cards: true\n    }\n  },\n  demo_needed: {\n    type: Date\n  },\n  is_onboard: {\n    type: Boolean,\n    default: false\n  },\n  isOutboundCallEnabled: {\n    type: Boolean,\n    default: false\n  },\n  callerTuneUrl: {\n    type: String\n  },\n  is_caller_tune_enable: {\n    type: Boolean,\n    default: false\n  }\n});\nIVRVirtualProfileSchema.index({\n  v_mobile_no: 1\n});\nIVRVirtualProfileSchema.index({\n  'organisation.organisation_id': 1\n});\nvar _default = IVRVirtualProfileSchema;\n/*\n  status:\n  1 - in progress\n  2 - complete\n  9 - disabled\n*/\n\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJGY21Ub2tlblNjaGVtYSIsIlNjaGVtYSIsImZpcmViYXNlX3Rva2VuIiwiU3RyaW5nIiwib3MiLCJvc192ZXJzaW9uIiwiZGV2aWNlX2lkIiwiZGV2aWNlX3VuaXF1ZV9pZCIsInNlc3Npb25faWQiLCJjcmVhdGVkX2F0IiwidHlwZSIsIkRhdGUiLCJkZWZhdWx0Iiwibm93Iiwic3RhdHVzIiwiSVZSVmlydHVhbFByb2ZpbGVTY2hlbWEiLCJ1c2VyX2lkIiwicmVxdWlyZWQiLCJvcmdhbml6YXRpb25faWQiLCJncm91cF9pZCIsInZfbW9iaWxlX25vIiwidl9tb2JpbGVfbm9zIiwienZyX25hbWUiLCJ6dnJfbW9iaWxlX25vIiwienZyX2VtYWlsIiwienZyX2xpbmsiLCJwYXNzd29yZCIsImVuY3J5cHRpb25fa2V5IiwibG9jYXRpb24iLCJPYmplY3QiLCJhZGRyZXNzIiwibGFuZG1hcmtzIiwiQXJyYXkiLCJpbnN0cnVjdGlvbl90ZXh0IiwibG1fYXVkaW9fbGlzdCIsImF2YWlsX2F1ZGlvX2xpc3QiLCJtbV91cmwiLCJyZWZfY29kZSIsInVuaXF1ZSIsInJlZl9jb3VudCIsIk51bWJlciIsImNyZWRpdHMiLCJyZWZlcmVkX2J5IiwicmVmZXJlZF9ieV9jb2RlIiwicmFuZG9tX2NvZGUiLCJyb2xlcyIsImNsaWVudF9pZCIsInNlc3Npb25faWRzIiwid2FpdGxpc3RfY2F0ZWdvcnkiLCJzdGF0dXNlcyIsInJlZ19lY19zaXRlcyIsImFjdGl2ZSIsIkJvb2xlYW4iLCJpc190cmFuc2l0aW9uZWQiLCJpc19kcm9wcGVkb2ZmIiwiY2FsbF9maWx0ZXJfaWQiLCJjYWxsX2ZpbHRlcl9vZmZfdGltZV9pZCIsImluYWN0aXZhdGVkX2F0IiwiYWN0aXZhdGVfYXQiLCJmcmVlX3RyaWFsX2NhbmNlbGxlZF9hdCIsImluaXRpYWxfYWN0aXZhdGVkX2F0IiwiY2FsbF9saW1pdCIsImlzX2J1c2luZXNzX2FjY291bnQiLCJjY19jbGllbnRfaWRzIiwidHJ1c3RlZF9zZXJ2aWNlcyIsInBsYW5zX3N0YWNrIiwibnVtYmVyc19zZW50IiwiYWxsb3RlZF92X21vYmlsZV9ubyIsImFsbG90ZWRfYXQiLCJudW1iZXJzX3NlbnRfYXQiLCJleHBpcmVfb24iLCJleHBpcmVkX2F0Iiwic3Vic2NyaXB0aW9ucyIsImZpcmViYXNlX3Rva2VucyIsInN1YnNjcmlwdGlvbl9pZCIsInN1YnNjcmlwdGlvbl9zdGF0dXMiLCJyZWdpc3RlcmVkX2F0Iiwid2FpdGxpc3RfYXQiLCJsaXZlbGlzdF9hdCIsInVwZGF0ZWRfYXQiLCJmcmVlX3RyaWFsIiwiZnJlZV90cmlhbF9zdGFydF9hdCIsImZyZWVfdHJpYWxfZW5kX2F0IiwiZnJlZV90cmlhbF9jYW5jZWxfYXQiLCJjaGFuZ2VfdG9fdm1uIiwic2lnbl91cF90eXBlIiwic2lnbnVwX2lwIiwidXBncmFkZWRfdG9fcHJvIiwib3JnYW5pc2F0aW9uIiwiaXNfZGVsZXRlZCIsImRlbGV0ZWRfYXQiLCJ1cGdyYWRhdGlvbl9pbl9wcm9jZXNzIiwic291cmNlIiwiaXNfbWFudWFsX3JlZmVycmFsX2NvZGUiLCJ2X21vYmlsZV9ub19kZXRhaWxzIiwiaGFzX2xvY2tlZCIsImlzX3BybyIsImlzX2t5Y19jb21wbGV0ZWQiLCJpc19reWNfbWFuZGF0b3J5IiwidXNlcl90eXBlIiwidGVybWluYXRlZF9hdCIsImRvX2VreWNfbGF0ZXIiLCJwcmVmZXJlbmNlcyIsIm9uYm9hcmRfY2FyZHMiLCJkZW1vX25lZWRlZCIsImlzX29uYm9hcmQiLCJpc091dGJvdW5kQ2FsbEVuYWJsZWQiLCJjYWxsZXJUdW5lVXJsIiwiaXNfY2FsbGVyX3R1bmVfZW5hYmxlIiwiaW5kZXgiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy9yYW1pcmVkZHljaGFyaXRoYS9naXQtZXhwbG9yZS9tb2RlbHMvbWFpbkRiU2NoZW1hLyIsInNvdXJjZXMiOlsiSVZSVmlydHVhbHByb2ZpbGVTY2hlbWEuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGdldERiSW5zdGFuY2UgZnJvbSBcIi4uLy4uL2Nvbm5lY3Rpb25zL01haW5EYlwiO1xuaW1wb3J0IHsgU2NoZW1hIH0gZnJvbSAnbW9uZ29vc2UnO1xuXG5jb25zdCBGY21Ub2tlblNjaGVtYSA9IG5ldyBTY2hlbWEoe1xuICBmaXJlYmFzZV90b2tlbjogU3RyaW5nLFxuICBvczogU3RyaW5nLCAvLyBlZzogaU9TXG4gIG9zX3ZlcnNpb246IFN0cmluZywgLy8gZWc6IDEzLjIuMlxuICBkZXZpY2VfaWQ6IFN0cmluZywgLy8gZWc6IGlQaG9uZSA3LjFcbiAgZGV2aWNlX3VuaXF1ZV9pZDogU3RyaW5nLCAvLyBlZzogRkNEQkQ4RUYtNjJGQy00RUNCLUIyRjUtOTJDOUU3OUFDN0Y5XG4gIHNlc3Npb25faWQ6IFN0cmluZyxcbiAgY3JlYXRlZF9hdDoge1xuICAgIHR5cGU6IERhdGUsXG4gICAgZGVmYXVsdDogRGF0ZS5ub3dcbiAgfSxcbiAgc3RhdHVzOiB7XG4gICAgdHlwZTogU3RyaW5nLFxuICAgIGRlZmF1bHQ6ICdBQ1RJVkUnXG4gIH1cbn0pO1xuXG5jb25zdCBJVlJWaXJ0dWFsUHJvZmlsZVNjaGVtYSA9IG5ldyBTY2hlbWEoe1xuICB1c2VyX2lkOiB7XG4gICAgdHlwZTogU3RyaW5nLFxuICAgIHJlcXVpcmVkOiB0cnVlXG4gIH0sXG4gIG9yZ2FuaXphdGlvbl9pZDoge1xuICAgIHR5cGU6IFN0cmluZ1xuICB9LFxuICBncm91cF9pZDoge1xuICAgIHR5cGU6IFN0cmluZ1xuICB9LFxuICB2X21vYmlsZV9ubzoge1xuICAgIHR5cGU6IFN0cmluZ1xuICB9LFxuICB2X21vYmlsZV9ub3M6IFt7IHR5cGU6IFN0cmluZyB9XSxcbiAgenZyX25hbWU6IHtcbiAgICB0eXBlOiBTdHJpbmdcbiAgfSxcbiAgenZyX21vYmlsZV9ubzoge1xuICAgIHR5cGU6IFN0cmluZyxcbiAgICByZXF1aXJlZDogdHJ1ZVxuICB9LFxuICB6dnJfZW1haWw6IHtcbiAgICB0eXBlOiBTdHJpbmdcbiAgfSxcbiAgenZyX2xpbms6IHtcbiAgICB0eXBlOiBTdHJpbmdcbiAgfSxcbiAgcGFzc3dvcmQ6IHtcbiAgICB0eXBlOiBTdHJpbmdcbiAgICAvLyByZXF1aXJlZDogdHJ1ZSxcbiAgfSxcbiAgZW5jcnlwdGlvbl9rZXk6IHtcbiAgICB0eXBlOiBTdHJpbmcsXG4gICAgcmVxdWlyZWQ6IHRydWVcbiAgfSxcbiAgbG9jYXRpb246IHtcbiAgICB0eXBlOiBPYmplY3RcbiAgfSxcbiAgYWRkcmVzczoge1xuICAgIHR5cGU6IFN0cmluZ1xuICB9LFxuICBsYW5kbWFya3M6IHtcbiAgICB0eXBlOiBBcnJheVxuICB9LFxuICBpbnN0cnVjdGlvbl90ZXh0OiB7XG4gICAgdHlwZTogU3RyaW5nXG4gIH0sXG4gIGxtX2F1ZGlvX2xpc3Q6IHtcbiAgICB0eXBlOiBBcnJheSxcbiAgICBkZWZhdWx0OiBbXVxuICB9LFxuICBhdmFpbF9hdWRpb19saXN0OiB7XG4gICAgdHlwZTogQXJyYXksXG4gICAgZGVmYXVsdDogW11cbiAgfSxcbiAgbW1fdXJsOiB7XG4gICAgdHlwZTogU3RyaW5nXG4gIH0sXG4gIHJlZl9jb2RlOiB7XG4gICAgdHlwZTogU3RyaW5nLFxuICAgIHVuaXF1ZTogdHJ1ZVxuICB9LFxuICByZWZfY291bnQ6IHtcbiAgICB0eXBlOiBOdW1iZXIsXG4gICAgZGVmYXVsdDogMFxuICB9LFxuICBjcmVkaXRzOiB7XG4gICAgdHlwZTogTnVtYmVyLFxuICAgIGRlZmF1bHQ6IDBcbiAgfSxcbiAgcmVmZXJlZF9ieToge1xuICAgIHR5cGU6IFN0cmluZ1xuICB9LFxuICByZWZlcmVkX2J5X2NvZGU6IHtcbiAgICB0eXBlOiBTdHJpbmdcbiAgfSxcbiAgcmFuZG9tX2NvZGU6IHtcbiAgICB0eXBlOiBTdHJpbmdcbiAgfSxcbiAgcm9sZXM6IHtcbiAgICB0eXBlOiBBcnJheVxuICB9LFxuICBjbGllbnRfaWQ6IHtcbiAgICB0eXBlOiBTdHJpbmdcbiAgfSxcbiAgc2Vzc2lvbl9pZDoge1xuICAgIHR5cGU6IFN0cmluZ1xuICB9LFxuICBzZXNzaW9uX2lkczoge1xuICAgIHR5cGU6IEFycmF5XG4gIH0sXG4gIHN0YXR1czoge1xuICAgIHR5cGU6IFN0cmluZyxcbiAgICBkZWZhdWx0OiAnQUNUSVZFJ1xuICB9LFxuICB3YWl0bGlzdF9jYXRlZ29yeToge1xuICAgIHR5cGU6IFN0cmluZ1xuICB9LFxuICBzdGF0dXNlczoge1xuICAgIHR5cGU6IE9iamVjdFxuICB9LFxuICByZWdfZWNfc2l0ZXM6IHtcbiAgICB0eXBlOiBPYmplY3QsXG4gICAgZGVmYXVsdDoge31cbiAgfSxcbiAgYWN0aXZlOiB7XG4gICAgdHlwZTogQm9vbGVhbixcbiAgICBkZWZhdWx0OiB0cnVlXG4gIH0sXG4gIGlzX3RyYW5zaXRpb25lZDoge1xuICAgIHR5cGU6IEJvb2xlYW5cbiAgfSxcbiAgaXNfZHJvcHBlZG9mZjoge1xuICAgIHR5cGU6IEJvb2xlYW5cbiAgfSxcbiAgY2FsbF9maWx0ZXJfaWQ6IHtcbiAgICB0eXBlOiBTdHJpbmdcbiAgfSxcbiAgY2FsbF9maWx0ZXJfb2ZmX3RpbWVfaWQ6IHtcbiAgICB0eXBlOiBTdHJpbmdcbiAgfSxcbiAgaW5hY3RpdmF0ZWRfYXQ6IHtcbiAgICB0eXBlOiBEYXRlXG4gIH0sXG4gIGFjdGl2YXRlX2F0OiB7XG4gICAgdHlwZTogRGF0ZVxuICB9LFxuICBmcmVlX3RyaWFsX2NhbmNlbGxlZF9hdDoge1xuICAgIHR5cGU6IERhdGVcbiAgfSxcbiAgaW5pdGlhbF9hY3RpdmF0ZWRfYXQ6IHtcbiAgICB0eXBlOiBEYXRlXG4gIH0sXG4gIGNhbGxfbGltaXQ6IHtcbiAgICB0eXBlOiBOdW1iZXIsXG4gICAgZGVmYXVsdDogNjAwMFxuICB9LFxuICBpc19idXNpbmVzc19hY2NvdW50OiB7XG4gICAgdHlwZTogQm9vbGVhbixcbiAgICBkZWZhdWx0OiBmYWxzZVxuICB9LFxuICBjY19jbGllbnRfaWRzOiB7XG4gICAgdHlwZTogQXJyYXksXG4gICAgZGVmYXVsdDogW11cbiAgfSxcbiAgdHJ1c3RlZF9zZXJ2aWNlczoge1xuICAgIHR5cGU6IEFycmF5LFxuICAgIGRlZmF1bHQ6IFtdXG4gIH0sXG4gIHBsYW5zX3N0YWNrOiB7XG4gICAgdHlwZTogQXJyYXksXG4gICAgZGVmYXVsdDogW11cbiAgfSxcbiAgbnVtYmVyc19zZW50OiB7XG4gICAgdHlwZTogT2JqZWN0XG4gIH0sXG4gIGFsbG90ZWRfdl9tb2JpbGVfbm86IHtcbiAgICB0eXBlOiBTdHJpbmdcbiAgfSxcbiAgYWxsb3RlZF9hdDoge1xuICAgIHR5cGU6IERhdGVcbiAgfSxcbiAgbnVtYmVyc19zZW50X2F0OiB7XG4gICAgdHlwZTogRGF0ZVxuICB9LFxuICBleHBpcmVfb246IHtcbiAgICB0eXBlOiBEYXRlXG4gIH0sXG4gIGV4cGlyZWRfYXQ6IHtcbiAgICB0eXBlOiBEYXRlXG4gIH0sXG4gIHN1YnNjcmlwdGlvbnM6IHtcbiAgICB0eXBlOiBBcnJheVxuICB9LFxuICBmaXJlYmFzZV90b2tlbnM6IFtGY21Ub2tlblNjaGVtYV0sXG4gIGZpcmViYXNlX3Rva2VuOiB7XG4gICAgLy8gRGVwcmVjYXRlZDogSW5zdGVhZCB1c2UgZmlyZWJhc2VfdG9rZW5zXG4gICAgdHlwZTogU3RyaW5nXG4gIH0sXG4gIHN1YnNjcmlwdGlvbl9pZDoge1xuICAgIHR5cGU6IFN0cmluZ1xuICB9LFxuICBzdWJzY3JpcHRpb25fc3RhdHVzOiB7XG4gICAgdHlwZTogU3RyaW5nXG4gIH0sXG4gIHJlZ2lzdGVyZWRfYXQ6IHtcbiAgICB0eXBlOiBEYXRlLFxuICAgIGRlZmF1bHQ6IERhdGUubm93XG4gIH0sXG4gIGNyZWF0ZWRfYXQ6IHtcbiAgICB0eXBlOiBEYXRlLFxuICAgIGRlZmF1bHQ6IERhdGUubm93XG4gIH0sXG4gIHdhaXRsaXN0X2F0OiB7XG4gICAgdHlwZTogRGF0ZVxuICB9LFxuICBsaXZlbGlzdF9hdDoge1xuICAgIHR5cGU6IERhdGVcbiAgfSxcbiAgdXBkYXRlZF9hdDoge1xuICAgIHR5cGU6IERhdGUsXG4gICAgZGVmYXVsdDogRGF0ZS5ub3dcbiAgfSxcbiAgZnJlZV90cmlhbDoge1xuICAgIHR5cGU6IEJvb2xlYW5cbiAgfSxcbiAgZnJlZV90cmlhbF9zdGFydF9hdDoge1xuICAgIHR5cGU6IERhdGVcbiAgfSxcbiAgZnJlZV90cmlhbF9lbmRfYXQ6IHtcbiAgICB0eXBlOiBEYXRlXG4gIH0sXG4gIGZyZWVfdHJpYWxfY2FuY2VsX2F0OiB7XG4gICAgdHlwZTogRGF0ZVxuICB9LFxuICBjaGFuZ2VfdG9fdm1uOiB7XG4gICAgdHlwZTogU3RyaW5nXG4gIH0sXG4gIHNpZ25fdXBfdHlwZToge1xuICAgIHR5cGU6IFN0cmluZ1xuICB9LFxuICBzaWdudXBfaXA6IHtcbiAgICB0eXBlOiBTdHJpbmdcbiAgfSxcbiAgdXBncmFkZWRfdG9fcHJvOiB7XG4gICAgLy8gd2lsbCBiZSB0cnVlIG9ubHkgb2YgdXNlcnMgd2hvIHVwZ3JhZGUgdG8gcHJvIGZyb20gZXNzZW50aWFsIC8gZnJlZVxuICAgIHR5cGU6IEJvb2xlYW4sXG4gICAgZGVmYXVsdDogZmFsc2VcbiAgfSxcbiAgLy8gaXNfcGVybWFuZW50X2NhbGxfYmxvY2tfb246IHtcbiAgLy8gICB0eXBlOiBCb29sZWFuLFxuICAvLyAgIGRlZmF1bHQ6IGZhbHNlLFxuICAvLyB9LFxuICBvcmdhbmlzYXRpb246IHtcbiAgICB0eXBlOiBPYmplY3RcbiAgfSxcbiAgaXNfZGVsZXRlZDoge1xuICAgIHR5cGU6IEJvb2xlYW4sXG4gICAgZGVmYXVsdDogZmFsc2VcbiAgfSxcbiAgZGVsZXRlZF9hdDoge1xuICAgIHR5cGU6IERhdGVcbiAgfSxcbiAgdXBncmFkYXRpb25faW5fcHJvY2Vzczoge1xuICAgIHR5cGU6IEJvb2xlYW5cbiAgfSxcbiAgc291cmNlOiB7XG4gICAgdHlwZTogU3RyaW5nIC8vIElBUF9JT1MsSUFQX0FORFJPSUQuLi5cbiAgfSxcbiAgaXNfbWFudWFsX3JlZmVycmFsX2NvZGU6IHtcbiAgICB0eXBlOiBCb29sZWFuXG4gIH0sXG4gIHZfbW9iaWxlX25vX2RldGFpbHM6IHtcbiAgICB0eXBlOiBPYmplY3RcbiAgfSxcbiAgaGFzX2xvY2tlZDoge1xuICAgIHR5cGU6IEJvb2xlYW4sXG4gICAgZGVmYXVsdDogZmFsc2VcbiAgfSxcbiAgaXNfcHJvOiB7XG4gICAgdHlwZTogQm9vbGVhbixcbiAgICBkZWZhdWx0OiBmYWxzZVxuICB9LFxuICBpc19reWNfY29tcGxldGVkOiB7XG4gICAgdHlwZTogQm9vbGVhblxuICB9LFxuICBpc19reWNfbWFuZGF0b3J5OiB7XG4gICAgdHlwZTogQm9vbGVhblxuICB9LFxuICB1c2VyX3R5cGU6IHtcbiAgICB0eXBlOiBTdHJpbmcsXG4gICAgZGVmYXVsdDogJ0NPTlNVTUVSJ1xuICB9LFxuICB0ZXJtaW5hdGVkX2F0OiB7XG4gICAgdHlwZTogRGF0ZVxuICB9LFxuICBkb19la3ljX2xhdGVyOiB7XG4gICAgdHlwZTogQm9vbGVhblxuICB9LFxuICBwcmVmZXJlbmNlczoge1xuICAgIHR5cGU6IE9iamVjdCxcbiAgICBkZWZhdWx0OiB7IG9uYm9hcmRfY2FyZHM6IHRydWUgfVxuICB9LFxuICBkZW1vX25lZWRlZDoge1xuICAgIHR5cGU6IERhdGVcbiAgfSxcbiAgaXNfb25ib2FyZDoge1xuICAgIHR5cGU6IEJvb2xlYW4sXG4gICAgZGVmYXVsdDogZmFsc2VcbiAgfSxcbiAgaXNPdXRib3VuZENhbGxFbmFibGVkOiB7XG4gICAgdHlwZTogQm9vbGVhbixcbiAgICBkZWZhdWx0OiBmYWxzZVxuICB9LFxuICBjYWxsZXJUdW5lVXJsOiB7XG4gICAgdHlwZTogU3RyaW5nXG4gIH0sXG4gIGlzX2NhbGxlcl90dW5lX2VuYWJsZToge1xuICAgIHR5cGU6IEJvb2xlYW4sXG4gICAgZGVmYXVsdDogZmFsc2VcbiAgfVxufSk7XG5cbklWUlZpcnR1YWxQcm9maWxlU2NoZW1hLmluZGV4KHsgdl9tb2JpbGVfbm86IDEgfSk7XG5JVlJWaXJ0dWFsUHJvZmlsZVNjaGVtYS5pbmRleCh7ICdvcmdhbmlzYXRpb24ub3JnYW5pc2F0aW9uX2lkJzogMSB9KTtcblxuZXhwb3J0IGRlZmF1bHQgSVZSVmlydHVhbFByb2ZpbGVTY2hlbWE7XG5cbi8qXG4gIHN0YXR1czpcbiAgMSAtIGluIHByb2dyZXNzXG4gIDIgLSBjb21wbGV0ZVxuICA5IC0gZGlzYWJsZWRcbiovXG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTs7QUFDQTs7OztBQUVBLE1BQU1BLGNBQWMsR0FBRyxJQUFJQyxnQkFBSixDQUFXO0VBQ2hDQyxjQUFjLEVBQUVDLE1BRGdCO0VBRWhDQyxFQUFFLEVBQUVELE1BRjRCO0VBRXBCO0VBQ1pFLFVBQVUsRUFBRUYsTUFIb0I7RUFHWjtFQUNwQkcsU0FBUyxFQUFFSCxNQUpxQjtFQUliO0VBQ25CSSxnQkFBZ0IsRUFBRUosTUFMYztFQUtOO0VBQzFCSyxVQUFVLEVBQUVMLE1BTm9CO0VBT2hDTSxVQUFVLEVBQUU7SUFDVkMsSUFBSSxFQUFFQyxJQURJO0lBRVZDLE9BQU8sRUFBRUQsSUFBSSxDQUFDRTtFQUZKLENBUG9CO0VBV2hDQyxNQUFNLEVBQUU7SUFDTkosSUFBSSxFQUFFUCxNQURBO0lBRU5TLE9BQU8sRUFBRTtFQUZIO0FBWHdCLENBQVgsQ0FBdkI7QUFpQkEsTUFBTUcsdUJBQXVCLEdBQUcsSUFBSWQsZ0JBQUosQ0FBVztFQUN6Q2UsT0FBTyxFQUFFO0lBQ1BOLElBQUksRUFBRVAsTUFEQztJQUVQYyxRQUFRLEVBQUU7RUFGSCxDQURnQztFQUt6Q0MsZUFBZSxFQUFFO0lBQ2ZSLElBQUksRUFBRVA7RUFEUyxDQUx3QjtFQVF6Q2dCLFFBQVEsRUFBRTtJQUNSVCxJQUFJLEVBQUVQO0VBREUsQ0FSK0I7RUFXekNpQixXQUFXLEVBQUU7SUFDWFYsSUFBSSxFQUFFUDtFQURLLENBWDRCO0VBY3pDa0IsWUFBWSxFQUFFLENBQUM7SUFBRVgsSUFBSSxFQUFFUDtFQUFSLENBQUQsQ0FkMkI7RUFlekNtQixRQUFRLEVBQUU7SUFDUlosSUFBSSxFQUFFUDtFQURFLENBZitCO0VBa0J6Q29CLGFBQWEsRUFBRTtJQUNiYixJQUFJLEVBQUVQLE1BRE87SUFFYmMsUUFBUSxFQUFFO0VBRkcsQ0FsQjBCO0VBc0J6Q08s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","map":{"version":3,"names":["FcmTokenSchema","Schema","firebase_token","String","os","os_version","device_id","device_unique_id","session_id","created_at","type","Date","default","now","status","IVRVirtualProfileSchema","user_id","required","organization_id","group_id","v_mobile_no","v_mobile_nos","zvr_name","zvr_mobile_no","zvr_email","zvr_link","password","encryption_key","location","Object","address","landmarks","Array","instruction_text","lm_audio_list","avail_audio_list","mm_url","ref_code","unique","ref_count","Number","credits","refered_by","refered_by_code","random_code","roles","client_id","session_ids","waitlist_category","statuses","reg_ec_sites","active","Boolean","is_transitioned","is_droppedoff","call_filter_id","call_filter_off_time_id","inactivated_at","activate_at","free_trial_cancelled_at","initial_activated_at","call_limit","is_business_account","cc_client_ids","trusted_services","plans_stack","numbers_sent","alloted_v_mobile_no","alloted_at","numbers_sent_at","expire_on","expired_at","subscriptions","firebase_tokens","subscription_id","subscription_status","registered_at","waitlist_at","livelist_at","updated_at","free_trial","free_trial_start_at","free_trial_end_at","free_trial_cancel_at","change_to_vmn","sign_up_type","signup_ip","upgraded_to_pro","organisation","is_deleted","deleted_at","upgradation_in_process","source","is_manual_referral_code","v_mobile_no_details","has_locked","is_pro","is_kyc_completed","is_kyc_mandatory","user_type","terminated_at","do_ekyc_later","preferences","onboard_cards","demo_needed","is_onboard","isOutboundCallEnabled","callerTuneUrl","is_caller_tune_enable","index"],"sourceRoot":"/Users/ramireddycharitha/git-explore/models/mainDbSchema/","sources":["IVRVirtualprofileSchema.js"],"sourcesContent":["import getDbInstance from \"../../connections/MainDb\";\nimport { Schema } from 'mongoose';\n\nconst FcmTokenSchema = new Schema({\n  firebase_token: String,\n  os: String, // eg: iOS\n  os_version: String, // eg: 13.2.2\n  device_id: String, // eg: iPhone 7.1\n  device_unique_id: String, // eg: FCDBD8EF-62FC-4ECB-B2F5-92C9E79AC7F9\n  session_id: String,\n  created_at: {\n    type: Date,\n    default: Date.now\n  },\n  status: {\n    type: String,\n    default: 'ACTIVE'\n  }\n});\n\nconst IVRVirtualProfileSchema = new Schema({\n  user_id: {\n    type: String,\n    required: true\n  },\n  organization_id: {\n    type: String\n  },\n  group_id: {\n    type: String\n  },\n  v_mobile_no: {\n    type: String\n  },\n  v_mobile_nos: [{ type: String }],\n  zvr_name: {\n    type: String\n  },\n  zvr_mobile_no: {\n    type: String,\n    required: true\n  },\n  zvr_email: {\n    type: String\n  },\n  zvr_link: {\n    type: String\n  },\n  password: {\n    type: String\n    // required: true,\n  },\n  encryption_key: {\n    type: String,\n    required: true\n  },\n  location: {\n    type: Object\n  },\n  address: {\n    type: String\n  },\n  landmarks: {\n    type: Array\n  },\n  instruction_text: {\n    type: String\n  },\n  lm_audio_list: {\n    type: Array,\n    default: []\n  },\n  avail_audio_list: {\n    type: Array,\n    default: []\n  },\n  mm_url: {\n    type: String\n  },\n  ref_code: {\n    type: String,\n    unique: true\n  },\n  ref_count: {\n    type: Number,\n    default: 0\n  },\n  credits: {\n    type: Number,\n    default: 0\n  },\n  refered_by: {\n    type: String\n  },\n  refered_by_code: {\n    type: String\n  },\n  random_code: {\n    type: String\n  },\n  roles: {\n    type: Array\n  },\n  client_id: {\n    type: String\n  },\n  session_id: {\n    type: String\n  },\n  session_ids: {\n    type: Array\n  },\n  status: {\n    type: String,\n    default: 'ACTIVE'\n  },\n  waitlist_category: {\n    type: String\n  },\n  statuses: {\n    type: Object\n  },\n  reg_ec_sites: {\n    type: Object,\n    default: {}\n  },\n  active: {\n    type: Boolean,\n    default: true\n  },\n  is_transitioned: {\n    type: Boolean\n  },\n  is_droppedoff: {\n    type: Boolean\n  },\n  call_filter_id: {\n    type: String\n  },\n  call_filter_off_time_id: {\n    type: String\n  },\n  inactivated_at: {\n    type: Date\n  },\n  activate_at: {\n    type: Date\n  },\n  free_trial_cancelled_at: {\n    type: Date\n  },\n  initial_activated_at: {\n    type: Date\n  },\n  call_limit: {\n    type: Number,\n    default: 6000\n  },\n  is_business_account: {\n    type: Boolean,\n    default: false\n  },\n  cc_client_ids: {\n    type: Array,\n    default: []\n  },\n  trusted_services: {\n    type: Array,\n    default: []\n  },\n  plans_stack: {\n    type: Array,\n    default: []\n  },\n  numbers_sent: {\n    type: Object\n  },\n  alloted_v_mobile_no: {\n    type: String\n  },\n  alloted_at: {\n    type: Date\n  },\n  numbers_sent_at: {\n    type: Date\n  },\n  expire_on: {\n    type: Date\n  },\n  expired_at: {\n    type: Date\n  },\n  subscriptions: {\n    type: Array\n  },\n  firebase_tokens: [FcmTokenSchema],\n  firebase_token: {\n    // Deprecated: Instead use firebase_tokens\n    type: String\n  },\n  subscription_id: {\n    type: String\n  },\n  subscription_status: {\n    type: String\n  },\n  registered_at: {\n    type: Date,\n    default: Date.now\n  },\n  created_at: {\n    type: Date,\n    default: Date.now\n  },\n  waitlist_at: {\n    type: Date\n  },\n  livelist_at: {\n    type: Date\n  },\n  updated_at: {\n    type: Date,\n    default: Date.now\n  },\n  free_trial: {\n    type: Boolean\n  },\n  free_trial_start_at: {\n    type: Date\n  },\n  free_trial_end_at: {\n    type: Date\n  },\n  free_trial_cancel_at: {\n    type: Date\n  },\n  change_to_vmn: {\n    type: String\n  },\n  sign_up_type: {\n    type: String\n  },\n  signup_ip: {\n    type: String\n  },\n  upgraded_to_pro: {\n    // will be true only of users who upgrade to pro from essential / free\n    type: Boolean,\n    default: false\n  },\n  // is_permanent_call_block_on: {\n  //   type: Boolean,\n  //   default: false,\n  // },\n  organisation: {\n    type: Object\n  },\n  is_deleted: {\n    type: Boolean,\n    default: false\n  },\n  deleted_at: {\n    type: Date\n  },\n  upgradation_in_process: {\n    type: Boolean\n  },\n  source: {\n    type: String // IAP_IOS,IAP_ANDROID...\n  },\n  is_manual_referral_code: {\n    type: Boolean\n  },\n  v_mobile_no_details: {\n    type: Object\n  },\n  has_locked: {\n    type: Boolean,\n    default: false\n  },\n  is_pro: {\n    type: Boolean,\n    default: false\n  },\n  is_kyc_completed: {\n    type: Boolean\n  },\n  is_kyc_mandatory: {\n    type: Boolean\n  },\n  user_type: {\n    type: String,\n    default: 'CONSUMER'\n  },\n  terminated_at: {\n    type: Date\n  },\n  do_ekyc_later: {\n    type: Boolean\n  },\n  preferences: {\n    type: Object,\n    default: { onboard_cards: true }\n  },\n  demo_needed: {\n    type: Date\n  },\n  is_onboard: {\n    type: Boolean,\n    default: false\n  },\n  isOutboundCallEnabled: {\n    type: Boolean,\n    default: false\n  },\n  callerTuneUrl: {\n    type: String\n  },\n  is_caller_tune_enable: {\n    type: Boolean,\n    default: false\n  }\n});\n\nIVRVirtualProfileSchema.index({ v_mobile_no: 1 });\nIVRVirtualProfileSchema.index({ 'organisation.organisation_id': 1 });\n\nexport default IVRVirtualProfileSchema;\n\n/*\n  status:\n  1 - in progress\n  2 - complete\n  9 - disabled\n*/\n"],"mappings":"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"}},"mtime":1654085554355},"{\"assumptions\":{},\"sourceRoot\":\"/Users/ramireddycharitha/git-explore/models/mainDbSchema/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/ramireddycharitha/git-explore\",\"filename\":\"/Users/ramireddycharitha/git-explore/models/mainDbSchema/BussinesscallSchema.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"default\",\"root\":\"/Users/ramireddycharitha/git-explore\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.17.10:default":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _mongoose = _interopRequireWildcard(require(\"mongoose\"));\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nconst BusinessCallsSchema = new _mongoose.Schema({\n  organisationId: {\n    type: String,\n    required: true\n  },\n  user: {\n    type: String,\n    required: true,\n    ref: 'IVRVirtualProfile'\n  },\n  destinationNumber: {\n    type: String,\n    required: true\n  },\n  initiatorNumber: {\n    type: String,\n    required: true\n  },\n  didNumber: {\n    type: String,\n    required: true\n  },\n  status: {\n    type: String\n  },\n  duration: {\n    type: Number,\n    default: 0,\n    required: true\n  },\n  isCallEnded: {\n    type: Boolean,\n    default: false,\n    required: true\n  },\n  recording: {\n    type: String,\n    default: false,\n    required: true\n  },\n  createdAt: {\n    type: Date,\n    default: Date.now\n  },\n  updatedAt: {\n    type: Date,\n    default: Date.now\n  }\n});\nvar _default = BusinessCallsSchema;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJCdXNpbmVzc0NhbGxzU2NoZW1hIiwiU2NoZW1hIiwib3JnYW5pc2F0aW9uSWQiLCJ0eXBlIiwiU3RyaW5nIiwicmVxdWlyZWQiLCJ1c2VyIiwicmVmIiwiZGVzdGluYXRpb25OdW1iZXIiLCJpbml0aWF0b3JOdW1iZXIiLCJkaWROdW1iZXIiLCJzdGF0dXMiLCJkdXJhdGlvbiIsIk51bWJlciIsImRlZmF1bHQiLCJpc0NhbGxFbmRlZCIsIkJvb2xlYW4iLCJyZWNvcmRpbmciLCJjcmVhdGVkQXQiLCJEYXRlIiwibm93IiwidXBkYXRlZEF0Il0sInNvdXJjZVJvb3QiOiIvVXNlcnMvcmFtaXJlZGR5Y2hhcml0aGEvZ2l0LWV4cGxvcmUvbW9kZWxzL21haW5EYlNjaGVtYS8iLCJzb3VyY2VzIjpbIkJ1c3NpbmVzc2NhbGxTY2hlbWEuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG1vbmdvb3NlLCB7IFNjaGVtYSB9IGZyb20gJ21vbmdvb3NlJztcblxuY29uc3QgQnVzaW5lc3NDYWxsc1NjaGVtYSA9IG5ldyBTY2hlbWEoe1xuICBvcmdhbmlzYXRpb25JZDogeyB0eXBlOiBTdHJpbmcsIHJlcXVpcmVkOiB0cnVlIH0sXG4gIHVzZXI6IHsgdHlwZTogU3RyaW5nLCByZXF1aXJlZDogdHJ1ZSwgcmVmOiAnSVZSVmlydHVhbFByb2ZpbGUnIH0sXG4gIGRlc3RpbmF0aW9uTnVtYmVyOiB7IHR5cGU6IFN0cmluZywgcmVxdWlyZWQ6IHRydWUgfSxcbiAgaW5pdGlhdG9yTnVtYmVyOiB7IHR5cGU6IFN0cmluZywgcmVxdWlyZWQ6IHRydWUgfSxcbiAgZGlkTnVtYmVyOiB7IHR5cGU6IFN0cmluZywgcmVxdWlyZWQ6IHRydWUgfSxcbiAgc3RhdHVzOiB7IHR5cGU6IFN0cmluZyB9LFxuICBkdXJhdGlvbjogeyB0eXBlOiBOdW1iZXIsIGRlZmF1bHQ6IDAsIHJlcXVpcmVkOiB0cnVlIH0sXG4gIGlzQ2FsbEVuZGVkOiB7IHR5cGU6IEJvb2xlYW4sIGRlZmF1bHQ6IGZhbHNlLCByZXF1aXJlZDogdHJ1ZSB9LFxuICByZWNvcmRpbmc6IHsgdHlwZTogU3RyaW5nLCBkZWZhdWx0OiBmYWxzZSwgcmVxdWlyZWQ6IHRydWUgfSxcbiAgY3JlYXRlZEF0OiB7IHR5cGU6IERhdGUsIGRlZmF1bHQ6IERhdGUubm93IH0sXG4gIHVwZGF0ZWRBdDogeyB0eXBlOiBEYXRlLCBkZWZhdWx0OiBEYXRlLm5vdyB9XG59KTtcblxuZXhwb3J0IGRlZmF1bHQgQnVzaW5lc3NDYWxsc1NjaGVtYTtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOzs7Ozs7QUFFQSxNQUFNQSxtQkFBbUIsR0FBRyxJQUFJQyxnQkFBSixDQUFXO0VBQ3JDQyxjQUFjLEVBQUU7SUFBRUMsSUFBSSxFQUFFQyxNQUFSO0lBQWdCQyxRQUFRLEVBQUU7RUFBMUIsQ0FEcUI7RUFFckNDLElBQUksRUFBRTtJQUFFSCxJQUFJLEVBQUVDLE1BQVI7SUFBZ0JDLFFBQVEsRUFBRSxJQUExQjtJQUFnQ0UsR0FBRyxFQUFFO0VBQXJDLENBRitCO0VBR3JDQyxpQkFBaUIsRUFBRTtJQUFFTCxJQUFJLEVBQUVDLE1BQVI7SUFBZ0JDLFFBQVEsRUFBRTtFQUExQixDQUhrQjtFQUlyQ0ksZUFBZSxFQUFFO0lBQUVOLElBQUksRUFBRUMsTUFBUjtJQUFnQkMsUUFBUSxFQUFFO0VBQTFCLENBSm9CO0VBS3JDSyxTQUFTLEVBQUU7SUFBRVAsSUFBSSxFQUFFQyxNQUFSO0lBQWdCQyxRQUFRLEVBQUU7RUFBMUIsQ0FMMEI7RUFNckNNLE1BQU0sRUFBRTtJQUFFUixJQUFJLEVBQUVDO0VBQVIsQ0FONkI7RUFPckNRLFFBQVEsRUFBRTtJQUFFVCxJQUFJLEVBQUVVLE1BQVI7SUFBZ0JDLE9BQU8sRUFBRSxDQUF6QjtJQUE0QlQsUUFBUSxFQUFFO0VBQXRDLENBUDJCO0VBUXJDVSxXQUFXLEVBQUU7SUFBRVosSUFBSSxFQUFFYSxPQUFSO0lBQWlCRixPQUFPLEVBQUUsS0FBMUI7SUFBaUNULFFBQVEsRUFBRTtFQUEzQyxDQVJ3QjtFQVNyQ1ksU0FBUyxFQUFFO0lBQUVkLElBQUksRUFBRUMsTUFBUjtJQUFnQlUsT0FBTyxFQUFFLEtBQXpCO0lBQWdDVCxRQUFRLEVBQUU7RUFBMUMsQ0FUMEI7RUFVckNhLFNBQVMsRUFBRTtJQUFFZixJQUFJLEVBQUVnQixJQUFSO0lBQWNMLE9BQU8sRUFBRUssSUFBSSxDQUFDQztFQUE1QixDQVYwQjtFQVdyQ0MsU0FBUyxFQUFFO0lBQUVsQixJQUFJLEVBQUVnQixJQUFSO0lBQWNMLE9BQU8sRUFBRUssSUFBSSxDQUFDQztFQUE1QjtBQVgwQixDQUFYLENBQTVCO2VBY2VwQixtQiJ9","map":{"version":3,"names":["BusinessCallsSchema","Schema","organisationId","type","String","required","user","ref","destinationNumber","initiatorNumber","didNumber","status","duration","Number","default","isCallEnded","Boolean","recording","createdAt","Date","now","updatedAt"],"sourceRoot":"/Users/ramireddycharitha/git-explore/models/mainDbSchema/","sources":["BussinesscallSchema.js"],"sourcesContent":["import mongoose, { Schema } from 'mongoose';\n\nconst BusinessCallsSchema = new Schema({\n  organisationId: { type: String, required: true },\n  user: { type: String, required: true, ref: 'IVRVirtualProfile' },\n  destinationNumber: { type: String, required: true },\n  initiatorNumber: { type: String, required: true },\n  didNumber: { type: String, required: true },\n  status: { type: String },\n  duration: { type: Number, default: 0, required: true },\n  isCallEnded: { type: Boolean, default: false, required: true },\n  recording: { type: String, default: false, required: true },\n  createdAt: { type: Date, default: Date.now },\n  updatedAt: { type: Date, default: Date.now }\n});\n\nexport default BusinessCallsSchema;\n"],"mappings":";;;;;;;AAAA;;;;;;AAEA,MAAMA,mBAAmB,GAAG,IAAIC,gBAAJ,CAAW;EACrCC,cAAc,EAAE;IAAEC,IAAI,EAAEC,MAAR;IAAgBC,QAAQ,EAAE;EAA1B,CADqB;EAErCC,IAAI,EAAE;IAAEH,IAAI,EAAEC,MAAR;IAAgBC,QAAQ,EAAE,IAA1B;IAAgCE,GAAG,EAAE;EAArC,CAF+B;EAGrCC,iBAAiB,EAAE;IAAEL,IAAI,EAAEC,MAAR;IAAgBC,QAAQ,EAAE;EAA1B,CAHkB;EAIrCI,eAAe,EAAE;IAAEN,IAAI,EAAEC,MAAR;IAAgBC,QAAQ,EAAE;EAA1B,CAJoB;EAKrCK,SAAS,EAAE;IAAEP,IAAI,EAAEC,MAAR;IAAgBC,QAAQ,EAAE;EAA1B,CAL0B;EAMrCM,MAAM,EAAE;IAAER,IAAI,EAAEC;EAAR,CAN6B;EAOrCQ,QAAQ,EAAE;IAAET,IAAI,EAAEU,MAAR;IAAgBC,OAAO,EAAE,CAAzB;IAA4BT,QAAQ,EAAE;EAAtC,CAP2B;EAQrCU,WAAW,EAAE;IAAEZ,IAAI,EAAEa,OAAR;IAAiBF,OAAO,EAAE,KAA1B;IAAiCT,QAAQ,EAAE;EAA3C,CARwB;EASrCY,SAAS,EAAE;IAAEd,IAAI,EAAEC,MAAR;IAAgBU,OAAO,EAAE,KAAzB;IAAgCT,QAAQ,EAAE;EAA1C,CAT0B;EAUrCa,SAAS,EAAE;IAAEf,IAAI,EAAEgB,IAAR;IAAcL,OAAO,EAAEK,IAAI,CAACC;EAA5B,CAV0B;EAWrCC,SAAS,EAAE;IAAElB,IAAI,EAAEgB,IAAR;IAAcL,OAAO,EAAEK,IAAI,CAACC;EAA5B;AAX0B,CAAX,CAA5B;eAcepB,mB"}},"mtime":1653973523780},"{\"assumptions\":{},\"sourceRoot\":\"/Users/ramireddycharitha/git-explore/models/mainDbSchema/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/ramireddycharitha/git-explore\",\"filename\":\"/Users/ramireddycharitha/git-explore/models/mainDbSchema/BussinessDIDNumbersSchema.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"default\",\"root\":\"/Users/ramireddycharitha/git-explore\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.17.10:default":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _mongoose = _interopRequireWildcard(require(\"mongoose\"));\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nconst BusinessDIDNumbersSchema = new _mongoose.Schema({\n  associatedOrganisation: {\n    type: _mongoose.Schema.Types.ObjectId,\n    ref: 'Organisations'\n  },\n  virtualNumber: {\n    type: String,\n    required: true\n  },\n  type: {\n    type: String,\n    enum: ['DID', 'VMN'],\n    required: true\n  },\n  active: {\n    type: Boolean,\n    default: true\n  },\n  createdAt: {\n    type: Date,\n    default: Date.now\n  },\n  updatedAt: {\n    type: Date,\n    default: Date.now\n  }\n}); // const BusinessDIDNumbers = mongoose.model(\n//   'BusinessDIDNumbers', BusinessDIDNumbersSchema, 'BusinessDIDNumbers'\n// );\n\nvar _default = BusinessDIDNumbersSchema;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJCdXNpbmVzc0RJRE51bWJlcnNTY2hlbWEiLCJTY2hlbWEiLCJhc3NvY2lhdGVkT3JnYW5pc2F0aW9uIiwidHlwZSIsIlR5cGVzIiwiT2JqZWN0SWQiLCJyZWYiLCJ2aXJ0dWFsTnVtYmVyIiwiU3RyaW5nIiwicmVxdWlyZWQiLCJlbnVtIiwiYWN0aXZlIiwiQm9vbGVhbiIsImRlZmF1bHQiLCJjcmVhdGVkQXQiLCJEYXRlIiwibm93IiwidXBkYXRlZEF0Il0sInNvdXJjZVJvb3QiOiIvVXNlcnMvcmFtaXJlZGR5Y2hhcml0aGEvZ2l0LWV4cGxvcmUvbW9kZWxzL21haW5EYlNjaGVtYS8iLCJzb3VyY2VzIjpbIkJ1c3NpbmVzc0RJRE51bWJlcnNTY2hlbWEuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG1vbmdvb3NlLCB7IFNjaGVtYSB9IGZyb20gJ21vbmdvb3NlJztcblxuY29uc3QgQnVzaW5lc3NESUROdW1iZXJzU2NoZW1hID0gbmV3IFNjaGVtYSh7XG4gIGFzc29jaWF0ZWRPcmdhbmlzYXRpb246IHsgdHlwZTogU2NoZW1hLlR5cGVzLk9iamVjdElkLCByZWY6ICdPcmdhbmlzYXRpb25zJyB9LFxuICB2aXJ0dWFsTnVtYmVyOiB7IHR5cGU6IFN0cmluZywgcmVxdWlyZWQ6IHRydWUgfSxcbiAgdHlwZTogeyB0eXBlOiBTdHJpbmcsIGVudW06IFsnRElEJywgJ1ZNTiddLCByZXF1aXJlZDogdHJ1ZSB9LFxuICBhY3RpdmU6IHsgdHlwZTogQm9vbGVhbiwgZGVmYXVsdDogdHJ1ZSB9LFxuICBjcmVhdGVkQXQ6IHsgdHlwZTogRGF0ZSwgZGVmYXVsdDogRGF0ZS5ub3cgfSxcbiAgdXBkYXRlZEF0OiB7IHR5cGU6IERhdGUsIGRlZmF1bHQ6IERhdGUubm93IH1cbn0pO1xuXG4vLyBjb25zdCBCdXNpbmVzc0RJRE51bWJlcnMgPSBtb25nb29zZS5tb2RlbChcbi8vICAgJ0J1c2luZXNzRElETnVtYmVycycsIEJ1c2luZXNzRElETnVtYmVyc1NjaGVtYSwgJ0J1c2luZXNzRElETnVtYmVycydcbi8vICk7XG5leHBvcnQgZGVmYXVsdCBCdXNpbmVzc0RJRE51bWJlcnNTY2hlbWE7XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTs7Ozs7O0FBRUEsTUFBTUEsd0JBQXdCLEdBQUcsSUFBSUMsZ0JBQUosQ0FBVztFQUMxQ0Msc0JBQXNCLEVBQUU7SUFBRUMsSUFBSSxFQUFFRixpQkFBT0csS0FBUCxDQUFhQyxRQUFyQjtJQUErQkMsR0FBRyxFQUFFO0VBQXBDLENBRGtCO0VBRTFDQyxhQUFhLEVBQUU7SUFBRUosSUFBSSxFQUFFSyxNQUFSO0lBQWdCQyxRQUFRLEVBQUU7RUFBMUIsQ0FGMkI7RUFHMUNOLElBQUksRUFBRTtJQUFFQSxJQUFJLEVBQUVLLE1BQVI7SUFBZ0JFLElBQUksRUFBRSxDQUFDLEtBQUQsRUFBUSxLQUFSLENBQXRCO0lBQXNDRCxRQUFRLEVBQUU7RUFBaEQsQ0FIb0M7RUFJMUNFLE1BQU0sRUFBRTtJQUFFUixJQUFJLEVBQUVTLE9BQVI7SUFBaUJDLE9BQU8sRUFBRTtFQUExQixDQUprQztFQUsxQ0MsU0FBUyxFQUFFO0lBQUVYLElBQUksRUFBRVksSUFBUjtJQUFjRixPQUFPLEVBQUVFLElBQUksQ0FBQ0M7RUFBNUIsQ0FMK0I7RUFNMUNDLFNBQVMsRUFBRTtJQUFFZCxJQUFJLEVBQUVZLElBQVI7SUFBY0YsT0FBTyxFQUFFRSxJQUFJLENBQUNDO0VBQTVCO0FBTitCLENBQVgsQ0FBakMsQyxDQVNBO0FBQ0E7QUFDQTs7ZUFDZWhCLHdCIn0=","map":{"version":3,"names":["BusinessDIDNumbersSchema","Schema","associatedOrganisation","type","Types","ObjectId","ref","virtualNumber","String","required","enum","active","Boolean","default","createdAt","Date","now","updatedAt"],"sourceRoot":"/Users/ramireddycharitha/git-explore/models/mainDbSchema/","sources":["BussinessDIDNumbersSchema.js"],"sourcesContent":["import mongoose, { Schema } from 'mongoose';\n\nconst BusinessDIDNumbersSchema = new Schema({\n  associatedOrganisation: { type: Schema.Types.ObjectId, ref: 'Organisations' },\n  virtualNumber: { type: String, required: true },\n  type: { type: String, enum: ['DID', 'VMN'], required: true },\n  active: { type: Boolean, default: true },\n  createdAt: { type: Date, default: Date.now },\n  updatedAt: { type: Date, default: Date.now }\n});\n\n// const BusinessDIDNumbers = mongoose.model(\n//   'BusinessDIDNumbers', BusinessDIDNumbersSchema, 'BusinessDIDNumbers'\n// );\nexport default BusinessDIDNumbersSchema;\n"],"mappings":";;;;;;;AAAA;;;;;;AAEA,MAAMA,wBAAwB,GAAG,IAAIC,gBAAJ,CAAW;EAC1CC,sBAAsB,EAAE;IAAEC,IAAI,EAAEF,iBAAOG,KAAP,CAAaC,QAArB;IAA+BC,GAAG,EAAE;EAApC,CADkB;EAE1CC,aAAa,EAAE;IAAEJ,IAAI,EAAEK,MAAR;IAAgBC,QAAQ,EAAE;EAA1B,CAF2B;EAG1CN,IAAI,EAAE;IAAEA,IAAI,EAAEK,MAAR;IAAgBE,IAAI,EAAE,CAAC,KAAD,EAAQ,KAAR,CAAtB;IAAsCD,QAAQ,EAAE;EAAhD,CAHoC;EAI1CE,MAAM,EAAE;IAAER,IAAI,EAAES,OAAR;IAAiBC,OAAO,EAAE;EAA1B,CAJkC;EAK1CC,SAAS,EAAE;IAAEX,IAAI,EAAEY,IAAR;IAAcF,OAAO,EAAEE,IAAI,CAACC;EAA5B,CAL+B;EAM1CC,SAAS,EAAE;IAAEd,IAAI,EAAEY,IAAR;IAAcF,OAAO,EAAEE,IAAI,CAACC;EAA5B;AAN+B,CAAX,CAAjC,C,CASA;AACA;AACA;;eACehB,wB"}},"mtime":1653973523779},"{\"assumptions\":{},\"sourceRoot\":\"/Users/ramireddycharitha/git-explore/constants/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/ramireddycharitha/git-explore\",\"filename\":\"/Users/ramireddycharitha/git-explore/constants/Credentials.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"default\",\"root\":\"/Users/ramireddycharitha/git-explore\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.17.10:default":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.SECREAT = exports.PASSWORD = exports.ALGORITHM = void 0;\nconst SECREAT = \"UxZAXfGONYXkvATj552wBQ\";\nexports.SECREAT = SECREAT;\nconst ALGORITHM = \"aes-256-ctr\";\nexports.ALGORITHM = ALGORITHM;\nconst PASSWORD = \"meTro729@wes0K5\";\nexports.PASSWORD = PASSWORD;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJTRUNSRUFUIiwiQUxHT1JJVEhNIiwiUEFTU1dPUkQiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy9yYW1pcmVkZHljaGFyaXRoYS9naXQtZXhwbG9yZS9jb25zdGFudHMvIiwic291cmNlcyI6WyJDcmVkZW50aWFscy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY29uc3QgU0VDUkVBVCA9IFwiVXhaQVhmR09OWVhrdkFUajU1MndCUVwiO1xuZXhwb3J0IGNvbnN0IEFMR09SSVRITSA9IFwiYWVzLTI1Ni1jdHJcIjtcbmV4cG9ydCBjb25zdCBQQVNTV09SRCA9IFwibWVUcm83MjlAd2VzMEs1XCI7XG4iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFPLE1BQU1BLE9BQU8sR0FBRyx3QkFBaEI7O0FBQ0EsTUFBTUMsU0FBUyxHQUFHLGFBQWxCOztBQUNBLE1BQU1DLFFBQVEsR0FBRyxpQkFBakIifQ==","map":{"version":3,"names":["SECREAT","ALGORITHM","PASSWORD"],"sourceRoot":"/Users/ramireddycharitha/git-explore/constants/","sources":["Credentials.js"],"sourcesContent":["export const SECREAT = \"UxZAXfGONYXkvATj552wBQ\";\nexport const ALGORITHM = \"aes-256-ctr\";\nexport const PASSWORD = \"meTro729@wes0K5\";\n"],"mappings":";;;;;;AAAO,MAAMA,OAAO,GAAG,wBAAhB;;AACA,MAAMC,SAAS,GAAG,aAAlB;;AACA,MAAMC,QAAQ,GAAG,iBAAjB"}},"mtime":1653643634178},"{\"assumptions\":{},\"sourceRoot\":\"/Users/ramireddycharitha/git-explore/constants/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/ramireddycharitha/git-explore\",\"filename\":\"/Users/ramireddycharitha/git-explore/constants/Keys.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"default\",\"root\":\"/Users/ramireddycharitha/git-explore\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.17.10:default":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.HEADER_SESSION_TOKEN = exports.HEADER_API_KEY = void 0;\nconst HEADER_API_KEY = \"x-metro-api-key\";\nexports.HEADER_API_KEY = HEADER_API_KEY;\nconst HEADER_SESSION_TOKEN = \"x-metro-sessiontoken\";\nexports.HEADER_SESSION_TOKEN = HEADER_SESSION_TOKEN;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJIRUFERVJfQVBJX0tFWSIsIkhFQURFUl9TRVNTSU9OX1RPS0VOIl0sInNvdXJjZVJvb3QiOiIvVXNlcnMvcmFtaXJlZGR5Y2hhcml0aGEvZ2l0LWV4cGxvcmUvY29uc3RhbnRzLyIsInNvdXJjZXMiOlsiS2V5cy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY29uc3QgSEVBREVSX0FQSV9LRVkgPSBcIngtbWV0cm8tYXBpLWtleVwiO1xuZXhwb3J0IGNvbnN0IEhFQURFUl9TRVNTSU9OX1RPS0VOID0gXCJ4LW1ldHJvLXNlc3Npb250b2tlblwiO1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBTyxNQUFNQSxjQUFjLEdBQUcsaUJBQXZCOztBQUNBLE1BQU1DLG9CQUFvQixHQUFHLHNCQUE3QiJ9","map":{"version":3,"names":["HEADER_API_KEY","HEADER_SESSION_TOKEN"],"sourceRoot":"/Users/ramireddycharitha/git-explore/constants/","sources":["Keys.js"],"sourcesContent":["export const HEADER_API_KEY = \"x-metro-api-key\";\nexport const HEADER_SESSION_TOKEN = \"x-metro-sessiontoken\";\n"],"mappings":";;;;;;AAAO,MAAMA,cAAc,GAAG,iBAAvB;;AACA,MAAMC,oBAAoB,GAAG,sBAA7B"}},"mtime":1653643634179},"{\"assumptions\":{},\"sourceRoot\":\"/Users/ramireddycharitha/git-explore/services/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/ramireddycharitha/git-explore\",\"filename\":\"/Users/ramireddycharitha/git-explore/services/UserService.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"default\",\"root\":\"/Users/ramireddycharitha/git-explore\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.17.10:default":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.updateUserDetails = exports.registerUser = exports.getUserDetails = void 0;\n\nvar ErrorUtils = _interopRequireWildcard(require(\"../errors/ErrorUtils\"));\n\nvar AbstractModels = _interopRequireWildcard(require(\"../models/AbstractModels\"));\n\nvar EncryptionService = _interopRequireWildcard(require(\"./EncryptionService\"));\n\nvar _index = require(\"../models/mainDbSchema/index\");\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nasync function getClientIdFromApiKey(apiKey) {\n  const findCondition = {\n    metro_auth_key: apiKey\n  };\n  const clientObj = await AbstractModels.mongoFindOne(_index.Clients, findCondition);\n  const clientId = clientObj._id;\n  return clientId;\n}\n\nconst registerUser = async (userDetails, clientDetails) => {\n  const {\n    mobileNo,\n    password,\n    firstName,\n    lastName\n  } = userDetails;\n  const findCondition = {\n    mobileNo\n  };\n  let userObj = await AbstractModels.mongoFindOne(_index.Users, findCondition);\n\n  if (userObj) {\n    throw ErrorUtils.DataAlreadyExists();\n  } else {\n    const bcryptedPassword = EncryptionService.generateBcryptPassword(password);\n    const clientId = await getClientIdFromApiKey(clientDetails.apiKey);\n    userObj = {\n      mobileNo,\n      firstName,\n      lastName,\n      password: bcryptedPassword,\n      clientId,\n      userType: \"user\"\n    };\n    await AbstractModels.mongoInsertOne(_index.Users, userObj);\n    delete userObj.password;\n    return userObj;\n  }\n};\n\nexports.registerUser = registerUser;\n\nconst getUserDetails = async mobileNo => {\n  const selectCondition = {\n    mobileNo\n  };\n  const projectCondition = {\n    _id: 0,\n    mobileNo: 1,\n    firstName: 1,\n    lastName: 1,\n    alternateMobileNo: 1,\n    email: 1\n  };\n  const userObj = await AbstractModels.mongoFindOne(_index.Users, selectCondition, projectCondition);\n  return userObj;\n};\n\nexports.getUserDetails = getUserDetails;\n\nconst updateUserDetails = async userDetails => {\n  const {\n    firstName,\n    lastName,\n    alternateMobileNo,\n    email,\n    mobileNo\n  } = userDetails;\n  const selectCondition = {\n    mobileNo\n  };\n  const updateCondition = {\n    $set: {\n      firstName,\n      lastName,\n      alternateMobileNo,\n      email\n    }\n  };\n  await AbstractModels.mongoUpdateOne(_index.Users, selectCondition, updateCondition);\n};\n\nexports.updateUserDetails = updateUserDetails;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJnZXRDbGllbnRJZEZyb21BcGlLZXkiLCJhcGlLZXkiLCJmaW5kQ29uZGl0aW9uIiwibWV0cm9fYXV0aF9rZXkiLCJjbGllbnRPYmoiLCJBYnN0cmFjdE1vZGVscyIsIm1vbmdvRmluZE9uZSIsIkNsaWVudHMiLCJjbGllbnRJZCIsIl9pZCIsInJlZ2lzdGVyVXNlciIsInVzZXJEZXRhaWxzIiwiY2xpZW50RGV0YWlscyIsIm1vYmlsZU5vIiwicGFzc3dvcmQiLCJmaXJzdE5hbWUiLCJsYXN0TmFtZSIsInVzZXJPYmoiLCJVc2VycyIsIkVycm9yVXRpbHMiLCJEYXRhQWxyZWFkeUV4aXN0cyIsImJjcnlwdGVkUGFzc3dvcmQiLCJFbmNyeXB0aW9uU2VydmljZSIsImdlbmVyYXRlQmNyeXB0UGFzc3dvcmQiLCJ1c2VyVHlwZSIsIm1vbmdvSW5zZXJ0T25lIiwiZ2V0VXNlckRldGFpbHMiLCJzZWxlY3RDb25kaXRpb24iLCJwcm9qZWN0Q29uZGl0aW9uIiwiYWx0ZXJuYXRlTW9iaWxlTm8iLCJlbWFpbCIsInVwZGF0ZVVzZXJEZXRhaWxzIiwidXBkYXRlQ29uZGl0aW9uIiwiJHNldCIsIm1vbmdvVXBkYXRlT25lIl0sInNvdXJjZVJvb3QiOiIvVXNlcnMvcmFtaXJlZGR5Y2hhcml0aGEvZ2l0LWV4cGxvcmUvc2VydmljZXMvIiwic291cmNlcyI6WyJVc2VyU2VydmljZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyBFcnJvclV0aWxzIGZyb20gXCIuLi9lcnJvcnMvRXJyb3JVdGlsc1wiO1xuaW1wb3J0ICogYXMgQWJzdHJhY3RNb2RlbHMgZnJvbSBcIi4uL21vZGVscy9BYnN0cmFjdE1vZGVsc1wiO1xuaW1wb3J0ICogYXMgRW5jcnlwdGlvblNlcnZpY2UgZnJvbSBcIi4vRW5jcnlwdGlvblNlcnZpY2VcIjtcblxuaW1wb3J0IHsgVXNlcnMsIENsaWVudHMgfSBmcm9tIFwiLi4vbW9kZWxzL21haW5EYlNjaGVtYS9pbmRleFwiO1xuXG5hc3luYyBmdW5jdGlvbiBnZXRDbGllbnRJZEZyb21BcGlLZXkoYXBpS2V5KSB7XG4gIGNvbnN0IGZpbmRDb25kaXRpb24gPSB7XG4gICAgbWV0cm9fYXV0aF9rZXk6IGFwaUtleSxcbiAgfTtcbiAgY29uc3QgY2xpZW50T2JqID0gYXdhaXQgQWJzdHJhY3RNb2RlbHMubW9uZ29GaW5kT25lKENsaWVudHMsIGZpbmRDb25kaXRpb24pO1xuICBjb25zdCBjbGllbnRJZCA9IGNsaWVudE9iai5faWQ7XG4gIHJldHVybiBjbGllbnRJZDtcbn1cblxuZXhwb3J0IGNvbnN0IHJlZ2lzdGVyVXNlciA9IGFzeW5jICh1c2VyRGV0YWlscywgY2xpZW50RGV0YWlscykgPT4ge1xuICBjb25zdCB7XG4gICAgbW9iaWxlTm8sIHBhc3N3b3JkLCBmaXJzdE5hbWUsIGxhc3ROYW1lLFxuICB9ID0gdXNlckRldGFpbHM7XG4gIGNvbnN0IGZpbmRDb25kaXRpb24gPSB7XG4gICAgbW9iaWxlTm8sXG4gIH07XG4gIGxldCB1c2VyT2JqID0gYXdhaXQgQWJzdHJhY3RNb2RlbHMubW9uZ29GaW5kT25lKFVzZXJzLCBmaW5kQ29uZGl0aW9uKTtcbiAgaWYgKHVzZXJPYmopIHtcbiAgICB0aHJvdyBFcnJvclV0aWxzLkRhdGFBbHJlYWR5RXhpc3RzKCk7XG4gIH0gZWxzZSB7XG4gICAgY29uc3QgYmNyeXB0ZWRQYXNzd29yZCA9IEVuY3J5cHRpb25TZXJ2aWNlLmdlbmVyYXRlQmNyeXB0UGFzc3dvcmQocGFzc3dvcmQpO1xuICAgIGNvbnN0IGNsaWVudElkID0gYXdhaXQgZ2V0Q2xpZW50SWRGcm9tQXBpS2V5KGNsaWVudERldGFpbHMuYXBpS2V5KTtcbiAgICB1c2VyT2JqID0ge1xuICAgICAgbW9iaWxlTm8sXG4gICAgICBmaXJzdE5hbWUsXG4gICAgICBsYXN0TmFtZSxcbiAgICAgIHBhc3N3b3JkOiBiY3J5cHRlZFBhc3N3b3JkLFxuICAgICAgY2xpZW50SWQsXG4gICAgICB1c2VyVHlwZTogXCJ1c2VyXCIsXG4gICAgfTtcbiAgICBhd2FpdCBBYnN0cmFjdE1vZGVscy5tb25nb0luc2VydE9uZShVc2VycywgdXNlck9iaik7XG4gICAgZGVsZXRlIHVzZXJPYmoucGFzc3dvcmQ7XG4gICAgcmV0dXJuIHVzZXJPYmo7XG4gIH1cbn07XG5cbmV4cG9ydCBjb25zdCBnZXRVc2VyRGV0YWlscyA9IGFzeW5jIChtb2JpbGVObykgPT4ge1xuICBjb25zdCBzZWxlY3RDb25kaXRpb24gPSB7XG4gICAgbW9iaWxlTm8sXG4gIH07XG4gIGNvbnN0IHByb2plY3RDb25kaXRpb24gPSB7XG4gICAgX2lkOiAwLFxuICAgIG1vYmlsZU5vOiAxLFxuICAgIGZpcnN0TmFtZTogMSxcbiAgICBsYXN0TmFtZTogMSxcbiAgICBhbHRlcm5hdGVNb2JpbGVObzogMSxcbiAgICBlbWFpbDogMSxcbiAgfTtcbiAgY29uc3QgdXNlck9iaiA9IGF3YWl0IEFic3RyYWN0TW9kZWxzLm1vbmdvRmluZE9uZShcbiAgICBVc2VycyxcbiAgICBzZWxlY3RDb25kaXRpb24sXG4gICAgcHJvamVjdENvbmRpdGlvbixcbiAgKTtcbiAgcmV0dXJuIHVzZXJPYmo7XG59O1xuXG5leHBvcnQgY29uc3QgdXBkYXRlVXNlckRldGFpbHMgPSBhc3luYyAodXNlckRldGFpbHMpID0+IHtcbiAgY29uc3Qge1xuICAgIGZpcnN0TmFtZSwgbGFzdE5hbWUsIGFsdGVybmF0ZU1vYmlsZU5vLCBlbWFpbCwgbW9iaWxlTm8sXG4gIH0gPSB1c2VyRGV0YWlscztcbiAgY29uc3Qgc2VsZWN0Q29uZGl0aW9uID0ge1xuICAgIG1vYmlsZU5vLFxuICB9O1xuICBjb25zdCB1cGRhdGVDb25kaXRpb24gPSB7XG4gICAgJHNldDoge1xuICAgICAgZmlyc3ROYW1lLFxuICAgICAgbGFzdE5hbWUsXG4gICAgICBhbHRlcm5hdGVNb2JpbGVObyxcbiAgICAgIGVtYWlsLFxuICAgIH0sXG4gIH07XG4gIGF3YWl0IEFic3RyYWN0TW9kZWxzLm1vbmdvVXBkYXRlT25lKFVzZXJzLCBzZWxlY3RDb25kaXRp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","map":{"version":3,"names":["getClientIdFromApiKey","apiKey","findCondition","metro_auth_key","clientObj","AbstractModels","mongoFindOne","Clients","clientId","_id","registerUser","userDetails","clientDetails","mobileNo","password","firstName","lastName","userObj","Users","ErrorUtils","DataAlreadyExists","bcryptedPassword","EncryptionService","generateBcryptPassword","userType","mongoInsertOne","getUserDetails","selectCondition","projectCondition","alternateMobileNo","email","updateUserDetails","updateCondition","$set","mongoUpdateOne"],"sourceRoot":"/Users/ramireddycharitha/git-explore/services/","sources":["UserService.js"],"sourcesContent":["import * as ErrorUtils from \"../errors/ErrorUtils\";\nimport * as AbstractModels from \"../models/AbstractModels\";\nimport * as EncryptionService from \"./EncryptionService\";\n\nimport { Users, Clients } from \"../models/mainDbSchema/index\";\n\nasync function getClientIdFromApiKey(apiKey) {\n  const findCondition = {\n    metro_auth_key: apiKey,\n  };\n  const clientObj = await AbstractModels.mongoFindOne(Clients, findCondition);\n  const clientId = clientObj._id;\n  return clientId;\n}\n\nexport const registerUser = async (userDetails, clientDetails) => {\n  const {\n    mobileNo, password, firstName, lastName,\n  } = userDetails;\n  const findCondition = {\n    mobileNo,\n  };\n  let userObj = await AbstractModels.mongoFindOne(Users, findCondition);\n  if (userObj) {\n    throw ErrorUtils.DataAlreadyExists();\n  } else {\n    const bcryptedPassword = EncryptionService.generateBcryptPassword(password);\n    const clientId = await getClientIdFromApiKey(clientDetails.apiKey);\n    userObj = {\n      mobileNo,\n      firstName,\n      lastName,\n      password: bcryptedPassword,\n      clientId,\n      userType: \"user\",\n    };\n    await AbstractModels.mongoInsertOne(Users, userObj);\n    delete userObj.password;\n    return userObj;\n  }\n};\n\nexport const getUserDetails = async (mobileNo) => {\n  const selectCondition = {\n    mobileNo,\n  };\n  const projectCondition = {\n    _id: 0,\n    mobileNo: 1,\n    firstName: 1,\n    lastName: 1,\n    alternateMobileNo: 1,\n    email: 1,\n  };\n  const userObj = await AbstractModels.mongoFindOne(\n    Users,\n    selectCondition,\n    projectCondition,\n  );\n  return userObj;\n};\n\nexport const updateUserDetails = async (userDetails) => {\n  const {\n    firstName, lastName, alternateMobileNo, email, mobileNo,\n  } = userDetails;\n  const selectCondition = {\n    mobileNo,\n  };\n  const updateCondition = {\n    $set: {\n      firstName,\n      lastName,\n      alternateMobileNo,\n      email,\n    },\n  };\n  await AbstractModels.mongoUpdateOne(Users, selectCondition, updateCondition);\n};\n"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;AAEA;;;;;;AAEA,eAAeA,qBAAf,CAAqCC,MAArC,EAA6C;EAC3C,MAAMC,aAAa,GAAG;IACpBC,cAAc,EAAEF;EADI,CAAtB;EAGA,MAAMG,SAAS,GAAG,MAAMC,cAAc,CAACC,YAAf,CAA4BC,cAA5B,EAAqCL,aAArC,CAAxB;EACA,MAAMM,QAAQ,GAAGJ,SAAS,CAACK,GAA3B;EACA,OAAOD,QAAP;AACD;;AAEM,MAAME,YAAY,GAAG,OAAOC,WAAP,EAAoBC,aAApB,KAAsC;EAChE,MAAM;IACJC,QADI;IACMC,QADN;IACgBC,SADhB;IAC2BC;EAD3B,IAEFL,WAFJ;EAGA,MAAMT,aAAa,GAAG;IACpBW;EADoB,CAAtB;EAGA,IAAII,OAAO,GAAG,MAAMZ,cAAc,CAACC,YAAf,CAA4BY,YAA5B,EAAmChB,aAAnC,CAApB;;EACA,IAAIe,OAAJ,EAAa;IACX,MAAME,UAAU,CAACC,iBAAX,EAAN;EACD,CAFD,MAEO;IACL,MAAMC,gBAAgB,GAAGC,iBAAiB,CAACC,sBAAlB,CAAyCT,QAAzC,CAAzB;IACA,MAAMN,QAAQ,GAAG,MAAMR,qBAAqB,CAACY,aAAa,CAACX,MAAf,CAA5C;IACAgB,OAAO,GAAG;MACRJ,QADQ;MAERE,SAFQ;MAGRC,QAHQ;MAIRF,QAAQ,EAAEO,gBAJF;MAKRb,QALQ;MAMRgB,QAAQ,EAAE;IANF,CAAV;IAQA,MAAMnB,cAAc,CAACoB,cAAf,CAA8BP,YAA9B,EAAqCD,OAArC,CAAN;IACA,OAAOA,OAAO,CAACH,QAAf;IACA,OAAOG,OAAP;EACD;AACF,CAzBM;;;;AA2BA,MAAMS,cAAc,GAAG,MAAOb,QAAP,IAAoB;EAChD,MAAMc,eAAe,GAAG;IACtBd;EADsB,CAAxB;EAGA,MAAMe,gBAAgB,GAAG;IACvBnB,GAAG,EAAE,CADkB;IAEvBI,QAAQ,EAAE,CAFa;IAGvBE,SAAS,EAAE,CAHY;IAIvBC,QAAQ,EAAE,CAJa;IAKvBa,iBAAiB,EAAE,CALI;IAMvBC,KAAK,EAAE;EANgB,CAAzB;EAQA,MAAMb,OAAO,GAAG,MAAMZ,cAAc,CAACC,YAAf,CACpBY,YADoB,EAEpBS,eAFoB,EAGpBC,gBAHoB,CAAtB;EAKA,OAAOX,OAAP;AACD,CAlBM;;;;AAoBA,MAAMc,iBAAiB,GAAG,MAAOpB,WAAP,IAAuB;EACtD,MAAM;IACJI,SADI;IACOC,QADP;IACiBa,iBADjB;IACoCC,KADpC;IAC2CjB;EAD3C,IAEFF,WAFJ;EAGA,MAAMgB,eAAe,GAAG;IACtBd;EADsB,CAAxB;EAGA,MAAMmB,eAAe,GAAG;IACtBC,IAAI,EAAE;MACJlB,SADI;MAEJC,QAFI;MAGJa,iBAHI;MAIJC;IAJI;EADgB,CAAxB;EAQA,MAAMzB,cAAc,CAAC6B,cAAf,CAA8BhB,YAA9B,EAAqCS,eAArC,EAAsDK,eAAtD,CAAN;AACD,CAhBM"}},"mtime":1653643634188},"{\"assumptions\":{},\"sourceRoot\":\"/Users/ramireddycharitha/git-explore/services/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/ramireddycharitha/git-explore\",\"filename\":\"/Users/ramireddycharitha/git-explore/services/EncryptionService.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"default\",\"root\":\"/Users/ramireddycharitha/git-explore\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.17.10:default":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.generateBcryptPassword = exports.compareBcryptPassword = void 0;\n\nvar _bcryptjs = _interopRequireDefault(require(\"bcryptjs\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst generateBcryptPassword = password => {\n  const salt = _bcryptjs.default.genSaltSync(10);\n\n  const hash = _bcryptjs.default.hashSync(password, salt);\n\n  return hash;\n};\n\nexports.generateBcryptPassword = generateBcryptPassword;\n\nconst compareBcryptPassword = (password, bcryptedPassword) => {\n  const isValid = _bcryptjs.default.compareSync(password, bcryptedPassword);\n\n  return isValid;\n};\n\nexports.compareBcryptPassword = compareBcryptPassword;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJnZW5lcmF0ZUJjcnlwdFBhc3N3b3JkIiwicGFzc3dvcmQiLCJzYWx0IiwiYmNyeXB0IiwiZ2VuU2FsdFN5bmMiLCJoYXNoIiwiaGFzaFN5bmMiLCJjb21wYXJlQmNyeXB0UGFzc3dvcmQiLCJiY3J5cHRlZFBhc3N3b3JkIiwiaXNWYWxpZCIsImNvbXBhcmVTeW5jIl0sInNvdXJjZVJvb3QiOiIvVXNlcnMvcmFtaXJlZGR5Y2hhcml0aGEvZ2l0LWV4cGxvcmUvc2VydmljZXMvIiwic291cmNlcyI6WyJFbmNyeXB0aW9uU2VydmljZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgYmNyeXB0IGZyb20gXCJiY3J5cHRqc1wiO1xuXG5leHBvcnQgY29uc3QgZ2VuZXJhdGVCY3J5cHRQYXNzd29yZCA9IChwYXNzd29yZCkgPT4ge1xuICBjb25zdCBzYWx0ID0gYmNyeXB0LmdlblNhbHRTeW5jKDEwKTtcbiAgY29uc3QgaGFzaCA9IGJjcnlwdC5oYXNoU3luYyhwYXNzd29yZCwgc2FsdCk7XG4gIHJldHVybiBoYXNoO1xufTtcblxuZXhwb3J0IGNvbnN0IGNvbXBhcmVCY3J5cHRQYXNzd29yZCA9IChwYXNzd29yZCwgYmNyeXB0ZWRQYXNzd29yZCkgPT4ge1xuICBjb25zdCBpc1ZhbGlkID0gYmNyeXB0LmNvbXBhcmVTeW5jKHBhc3N3b3JkLCBiY3J5cHRlZFBhc3N3b3JkKTtcbiAgcmV0dXJuIGlzVmFsaWQ7XG59O1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7Ozs7QUFFTyxNQUFNQSxzQkFBc0IsR0FBSUMsUUFBRCxJQUFjO0VBQ2xELE1BQU1DLElBQUksR0FBR0Msa0JBQU9DLFdBQVAsQ0FBbUIsRUFBbkIsQ0FBYjs7RUFDQSxNQUFNQyxJQUFJLEdBQUdGLGtCQUFPRyxRQUFQLENBQWdCTCxRQUFoQixFQUEwQkMsSUFBMUIsQ0FBYjs7RUFDQSxPQUFPRyxJQUFQO0FBQ0QsQ0FKTTs7OztBQU1BLE1BQU1FLHFCQUFxQixHQUFHLENBQUNOLFFBQUQsRUFBV08sZ0JBQVgsS0FBZ0M7RUFDbkUsTUFBTUMsT0FBTyxHQUFHTixrQkFBT08sV0FBUCxDQUFtQlQsUUFBbkIsRUFBNkJPLGdCQUE3QixDQUFoQjs7RUFDQSxPQUFPQyxPQUFQO0FBQ0QsQ0FITSJ9","map":{"version":3,"names":["generateBcryptPassword","password","salt","bcrypt","genSaltSync","hash","hashSync","compareBcryptPassword","bcryptedPassword","isValid","compareSync"],"sourceRoot":"/Users/ramireddycharitha/git-explore/services/","sources":["EncryptionService.js"],"sourcesContent":["import bcrypt from \"bcryptjs\";\n\nexport const generateBcryptPassword = (password) => {\n  const salt = bcrypt.genSaltSync(10);\n  const hash = bcrypt.hashSync(password, salt);\n  return hash;\n};\n\nexport const compareBcryptPassword = (password, bcryptedPassword) => {\n  const isValid = bcrypt.compareSync(password, bcryptedPassword);\n  return isValid;\n};\n"],"mappings":";;;;;;;AAAA;;;;AAEO,MAAMA,sBAAsB,GAAIC,QAAD,IAAc;EAClD,MAAMC,IAAI,GAAGC,kBAAOC,WAAP,CAAmB,EAAnB,CAAb;;EACA,MAAMC,IAAI,GAAGF,kBAAOG,QAAP,CAAgBL,QAAhB,EAA0BC,IAA1B,CAAb;;EACA,OAAOG,IAAP;AACD,CAJM;;;;AAMA,MAAME,qBAAqB,GAAG,CAACN,QAAD,EAAWO,gBAAX,KAAgC;EACnE,MAAMC,OAAO,GAAGN,kBAAOO,WAAP,CAAmBT,QAAnB,EAA6BO,gBAA7B,CAAhB;;EACA,OAAOC,OAAP;AACD,CAHM"}},"mtime":1653643634188},"{\"assumptions\":{},\"sourceRoot\":\"/Users/ramireddycharitha/git-explore/routes/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/ramireddycharitha/git-explore\",\"filename\":\"/Users/ramireddycharitha/git-explore/routes/Outboundcall.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"default\",\"root\":\"/Users/ramireddycharitha/git-explore\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.17.10:default":{"value":{"code":"\"use strict\";\n\nvar _express = require(\"express\");\n\nvar _common = _interopRequireDefault(require(\"../commons/util/common\"));\n\nvar outboundcallController = _interopRequireWildcard(require(\"../controllers/OutboundcallController\"));\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst router = (0, _express.Router)();\nrouter.post(\"/init/:param\", (0, _common.default)(outboundcallController.callInit));\nrouter.get(\"/external/call/handle/:param\", (0, _common.default)(outboundcallController.handleCall));\nrouter.get(\"/numbers/list/:param\", (0, _common.default)(outboundcallController.didNumberList));\nrouter.put(\"/user/status/:param\", (0, _common.default)(outboundcallController.changeOutboundCallStatus));\nrouter.get(\"/call-log/list/:param\", (0, _common.default)(outboundcallController.callLogList));\nrouter.put(\"/user/status/:param\", (0, _common.default)(outboundcallController.changeOutboundCallStatus));\nmodule.exports = router;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJyb3V0ZXIiLCJwb3N0Iiwib3V0Ym91bmRjYWxsQ29udHJvbGxlciIsImNhbGxJbml0IiwiZ2V0IiwiaGFuZGxlQ2FsbCIsImRpZE51bWJlckxpc3QiLCJwdXQiLCJjaGFuZ2VPdXRib3VuZENhbGxTdGF0dXMiLCJjYWxsTG9nTGlzdCIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy9yYW1pcmVkZHljaGFyaXRoYS9naXQtZXhwbG9yZS9yb3V0ZXMvIiwic291cmNlcyI6WyJPdXRib3VuZGNhbGwuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUm91dGVyIH0gZnJvbSBcImV4cHJlc3NcIjtcbmltcG9ydCAgd2l0aEFzeW5jQ29udHJvbGxlciAgZnJvbSBcIi4uL2NvbW1vbnMvdXRpbC9jb21tb25cIjtcbmltcG9ydCAqIGFzIG91dGJvdW5kY2FsbENvbnRyb2xsZXIgZnJvbSBcIi4uL2NvbnRyb2xsZXJzL091dGJvdW5kY2FsbENvbnRyb2xsZXJcIjtcblxuY29uc3Qgcm91dGVyID0gUm91dGVyKCk7XG5yb3V0ZXIucG9zdChcIi9pbml0LzpwYXJhbVwiLCB3aXRoQXN5bmNDb250cm9sbGVyKG91dGJvdW5kY2FsbENvbnRyb2xsZXIuY2FsbEluaXQpKTtcbnJvdXRlci5nZXQoXCIvZXh0ZXJuYWwvY2FsbC9oYW5kbGUvOnBhcmFtXCIsIHdpdGhBc3luY0NvbnRyb2xsZXIob3V0Ym91bmRjYWxsQ29udHJvbGxlci5oYW5kbGVDYWxsKSk7XG5yb3V0ZXIuZ2V0KFwiL251bWJlcnMvbGlzdC86cGFyYW1cIiwgd2l0aEFzeW5jQ29udHJvbGxlcihvdXRib3VuZGNhbGxDb250cm9sbGVyLmRpZE51bWJlckxpc3QpKTtcbnJvdXRlci5wdXQoXCIvdXNlci9zdGF0dXMvOnBhcmFtXCIsIHdpdGhBc3luY0NvbnRyb2xsZXIob3V0Ym91bmRjYWxsQ29udHJvbGxlci5jaGFuZ2VPdXRib3VuZENhbGxTdGF0dXMpKVxucm91dGVyLmdldChcIi9jYWxsLWxvZy9saXN0LzpwYXJhbVwiLHdpdGhBc3luY0NvbnRyb2xsZXIob3V0Ym91bmRjYWxsQ29udHJvbGxlci5jYWxsTG9nTGlzdCkpO1xucm91dGVyLnB1dChcIi91c2VyL3N0YXR1cy86cGFyYW1cIiwgd2l0aEFzeW5jQ29udHJvbGxlcihvdXRib3VuZGNhbGxDb250cm9sbGVyLmNoYW5nZU91dGJvdW5kQ2FsbFN0YXR1cykpXG5cbm1vZHVsZS5leHBvcnRzID0gcm91dGVyOyJdLCJtYXBwaW5ncyI6Ijs7QUFBQTs7QUFDQTs7QUFDQTs7Ozs7Ozs7QUFFQSxNQUFNQSxNQUFNLEdBQUcsc0JBQWY7QUFDQUEsTUFBTSxDQUFDQyxJQUFQLENBQVksY0FBWixFQUE0QixxQkFBb0JDLHNCQUFzQixDQUFDQyxRQUEzQyxDQUE1QjtBQUNBSCxNQUFNLENBQUNJLEdBQVAsQ0FBVyw4QkFBWCxFQUEyQyxxQkFBb0JGLHNCQUFzQixDQUFDRyxVQUEzQyxDQUEzQztBQUNBTCxNQUFNLENBQUNJLEdBQVAsQ0FBVyxzQkFBWCxFQUFtQyxxQkFBb0JGLHNCQUFzQixDQUFDSSxhQUEzQyxDQUFuQztBQUNBTixNQUFNLENBQUNPLEdBQVAsQ0FBVyxxQkFBWCxFQUFrQyxxQkFBb0JMLHNCQUFzQixDQUFDTSx3QkFBM0MsQ0FBbEM7QUFDQVIsTUFBTSxDQUFDSSxHQUFQLENBQVcsdUJBQVgsRUFBbUMscUJBQW9CRixzQkFBc0IsQ0FBQ08sV0FBM0MsQ0FBbkM7QUFDQVQsTUFBTSxDQUFDTyxHQUFQLENBQVcscUJBQVgsRUFBa0MscUJBQW9CTCxzQkFBc0IsQ0FBQ00sd0JBQTNDLENBQWxDO0FBRUFFLE1BQU0sQ0FBQ0MsT0FBUCxHQUFpQlgsTUFBakIifQ==","map":{"version":3,"names":["router","post","outboundcallController","callInit","get","handleCall","didNumberList","put","changeOutboundCallStatus","callLogList","module","exports"],"sourceRoot":"/Users/ramireddycharitha/git-explore/routes/","sources":["Outboundcall.js"],"sourcesContent":["import { Router } from \"express\";\nimport  withAsyncController  from \"../commons/util/common\";\nimport * as outboundcallController from \"../controllers/OutboundcallController\";\n\nconst router = Router();\nrouter.post(\"/init/:param\", withAsyncController(outboundcallController.callInit));\nrouter.get(\"/external/call/handle/:param\", withAsyncController(outboundcallController.handleCall));\nrouter.get(\"/numbers/list/:param\", withAsyncController(outboundcallController.didNumberList));\nrouter.put(\"/user/status/:param\", withAsyncController(outboundcallController.changeOutboundCallStatus))\nrouter.get(\"/call-log/list/:param\",withAsyncController(outboundcallController.callLogList));\nrouter.put(\"/user/status/:param\", withAsyncController(outboundcallController.changeOutboundCallStatus))\n\nmodule.exports = router;"],"mappings":";;AAAA;;AACA;;AACA;;;;;;;;AAEA,MAAMA,MAAM,GAAG,sBAAf;AACAA,MAAM,CAACC,IAAP,CAAY,cAAZ,EAA4B,qBAAoBC,sBAAsB,CAACC,QAA3C,CAA5B;AACAH,MAAM,CAACI,GAAP,CAAW,8BAAX,EAA2C,qBAAoBF,sBAAsB,CAACG,UAA3C,CAA3C;AACAL,MAAM,CAACI,GAAP,CAAW,sBAAX,EAAmC,qBAAoBF,sBAAsB,CAACI,aAA3C,CAAnC;AACAN,MAAM,CAACO,GAAP,CAAW,qBAAX,EAAkC,qBAAoBL,sBAAsB,CAACM,wBAA3C,CAAlC;AACAR,MAAM,CAACI,GAAP,CAAW,uBAAX,EAAmC,qBAAoBF,sBAAsB,CAACO,WAA3C,CAAnC;AACAT,MAAM,CAACO,GAAP,CAAW,qBAAX,EAAkC,qBAAoBL,sBAAsB,CAACM,wBAA3C,CAAlC;AAEAE,MAAM,CAACC,OAAP,GAAiBX,MAAjB"}},"mtime":1653994113646},"{\"assumptions\":{},\"sourceRoot\":\"/Users/ramireddycharitha/git-explore/commons/util/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/ramireddycharitha/git-explore\",\"filename\":\"/Users/ramireddycharitha/git-explore/commons/util/common.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"default\",\"root\":\"/Users/ramireddycharitha/git-explore\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.17.10:default":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nconst withAsyncController = handler => (req, res, next) => handler(req, res, next).catch(next);\n\nvar _default = withAsyncController;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJ3aXRoQXN5bmNDb250cm9sbGVyIiwiaGFuZGxlciIsInJlcSIsInJlcyIsIm5leHQiLCJjYXRjaCJdLCJzb3VyY2VSb290IjoiL1VzZXJzL3JhbWlyZWRkeWNoYXJpdGhhL2dpdC1leHBsb3JlL2NvbW1vbnMvdXRpbC8iLCJzb3VyY2VzIjpbImNvbW1vbi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCB3aXRoQXN5bmNDb250cm9sbGVyID0gKGhhbmRsZXIpID0+IChyZXEsIHJlcywgbmV4dCkgPT4gaGFuZGxlcihyZXEsIHJlcywgbmV4dCkuY2F0Y2gobmV4dCk7XG5cbmV4cG9ydCBkZWZhdWx0ICB3aXRoQXN5bmNDb250cm9sbGVyIDtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBLE1BQU1BLG1CQUFtQixHQUFJQyxPQUFELElBQWEsQ0FBQ0MsR0FBRCxFQUFNQyxHQUFOLEVBQVdDLElBQVgsS0FBb0JILE9BQU8sQ0FBQ0MsR0FBRCxFQUFNQyxHQUFOLEVBQVdDLElBQVgsQ0FBUCxDQUF3QkMsS0FBeEIsQ0FBOEJELElBQTlCLENBQTdEOztlQUVnQkosbUIifQ==","map":{"version":3,"names":["withAsyncController","handler","req","res","next","catch"],"sourceRoot":"/Users/ramireddycharitha/git-explore/commons/util/","sources":["common.js"],"sourcesContent":["const withAsyncController = (handler) => (req, res, next) => handler(req, res, next).catch(next);\n\nexport default  withAsyncController ;\n"],"mappings":";;;;;;;AAAA,MAAMA,mBAAmB,GAAIC,OAAD,IAAa,CAACC,GAAD,EAAMC,GAAN,EAAWC,IAAX,KAAoBH,OAAO,CAACC,GAAD,EAAMC,GAAN,EAAWC,IAAX,CAAP,CAAwBC,KAAxB,CAA8BD,IAA9B,CAA7D;;eAEgBJ,mB"}},"mtime":1653973516979},"{\"assumptions\":{},\"sourceRoot\":\"/Users/ramireddycharitha/git-explore/controllers/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/ramireddycharitha/git-explore\",\"filename\":\"/Users/ramireddycharitha/git-explore/controllers/OutboundcallController.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"default\",\"root\":\"/Users/ramireddycharitha/git-explore\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.17.10:default":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.callInit = callInit;\nexports.callLogList = callLogList;\nexports.changeOutboundCallStatus = changeOutboundCallStatus;\nexports.didNumberList = didNumberList;\nexports.handleCall = handleCall;\n\nvar outboundCallService = _interopRequireWildcard(require(\"../services/OutboundcallService\"));\n\nvar Auth = _interopRequireWildcard(require(\"../middlewares/Auth\"));\n\nvar _Keys = require(\"../constants/Keys\");\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\n//import { Console } from \"winston/lib/winston/transports\";\nasync function callInit(req, res, next) {\n  const {\n    param\n  } = req.params;\n  const organisationId = param;\n  const {\n    didId,\n    number\n  } = req.body;\n  log(\"info\", {\n    organisationId,\n    didId,\n    number\n  });\n  const sessionObj = await Auth.getSessionObj(req);\n  const userId = sessionObj.user_id;\n  await outboundCallService.initCall(organisationId, {\n    didId,\n    userId,\n    number\n  });\n  res.data = {};\n  log(\"info\", res.data);\n  next();\n}\n\nasync function didNumberList(req, res, next) {\n  const {\n    param\n  } = req.params;\n  const organisationId = param;\n  const {\n    pageNo,\n    pageSize\n  } = req.query;\n  const list = await outboundCallService.didNumberList(organisationId, {\n    pageNo,\n    pageSize\n  });\n  res.data = list;\n  log(\"info\", res.data);\n  next();\n}\n\nasync function handleCall(req, res) {\n  const {\n    param\n  } = req.params;\n  const callId = param;\n  const data = req.query; // console.log(\"CHECKING QUERY IN HANDLE CALL\\n\\n\\n\\n\\n\\n\"+JSON.stringify(data));\n\n  log(\"info\", {\n    callId,\n    data\n  });\n  const response = await outboundCallService.handleCall({\n    callId\n  }, data); // console.log(\"CHECKING RESPONSE IN HANDLE CALL\\n\\n\\n\\n\\n\"+response);\n\n  log(\"info\", {\n    response\n  });\n  res.send(response);\n}\n\nasync function callLogList(req, res, next) {\n  const {\n    param\n  } = req.params;\n  const organisationId = param;\n  const {\n    pageNo,\n    pageSize,\n    search_key,\n    q\n  } = req.query;\n  const sessionObj = await Auth.getSessionObj(req);\n  const opts = {\n    role: sessionObj.users_business_portal_role,\n    userId: sessionObj.user_id\n  }; //  console.log(\"++++++++++++++++++opts\"+JSON.stringify(opts));\n\n  const list = await outboundCallService.callLogList(organisationId, {\n    page: pageNo,\n    page_size: pageSize,\n    search_key,\n    q\n  }, opts); // console.log(\"++++++++++++++++list\"+list);\n\n  res.data = list; // logToJSON('info', res.data);\n\n  next();\n}\n\nasync function changeOutboundCallStatus(req, res, next) {\n  const {\n    param\n  } = req.params;\n  const organisation_id = param;\n  const data = req.body;\n  const sessionObj = await Auth.getSessionObj(req);\n  const opts = {\n    orgId: organisation_id,\n    role: sessionObj.users_business_portal_role,\n    userId: sessionObj.user_id\n  }; //console.log(\"++++++++++++++ the opts are \"+JSON.stringify(opts))\n\n  log('info', {\n    organisation_id,\n    data,\n    opts\n  });\n  const response = await outboundCallService.changeOutboundCallStatus(opts, data);\n  res.data = response;\n  log('info', res.data);\n  next();\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjYWxsSW5pdCIsInJlcSIsInJlcyIsIm5leHQiLCJwYXJhbSIsInBhcmFtcyIsIm9yZ2FuaXNhdGlvbklkIiwiZGlkSWQiLCJudW1iZXIiLCJib2R5IiwibG9nIiwic2Vzc2lvbk9iaiIsIkF1dGgiLCJnZXRTZXNzaW9uT2JqIiwidXNlcklkIiwidXNlcl9pZCIsIm91dGJvdW5kQ2FsbFNlcnZpY2UiLCJpbml0Q2FsbCIsImRhdGEiLCJkaWROdW1iZXJMaXN0IiwicGFnZU5vIiwicGFnZVNpemUiLCJxdWVyeSIsImxpc3QiLCJoYW5kbGVDYWxsIiwiY2FsbElkIiwicmVzcG9uc2UiLCJzZW5kIiwiY2FsbExvZ0xpc3QiLCJzZWFyY2hfa2V5IiwicSIsIm9wdHMiLCJyb2xlIiwidXNlcnNfYnVzaW5lc3NfcG9ydGFsX3JvbGUiLCJwYWdlIiwicGFnZV9zaXplIiwiY2hhbmdlT3V0Ym91bmRDYWxsU3RhdHVzIiwib3JnYW5pc2F0aW9uX2lkIiwib3JnSWQiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy9yYW1pcmVkZHljaGFyaXRoYS9naXQtZXhwbG9yZS9jb250cm9sbGVycy8iLCJzb3VyY2VzIjpbIk91dGJvdW5kY2FsbENvbnRyb2xsZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgb3V0Ym91bmRDYWxsU2VydmljZSBmcm9tIFwiLi4vc2VydmljZXMvT3V0Ym91bmRjYWxsU2VydmljZVwiO1xuaW1wb3J0ICogYXMgQXV0aCBmcm9tIFwiLi4vbWlkZGxld2FyZXMvQXV0aFwiO1xuaW1wb3J0IHsgSEVBREVSX1NFU1NJT05fVE9LRU4gfSBmcm9tIFwiLi4vY29uc3RhbnRzL0tleXNcIjtcbi8vaW1wb3J0IHsgQ29uc29sZSB9IGZyb20gXCJ3aW5zdG9uL2xpYi93aW5zdG9uL3RyYW5zcG9ydHNcIjtcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNhbGxJbml0KHJlcSwgcmVzLCBuZXh0KSB7XG4gIGNvbnN0IHsgcGFyYW0gfSA9IHJlcS5wYXJhbXM7XG4gIGNvbnN0IG9yZ2FuaXNhdGlvbklkPXBhcmFtO1xuICBjb25zdCB7IGRpZElkLCBudW1iZXIgfSA9IHJlcS5ib2R5O1xuICBsb2coXCJpbmZvXCIsIHsgb3JnYW5pc2F0aW9uSWQsIGRpZElkLCBudW1iZXIgfSk7XG4gIGNvbnN0IHNlc3Npb25PYmogPSBhd2FpdCBBdXRoLmdldFNlc3Npb25PYmoocmVxKTtcbiAgY29uc3QgdXNlcklkID0gc2Vzc2lvbk9iai51c2VyX2lkO1xuICBhd2FpdCBvdXRib3VuZENhbGxTZXJ2aWNlLmluaXRDYWxsKG9yZ2FuaXNhdGlvbklkLCB7XG4gICAgZGlkSWQsXG4gICAgdXNlcklkLFxuICAgIG51bWJlcixcbiAgfSk7XG4gIHJlcy5kYXRhID0ge307XG4gIGxvZyhcImluZm9cIiwgcmVzLmRhdGEpO1xuICBuZXh0KCk7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkaWROdW1iZXJMaXN0KHJlcSwgcmVzLCBuZXh0KSB7XG4gIGNvbnN0IHsgcGFyYW0gfSA9IHJlcS5wYXJhbXM7XG4gIGNvbnN0IG9yZ2FuaXNhdGlvbklkPXBhcmFtXG4gIGNvbnN0IHsgcGFnZU5vLCBwYWdlU2l6ZSB9ID0gcmVxLnF1ZXJ5O1xuICBjb25zdCBsaXN0ID0gYXdhaXQgb3V0Ym91bmRDYWxsU2VydmljZS5kaWROdW1iZXJMaXN0KG9yZ2FuaXNhdGlvbklkLCB7XG4gICAgcGFnZU5vLCBwYWdlU2l6ZSxcbiAgfSk7XG4gIHJlcy5kYXRhID0gbGlzdDtcbiAgbG9nKFwiaW5mb1wiLCByZXMuZGF0YSk7XG4gIG5leHQoKTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGhhbmRsZUNhbGwgKHJlcSwgcmVzKSB7XG4gIGNvbnN0IHsgcGFyYW0gfSA9IHJlcS5wYXJhbXM7XG4gIGNvbnN0IGNhbGxJZCA9IHBhcmFtO1xuICBjb25zdCBkYXRhID0gcmVxLnF1ZXJ5O1xuICAvLyBjb25zb2xlLmxvZyhcIkNIRUNLSU5HIFFVRVJZIElOIEhBTkRMRSBDQUxMXFxuXFxuXFxuXFxuXFxuXFxuXCIrSlNPTi5zdHJpbmdpZnkoZGF0YSkpO1xuICBsb2coXCJpbmZvXCIsIHsgY2FsbElkLCBkYXRhIH0pO1xuICBjb25zdCByZXNwb25zZSA9IGF3YWl0IG91dGJvdW5kQ2FsbFNlcnZpY2UuaGFuZGxlQ2FsbCh7IGNhbGxJZCB9LCBkYXRhKTtcbiAgLy8gY29uc29sZS5sb2coXCJDSEVDS0lORyBSRVNQT05TRSBJTiBIQU5ETEUgQ0FMTFxcblxcblxcblxcblxcblwiK3Jlc3BvbnNlKTtcbiAgbG9nKFwiaW5mb1wiLCB7IHJlc3BvbnNlIH0pO1xuICByZXMuc2VuZChyZXNwb25zZSk7XG59XG5cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNhbGxMb2dMaXN0IChyZXEsIHJlcywgbmV4dCkge1xuICBjb25zdCB7IHBhcmFtIH0gPSByZXEucGFyYW1zO1xuICBjb25zdCBvcmdhbmlzYXRpb25JZD1wYXJhbTtcbiAgY29uc3QgeyBwYWdlTm8sIHBhZ2VTaXplLCBzZWFyY2hfa2V5LCBxIH0gPSByZXEucXVlcnk7XG4gIGNvbnN0IHNlc3Npb25PYmogPSBhd2FpdCBBdXRoLmdldFNlc3Npb25PYmoocmVxKTtcbiAgY29uc3Qgb3B0cyA9IHtcbiAgICByb2xlOiBzZXNzaW9uT2JqLnVzZXJzX2J1c2luZXNzX3BvcnRhbF9yb2xlLFxuICAgIHVzZXJJZDogc2Vzc2lvbk9iai51c2VyX2lkXG4gIH07XG4vLyAgY29uc29sZS5sb2coXCIrKysrKysrKysrKysrKysrKytvcHRzXCIrSlNPTi5zdHJpbmdpZnkob3B0cykpO1xuICBjb25zdCBsaXN0ID0gYXdhaXQgb3V0Ym91bmRDYWxsU2VydmljZS5jYWxsTG9nTGlzdChvcmdhbmlzYXRpb25JZCwge1xuICAgIHBhZ2U6IHBhZ2VObywgcGFnZV9zaXplOiBwYWdlU2l6ZSwgc2VhcmNoX2tleSwgcVxuICB9LCBvcHRzKTtcbiAvLyBjb25zb2xlLmxvZyhcIisrKysrKysrKysrKysrKytsaXN0XCIrbGlzdCk7XG4gIHJlcy5kYXRhID0gbGlzdDtcbiAgLy8gbG9nVG9KU09OKCdpbmZvJywgcmVzLmRhdGEpO1xuICBuZXh0KCk7XG59XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY2hhbmdlT3V0Ym91bmRDYWxsU3RhdHVzIChyZXEsIHJlcywgbmV4dCkge1xuICBjb25zdCB7IHBhcmFtIH0gPSByZXEucGFyYW1zO1xuICBjb25zdCBvcmdhbmlzYXRpb25faWQgPSBwYXJhbTtcbiAgY29uc3QgZGF0YSA9IHJlcS5ib2R5O1xuICBjb25zdCBzZXNzaW9uT2JqID0gYXdhaXQgQXV0aC5nZXRTZXNzaW9uT2JqKHJlcSk7XG4gIGNvbnN0IG9wdHMgPSB7XG4gICAgb3JnSWQ6IG9yZ2FuaXNhdGlvbl9pZCxcbiAgICByb2xlOiBzZXNzaW9uT2JqLnVzZXJzX2J1c2luZXNzX3BvcnRhbF9yb2xlLFxuICAgIHVzZXJJZDogc2Vzc2lvbk9iai51c2VyX2lkXG4gIH07XG4gIC8vY29uc29sZS5sb2coXCIrKysrKysrKysrKysrKyB0aGUgb3B0cyBhcmUgXCIrSlNPTi5zdHJpbmdpZnkob3B0cykpXG4gIGxvZygnaW5mbycsIHsgb3JnYW5pc2F0aW9uX2lkLCBkYXRhLCBvcHRzIH0pO1xuICBjb25zdCByZXNwb25zZSA9IGF3YWl0IG91dGJvdW5kQ2FsbFNlcnZpY2UuY2hhbmdlT3V0Ym91bmRDYWxsU3RhdHVzKG9wdHMsIGRhdGEpO1xuICByZXMuZGF0YSA9IHJlc3BvbnNlO1xuICBsb2coJ2luZm8nLCByZXMuZGF0YSk7XG4gIG5leHQoKTtcbn1cblxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFBOztBQUNBOztBQUNBOzs7Ozs7QUFDQTtBQUVPLGVBQWVBLFFBQWYsQ0FBd0JDLEdBQXhCLEVBQTZCQyxHQUE3QixFQUFrQ0MsSUFBbEMsRUFBd0M7RUFDN0MsTUFBTTtJQUFFQztFQUFGLElBQVlILEdBQUcsQ0FBQ0ksTUFBdEI7RUFDQSxNQUFNQyxjQUFjLEdBQUNGLEtBQXJCO0VBQ0EsTUFBTTtJQUFFRyxLQUFGO0lBQVNDO0VBQVQsSUFBb0JQLEdBQUcs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","map":{"version":3,"names":["callInit","req","res","next","param","params","organisationId","didId","number","body","log","sessionObj","Auth","getSessionObj","userId","user_id","outboundCallService","initCall","data","didNumberList","pageNo","pageSize","query","list","handleCall","callId","response","send","callLogList","search_key","q","opts","role","users_business_portal_role","page","page_size","changeOutboundCallStatus","organisation_id","orgId"],"sourceRoot":"/Users/ramireddycharitha/git-explore/controllers/","sources":["OutboundcallController.js"],"sourcesContent":["import * as outboundCallService from \"../services/OutboundcallService\";\nimport * as Auth from \"../middlewares/Auth\";\nimport { HEADER_SESSION_TOKEN } from \"../constants/Keys\";\n//import { Console } from \"winston/lib/winston/transports\";\n\nexport async function callInit(req, res, next) {\n  const { param } = req.params;\n  const organisationId=param;\n  const { didId, number } = req.body;\n  log(\"info\", { organisationId, didId, number });\n  const sessionObj = await Auth.getSessionObj(req);\n  const userId = sessionObj.user_id;\n  await outboundCallService.initCall(organisationId, {\n    didId,\n    userId,\n    number,\n  });\n  res.data = {};\n  log(\"info\", res.data);\n  next();\n}\n\nexport async function didNumberList(req, res, next) {\n  const { param } = req.params;\n  const organisationId=param\n  const { pageNo, pageSize } = req.query;\n  const list = await outboundCallService.didNumberList(organisationId, {\n    pageNo, pageSize,\n  });\n  res.data = list;\n  log(\"info\", res.data);\n  next();\n}\n\nexport async function handleCall (req, res) {\n  const { param } = req.params;\n  const callId = param;\n  const data = req.query;\n  // console.log(\"CHECKING QUERY IN HANDLE CALL\\n\\n\\n\\n\\n\\n\"+JSON.stringify(data));\n  log(\"info\", { callId, data });\n  const response = await outboundCallService.handleCall({ callId }, data);\n  // console.log(\"CHECKING RESPONSE IN HANDLE CALL\\n\\n\\n\\n\\n\"+response);\n  log(\"info\", { response });\n  res.send(response);\n}\n\n\nexport async function callLogList (req, res, next) {\n  const { param } = req.params;\n  const organisationId=param;\n  const { pageNo, pageSize, search_key, q } = req.query;\n  const sessionObj = await Auth.getSessionObj(req);\n  const opts = {\n    role: sessionObj.users_business_portal_role,\n    userId: sessionObj.user_id\n  };\n//  console.log(\"++++++++++++++++++opts\"+JSON.stringify(opts));\n  const list = await outboundCallService.callLogList(organisationId, {\n    page: pageNo, page_size: pageSize, search_key, q\n  }, opts);\n // console.log(\"++++++++++++++++list\"+list);\n  res.data = list;\n  // logToJSON('info', res.data);\n  next();\n}\nexport async function changeOutboundCallStatus (req, res, next) {\n  const { param } = req.params;\n  const organisation_id = param;\n  const data = req.body;\n  const sessionObj = await Auth.getSessionObj(req);\n  const opts = {\n    orgId: organisation_id,\n    role: sessionObj.users_business_portal_role,\n    userId: sessionObj.user_id\n  };\n  //console.log(\"++++++++++++++ the opts are \"+JSON.stringify(opts))\n  log('info', { organisation_id, data, opts });\n  const response = await outboundCallService.changeOutboundCallStatus(opts, data);\n  res.data = response;\n  log('info', res.data);\n  next();\n}\n\n"],"mappings":"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"}},"mtime":1654155654612},"{\"assumptions\":{},\"sourceRoot\":\"/Users/ramireddycharitha/git-explore/constants/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/ramireddycharitha/git-explore\",\"filename\":\"/Users/ramireddycharitha/git-explore/constants/Constants.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"default\",\"root\":\"/Users/ramireddycharitha/git-explore\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.17.10:default":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.LOGGER_USER_IP_ADDRESS = exports.LOGGER_USER_DETAILS = exports.LOGGER_URL_REDIRECTION_OBJ = exports.LOGGER_RESPONSE_TIME = exports.LOGGER_RESPONSE_PAYLOAD = exports.LOGGER_REQUEST_START_TIME = exports.LOGGER_REQUEST_PAYLOAD = exports.LOGGER_CORRELATIONID = exports.LOGGER_API_ROUTE = void 0;\nconst LOGGER_USER_DETAILS = \"loggerUserDetails\";\nexports.LOGGER_USER_DETAILS = LOGGER_USER_DETAILS;\nconst LOGGER_REQUEST_PAYLOAD = \"loggerRequestPayload\";\nexports.LOGGER_REQUEST_PAYLOAD = LOGGER_REQUEST_PAYLOAD;\nconst LOGGER_RESPONSE_PAYLOAD = \"loggerResponsePayload\";\nexports.LOGGER_RESPONSE_PAYLOAD = LOGGER_RESPONSE_PAYLOAD;\nconst LOGGER_REQUEST_START_TIME = \"loggerRequestStartTime\";\nexports.LOGGER_REQUEST_START_TIME = LOGGER_REQUEST_START_TIME;\nconst LOGGER_API_ROUTE = \"loggerRoute\";\nexports.LOGGER_API_ROUTE = LOGGER_API_ROUTE;\nconst LOGGER_USER_IP_ADDRESS = \"loggerUserIpAddress\";\nexports.LOGGER_USER_IP_ADDRESS = LOGGER_USER_IP_ADDRESS;\nconst LOGGER_CORRELATIONID = \"loggerCorrelationId\";\nexports.LOGGER_CORRELATIONID = LOGGER_CORRELATIONID;\nconst LOGGER_RESPONSE_TIME = \"loggerResponseTime\";\nexports.LOGGER_RESPONSE_TIME = LOGGER_RESPONSE_TIME;\nconst LOGGER_URL_REDIRECTION_OBJ = \"loggerUrlRedirectionObj\";\nexports.LOGGER_URL_REDIRECTION_OBJ = LOGGER_URL_REDIRECTION_OBJ;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJMT0dHRVJfVVNFUl9ERVRBSUxTIiwiTE9HR0VSX1JFUVVFU1RfUEFZTE9BRCIsIkxPR0dFUl9SRVNQT05TRV9QQVlMT0FEIiwiTE9HR0VSX1JFUVVFU1RfU1RBUlRfVElNRSIsIkxPR0dFUl9BUElfUk9VVEUiLCJMT0dHRVJfVVNFUl9JUF9BRERSRVNTIiwiTE9HR0VSX0NPUlJFTEFUSU9OSUQiLCJMT0dHRVJfUkVTUE9OU0VfVElNRSIsIkxPR0dFUl9VUkxfUkVESVJFQ1RJT05fT0JKIl0sInNvdXJjZVJvb3QiOiIvVXNlcnMvcmFtaXJlZGR5Y2hhcml0aGEvZ2l0LWV4cGxvcmUvY29uc3RhbnRzLyIsInNvdXJjZXMiOlsiQ29uc3RhbnRzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjb25zdCBMT0dHRVJfVVNFUl9ERVRBSUxTID0gXCJsb2dnZXJVc2VyRGV0YWlsc1wiO1xuZXhwb3J0IGNvbnN0IExPR0dFUl9SRVFVRVNUX1BBWUxPQUQgPSBcImxvZ2dlclJlcXVlc3RQYXlsb2FkXCI7XG5leHBvcnQgY29uc3QgTE9HR0VSX1JFU1BPTlNFX1BBWUxPQUQgPSBcImxvZ2dlclJlc3BvbnNlUGF5bG9hZFwiO1xuZXhwb3J0IGNvbnN0IExPR0dFUl9SRVFVRVNUX1NUQVJUX1RJTUUgPSBcImxvZ2dlclJlcXVlc3RTdGFydFRpbWVcIjtcbmV4cG9ydCBjb25zdCBMT0dHRVJfQVBJX1JPVVRFID0gXCJsb2dnZXJSb3V0ZVwiO1xuZXhwb3J0IGNvbnN0IExPR0dFUl9VU0VSX0lQX0FERFJFU1MgPSBcImxvZ2dlclVzZXJJcEFkZHJlc3NcIjtcbmV4cG9ydCBjb25zdCBMT0dHRVJfQ09SUkVMQVRJT05JRCA9IFwibG9nZ2VyQ29ycmVsYXRpb25JZFwiO1xuZXhwb3J0IGNvbnN0IExPR0dFUl9SRVNQT05TRV9USU1FID0gXCJsb2dnZXJSZXNwb25zZVRpbWVcIjtcbmV4cG9ydCBjb25zdCBMT0dHRVJfVVJMX1JFRElSRUNUSU9OX09CSiA9IFwibG9nZ2VyVXJsUmVkaXJlY3Rpb25PYmpcIjtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQU8sTUFBTUEsbUJBQW1CLEdBQUcsbUJBQTVCOztBQUNBLE1BQU1DLHNCQUFzQixHQUFHLHNCQUEvQjs7QUFDQSxNQUFNQyx1QkFBdUIsR0FBRyx1QkFBaEM7O0FBQ0EsTUFBTUMseUJBQXlCLEdBQUcsd0JBQWxDOztBQUNBLE1BQU1DLGdCQUFnQixHQUFHLGFBQXpCOztBQUNBLE1BQU1DLHNCQUFzQixHQUFHLHFCQUEvQjs7QUFDQSxNQUFNQyxvQkFBb0IsR0FBRyxxQkFBN0I7O0FBQ0EsTUFBTUMsb0JBQW9CLEdBQUcsb0JBQTdCOztBQUNBLE1BQU1DLDBCQUEwQixHQUFHLHlCQUFuQyJ9","map":{"version":3,"names":["LOGGER_USER_DETAILS","LOGGER_REQUEST_PAYLOAD","LOGGER_RESPONSE_PAYLOAD","LOGGER_REQUEST_START_TIME","LOGGER_API_ROUTE","LOGGER_USER_IP_ADDRESS","LOGGER_CORRELATIONID","LOGGER_RESPONSE_TIME","LOGGER_URL_REDIRECTION_OBJ"],"sourceRoot":"/Users/ramireddycharitha/git-explore/constants/","sources":["Constants.js"],"sourcesContent":["export const LOGGER_USER_DETAILS = \"loggerUserDetails\";\nexport const LOGGER_REQUEST_PAYLOAD = \"loggerRequestPayload\";\nexport const LOGGER_RESPONSE_PAYLOAD = \"loggerResponsePayload\";\nexport const LOGGER_REQUEST_START_TIME = \"loggerRequestStartTime\";\nexport const LOGGER_API_ROUTE = \"loggerRoute\";\nexport const LOGGER_USER_IP_ADDRESS = \"loggerUserIpAddress\";\nexport const LOGGER_CORRELATIONID = \"loggerCorrelationId\";\nexport const LOGGER_RESPONSE_TIME = \"loggerResponseTime\";\nexport const LOGGER_URL_REDIRECTION_OBJ = \"loggerUrlRedirectionObj\";\n"],"mappings":";;;;;;AAAO,MAAMA,mBAAmB,GAAG,mBAA5B;;AACA,MAAMC,sBAAsB,GAAG,sBAA/B;;AACA,MAAMC,uBAAuB,GAAG,uBAAhC;;AACA,MAAMC,yBAAyB,GAAG,wBAAlC;;AACA,MAAMC,gBAAgB,GAAG,aAAzB;;AACA,MAAMC,sBAAsB,GAAG,qBAA/B;;AACA,MAAMC,oBAAoB,GAAG,qBAA7B;;AACA,MAAMC,oBAAoB,GAAG,oBAA7B;;AACA,MAAMC,0BAA0B,GAAG,yBAAnC"}},"mtime":1653643634178},"{\"assumptions\":{},\"sourceRoot\":\"/Users/ramireddycharitha/git-explore/connections/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/ramireddycharitha/git-explore\",\"filename\":\"/Users/ramireddycharitha/git-explore/connections/MainDb.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"default\",\"root\":\"/Users/ramireddycharitha/git-explore\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.17.10:default":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getDbInstance = getDbInstance;\nexports.init = init;\n\nvar _mongoose = _interopRequireDefault(require(\"mongoose\"));\n\nvar _index = _interopRequireDefault(require(\"../config/index\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/* eslint-disable import/no-import-module-exports */\nlet conn;\n\nfunction init() {\n  const RECONNECT_TIME = 5000;\n  const CONN_URL = _index.default.mainDbconfig.connString;\n\n  if (conn) {\n    return conn;\n  }\n\n  _mongoose.default.set(\"debug\", (collectionName, methodName, ...methodArgs) => {\n    // use custom function to log collection methods + arguments\n    log(\"info\", `Mongoose: ${collectionName}.${methodName}(${methodArgs.join(\", \")})`);\n  });\n\n  log(\"info\", `CONN_URL to connect to main database ${CONN_URL}`);\n  conn = _mongoose.default.createConnection(CONN_URL); //  Mongoose Connection Events\n\n  conn.on(\"error\", error => {\n    log(\"error\", {\n      error\n    });\n  });\n  conn.once(\"open\", () => {\n    log(\"info\", {\n      dBConnectionStatus: \"open\"\n    });\n  });\n  conn.on(\"connected\", () => {\n    log(\"info\", {\n      dBConnectionStatus: \"connected\"\n    });\n  });\n  conn.on(\"connecting\", () => {\n    log(\"info\", {\n      dBConnectionStatus: \"connecting\"\n    });\n  });\n  conn.on(\"reconnected\", () => {\n    log(\"info\", {\n      dBConnectionStatus: \"reconnected\"\n    });\n  });\n  conn.on(\"disconnected\", () => {\n    log(\"error\", {\n      dBConnectionStatus: `disconnected Reconnecting in ${RECONNECT_TIME / 1000}s...`\n    }); // https://github.com/automattic/mongoose/issues/5169#issuecomment-314983113\n\n    setTimeout(() => {\n      conn.openUri(CONN_URL).catch(() => {});\n    }, RECONNECT_TIME);\n  });\n  return conn;\n}\n\nfunction getDbInstance() {\n  return conn;\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb25uIiwiaW5pdCIsIlJFQ09OTkVDVF9USU1FIiwiQ09OTl9VUkwiLCJjb25maWciLCJtYWluRGJjb25maWciLCJjb25uU3RyaW5nIiwibW9uZ29vc2UiLCJzZXQiLCJjb2xsZWN0aW9uTmFtZSIsIm1ldGhvZE5hbWUiLCJtZXRob2RBcmdzIiwibG9nIiwiam9pbiIsImNyZWF0ZUNvbm5lY3Rpb24iLCJvbiIsImVycm9yIiwib25jZSIsImRCQ29ubmVjdGlvblN0YXR1cyIsInNldFRpbWVvdXQiLCJvcGVuVXJpIiwiY2F0Y2giLCJnZXREYkluc3RhbmNlIl0sInNvdXJjZVJvb3QiOiIvVXNlcnMvcmFtaXJlZGR5Y2hhcml0aGEvZ2l0LWV4cGxvcmUvY29ubmVjdGlvbnMvIiwic291cmNlcyI6WyJNYWluRGIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyogZXNsaW50LWRpc2FibGUgaW1wb3J0L25vLWltcG9ydC1tb2R1bGUtZXhwb3J0cyAqL1xuXG5pbXBvcnQgbW9uZ29vc2UgZnJvbSBcIm1vbmdvb3NlXCI7XG5pbXBvcnQgY29uZmlnIGZyb20gXCIuLi9jb25maWcvaW5kZXhcIjtcblxubGV0IGNvbm47XG5cbmV4cG9ydCBmdW5jdGlvbiBpbml0KCkge1xuICBjb25zdCBSRUNPTk5FQ1RfVElNRSA9IDUwMDA7XG4gIGNvbnN0IENPTk5fVVJMID0gY29uZmlnLm1haW5EYmNvbmZpZy5jb25uU3RyaW5nO1xuXG4gIGlmIChjb25uKSB7XG4gICAgcmV0dXJuIGNvbm47XG4gIH1cblxuICBtb25nb29zZS5zZXQoXCJkZWJ1Z1wiLCAoY29sbGVjdGlvbk5hbWUsIG1ldGhvZE5hbWUsIC4uLm1ldGhvZEFyZ3MpID0+IHtcbiAgICAvLyB1c2UgY3VzdG9tIGZ1bmN0aW9uIHRvIGxvZyBjb2xsZWN0aW9uIG1ldGhvZHMgKyBhcmd1bWVudHNcbiAgICBsb2coXCJpbmZvXCIsIGBNb25nb29zZTogJHtjb2xsZWN0aW9uTmFtZX0uJHttZXRob2ROYW1lfSgke21ldGhvZEFyZ3Muam9pbihcIiwgXCIpfSlgKTtcbiAgfSk7XG5cbiAgbG9nKFwiaW5mb1wiLCBgQ09OTl9VUkwgdG8gY29ubmVjdCB0byBtYWluIGRhdGFiYXNlICR7Q09OTl9VUkx9YCk7XG4gIGNvbm4gPSBtb25nb29zZS5jcmVhdGVDb25uZWN0aW9uKENPTk5fVVJMKTtcblxuICAvLyAgTW9uZ29vc2UgQ29ubmVjdGlvbiBFdmVudHNcbiAgY29ubi5vbihcImVycm9yXCIsIChlcnJvcikgPT4ge1xuICAgIGxvZyhcImVycm9yXCIsIHsgZXJyb3IgfSk7XG4gIH0pO1xuXG4gIGNvbm4ub25jZShcIm9wZW5cIiwgKCkgPT4ge1xuICAgIGxvZyhcImluZm9cIiwgeyBkQkNvbm5lY3Rpb25TdGF0dXM6IFwib3BlblwiIH0pO1xuICB9KTtcblxuICBjb25uLm9uKFwiY29ubmVjdGVkXCIsICgpID0+IHtcbiAgICBsb2coXCJpbmZvXCIsIHsgZEJDb25uZWN0aW9uU3RhdHVzOiBcImNvbm5lY3RlZFwiIH0pO1xuICB9KTtcblxuICBjb25uLm9uKFwiY29ubmVjdGluZ1wiLCAoKSA9PiB7XG4gICAgbG9nKFwiaW5mb1wiLCB7IGRCQ29ubmVjdGlvblN0YXR1czogXCJjb25uZWN0aW5nXCIgfSk7XG4gIH0pO1xuXG4gIGNvbm4ub24oXCJyZWNvbm5lY3RlZFwiLCAoKSA9PiB7XG4gICAgbG9nKFwiaW5mb1wiLCB7IGRCQ29ubmVjdGlvblN0YXR1czogXCJyZWNvbm5lY3RlZFwiIH0pO1xuICB9KTtcblxuICBjb25uLm9uKFwiZGlzY29ubmVjdGVkXCIsICgpID0+IHtcbiAgICBsb2coXCJlcnJvclwiLCB7IGRCQ29ubmVjdGlvblN0YXR1czogYGRpc2Nvbm5lY3RlZCBSZWNvbm5lY3RpbmcgaW4gJHtSRUNPTk5FQ1RfVElNRSAvIDEwMDB9cy4uLmAgfSk7XG4gICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL2F1dG9tYXR0aWMvbW9uZ29vc2UvaXNzdWVzLzUxNjkjaXNzdWVjb21tZW50LTMxNDk4MzExM1xuICAgIHNldFRpbWVvdXQoKCkgPT4geyBjb25uLm9wZW5VcmkoQ09OTl9VUkwpLmNhdGNoKCgpID0+IHsgfSk7IH0sIFJFQ09OTkVDVF9USU1FKTtcbiAgfSk7XG5cbiAgcmV0dXJuIGNvbm47XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXREYkluc3RhbmNlKCkge1xuICByZXR1cm4gY29ubjtcbn1cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFFQTs7QUFDQTs7OztBQUhBO0FBS0EsSUFBSUEsSUFBSjs7QUFFTyxTQUFTQyxJQUFULEdBQWdCO0VBQ3JCLE1BQU1DLGNBQWMsR0FBRyxJQUF2QjtFQUNBLE1BQU1DLFFBQVEsR0FBR0MsZUFBT0MsWUFBUCxDQUFvQkMsVUFBckM7O0VBRUEsSUFBSU4sSUFBSixFQUFVO0lBQ1IsT0FBT0EsSUFBUDtFQUNEOztFQUVETyxrQkFBU0MsR0FBVCxDQUFhLE9BQWIsRUFBc0IsQ0FBQ0MsY0FBRCxFQUFpQkMsVUFBakIsRUFBNkIsR0FBR0MsVUFBaEMsS0FBK0M7SUFDbkU7SUFDQUMsR0FBRyxDQUFDLE1BQUQsRUFBVSxhQUFZSCxjQUFlLElBQUdDLFVBQVcsSUFBR0MsVUFBVSxDQUFDRSxJQUFYLENBQWdCLElBQWhCLENBQXNCLEdBQTVFLENBQUg7RUFDRCxDQUhEOztFQUtBRCxHQUFHLENBQUMsTUFBRCxFQUFVLHdDQUF1Q1QsUUFBUyxFQUExRCxDQUFIO0VBQ0FILElBQUksR0FBR08sa0JBQVNPLGdCQUFULENBQTBCWCxRQUExQixDQUFQLENBZHFCLENBZ0JyQjs7RUFDQUgsSUFBSSxDQUFDZSxFQUFMLENBQVEsT0FBUixFQUFrQkMsS0FBRCxJQUFXO0lBQzFCSixHQUFHLENBQUMsT0FBRCxFQUFVO01BQUVJO0lBQUYsQ0FBVixDQUFIO0VBQ0QsQ0FGRDtFQUlBaEIsSUFBSSxDQUFDaUIsSUFBTCxDQUFVLE1BQVYsRUFBa0IsTUFBTTtJQUN0QkwsR0FBRyxDQUFDLE1BQUQsRUFBUztNQUFFTSxrQkFBa0IsRUFBRTtJQUF0QixDQUFULENBQUg7RUFDRCxDQUZEO0VBSUFsQixJQUFJLENBQUNlLEVBQUwsQ0FBUSxXQUFSLEVBQXFCLE1BQU07SUFDekJILEdBQUcsQ0FBQyxNQUFELEVBQVM7TUFBRU0sa0JBQWtCLEVBQUU7SUFBdEIsQ0FBVCxDQUFIO0VBQ0QsQ0FGRDtFQUlBbEIsSUFBSSxDQUFDZSxFQUFMLENBQVEsWUFBUixFQUFzQixNQUFNO0lBQzFCSCxHQUFHLENBQUMsTUFBRCxFQUFTO01BQUVNLGtCQUFrQixFQUFFO0lBQXRCLENBQVQsQ0FBSDtFQUNELENBRkQ7RUFJQWxCLElBQUksQ0FBQ2UsRUFBTCxDQUFRLGFBQVIsRUFBdUIsTUFBTTtJQUMzQkgsR0FBRyxDQUFDLE1BQUQsRUFBUztNQUFFTSxrQkFBa0IsRUFBRTtJQUF0QixDQUFULENBQUg7RUFDRCxDQUZEO0VBSUFsQixJQUFJLENBQUNlLEVBQUwsQ0FBUSxjQUFSLEVBQXdCLE1BQU07SUFDNUJILEdBQUcsQ0FBQyxPQUFELEVBQVU7TUFBRU0sa0JBQWtCLEVBQUcsZ0NBQStCaEIsY0FBYyxHQUFHLElBQUs7SUFBNUUsQ0FBVixDQUFILENBRDRCLENBRTVCOztJQUNBaUIsVUFBVSxDQUFDLE1BQU07TUFBRW5CLElBQUksQ0FBQ29CLE9BQUwsQ0FBYWpCLFFBQWIsRUFBdUJrQixLQUF2QixDQUE2QixNQUFNLENBQUcsQ0FBdEM7SUFBMEMsQ0FBbkQsRUFBcURuQixjQUFyRCxDQUFWO0VBQ0QsQ0FKRDtFQU1BLE9BQU9GLElBQVA7QUFDRDs7QUFFTSxTQUFTc0IsYUFBVCxHQUF5QjtFQUM5QixPQUFPdEIsSUFBUDtBQUNEIn0=","map":{"version":3,"names":["conn","init","RECONNECT_TIME","CONN_URL","config","mainDbconfig","connString","mongoose","set","collectionName","methodName","methodArgs","log","join","createConnection","on","error","once","dBConnectionStatus","setTimeout","openUri","catch","getDbInstance"],"sourceRoot":"/Users/ramireddycharitha/git-explore/connections/","sources":["MainDb.js"],"sourcesContent":["/* eslint-disable import/no-import-module-exports */\n\nimport mongoose from \"mongoose\";\nimport config from \"../config/index\";\n\nlet conn;\n\nexport function init() {\n  const RECONNECT_TIME = 5000;\n  const CONN_URL = config.mainDbconfig.connString;\n\n  if (conn) {\n    return conn;\n  }\n\n  mongoose.set(\"debug\", (collectionName, methodName, ...methodArgs) => {\n    // use custom function to log collection methods + arguments\n    log(\"info\", `Mongoose: ${collectionName}.${methodName}(${methodArgs.join(\", \")})`);\n  });\n\n  log(\"info\", `CONN_URL to connect to main database ${CONN_URL}`);\n  conn = mongoose.createConnection(CONN_URL);\n\n  //  Mongoose Connection Events\n  conn.on(\"error\", (error) => {\n    log(\"error\", { error });\n  });\n\n  conn.once(\"open\", () => {\n    log(\"info\", { dBConnectionStatus: \"open\" });\n  });\n\n  conn.on(\"connected\", () => {\n    log(\"info\", { dBConnectionStatus: \"connected\" });\n  });\n\n  conn.on(\"connecting\", () => {\n    log(\"info\", { dBConnectionStatus: \"connecting\" });\n  });\n\n  conn.on(\"reconnected\", () => {\n    log(\"info\", { dBConnectionStatus: \"reconnected\" });\n  });\n\n  conn.on(\"disconnected\", () => {\n    log(\"error\", { dBConnectionStatus: `disconnected Reconnecting in ${RECONNECT_TIME / 1000}s...` });\n    // https://github.com/automattic/mongoose/issues/5169#issuecomment-314983113\n    setTimeout(() => { conn.openUri(CONN_URL).catch(() => { }); }, RECONNECT_TIME);\n  });\n\n  return conn;\n}\n\nexport function getDbInstance() {\n  return conn;\n}\n"],"mappings":";;;;;;;;AAEA;;AACA;;;;AAHA;AAKA,IAAIA,IAAJ;;AAEO,SAASC,IAAT,GAAgB;EACrB,MAAMC,cAAc,GAAG,IAAvB;EACA,MAAMC,QAAQ,GAAGC,eAAOC,YAAP,CAAoBC,UAArC;;EAEA,IAAIN,IAAJ,EAAU;IACR,OAAOA,IAAP;EACD;;EAEDO,kBAASC,GAAT,CAAa,OAAb,EAAsB,CAACC,cAAD,EAAiBC,UAAjB,EAA6B,GAAGC,UAAhC,KAA+C;IACnE;IACAC,GAAG,CAAC,MAAD,EAAU,aAAYH,cAAe,IAAGC,UAAW,IAAGC,UAAU,CAACE,IAAX,CAAgB,IAAhB,CAAsB,GAA5E,CAAH;EACD,CAHD;;EAKAD,GAAG,CAAC,MAAD,EAAU,wCAAuCT,QAAS,EAA1D,CAAH;EACAH,IAAI,GAAGO,kBAASO,gBAAT,CAA0BX,QAA1B,CAAP,CAdqB,CAgBrB;;EACAH,IAAI,CAACe,EAAL,CAAQ,OAAR,EAAkBC,KAAD,IAAW;IAC1BJ,GAAG,CAAC,OAAD,EAAU;MAAEI;IAAF,CAAV,CAAH;EACD,CAFD;EAIAhB,IAAI,CAACiB,IAAL,CAAU,MAAV,EAAkB,MAAM;IACtBL,GAAG,CAAC,MAAD,EAAS;MAAEM,kBAAkB,EAAE;IAAtB,CAAT,CAAH;EACD,CAFD;EAIAlB,IAAI,CAACe,EAAL,CAAQ,WAAR,EAAqB,MAAM;IACzBH,GAAG,CAAC,MAAD,EAAS;MAAEM,kBAAkB,EAAE;IAAtB,CAAT,CAAH;EACD,CAFD;EAIAlB,IAAI,CAACe,EAAL,CAAQ,YAAR,EAAsB,MAAM;IAC1BH,GAAG,CAAC,MAAD,EAAS;MAAEM,kBAAkB,EAAE;IAAtB,CAAT,CAAH;EACD,CAFD;EAIAlB,IAAI,CAACe,EAAL,CAAQ,aAAR,EAAuB,MAAM;IAC3BH,GAAG,CAAC,MAAD,EAAS;MAAEM,kBAAkB,EAAE;IAAtB,CAAT,CAAH;EACD,CAFD;EAIAlB,IAAI,CAACe,EAAL,CAAQ,cAAR,EAAwB,MAAM;IAC5BH,GAAG,CAAC,OAAD,EAAU;MAAEM,kBAAkB,EAAG,gCAA+BhB,cAAc,GAAG,IAAK;IAA5E,CAAV,CAAH,CAD4B,CAE5B;;IACAiB,UAAU,CAAC,MAAM;MAAEnB,IAAI,CAACoB,OAAL,CAAajB,QAAb,EAAuBkB,KAAvB,CAA6B,MAAM,CAAG,CAAtC;IAA0C,CAAnD,EAAqDnB,cAArD,CAAV;EACD,CAJD;EAMA,OAAOF,IAAP;AACD;;AAEM,SAASsB,aAAT,GAAyB;EAC9B,OAAOtB,IAAP;AACD"}},"mtime":1653643634177},"{\"assumptions\":{},\"sourceRoot\":\"/Users/ramireddycharitha/git-explore/config/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/ramireddycharitha/git-explore\",\"filename\":\"/Users/ramireddycharitha/git-explore/config/index.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"default\",\"root\":\"/Users/ramireddycharitha/git-explore\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.17.10:default":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _default2 = _interopRequireDefault(require(\"./default\"));\n\nvar _dev = _interopRequireDefault(require(\"./dev\"));\n\nvar _prod = _interopRequireDefault(require(\"./prod\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst config = () => {\n  // process.env.NODE_ENV = \"default\";\n  switch (process.env.NODE_ENV) {\n    case \"default\":\n      return _default2.default;\n\n    case \"dev\":\n      return _dev.default;\n\n    case \"production\":\n      return _prod.default;\n\n    default:\n      throw new Error(\"Config variables not set\");\n  }\n};\n\nvar _default = config();\n\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb25maWciLCJwcm9jZXNzIiwiZW52IiwiTk9ERV9FTlYiLCJsb2NhbENvbmZpZyIsImRldkNvbmZpZyIsInByb2RDb25maWciLCJFcnJvciJdLCJzb3VyY2VSb290IjoiL1VzZXJzL3JhbWlyZWRkeWNoYXJpdGhhL2dpdC1leHBsb3JlL2NvbmZpZy8iLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBsb2NhbENvbmZpZyBmcm9tIFwiLi9kZWZhdWx0XCI7XG5pbXBvcnQgZGV2Q29uZmlnIGZyb20gXCIuL2RldlwiO1xuaW1wb3J0IHByb2RDb25maWcgZnJvbSBcIi4vcHJvZFwiO1xuXG5jb25zdCBjb25maWcgPSAoKSA9PiB7XG4gIC8vIHByb2Nlc3MuZW52Lk5PREVfRU5WID0gXCJkZWZhdWx0XCI7XG4gIHN3aXRjaCAocHJvY2Vzcy5lbnYuTk9ERV9FTlYpIHtcbiAgICBjYXNlIFwiZGVmYXVsdFwiOlxuICAgICAgcmV0dXJuIGxvY2FsQ29uZmlnO1xuICAgIGNhc2UgXCJkZXZcIjpcbiAgICAgIHJldHVybiBkZXZDb25maWc7XG4gICAgY2FzZSBcInByb2R1Y3Rpb25cIjpcbiAgICAgIHJldHVybiBwcm9kQ29uZmlnO1xuICAgIGRlZmF1bHQ6XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDb25maWcgdmFyaWFibGVzIG5vdCBzZXRcIik7XG4gIH1cbn07XG5leHBvcnQgZGVmYXVsdCBjb25maWcoKTtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOztBQUNBOztBQUNBOzs7O0FBRUEsTUFBTUEsTUFBTSxHQUFHLE1BQU07RUFDbkI7RUFDQSxRQUFRQyxPQUFPLENBQUNDLEdBQVIsQ0FBWUMsUUFBcEI7SUFDRSxLQUFLLFNBQUw7TUFDRSxPQUFPQyxpQkFBUDs7SUFDRixLQUFLLEtBQUw7TUFDRSxPQUFPQyxZQUFQOztJQUNGLEtBQUssWUFBTDtNQUNFLE9BQU9DLGFBQVA7O0lBQ0Y7TUFDRSxNQUFNLElBQUlDLEtBQUosQ0FBVSwwQkFBVixDQUFOO0VBUko7QUFVRCxDQVpEOztlQWFlUCxNQUFNLEUifQ==","map":{"version":3,"names":["config","process","env","NODE_ENV","localConfig","devConfig","prodConfig","Error"],"sourceRoot":"/Users/ramireddycharitha/git-explore/config/","sources":["index.js"],"sourcesContent":["import localConfig from \"./default\";\nimport devConfig from \"./dev\";\nimport prodConfig from \"./prod\";\n\nconst config = () => {\n  // process.env.NODE_ENV = \"default\";\n  switch (process.env.NODE_ENV) {\n    case \"default\":\n      return localConfig;\n    case \"dev\":\n      return devConfig;\n    case \"production\":\n      return prodConfig;\n    default:\n      throw new Error(\"Config variables not set\");\n  }\n};\nexport default config();\n"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;;;AAEA,MAAMA,MAAM,GAAG,MAAM;EACnB;EACA,QAAQC,OAAO,CAACC,GAAR,CAAYC,QAApB;IACE,KAAK,SAAL;MACE,OAAOC,iBAAP;;IACF,KAAK,KAAL;MACE,OAAOC,YAAP;;IACF,KAAK,YAAL;MACE,OAAOC,aAAP;;IACF;MACE,MAAM,IAAIC,KAAJ,CAAU,0BAAV,CAAN;EARJ;AAUD,CAZD;;eAaeP,MAAM,E"}},"mtime":1653643634176},"{\"assumptions\":{},\"sourceRoot\":\"/Users/ramireddycharitha/git-explore/config/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/ramireddycharitha/git-explore\",\"filename\":\"/Users/ramireddycharitha/git-explore/config/default.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"default\",\"root\":\"/Users/ramireddycharitha/git-explore\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.17.10:default":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _default = {\n  mainDbconfig: {\n    connString: \"mongodb://localhost:27017/lc_metro_db\"\n  },\n  analyticsDbConfig: {\n    connString: \"mongodb://localhost:27017/analyticsdb\"\n  },\n  redisConfig: {\n    connString: \"redis://localhost:6379\"\n  },\n  application_url: 'https://91be-111-93-26-74.in.ngrok.io/v1/organisation/outbound-call',\n  sentry_dsn: process.env.SENTRY_DSN //application_url:\"http://localhost:4000\"\n\n};\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJtYWluRGJjb25maWciLCJjb25uU3RyaW5nIiwiYW5hbHl0aWNzRGJDb25maWciLCJyZWRpc0NvbmZpZyIsImFwcGxpY2F0aW9uX3VybCIsInNlbnRyeV9kc24iLCJwcm9jZXNzIiwiZW52IiwiU0VOVFJZX0RTTiJdLCJzb3VyY2VSb290IjoiL1VzZXJzL3JhbWlyZWRkeWNoYXJpdGhhL2dpdC1leHBsb3JlL2NvbmZpZy8iLCJzb3VyY2VzIjpbImRlZmF1bHQuanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQge1xuICBtYWluRGJjb25maWc6IHtcbiAgICBjb25uU3RyaW5nOiBcIm1vbmdvZGI6Ly9sb2NhbGhvc3Q6MjcwMTcvbGNfbWV0cm9fZGJcIixcbiAgfSxcbiAgYW5hbHl0aWNzRGJDb25maWc6IHtcbiAgICBjb25uU3RyaW5nOiBcIm1vbmdvZGI6Ly9sb2NhbGhvc3Q6MjcwMTcvYW5hbHl0aWNzZGJcIixcbiAgfSxcbiAgcmVkaXNDb25maWc6IHtcbiAgICBjb25uU3RyaW5nOiBcInJlZGlzOi8vbG9jYWxob3N0OjYzNzlcIixcbiAgfSxcbiAgYXBwbGljYXRpb25fdXJsIDogJ2h0dHBzOi8vOTFiZS0xMTEtOTMtMjYtNzQuaW4ubmdyb2suaW8vdjEvb3JnYW5pc2F0aW9uL291dGJvdW5kLWNhbGwnLFxuICBzZW50cnlfZHNuOiBwcm9jZXNzLmVudi5TRU5UUllfRFNOLFxuICAvL2FwcGxpY2F0aW9uX3VybDpcImh0dHA6Ly9sb2NhbGhvc3Q6NDAwMFwiXG59O1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7ZUFBZTtFQUNiQSxZQUFZLEVBQUU7SUFDWkMsVUFBVSxFQUFFO0VBREEsQ0FERDtFQUliQyxpQkFBaUIsRUFBRTtJQUNqQkQsVUFBVSxFQUFFO0VBREssQ0FKTjtFQU9iRSxXQUFXLEVBQUU7SUFDWEYsVUFBVSxFQUFFO0VBREQsQ0FQQTtFQVViRyxlQUFlLEVBQUcscUVBVkw7RUFXYkMsVUFBVSxFQUFFQyxPQUFPLENBQUNDLEdBQVIsQ0FBWUMsVUFYWCxDQVliOztBQVphLEMifQ==","map":{"version":3,"names":["mainDbconfig","connString","analyticsDbConfig","redisConfig","application_url","sentry_dsn","process","env","SENTRY_DSN"],"sourceRoot":"/Users/ramireddycharitha/git-explore/config/","sources":["default.js"],"sourcesContent":["export default {\n  mainDbconfig: {\n    connString: \"mongodb://localhost:27017/lc_metro_db\",\n  },\n  analyticsDbConfig: {\n    connString: \"mongodb://localhost:27017/analyticsdb\",\n  },\n  redisConfig: {\n    connString: \"redis://localhost:6379\",\n  },\n  application_url : 'https://91be-111-93-26-74.in.ngrok.io/v1/organisation/outbound-call',\n  sentry_dsn: process.env.SENTRY_DSN,\n  //application_url:\"http://localhost:4000\"\n};\n"],"mappings":";;;;;;eAAe;EACbA,YAAY,EAAE;IACZC,UAAU,EAAE;EADA,CADD;EAIbC,iBAAiB,EAAE;IACjBD,UAAU,EAAE;EADK,CAJN;EAObE,WAAW,EAAE;IACXF,UAAU,EAAE;EADD,CAPA;EAUbG,eAAe,EAAG,qEAVL;EAWbC,UAAU,EAAEC,OAAO,CAACC,GAAR,CAAYC,UAXX,CAYb;;AAZa,C"}},"mtime":1654144450527},"{\"assumptions\":{},\"sourceRoot\":\"/Users/ramireddycharitha/git-explore/config/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/ramireddycharitha/git-explore\",\"filename\":\"/Users/ramireddycharitha/git-explore/config/dev.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"default\",\"root\":\"/Users/ramireddycharitha/git-explore\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.17.10:default":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nrequire(\"dotenv/config\");\n\nvar _default = {\n  mainDbconfig: {\n    connString: process.env.MAIN_DB_CONN_STRING // Change all required config to env variables\n\n  },\n  analyticsDbConfig: {\n    connString: process.env.ANALYTICS_DB_CONN_STRING\n  },\n  redisConfig: {\n    connString: \"redis://localhost:6379\"\n  },\n  sentry_dsn: process.env.SENTRY_DSN\n};\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJtYWluRGJjb25maWciLCJjb25uU3RyaW5nIiwicHJvY2VzcyIsImVudiIsIk1BSU5fREJfQ09OTl9TVFJJTkciLCJhbmFseXRpY3NEYkNvbmZpZyIsIkFOQUxZVElDU19EQl9DT05OX1NUUklORyIsInJlZGlzQ29uZmlnIiwic2VudHJ5X2RzbiIsIlNFTlRSWV9EU04iXSwic291cmNlUm9vdCI6Ii9Vc2Vycy9yYW1pcmVkZHljaGFyaXRoYS9naXQtZXhwbG9yZS9jb25maWcvIiwic291cmNlcyI6WyJkZXYuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFwiZG90ZW52L2NvbmZpZ1wiO1xuXG5leHBvcnQgZGVmYXVsdCB7XG4gIG1haW5EYmNvbmZpZzoge1xuICAgIGNvbm5TdHJpbmc6IHByb2Nlc3MuZW52Lk1BSU5fREJfQ09OTl9TVFJJTkcsIC8vIENoYW5nZSBhbGwgcmVxdWlyZWQgY29uZmlnIHRvIGVudiB2YXJpYWJsZXNcbiAgfSxcbiAgYW5hbHl0aWNzRGJDb25maWc6IHtcbiAgICBjb25uU3RyaW5nOiBwcm9jZXNzLmVudi5BTkFMWVRJQ1NfREJfQ09OTl9TVFJJTkcsXG4gIH0sXG4gIHJlZGlzQ29uZmlnOiB7XG4gICAgY29ublN0cmluZzogXCJyZWRpczovL2xvY2FsaG9zdDo2Mzc5XCIsXG4gIH0sXG4gIHNlbnRyeV9kc246IHByb2Nlc3MuZW52LlNFTlRSWV9EU04sXG59O1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7O2VBRWU7RUFDYkEsWUFBWSxFQUFFO0lBQ1pDLFVBQVUsRUFBRUMsT0FBTyxDQUFDQyxHQUFSLENBQVlDLG1CQURaLENBQ2lDOztFQURqQyxDQUREO0VBSWJDLGlCQUFpQixFQUFFO0lBQ2pCSixVQUFVLEVBQUVDLE9BQU8sQ0FBQ0MsR0FBUixDQUFZRztFQURQLENBSk47RUFPYkMsV0FBVyxFQUFFO0lBQ1hOLFVBQVUsRUFBRTtFQURELENBUEE7RUFVYk8sVUFBVSxFQUFFTixPQUFPLENBQUNDLEdBQVIsQ0FBWU07QUFWWCxDIn0=","map":{"version":3,"names":["mainDbconfig","connString","process","env","MAIN_DB_CONN_STRING","analyticsDbConfig","ANALYTICS_DB_CONN_STRING","redisConfig","sentry_dsn","SENTRY_DSN"],"sourceRoot":"/Users/ramireddycharitha/git-explore/config/","sources":["dev.js"],"sourcesContent":["import \"dotenv/config\";\n\nexport default {\n  mainDbconfig: {\n    connString: process.env.MAIN_DB_CONN_STRING, // Change all required config to env variables\n  },\n  analyticsDbConfig: {\n    connString: process.env.ANALYTICS_DB_CONN_STRING,\n  },\n  redisConfig: {\n    connString: \"redis://localhost:6379\",\n  },\n  sentry_dsn: process.env.SENTRY_DSN,\n};\n"],"mappings":";;;;;;;AAAA;;eAEe;EACbA,YAAY,EAAE;IACZC,UAAU,EAAEC,OAAO,CAACC,GAAR,CAAYC,mBADZ,CACiC;;EADjC,CADD;EAIbC,iBAAiB,EAAE;IACjBJ,UAAU,EAAEC,OAAO,CAACC,GAAR,CAAYG;EADP,CAJN;EAObC,WAAW,EAAE;IACXN,UAAU,EAAE;EADD,CAPA;EAUbO,UAAU,EAAEN,OAAO,CAACC,GAAR,CAAYM;AAVX,C"}},"mtime":1653643634175},"{\"assumptions\":{},\"sourceRoot\":\"/Users/ramireddycharitha/git-explore/services/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/ramireddycharitha/git-explore\",\"filename\":\"/Users/ramireddycharitha/git-explore/services/OutboundcallService.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"default\",\"root\":\"/Users/ramireddycharitha/git-explore\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.17.10:default":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.callLogList = callLogList;\nexports.changeOutboundCallStatus = changeOutboundCallStatus;\nexports.didNumberList = didNumberList;\nexports.handleCall = handleCall;\nexports.initCall = initCall;\n\nvar kookooService = _interopRequireWildcard(require(\"./KookooService\"));\n\nvar ErrorUtil = _interopRequireWildcard(require(\"../errors/ErrorUtils\"));\n\nvar _mongodb = require(\"mongodb\");\n\nvar ErrorType = _interopRequireWildcard(require(\"../constants/ErrorConstants\"));\n\nvar AbstractModels = _interopRequireWildcard(require(\"../models/AbstractModels\"));\n\nvar callEventHandlers = _interopRequireWildcard(require(\"./callEventService\"));\n\nvar _index = require(\"../models/mainDbSchema/index\");\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\n/* eslint-disable no-undef */\nasync function initCall(orgId, {\n  didId,\n  number,\n  userId\n}) {\n  log(\"info\", {\n    orgId,\n    didId,\n    number,\n    userId\n  });\n  const org = await AbstractModels.mongoFindOne(_index.Organisations, {\n    organisation_id: orgId\n  });\n  if (!org) throw ErrorUtil.organisaitonNotExists();\n  const didNumber = await AbstractModels.mongoFindOne(_index.BusinessDIDNumbers, {\n    _id: (0, _mongodb.ObjectId)(didId),\n    associatedOrganisation: org._id\n  });\n  if (!didNumber) throw ErrorUtil.businessDidNumberNotFound();\n  const profile = await AbstractModels.mongoFindOne(_index.IVRVirtualProfile, {\n    user_id: userId\n  });\n  if (!profile) throw ErrorUtil.UserNotFoundError();\n  const zvrMobileNo = profile.zvr_mobile_no.toString().slice(-10);\n  const destinationNumber = number.toString().slice(-10);\n\n  if (zvrMobileNo === destinationNumber) {\n    throw ErrorUtil.UnableCallSameNo();\n  }\n\n  const call = await AbstractModels.mongoInsertOne(_index.BusinessCalls, {\n    user: profile._id,\n    organisationId: orgId,\n    didNumber: didNumber.virtualNumber,\n    destinationNumber: number,\n    initiatorNumber: profile.zvr_mobile_no,\n    time: new Date().toISOString()\n  });\n  return await kookooService.initCall(call);\n}\n\nasync function didNumberList(orgId, query) {\n  const skip = Number(query.pageNo || 0) * Number(query.pageSize || 20);\n  const limit = skip + Number(query.pageSize);\n  const org = await AbstractModels.mongoFindOne(_index.Organisations, {\n    organisation_id: orgId\n  });\n  if (!org) throw ErrorUtil.organisaitonNotExists();\n  const dbQuery = {\n    associatedOrganisation: org._id\n  };\n  const total = await _index.BusinessDIDNumbers.count(dbQuery);\n  const items = await _index.BusinessDIDNumbers.find(dbQuery).skip(skip).limit(limit).exec();\n  const out = {\n    items,\n    metadata: {\n      total,\n      query\n    }\n  };\n  return out;\n}\n\nasync function handleCall({\n  callId\n}, data) {\n  log('info', {\n    callId,\n    data\n  }); // console.log(ObjectId(callId));\n\n  const call = await AbstractModels.mongoFindOne(_index.BusinessCalls, {\n    _id: (0, _mongodb.ObjectId)(callId)\n  });\n  if (!call) throw ErrorUtil.businessDidNumberNotFound();\n  const handler = callEventHandlers[data.event];\n  if (!handler) throw ErrorUtil.createErrorMsg(ErrorType.BUSINESS_OUTBOUND_CALL_EVENT_HANDLER_NOT_FOUND);\n  return handler(call, data);\n}\n\nasync function callLogList(orgId, query, {\n  userId,\n  role\n} = {}) {\n  const skip = (Number(query.page || 0) - 1) * Number(query.page_size || 20);\n  const limit = Number(query.page_size || 20);\n  const dbQuery = {\n    organisationId: orgId,\n    isCallEnded: true\n  };\n\n  if (userId && role === 'USER') {\n    const profile = await AbstractModels.mongoFindOne(_index.IVRVirtualProfile, {\n      user_id: userId\n    });\n    if (!profile) throw ErrorUtil.UserNotFoundError();\n    dbQuery.user = profile._id;\n  }\n\n  if (query.search_key && query.q) {\n    switch (query.search_key) {\n      case 'status':\n        dbQuery[query.search_key] = query.q;\n        break;\n\n      default:\n        dbQuery[query.search_key] = new RegExp(`.*${query.q}.*`);\n        break;\n    }\n  }\n\n  const total = await _index.BusinessCalls.count(dbQuery);\n  const items = await _index.BusinessCalls.find(dbQuery).populate('user', '_id zvr_name zvr_mobile_no').sort({\n    createdAt: -1\n  }).skip(skip).limit(limit).exec();\n  const out = {\n    items,\n    metadata: {\n      total,\n      query\n    }\n  }; // logToJSON('info', out);\n\n  return out;\n}\n\nasync function changeOutboundCallStatus({\n  orgId\n}, {\n  userId,\n  isOutboundCallEnabled\n}) {\n  const org = await AbstractModels.mongoFindOne(_index.Organisations, {\n    organisation_id: orgId\n  });\n  if (!org) throw ErrorUtil.organisaitonNotExists();\n  const profileQuery = {\n    'organisation.organisation_id': orgId,\n    user_id: userId\n  }; // console.log(\"=========== the profiile query is \"+JSON.stringify(profileQuery))\n\n  const profile = await AbstractModels.mongoFindOne(_index.IVRVirtualProfile, profileQuery);\n  if (!profile) throw ErrorUtil.UserNotFoundError();\n  await AbstractModels.mongoFindOneAndUpdate(_index.IVRVirtualProfile, profileQuery, {\n    isOutboundCallEnabled\n  });\n  return {};\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJpbml0Q2FsbCIsIm9yZ0lkIiwiZGlkSWQiLCJudW1iZXIiLCJ1c2VySWQiLCJsb2ciLCJvcmciLCJBYnN0cmFjdE1vZGVscyIsIm1vbmdvRmluZE9uZSIsIk9yZ2FuaXNhdGlvbnMiLCJvcmdhbmlzYXRpb25faWQiLCJFcnJvclV0aWwiLCJvcmdhbmlzYWl0b25Ob3RFeGlzdHMiLCJkaWROdW1iZXIiLCJCdXNpbmVzc0RJRE51bWJlcnMiLCJfaWQiLCJhc3NvY2lhdGVkT3JnYW5pc2F0aW9uIiwiYnVzaW5lc3NEaWROdW1iZXJOb3RGb3VuZCIsInByb2ZpbGUiLCJJVlJWaXJ0dWFsUHJvZmlsZSIsInVzZXJfaWQiLCJVc2VyTm90Rm91bmRFcnJvciIsInp2ck1vYmlsZU5vIiwienZyX21vYmlsZV9ubyIsInRvU3RyaW5nIiwic2xpY2UiLCJkZXN0aW5hdGlvbk51bWJlciIsIlVuYWJsZUNhbGxTYW1lTm8iLCJjYWxsIiwibW9uZ29JbnNlcnRPbmUiLCJCdXNpbmVzc0NhbGxzIiwidXNlciIsIm9yZ2FuaXNhdGlvbklkIiwidmlydHVhbE51bWJlciIsImluaXRpYXRvck51bWJlciIsInRpbWUiLCJEYXRlIiwidG9JU09TdHJpbmciLCJrb29rb29TZXJ2aWNlIiwiZGlkTnVtYmVyTGlzdCIsInF1ZXJ5Iiwic2tpcCIsIk51bWJlciIsInBhZ2VObyIsInBhZ2VTaXplIiwibGltaXQiLCJkYlF1ZXJ5IiwidG90YWwiLCJjb3VudCIsIml0ZW1zIiwiZmluZCIsImV4ZWMiLCJvdXQiLCJtZXRhZGF0YSIsImhhbmRsZUNhbGwiLCJjYWxsSWQiLCJkYXRhIiwiaGFuZGxlciIsImNhbGxFdmVudEhhbmRsZXJzIiwiZXZlbnQiLCJjcmVhdGVFcnJvck1zZyIsIkVycm9yVHlwZSIsIkJVU0lORVNTX09VVEJPVU5EX0NBTExfRVZFTlRfSEFORExFUl9OT1RfRk9VTkQiLCJjYWxsTG9nTGlzdCIsInJvbGUiLCJwYWdlIiwicGFnZV9zaXplIiwiaXNDYWxsRW5kZWQiLCJzZWFyY2hfa2V5IiwicSIsIlJlZ0V4cCIsInBvcHVsYXRlIiwic29ydCIsImNyZWF0ZWRBdCIsImNoYW5nZU91dGJvdW5kQ2FsbFN0YXR1cyIsImlzT3V0Ym91bmRDYWxsRW5hYmxlZCIsInByb2ZpbGVRdWVyeSIsIm1vbmdvRmluZE9uZUFuZFVwZGF0ZSJdLCJzb3VyY2VSb290IjoiL1VzZXJzL3JhbWlyZWRkeWNoYXJpdGhhL2dpdC1leHBsb3JlL3NlcnZpY2VzLyIsInNvdXJjZXMiOlsiT3V0Ym91bmRjYWxsU2VydmljZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiBlc2xpbnQtZGlzYWJsZSBuby11bmRlZiAqL1xuaW1wb3J0ICogYXMga29va29vU2VydmljZSBmcm9tIFwiLi9Lb29rb29TZXJ2aWNlXCI7XG5pbXBvcnQgKiBhcyBFcnJvclV0aWwgZnJvbSBcIi4uL2Vycm9ycy9FcnJvclV0aWxzXCI7XG5pbXBvcnQgeyBPYmplY3RJZCB9IGZyb20gJ21vbmdvZGInO1xuaW1wb3J0ICogYXMgRXJyb3JUeXBlIGZyb20gXCIuLi9jb25zdGFudHMvRXJyb3JDb25zdGFudHNcIjtcbmltcG9ydCAqIGFzIEFic3RyYWN0TW9kZWxzIGZyb20gXCIuLi9tb2RlbHMvQWJzdHJhY3RNb2RlbHNcIjtcbmltcG9ydCAqIGFzIGNhbGxFdmVudEhhbmRsZXJzIGZyb20gXCIuL2NhbGxFdmVudFNlcnZpY2VcIjtcbmltcG9ydCB7IE9yZ2FuaXNhdGlvbnMsIElWUlZpcnR1YWxQcm9maWxlLCBCdXNpbmVzc0RJRE51bWJlcnMgLCBCdXNpbmVzc0NhbGxzfSBmcm9tIFwiLi4vbW9kZWxzL21haW5EYlNjaGVtYS9pbmRleFwiO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gaW5pdENhbGwob3JnSWQsIHsgZGlkSWQsIG51bWJlciwgdXNlcklkIH0pIHtcbiAgbG9nKFwiaW5mb1wiLCB7XG4gICAgb3JnSWQsIGRpZElkLCBudW1iZXIsIHVzZXJJZCxcbiAgfSk7XG4gIGNvbnN0IG9yZyA9IGF3YWl0IEFic3RyYWN0TW9kZWxzLm1vbmdvRmluZE9uZShPcmdhbmlzYXRpb25zLCB7IG9yZ2FuaXNhdGlvbl9pZDogb3JnSWQgfSk7XG4gIGlmICghb3JnKSB0aHJvdyBFcnJvclV0aWwub3JnYW5pc2FpdG9uTm90RXhpc3RzKClcbiAgY29uc3QgZGlkTnVtYmVyID0gYXdhaXQgQWJzdHJhY3RNb2RlbHMubW9uZ29GaW5kT25lKEJ1c2luZXNzRElETnVtYmVycywge1xuICAgIF9pZDogT2JqZWN0SWQoZGlkSWQpLFxuICAgIGFzc29jaWF0ZWRPcmdhbmlzYXRpb246IG9yZy5faWQsXG4gIH0pO1xuICBpZiAoIWRpZE51bWJlcikgdGhyb3cgRXJyb3JVdGlsLmJ1c2luZXNzRGlkTnVtYmVyTm90Rm91bmQoKTtcbiAgY29uc3QgcHJvZmlsZSA9IGF3YWl0IEFic3RyYWN0TW9kZWxzLm1vbmdvRmluZE9uZShJVlJWaXJ0dWFsUHJvZmlsZSwge1xuICAgIHVzZXJfaWQ6IHVzZXJJZCxcbiAgfSk7XG4gIGlmICghcHJvZmlsZSkgdGhyb3cgRXJyb3JVdGlsLlVzZXJOb3RGb3VuZEVycm9yKCk7XG4gIGNvbnN0IHp2ck1vYmlsZU5vID0gcHJvZmlsZS56dnJfbW9iaWxlX25vLnRvU3RyaW5nKCkuc2xpY2UoLTEwKTtcbiAgY29uc3QgZGVzdGluYXRpb25OdW1iZXIgPSBudW1iZXIudG9TdHJpbmcoKS5zbGljZSgtMTApO1xuXG4gIGlmICh6dnJNb2JpbGVObyA9PT0gZGVzdGluYXRpb25OdW1iZXIpIHtcbiAgICB0aHJvdyBFcnJvclV0aWwuVW5hYmxlQ2FsbFNhbWVObygpO1xuICB9XG4gIGNvbnN0IGNhbGwgPSBhd2FpdCBBYnN0cmFjdE1vZGVscy5tb25nb0luc2VydE9uZShCdXNpbmVzc0NhbGxzLCB7XG4gICAgdXNlcjogcHJvZmlsZS5faWQsXG4gICAgb3JnYW5pc2F0aW9uSWQ6IG9yZ0lkLFxuICAgIGRpZE51bWJlcjogZGlkTnVtYmVyLnZpcnR1YWxOdW1iZXIsXG4gICAgZGVzdGluYXRpb25OdW1iZXI6IG51bWJlcixcbiAgICBpbml0aWF0b3JOdW1iZXI6IHByb2ZpbGUuenZyX21vYmlsZV9ubyxcbiAgICB0aW1lOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gIH0pO1xuICByZXR1cm4gYXdhaXQga29va29vU2VydmljZS5pbml0Q2FsbChjYWxsKTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGRpZE51bWJlckxpc3Qob3JnSWQsIHF1ZXJ5KSB7XG4gIGNvbnN0IHNraXAgPSBOdW1iZXIocXVlcnkucGFnZU5vIHx8IDApICogTnVtYmVyKHF1ZXJ5LnBhZ2VTaXplIHx8IDIwKTtcbiAgY29uc3QgbGltaXQgPSBza2lwICsgTnVtYmVyKHF1ZXJ5LnBhZ2VTaXplKTtcbiAgY29uc3Qgb3JnID0gYXdhaXQgQWJzdHJhY3RNb2RlbHMubW9uZ29GaW5kT25lKE9yZ2FuaXNhdGlvbnMsIHsgb3JnYW5pc2F0aW9uX2lkOiBvcmdJZCB9KTtcbiAgaWYgKCFvcmcpIHRocm93IEVycm9yVXRpbC5vcmdhbmlzYWl0b25Ob3RFeGlzdHMoKTtcbiAgY29uc3QgZGJRdWVyeSA9IHsgYXNzb2NpYXRlZE9yZ2FuaXNhdGlvbjogb3JnLl9pZCB9O1xuICBjb25zdCB0b3RhbCA9IGF3YWl0IEJ1c2luZXNzRElETnVtYmVycy5jb3VudChkYlF1ZXJ5KTtcbiAgY29uc3QgaXRlbXMgPSBhd2FpdCBCdXNpbmVzc0RJRE51bWJlcnMuZmluZChkYlF1ZXJ5KVxuICAgIC5za2lwKHNraXApXG4gICAgLmxpbWl0KGxpbWl0KVxuICAgIC5leGVjKCk7XG4gIGNvbnN0IG91dCA9IHtcbiAgICBpdGVtcyxcbiAgICBtZXRhZGF0YToge1xuICAgICAgdG90YWwsXG4gICAgICBxdWVyeSxcbiAgICB9LFxuICB9O1xuICByZXR1cm4gb3V0O1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gaGFuZGxlQ2FsbCAoeyBjYWxsSWQgfSwgZGF0YSkge1xuICBsb2coJ2luZm8nLCB7IGNhbGxJZCwgZGF0YSB9KTtcbiAvLyBjb25zb2xlLmxvZyhPYmplY3RJZChjYWxsSWQpKTtcbiAgY29uc3QgY2FsbCA9IGF3YWl0IEFic3RyYWN0TW9kZWxzLm1vbmdvRmluZE9uZShCdXNpbmVzc0NhbGxzLCB7IF9pZDogT2JqZWN0SWQoY2FsbElkKSB9KTtcbiAgaWYgKCFjYWxsKSB0aHJvdyBFcnJvclV0aWwuYnVzaW5lc3NEaWROdW1iZXJOb3RGb3VuZCgpO1xuXG4gIGNvbnN0IGhhbmRsZXIgPSBjYWxsRXZlbnRIYW5kbGVyc1tkYXRhLmV2ZW50XTtcblxuICBpZiAoIWhhbmRsZXIpIHRocm93IEVycm9yVXRpbC5jcmVhdGVFcnJvck1zZyhFcnJvclR5cGUuQlVTSU5FU1NfT1VUQk9VTkRfQ0FMTF9FVkVOVF9IQU5ETEVSX05PVF9GT1VORCk7XG4gIHJldHVybiBoYW5kbGVyKGNhbGwsIGRhdGEpO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY2FsbExvZ0xpc3QgKG9yZ0lkLCBxdWVyeSwgeyB1c2VySWQsIHJvbGUgfSA9IHt9KSB7XG4gIGNvbnN0IHNraXAgPSAoTnVtYmVyKHF1ZXJ5LnBhZ2UgfHwgMCkgLTEpICogTnVtYmVyKHF1ZXJ5LnBhZ2Vfc2l6ZSB8fCAyMCk7XG4gIGNvbnN0IGxpbWl0ID0gTnVtYmVyKHF1ZXJ5LnBhZ2Vfc2l6ZSB8fCAyMCk7XG4gIGNvbnN0IGRiUXVlcnkgPSB7IG9yZ2FuaXNhdGlvbklkOiBvcmdJZCwgaXNDYWxsRW5kZWQ6IHRydWUgfTtcblxuICBpZiAodXNlcklkICYmIHJvbGUgPT09ICdVU0VSJykge1xuICAgIGNvbnN0IHByb2ZpbGUgPSBhd2FpdCBBYnN0cmFjdE1vZGVscy5tb25nb0ZpbmRPbmUoSVZSVmlydHVhbFByb2ZpbGUsIHsgdXNlcl9pZDogdXNlcklkIH0pO1xuICAgIGlmICghcHJvZmlsZSkgdGhyb3cgRXJyb3JVdGlsLlVzZXJOb3RGb3VuZEVycm9yKCk7XG4gICAgZGJRdWVyeS51c2VyID0gcHJvZmlsZS5faWQ7XG4gIH1cblxuICBpZiAocXVlcnkuc2VhcmNoX2tleSAmJiBxdWVyeS5xKSB7XG4gICAgc3dpdGNoIChxdWVyeS5zZWFyY2hfa2V5KSB7XG4gICAgICBjYXNlICdzdGF0dXMnOlxuICAgICAgICBkYlF1ZXJ5W3F1ZXJ5LnNlYXJjaF9rZXldID0gcXVlcnkucTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICBkYlF1ZXJ5W3F1ZXJ5LnNlYXJjaF9rZXldID0gbmV3IFJlZ0V4cChgLioke3F1ZXJ5LnF9LipgKTtcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgY29uc3QgdG90YWwgPSBhd2FpdCBCdXNpbmVzc0NhbGxzLmNvdW50KGRiUXVlcnkpO1xuICBjb25zdCBpdGVtcyA9IGF3YWl0IEJ1c2luZXNzQ2FsbHMuZmluZChkYlF1ZXJ5KVxuICAgIC5wb3B1bGF0ZSgndXNlcicsICdfaWQgenZyX25hbWUgenZyX21vYmlsZV9ubycpXG4gICAgLnNvcnQoeyBjcmVhdGVkQXQ6IC0xIH0pXG4gICAgLnNraXAoc2tpcClcbiAgICAubGltaXQobGltaXQpXG4gICAgLmV4ZWMoKTtcbiAgY29uc3Qgb3V0ID0ge1xuICAgIGl0ZW1zLFxuICAgIG1ldGFkYXRhOiB7XG4gICAgICB0b3RhbCxcbiAgICAgIHF1ZXJ5XG4gICAgfVxuICB9O1xuICAvLyBsb2dUb0pTT04oJ2luZm8nLCBvdXQpO1xuICByZXR1cm4gb3V0O1xufVxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNoYW5nZU91dGJvdW5kQ2FsbFN0YXR1cyAoeyBvcmdJZCB9LCB7IHVzZXJJZCwgaXNPdXRib3VuZENhbGxFbmFibGVkIH0pIHtcbiAgY29uc3Qgb3JnID0gYXdhaXQgQWJzdHJhY3RNb2RlbHMubW9uZ29GaW5kT25lKE9yZ2FuaXNhdGlvbnMsIHsgb3JnYW5pc2F0aW9uX2lkOiBvcmdJZCB9KTtcbiAgaWYgKCFvcmcpIHRocm93IEVycm9yVXRpbC5vcmdhbmlzYWl0b25Ob3RFeGlzdHMoKTtcbiAgY29uc3QgcHJvZmlsZVF1ZXJ5ID0geyAnb3JnYW5pc2F0aW9uLm9yZ2FuaXNhdGlvbl9pZCc6IG9yZ0lkLCB1c2VyX2lkOiB1c2VySWQgfTtcbiAgLy8gY29uc29sZS5sb2coXCI9PT09PT09PT09PSB0aGUgcHJvZmlpbGUgcXVlcnkgaXMgXCIrSlNPTi5zdHJpbmdpZnkocHJvZmlsZVF1ZXJ5KSlcbiAgY29uc3QgcHJvZmlsZSA9IGF3YWl0IEFic3RyYWN0TW9kZWxzLm1vbmdvRmluZE9uZShJVlJWaXJ0dWFsUHJvZmlsZSwgcHJvZmlsZVF1ZXJ5KTtcbiAgaWYgKCFwcm9maWxlKSB0aHJvdyBFcnJvclV0aWwuVXNlck5vdEZvdW5kRXJyb3IoKTtcbiAgYXdhaXQgQWJzdHJhY3RNb2RlbHMubW9uZ29GaW5kT25lQW5kVXBkYXRlKElWUlZpcnR1YWxQcm9maWxlLCBwcm9maWxlUXVlcnksIHtcbiAgICBpc091dGJvdW5kQ2FsbEVuYWJsZWRcbiAgfSk7XG4gIHJldHVybiB7fTtcbn0iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7Ozs7OztBQVBBO0FBU08sZUFBZUEsUUFBZixDQUF3QkMsS0FBeEIsRUFBK0I7RUFBRUMsS0FBRjtFQUFTQyxNQUFUO0VBQWlCQztBQUFqQixDQUEvQixFQUEwRDtFQUMvREMsR0FBRyxDQUFDLE1BQUQsRUFBUztJQUNWSixLQURVO0lBQ0hDLEtBREc7SUFDSUMsTUFESjtJQUNZQztFQURaLENBQVQsQ0FBSDtFQUdBLE1BQU1FLEdBQUcsR0FBRyxNQUFNQyxjQUFjLENBQUNDLFlBQWYsQ0FBNEJDLG9CQUE1QixFQUEyQztJQUFFQyxlQUFlLEVBQUVUO0VBQW5CLENBQTNDLENBQWxCO0VBQ0EsSUFBSSxDQUFDSyxHQUFMLEVBQVUsTUFBTUssU0FBUyxDQUFDQyxxQkFBVixFQUFOO0VBQ1YsTUFBTUMsU0FBUyxHQUFHLE1BQU1OLGNBQWMsQ0FBQ0MsWUFBZixDQUE0Qk0seUJBQTVCLEVBQWdEO0lBQ3RFQyxHQUFHLEVBQUUsdUJBQVNiLEtBQVQsQ0FEaUU7SUFFdEVjLHNCQUFzQixFQUFFVixHQUFHLENB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","map":{"version":3,"names":["initCall","orgId","didId","number","userId","log","org","AbstractModels","mongoFindOne","Organisations","organisation_id","ErrorUtil","organisaitonNotExists","didNumber","BusinessDIDNumbers","_id","associatedOrganisation","businessDidNumberNotFound","profile","IVRVirtualProfile","user_id","UserNotFoundError","zvrMobileNo","zvr_mobile_no","toString","slice","destinationNumber","UnableCallSameNo","call","mongoInsertOne","BusinessCalls","user","organisationId","virtualNumber","initiatorNumber","time","Date","toISOString","kookooService","didNumberList","query","skip","Number","pageNo","pageSize","limit","dbQuery","total","count","items","find","exec","out","metadata","handleCall","callId","data","handler","callEventHandlers","event","createErrorMsg","ErrorType","BUSINESS_OUTBOUND_CALL_EVENT_HANDLER_NOT_FOUND","callLogList","role","page","page_size","isCallEnded","search_key","q","RegExp","populate","sort","createdAt","changeOutboundCallStatus","isOutboundCallEnabled","profileQuery","mongoFindOneAndUpdate"],"sourceRoot":"/Users/ramireddycharitha/git-explore/services/","sources":["OutboundcallService.js"],"sourcesContent":["/* eslint-disable no-undef */\nimport * as kookooService from \"./KookooService\";\nimport * as ErrorUtil from \"../errors/ErrorUtils\";\nimport { ObjectId } from 'mongodb';\nimport * as ErrorType from \"../constants/ErrorConstants\";\nimport * as AbstractModels from \"../models/AbstractModels\";\nimport * as callEventHandlers from \"./callEventService\";\nimport { Organisations, IVRVirtualProfile, BusinessDIDNumbers , BusinessCalls} from \"../models/mainDbSchema/index\";\n\nexport async function initCall(orgId, { didId, number, userId }) {\n  log(\"info\", {\n    orgId, didId, number, userId,\n  });\n  const org = await AbstractModels.mongoFindOne(Organisations, { organisation_id: orgId });\n  if (!org) throw ErrorUtil.organisaitonNotExists()\n  const didNumber = await AbstractModels.mongoFindOne(BusinessDIDNumbers, {\n    _id: ObjectId(didId),\n    associatedOrganisation: org._id,\n  });\n  if (!didNumber) throw ErrorUtil.businessDidNumberNotFound();\n  const profile = await AbstractModels.mongoFindOne(IVRVirtualProfile, {\n    user_id: userId,\n  });\n  if (!profile) throw ErrorUtil.UserNotFoundError();\n  const zvrMobileNo = profile.zvr_mobile_no.toString().slice(-10);\n  const destinationNumber = number.toString().slice(-10);\n\n  if (zvrMobileNo === destinationNumber) {\n    throw ErrorUtil.UnableCallSameNo();\n  }\n  const call = await AbstractModels.mongoInsertOne(BusinessCalls, {\n    user: profile._id,\n    organisationId: orgId,\n    didNumber: didNumber.virtualNumber,\n    destinationNumber: number,\n    initiatorNumber: profile.zvr_mobile_no,\n    time: new Date().toISOString(),\n  });\n  return await kookooService.initCall(call);\n}\n\nexport async function didNumberList(orgId, query) {\n  const skip = Number(query.pageNo || 0) * Number(query.pageSize || 20);\n  const limit = skip + Number(query.pageSize);\n  const org = await AbstractModels.mongoFindOne(Organisations, { organisation_id: orgId });\n  if (!org) throw ErrorUtil.organisaitonNotExists();\n  const dbQuery = { associatedOrganisation: org._id };\n  const total = await BusinessDIDNumbers.count(dbQuery);\n  const items = await BusinessDIDNumbers.find(dbQuery)\n    .skip(skip)\n    .limit(limit)\n    .exec();\n  const out = {\n    items,\n    metadata: {\n      total,\n      query,\n    },\n  };\n  return out;\n}\n\nexport async function handleCall ({ callId }, data) {\n  log('info', { callId, data });\n // console.log(ObjectId(callId));\n  const call = await AbstractModels.mongoFindOne(BusinessCalls, { _id: ObjectId(callId) });\n  if (!call) throw ErrorUtil.businessDidNumberNotFound();\n\n  const handler = callEventHandlers[data.event];\n\n  if (!handler) throw ErrorUtil.createErrorMsg(ErrorType.BUSINESS_OUTBOUND_CALL_EVENT_HANDLER_NOT_FOUND);\n  return handler(call, data);\n}\n\nexport async function callLogList (orgId, query, { userId, role } = {}) {\n  const skip = (Number(query.page || 0) -1) * Number(query.page_size || 20);\n  const limit = Number(query.page_size || 20);\n  const dbQuery = { organisationId: orgId, isCallEnded: true };\n\n  if (userId && role === 'USER') {\n    const profile = await AbstractModels.mongoFindOne(IVRVirtualProfile, { user_id: userId });\n    if (!profile) throw ErrorUtil.UserNotFoundError();\n    dbQuery.user = profile._id;\n  }\n\n  if (query.search_key && query.q) {\n    switch (query.search_key) {\n      case 'status':\n        dbQuery[query.search_key] = query.q;\n        break;\n      default:\n        dbQuery[query.search_key] = new RegExp(`.*${query.q}.*`);\n        break;\n    }\n  }\n\n  const total = await BusinessCalls.count(dbQuery);\n  const items = await BusinessCalls.find(dbQuery)\n    .populate('user', '_id zvr_name zvr_mobile_no')\n    .sort({ createdAt: -1 })\n    .skip(skip)\n    .limit(limit)\n    .exec();\n  const out = {\n    items,\n    metadata: {\n      total,\n      query\n    }\n  };\n  // logToJSON('info', out);\n  return out;\n}\nexport async function changeOutboundCallStatus ({ orgId }, { userId, isOutboundCallEnabled }) {\n  const org = await AbstractModels.mongoFindOne(Organisations, { organisation_id: orgId });\n  if (!org) throw ErrorUtil.organisaitonNotExists();\n  const profileQuery = { 'organisation.organisation_id': orgId, user_id: userId };\n  // console.log(\"=========== the profiile query is \"+JSON.stringify(profileQuery))\n  const profile = await AbstractModels.mongoFindOne(IVRVirtualProfile, profileQuery);\n  if (!profile) throw ErrorUtil.UserNotFoundError();\n  await AbstractModels.mongoFindOneAndUpdate(IVRVirtualProfile, profileQuery, {\n    isOutboundCallEnabled\n  });\n  return {};\n}"],"mappings":"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"}},"mtime":1654155693791},"{\"assumptions\":{},\"sourceRoot\":\"/Users/ramireddycharitha/git-explore/config/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/ramireddycharitha/git-explore\",\"filename\":\"/Users/ramireddycharitha/git-explore/config/prod.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"default\",\"root\":\"/Users/ramireddycharitha/git-explore\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.17.10:default":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nrequire(\"dotenv/config\");\n\nvar _default = {\n  mainDbconfig: {\n    connString: process.env.MAIN_DB_CONN_STRING // Change all required config to env variables\n\n  },\n  analyticsDbConfig: {\n    connString: process.env.ANALYTICS_DB_CONN_STRING\n  },\n  redisConfig: {\n    connString: \"redis://localhost:6379\"\n  },\n  sentry_dsn: process.env.SENTRY_DSN\n};\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJtYWluRGJjb25maWciLCJjb25uU3RyaW5nIiwicHJvY2VzcyIsImVudiIsIk1BSU5fREJfQ09OTl9TVFJJTkciLCJhbmFseXRpY3NEYkNvbmZpZyIsIkFOQUxZVElDU19EQl9DT05OX1NUUklORyIsInJlZGlzQ29uZmlnIiwic2VudHJ5X2RzbiIsIlNFTlRSWV9EU04iXSwic291cmNlUm9vdCI6Ii9Vc2Vycy9yYW1pcmVkZHljaGFyaXRoYS9naXQtZXhwbG9yZS9jb25maWcvIiwic291cmNlcyI6WyJwcm9kLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBcImRvdGVudi9jb25maWdcIjtcblxuZXhwb3J0IGRlZmF1bHQge1xuICBtYWluRGJjb25maWc6IHtcbiAgICBjb25uU3RyaW5nOiBwcm9jZXNzLmVudi5NQUlOX0RCX0NPTk5fU1RSSU5HLCAvLyBDaGFuZ2UgYWxsIHJlcXVpcmVkIGNvbmZpZyB0byBlbnYgdmFyaWFibGVzXG4gIH0sXG4gIGFuYWx5dGljc0RiQ29uZmlnOiB7XG4gICAgY29ublN0cmluZzogcHJvY2Vzcy5lbnYuQU5BTFlUSUNTX0RCX0NPTk5fU1RSSU5HLFxuICB9LFxuICByZWRpc0NvbmZpZzoge1xuICAgIGNvbm5TdHJpbmc6IFwicmVkaXM6Ly9sb2NhbGhvc3Q6NjM3OVwiLFxuICB9LFxuICBzZW50cnlfZHNuOiBwcm9jZXNzLmVudi5TRU5UUllfRFNOLFxufTtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOztlQUVlO0VBQ2JBLFlBQVksRUFBRTtJQUNaQyxVQUFVLEVBQUVDLE9BQU8sQ0FBQ0MsR0FBUixDQUFZQyxtQkFEWixDQUNpQzs7RUFEakMsQ0FERDtFQUliQyxpQkFBaUIsRUFBRTtJQUNqQkosVUFBVSxFQUFFQyxPQUFPLENBQUNDLEdBQVIsQ0FBWUc7RUFEUCxDQUpOO0VBT2JDLFdBQVcsRUFBRTtJQUNYTixVQUFVLEVBQUU7RUFERCxDQVBBO0VBVWJPLFVBQVUsRUFBRU4sT0FBTyxDQUFDQyxHQUFSLENBQVlNO0FBVlgsQyJ9","map":{"version":3,"names":["mainDbconfig","connString","process","env","MAIN_DB_CONN_STRING","analyticsDbConfig","ANALYTICS_DB_CONN_STRING","redisConfig","sentry_dsn","SENTRY_DSN"],"sourceRoot":"/Users/ramireddycharitha/git-explore/config/","sources":["prod.js"],"sourcesContent":["import \"dotenv/config\";\n\nexport default {\n  mainDbconfig: {\n    connString: process.env.MAIN_DB_CONN_STRING, // Change all required config to env variables\n  },\n  analyticsDbConfig: {\n    connString: process.env.ANALYTICS_DB_CONN_STRING,\n  },\n  redisConfig: {\n    connString: \"redis://localhost:6379\",\n  },\n  sentry_dsn: process.env.SENTRY_DSN,\n};\n"],"mappings":";;;;;;;AAAA;;eAEe;EACbA,YAAY,EAAE;IACZC,UAAU,EAAEC,OAAO,CAACC,GAAR,CAAYC,mBADZ,CACiC;;EADjC,CADD;EAIbC,iBAAiB,EAAE;IACjBJ,UAAU,EAAEC,OAAO,CAACC,GAAR,CAAYG;EADP,CAJN;EAObC,WAAW,EAAE;IACXN,UAAU,EAAE;EADD,CAPA;EAUbO,UAAU,EAAEN,OAAO,CAACC,GAAR,CAAYM;AAVX,C"}},"mtime":1653643634176},"{\"assumptions\":{},\"sourceRoot\":\"/Users/ramireddycharitha/git-explore/connections/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/ramireddycharitha/git-explore\",\"filename\":\"/Users/ramireddycharitha/git-explore/connections/AnalyticsDb.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"default\",\"root\":\"/Users/ramireddycharitha/git-explore\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.17.10:default":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getDbInstance = getDbInstance;\nexports.init = init;\n\nvar _mongoose = _interopRequireDefault(require(\"mongoose\"));\n\nvar _index = _interopRequireDefault(require(\"../config/index\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/* eslint-disable import/no-import-module-exports */\nlet conn;\n\nfunction init() {\n  const RECONNECT_TIME = 5000;\n  const CONN_URL = _index.default.analyticsDbConfig.connString;\n\n  if (conn) {\n    return conn;\n  }\n\n  log(\"info\", `CONN_URL to connect to analytics database ${CONN_URL}`);\n  conn = _mongoose.default.createConnection(CONN_URL); //  Mongoose Connection Events\n\n  conn.on(\"error\", error => {\n    log(\"error\", {\n      error\n    });\n  });\n  conn.once(\"open\", () => {\n    log(\"info\", {\n      dBConnectionStatus: \"open\"\n    });\n  });\n  conn.on(\"connected\", () => {\n    log(\"info\", {\n      dBConnectionStatus: \"connected\"\n    });\n  });\n  conn.on(\"connecting\", () => {\n    log(\"info\", {\n      dBConnectionStatus: \"connecting\"\n    });\n  });\n  conn.on(\"reconnected\", () => {\n    log(\"info\", {\n      dBConnectionStatus: \"reconnected\"\n    });\n  });\n  conn.on(\"disconnected\", () => {\n    log(\"error\", {\n      dBConnectionStatus: `disconnected Reconnecting in ${RECONNECT_TIME / 1000}s...`\n    }); // https://github.com/automattic/mongoose/issues/5169#issuecomment-314983113\n\n    setTimeout(() => {\n      conn.openUri(CONN_URL).catch(() => {});\n    }, RECONNECT_TIME);\n  });\n  return conn;\n}\n\nfunction getDbInstance() {\n  return conn;\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb25uIiwiaW5pdCIsIlJFQ09OTkVDVF9USU1FIiwiQ09OTl9VUkwiLCJjb25maWciLCJhbmFseXRpY3NEYkNvbmZpZyIsImNvbm5TdHJpbmciLCJsb2ciLCJtb25nb29zZSIsImNyZWF0ZUNvbm5lY3Rpb24iLCJvbiIsImVycm9yIiwib25jZSIsImRCQ29ubmVjdGlvblN0YXR1cyIsInNldFRpbWVvdXQiLCJvcGVuVXJpIiwiY2F0Y2giLCJnZXREYkluc3RhbmNlIl0sInNvdXJjZVJvb3QiOiIvVXNlcnMvcmFtaXJlZGR5Y2hhcml0aGEvZ2l0LWV4cGxvcmUvY29ubmVjdGlvbnMvIiwic291cmNlcyI6WyJBbmFseXRpY3NEYi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiBlc2xpbnQtZGlzYWJsZSBpbXBvcnQvbm8taW1wb3J0LW1vZHVsZS1leHBvcnRzICovXG5cbmltcG9ydCBtb25nb29zZSBmcm9tIFwibW9uZ29vc2VcIjtcbmltcG9ydCBjb25maWcgZnJvbSBcIi4uL2NvbmZpZy9pbmRleFwiO1xuXG5sZXQgY29ubjtcblxuZXhwb3J0IGZ1bmN0aW9uIGluaXQoKSB7XG4gIGNvbnN0IFJFQ09OTkVDVF9USU1FID0gNTAwMDtcbiAgY29uc3QgQ09OTl9VUkwgPSBjb25maWcuYW5hbHl0aWNzRGJDb25maWcuY29ublN0cmluZztcblxuICBpZiAoY29ubikge1xuICAgIHJldHVybiBjb25uO1xuICB9XG5cbiAgbG9nKFwiaW5mb1wiLCBgQ09OTl9VUkwgdG8gY29ubmVjdCB0byBhbmFseXRpY3MgZGF0YWJhc2UgJHtDT05OX1VSTH1gKTtcbiAgY29ubiA9IG1vbmdvb3NlLmNyZWF0ZUNvbm5lY3Rpb24oQ09OTl9VUkwpO1xuXG4gIC8vICBNb25nb29zZSBDb25uZWN0aW9uIEV2ZW50c1xuICBjb25uLm9uKFwiZXJyb3JcIiwgKGVycm9yKSA9PiB7XG4gICAgbG9nKFwiZXJyb3JcIiwgeyBlcnJvciB9KTtcbiAgfSk7XG5cbiAgY29ubi5vbmNlKFwib3BlblwiLCAoKSA9PiB7XG4gICAgbG9nKFwiaW5mb1wiLCB7IGRCQ29ubmVjdGlvblN0YXR1czogXCJvcGVuXCIgfSk7XG4gIH0pO1xuXG4gIGNvbm4ub24oXCJjb25uZWN0ZWRcIiwgKCkgPT4ge1xuICAgIGxvZyhcImluZm9cIiwgeyBkQkNvbm5lY3Rpb25TdGF0dXM6IFwiY29ubmVjdGVkXCIgfSk7XG4gIH0pO1xuXG4gIGNvbm4ub24oXCJjb25uZWN0aW5nXCIsICgpID0+IHtcbiAgICBsb2coXCJpbmZvXCIsIHsgZEJDb25uZWN0aW9uU3RhdHVzOiBcImNvbm5lY3RpbmdcIiB9KTtcbiAgfSk7XG5cbiAgY29ubi5vbihcInJlY29ubmVjdGVkXCIsICgpID0+IHtcbiAgICBsb2coXCJpbmZvXCIsIHsgZEJDb25uZWN0aW9uU3RhdHVzOiBcInJlY29ubmVjdGVkXCIgfSk7XG4gIH0pO1xuXG4gIGNvbm4ub24oXCJkaXNjb25uZWN0ZWRcIiwgKCkgPT4ge1xuICAgIGxvZyhcImVycm9yXCIsIHsgZEJDb25uZWN0aW9uU3RhdHVzOiBgZGlzY29ubmVjdGVkIFJlY29ubmVjdGluZyBpbiAke1JFQ09OTkVDVF9USU1FIC8gMTAwMH1zLi4uYCB9KTtcbiAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vYXV0b21hdHRpYy9tb25nb29zZS9pc3N1ZXMvNTE2OSNpc3N1ZWNvbW1lbnQtMzE0OTgzMTEzXG4gICAgc2V0VGltZW91dCgoKSA9PiB7IGNvbm4ub3BlblVyaShDT05OX1VSTCkuY2F0Y2goKCkgPT4geyB9KTsgfSwgUkVDT05ORUNUX1RJTUUpO1xuICB9KTtcblxuICByZXR1cm4gY29ubjtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldERiSW5zdGFuY2UoKSB7XG4gIHJldHVybiBjb25uO1xufVxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUVBOztBQUNBOzs7O0FBSEE7QUFLQSxJQUFJQSxJQUFKOztBQUVPLFNBQVNDLElBQVQsR0FBZ0I7RUFDckIsTUFBTUMsY0FBYyxHQUFHLElBQXZCO0VBQ0EsTUFBTUMsUUFBUSxHQUFHQyxlQUFPQyxpQkFBUCxDQUF5QkMsVUFBMUM7O0VBRUEsSUFBSU4sSUFBSixFQUFVO0lBQ1IsT0FBT0EsSUFBUDtFQUNEOztFQUVETyxHQUFHLENBQUMsTUFBRCxFQUFVLDZDQUE0Q0osUUFBUyxFQUEvRCxDQUFIO0VBQ0FILElBQUksR0FBR1Esa0JBQVNDLGdCQUFULENBQTBCTixRQUExQixDQUFQLENBVHFCLENBV3JCOztFQUNBSCxJQUFJLENBQUNVLEVBQUwsQ0FBUSxPQUFSLEVBQWtCQyxLQUFELElBQVc7SUFDMUJKLEdBQUcsQ0FBQyxPQUFELEVBQVU7TUFBRUk7SUFBRixDQUFWLENBQUg7RUFDRCxDQUZEO0VBSUFYLElBQUksQ0FBQ1ksSUFBTCxDQUFVLE1BQVYsRUFBa0IsTUFBTTtJQUN0QkwsR0FBRyxDQUFDLE1BQUQsRUFBUztNQUFFTSxrQkFBa0IsRUFBRTtJQUF0QixDQUFULENBQUg7RUFDRCxDQUZEO0VBSUFiLElBQUksQ0FBQ1UsRUFBTCxDQUFRLFdBQVIsRUFBcUIsTUFBTTtJQUN6QkgsR0FBRyxDQUFDLE1BQUQsRUFBUztNQUFFTSxrQkFBa0IsRUFBRTtJQUF0QixDQUFULENBQUg7RUFDRCxDQUZEO0VBSUFiLElBQUksQ0FBQ1UsRUFBTCxDQUFRLFlBQVIsRUFBc0IsTUFBTTtJQUMxQkgsR0FBRyxDQUFDLE1BQUQsRUFBUztNQUFFTSxrQkFBa0IsRUFBRTtJQUF0QixDQUFULENBQUg7RUFDRCxDQUZEO0VBSUFiLElBQUksQ0FBQ1UsRUFBTCxDQUFRLGFBQVIsRUFBdUIsTUFBTTtJQUMzQkgsR0FBRyxDQUFDLE1BQUQsRUFBUztNQUFFTSxrQkFBa0IsRUFBRTtJQUF0QixDQUFULENBQUg7RUFDRCxDQUZEO0VBSUFiLElBQUksQ0FBQ1UsRUFBTCxDQUFRLGNBQVIsRUFBd0IsTUFBTTtJQUM1QkgsR0FBRyxDQUFDLE9BQUQsRUFBVTtNQUFFTSxrQkFBa0IsRUFBRyxnQ0FBK0JYLGNBQWMsR0FBRyxJQUFLO0lBQTVFLENBQVYsQ0FBSCxDQUQ0QixDQUU1Qjs7SUFDQVksVUFBVSxDQUFDLE1BQU07TUFBRWQsSUFBSSxDQUFDZSxPQUFMLENBQWFaLFFBQWIsRUFBdUJhLEtBQXZCLENBQTZCLE1BQU0sQ0FBRyxDQUF0QztJQUEwQyxDQUFuRCxFQUFxRGQsY0FBckQsQ0FBVjtFQUNELENBSkQ7RUFNQSxPQUFPRixJQUFQO0FBQ0Q7O0FBRU0sU0FBU2lCLGFBQVQsR0FBeUI7RUFDOUIsT0FBT2pCLElBQVA7QUFDRCJ9","map":{"version":3,"names":["conn","init","RECONNECT_TIME","CONN_URL","config","analyticsDbConfig","connString","log","mongoose","createConnection","on","error","once","dBConnectionStatus","setTimeout","openUri","catch","getDbInstance"],"sourceRoot":"/Users/ramireddycharitha/git-explore/connections/","sources":["AnalyticsDb.js"],"sourcesContent":["/* eslint-disable import/no-import-module-exports */\n\nimport mongoose from \"mongoose\";\nimport config from \"../config/index\";\n\nlet conn;\n\nexport function init() {\n  const RECONNECT_TIME = 5000;\n  const CONN_URL = config.analyticsDbConfig.connString;\n\n  if (conn) {\n    return conn;\n  }\n\n  log(\"info\", `CONN_URL to connect to analytics database ${CONN_URL}`);\n  conn = mongoose.createConnection(CONN_URL);\n\n  //  Mongoose Connection Events\n  conn.on(\"error\", (error) => {\n    log(\"error\", { error });\n  });\n\n  conn.once(\"open\", () => {\n    log(\"info\", { dBConnectionStatus: \"open\" });\n  });\n\n  conn.on(\"connected\", () => {\n    log(\"info\", { dBConnectionStatus: \"connected\" });\n  });\n\n  conn.on(\"connecting\", () => {\n    log(\"info\", { dBConnectionStatus: \"connecting\" });\n  });\n\n  conn.on(\"reconnected\", () => {\n    log(\"info\", { dBConnectionStatus: \"reconnected\" });\n  });\n\n  conn.on(\"disconnected\", () => {\n    log(\"error\", { dBConnectionStatus: `disconnected Reconnecting in ${RECONNECT_TIME / 1000}s...` });\n    // https://github.com/automattic/mongoose/issues/5169#issuecomment-314983113\n    setTimeout(() => { conn.openUri(CONN_URL).catch(() => { }); }, RECONNECT_TIME);\n  });\n\n  return conn;\n}\n\nexport function getDbInstance() {\n  return conn;\n}\n"],"mappings":";;;;;;;;AAEA;;AACA;;;;AAHA;AAKA,IAAIA,IAAJ;;AAEO,SAASC,IAAT,GAAgB;EACrB,MAAMC,cAAc,GAAG,IAAvB;EACA,MAAMC,QAAQ,GAAGC,eAAOC,iBAAP,CAAyBC,UAA1C;;EAEA,IAAIN,IAAJ,EAAU;IACR,OAAOA,IAAP;EACD;;EAEDO,GAAG,CAAC,MAAD,EAAU,6CAA4CJ,QAAS,EAA/D,CAAH;EACAH,IAAI,GAAGQ,kBAASC,gBAAT,CAA0BN,QAA1B,CAAP,CATqB,CAWrB;;EACAH,IAAI,CAACU,EAAL,CAAQ,OAAR,EAAkBC,KAAD,IAAW;IAC1BJ,GAAG,CAAC,OAAD,EAAU;MAAEI;IAAF,CAAV,CAAH;EACD,CAFD;EAIAX,IAAI,CAACY,IAAL,CAAU,MAAV,EAAkB,MAAM;IACtBL,GAAG,CAAC,MAAD,EAAS;MAAEM,kBAAkB,EAAE;IAAtB,CAAT,CAAH;EACD,CAFD;EAIAb,IAAI,CAACU,EAAL,CAAQ,WAAR,EAAqB,MAAM;IACzBH,GAAG,CAAC,MAAD,EAAS;MAAEM,kBAAkB,EAAE;IAAtB,CAAT,CAAH;EACD,CAFD;EAIAb,IAAI,CAACU,EAAL,CAAQ,YAAR,EAAsB,MAAM;IAC1BH,GAAG,CAAC,MAAD,EAAS;MAAEM,kBAAkB,EAAE;IAAtB,CAAT,CAAH;EACD,CAFD;EAIAb,IAAI,CAACU,EAAL,CAAQ,aAAR,EAAuB,MAAM;IAC3BH,GAAG,CAAC,MAAD,EAAS;MAAEM,kBAAkB,EAAE;IAAtB,CAAT,CAAH;EACD,CAFD;EAIAb,IAAI,CAACU,EAAL,CAAQ,cAAR,EAAwB,MAAM;IAC5BH,GAAG,CAAC,OAAD,EAAU;MAAEM,kBAAkB,EAAG,gCAA+BX,cAAc,GAAG,IAAK;IAA5E,CAAV,CAAH,CAD4B,CAE5B;;IACAY,UAAU,CAAC,MAAM;MAAEd,IAAI,CAACe,OAAL,CAAaZ,QAAb,EAAuBa,KAAvB,CAA6B,MAAM,CAAG,CAAtC;IAA0C,CAAnD,EAAqDd,cAArD,CAAV;EACD,CAJD;EAMA,OAAOF,IAAP;AACD;;AAEM,SAASiB,aAAT,GAAyB;EAC9B,OAAOjB,IAAP;AACD"}},"mtime":1653643634176},"{\"assumptions\":{},\"sourceRoot\":\"/Users/ramireddycharitha/git-explore/services/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/ramireddycharitha/git-explore\",\"filename\":\"/Users/ramireddycharitha/git-explore/services/KookooService.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"default\",\"root\":\"/Users/ramireddycharitha/git-explore\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.17.10:default":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.hangupResponse = hangupResponse;\nexports.initCall = initCall;\nexports.outgoingCallResponse = outgoingCallResponse;\n\nvar _index = _interopRequireDefault(require(\"../config/index\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/* eslint-disable import/no-unresolved */\nasync function initCall({\n  _id,\n  didNumber,\n  initiatorNumber\n}) {\n  log(\"info\", {\n    _id,\n    didNumber,\n    initiatorNumber\n  }); // eslint-disable-next-line global-require\n\n  const axios = require(\"axios\");\n\n  const apiKey = \"KK232c980690c3cd35bc9ce18db9477d8b\";\n  const applicationUrl = new URL(_index.default.application_url); // console.log(\"+++++++++++++++++++ the applicaiton url is \"+applicationUrl.origin)\n\n  const url = `${applicationUrl.origin}/v1/organisation/outbound-call/external/call/handle/${_id}`;\n  log(\"info\", url); // console.log('URL FOR KOOKOO\\n\\n\\n\\n\\n'+url);\n\n  const API_URL = new URL(\"http://kookoo.in/outbound/outbound.php\");\n  API_URL.searchParams.set(\"api_key\", apiKey);\n  API_URL.searchParams.set(\"phone_no\", initiatorNumber);\n  API_URL.searchParams.set(\"caller_id\", didNumber);\n  API_URL.searchParams.set(\"outbound_version\", \"2\");\n  API_URL.searchParams.set(\"url\", url);\n  log(\"info\", \"end\");\n  return axios.default.get(API_URL.href);\n}\n\nasync function outgoingCallResponse({\n  destinationNumber\n}) {\n  log('info', 'start');\n  const out = '<?xml version=\"1.0\" encoding=\"UTF-8\"?>' + '<response>' + `<dial record=\"true\" limittime=\"1000\" timeout=\"30\" moh=\"ring\" >${destinationNumber}</dial>` + '</response>';\n  log('info', out);\n  return out;\n}\n\nasync function hangupResponse() {\n  log('info', 'start');\n  const out = '<?xml version=\"1.0\" encoding=\"UTF-8\"?>' + '<response>' + '<hangup></hangup>' + '</response>';\n  log('info', out);\n  return out;\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJpbml0Q2FsbCIsIl9pZCIsImRpZE51bWJlciIsImluaXRpYXRvck51bWJlciIsImxvZyIsImF4aW9zIiwicmVxdWlyZSIsImFwaUtleSIsImFwcGxpY2F0aW9uVXJsIiwiVVJMIiwiY29uZmlnIiwiYXBwbGljYXRpb25fdXJsIiwidXJsIiwib3JpZ2luIiwiQVBJX1VSTCIsInNlYXJjaFBhcmFtcyIsInNldCIsImRlZmF1bHQiLCJnZXQiLCJocmVmIiwib3V0Z29pbmdDYWxsUmVzcG9uc2UiLCJkZXN0aW5hdGlvbk51bWJlciIsIm91dCIsImhhbmd1cFJlc3BvbnNlIl0sInNvdXJjZVJvb3QiOiIvVXNlcnMvcmFtaXJlZGR5Y2hhcml0aGEvZ2l0LWV4cGxvcmUvc2VydmljZXMvIiwic291cmNlcyI6WyJLb29rb29TZXJ2aWNlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIGVzbGludC1kaXNhYmxlIGltcG9ydC9uby11bnJlc29sdmVkICovXG5pbXBvcnQgY29uZmlnIGZyb20gXCIuLi9jb25maWcvaW5kZXhcIjtcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGluaXRDYWxsKHsgX2lkLCBkaWROdW1iZXIsIGluaXRpYXRvck51bWJlciB9KSB7XG4gIGxvZyhcImluZm9cIiwgeyBfaWQsIGRpZE51bWJlciwgaW5pdGlhdG9yTnVtYmVyIH0pO1xuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZ2xvYmFsLXJlcXVpcmVcbiAgY29uc3QgYXhpb3MgPSByZXF1aXJlKFwiYXhpb3NcIik7XG4gIGNvbnN0IGFwaUtleSA9IFwiS0syMzJjOTgwNjkwYzNjZDM1YmM5Y2UxOGRiOTQ3N2Q4YlwiO1xuICBjb25zdCBhcHBsaWNhdGlvblVybCA9IG5ldyBVUkwoY29uZmlnLmFwcGxpY2F0aW9uX3VybCk7XG4gIC8vIGNvbnNvbGUubG9nKFwiKysrKysrKysrKysrKysrKysrKyB0aGUgYXBwbGljYWl0b24gdXJsIGlzIFwiK2FwcGxpY2F0aW9uVXJsLm9yaWdpbilcbiAgY29uc3QgdXJsID0gYCR7YXBwbGljYXRpb25Vcmwub3JpZ2lufS92MS9vcmdhbmlzYXRpb24vb3V0Ym91bmQtY2FsbC9leHRlcm5hbC9jYWxsL2hhbmRsZS8ke19pZH1gO1xuICBsb2coXCJpbmZvXCIsIHVybCk7XG4gIC8vIGNvbnNvbGUubG9nKCdVUkwgRk9SIEtPT0tPT1xcblxcblxcblxcblxcbicrdXJsKTtcbiAgY29uc3QgQVBJX1VSTCA9IG5ldyBVUkwoXCJodHRwOi8va29va29vLmluL291dGJvdW5kL291dGJvdW5kLnBocFwiKTtcbiAgQVBJX1VSTC5zZWFyY2hQYXJhbXMuc2V0KFwiYXBpX2tleVwiLCBhcGlLZXkpO1xuICBBUElfVVJMLnNlYXJjaFBhcmFtcy5zZXQoXCJwaG9uZV9ub1wiLCBpbml0aWF0b3JOdW1iZXIpO1xuICBBUElfVVJMLnNlYXJjaFBhcmFtcy5zZXQoXCJjYWxsZXJfaWRcIiwgZGlkTnVtYmVyKTtcbiAgQVBJX1VSTC5zZWFyY2hQYXJhbXMuc2V0KFwib3V0Ym91bmRfdmVyc2lvblwiLCBcIjJcIik7XG4gIEFQSV9VUkwuc2VhcmNoUGFyYW1zLnNldChcInVybFwiLCB1cmwpO1xuXG4gIGxvZyhcImluZm9cIiwgXCJlbmRcIik7XG4gIHJldHVybiBheGlvcy5kZWZhdWx0LmdldChBUElfVVJMLmhyZWYpO1xufVxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIG91dGdvaW5nQ2FsbFJlc3BvbnNlICh7IGRlc3RpbmF0aW9uTnVtYmVyIH0pIHtcbiAgbG9nKCdpbmZvJywgJ3N0YXJ0Jyk7XG4gIGNvbnN0IG91dCA9ICc8P3htbCB2ZXJzaW9uPVwiMS4wXCIgZW5jb2Rpbmc9XCJVVEYtOFwiPz4nICtcbiAgICAnPHJlc3BvbnNlPicgK1xuICAgIGA8ZGlhbCByZWNvcmQ9XCJ0cnVlXCIgbGltaXR0aW1lPVwiMTAwMFwiIHRpbWVvdXQ9XCIzMFwiIG1vaD1cInJpbmdcIiA+JHtkZXN0aW5hdGlvbk51bWJlcn08L2RpYWw+YCArXG4gICAgJzwvcmVzcG9uc2U+JztcbiAgbG9nKCdpbmZvJywgb3V0KTtcbiAgcmV0dXJuIG91dDtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGhhbmd1cFJlc3BvbnNlICgpIHtcbiAgbG9nKCdpbmZvJywgJ3N0YXJ0Jyk7XG4gIGNvbnN0IG91dCA9ICc8P3htbCB2ZXJzaW9uPVwiMS4wXCIgZW5jb2Rpbmc9XCJVVEYtOFwiPz4nICtcbiAgICAnPHJlc3BvbnNlPicgK1xuICAgICc8aGFuZ3VwPjwvaGFuZ3VwPicgK1xuICAgICc8L3Jlc3BvbnNlPic7XG4gIGxvZygnaW5mbycsIG91dCk7XG4gIHJldHVybiBvdXQ7XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUNBOzs7O0FBREE7QUFHTyxlQUFlQSxRQUFmLENBQXdCO0VBQUVDLEdBQUY7RUFBT0MsU0FBUDtFQUFrQkM7QUFBbEIsQ0FBeEIsRUFBNkQ7RUFDbEVDLEdBQUcsQ0FBQyxNQUFELEVBQVM7SUFBRUgsR0FBRjtJQUFPQyxTQUFQO0lBQWtCQztFQUFsQixDQUFULENBQUgsQ0FEa0UsQ0FFbEU7O0VBQ0EsTUFBTUUsS0FBSyxHQUFHQyxPQUFPLENBQUMsT0FBRCxDQUFyQjs7RUFDQSxNQUFNQyxNQUFNLEdBQUcsb0NBQWY7RUFDQSxNQUFNQyxjQUFjLEdBQUcsSUFBSUMsR0FBSixDQUFRQyxlQUFPQyxlQUFmLENBQXZCLENBTGtFLENBTWxFOztFQUNBLE1BQU1DLEdBQUcsR0FBSSxHQUFFSixjQUFjLENBQUNLLE1BQU8sdURBQXNEWixHQUFJLEVBQS9GO0VBQ0FHLEdBQUcsQ0FBQyxNQUFELEVBQVNRLEdBQVQsQ0FBSCxDQVJrRSxDQVNsRTs7RUFDQSxNQUFNRSxPQUFPLEdBQUcsSUFBSUwsR0FBSixDQUFRLHdDQUFSLENBQWhCO0VBQ0FLLE9BQU8sQ0FBQ0MsWUFBUixDQUFxQkMsR0FBckIsQ0FBeUIsU0FBekIsRUFBb0NULE1BQXBDO0VBQ0FPLE9BQU8sQ0FBQ0MsWUFBUixDQUFxQkMsR0FBckIsQ0FBeUIsVUFBekIsRUFBcUNiLGVBQXJDO0VBQ0FXLE9BQU8sQ0FBQ0MsWUFBUixDQUFxQkMsR0FBckIsQ0FBeUIsV0FBekIsRUFBc0NkLFNBQXRDO0VBQ0FZLE9BQU8sQ0FBQ0MsWUFBUixDQUFxQkMsR0FBckIsQ0FBeUIsa0JBQXpCLEVBQTZDLEdBQTdDO0VBQ0FGLE9BQU8sQ0FBQ0MsWUFBUixDQUFxQkMsR0FBckIsQ0FBeUIsS0FBekIsRUFBZ0NKLEdBQWhDO0VBRUFSLEdBQUcsQ0FBQyxNQUFELEVBQVMsS0FBVCxDQUFIO0VBQ0EsT0FBT0MsS0FBSyxDQUFDWSxPQUFOLENBQWNDLEdBQWQsQ0FBa0JKLE9BQU8sQ0FBQ0ssSUFBMUIsQ0FBUDtBQUNEOztBQUNNLGVBQWVDLG9CQUFmLENBQXFDO0VBQUVDO0FBQUYsQ0FBckMsRUFBNEQ7RUFDakVqQixHQUFHLENBQUMsTUFBRCxFQUFTLE9BQVQsQ0FBSDtFQUNBLE1BQU1rQixHQUFHLEdBQUcsMkNBQ1YsWUFEVSxHQUVULGlFQUFnRUQsaUJBQWtCLFNBRnpFLEdBR1YsYUFIRjtFQUlBakIsR0FBRyxDQUFDLE1BQUQsRUFBU2tCLEdBQVQsQ0FBSDtFQUNBLE9BQU9BLEdBQVA7QUFDRDs7QUFFTSxlQUFlQyxjQUFmLEdBQWlDO0VBQ3RDbkIsR0FBRyxDQUFDLE1BQUQsRUFBUyxPQUFULENBQUg7RUFDQSxNQUFNa0IsR0FBRyxHQUFHLDJDQUNWLFlBRFUsR0FFVixtQkFGVSxHQUdWLGFBSEY7RUFJQWxCLEdBQUcsQ0FBQyxNQUFELEVBQVNrQixHQUFULENBQUg7RUFDQSxPQUFPQSxHQUFQO0FBQ0QifQ==","map":{"version":3,"names":["initCall","_id","didNumber","initiatorNumber","log","axios","require","apiKey","applicationUrl","URL","config","application_url","url","origin","API_URL","searchParams","set","default","get","href","outgoingCallResponse","destinationNumber","out","hangupResponse"],"sourceRoot":"/Users/ramireddycharitha/git-explore/services/","sources":["KookooService.js"],"sourcesContent":["/* eslint-disable import/no-unresolved */\nimport config from \"../config/index\";\n\nexport async function initCall({ _id, didNumber, initiatorNumber }) {\n  log(\"info\", { _id, didNumber, initiatorNumber });\n  // eslint-disable-next-line global-require\n  const axios = require(\"axios\");\n  const apiKey = \"KK232c980690c3cd35bc9ce18db9477d8b\";\n  const applicationUrl = new URL(config.application_url);\n  // console.log(\"+++++++++++++++++++ the applicaiton url is \"+applicationUrl.origin)\n  const url = `${applicationUrl.origin}/v1/organisation/outbound-call/external/call/handle/${_id}`;\n  log(\"info\", url);\n  // console.log('URL FOR KOOKOO\\n\\n\\n\\n\\n'+url);\n  const API_URL = new URL(\"http://kookoo.in/outbound/outbound.php\");\n  API_URL.searchParams.set(\"api_key\", apiKey);\n  API_URL.searchParams.set(\"phone_no\", initiatorNumber);\n  API_URL.searchParams.set(\"caller_id\", didNumber);\n  API_URL.searchParams.set(\"outbound_version\", \"2\");\n  API_URL.searchParams.set(\"url\", url);\n\n  log(\"info\", \"end\");\n  return axios.default.get(API_URL.href);\n}\nexport async function outgoingCallResponse ({ destinationNumber }) {\n  log('info', 'start');\n  const out = '<?xml version=\"1.0\" encoding=\"UTF-8\"?>' +\n    '<response>' +\n    `<dial record=\"true\" limittime=\"1000\" timeout=\"30\" moh=\"ring\" >${destinationNumber}</dial>` +\n    '</response>';\n  log('info', out);\n  return out;\n}\n\nexport async function hangupResponse () {\n  log('info', 'start');\n  const out = '<?xml version=\"1.0\" encoding=\"UTF-8\"?>' +\n    '<response>' +\n    '<hangup></hangup>' +\n    '</response>';\n  log('info', out);\n  return out;\n}\n"],"mappings":";;;;;;;;;AACA;;;;AADA;AAGO,eAAeA,QAAf,CAAwB;EAAEC,GAAF;EAAOC,SAAP;EAAkBC;AAAlB,CAAxB,EAA6D;EAClEC,GAAG,CAAC,MAAD,EAAS;IAAEH,GAAF;IAAOC,SAAP;IAAkBC;EAAlB,CAAT,CAAH,CADkE,CAElE;;EACA,MAAME,KAAK,GAAGC,OAAO,CAAC,OAAD,CAArB;;EACA,MAAMC,MAAM,GAAG,oCAAf;EACA,MAAMC,cAAc,GAAG,IAAIC,GAAJ,CAAQC,eAAOC,eAAf,CAAvB,CALkE,CAMlE;;EACA,MAAMC,GAAG,GAAI,GAAEJ,cAAc,CAACK,MAAO,uDAAsDZ,GAAI,EAA/F;EACAG,GAAG,CAAC,MAAD,EAASQ,GAAT,CAAH,CARkE,CASlE;;EACA,MAAME,OAAO,GAAG,IAAIL,GAAJ,CAAQ,wCAAR,CAAhB;EACAK,OAAO,CAACC,YAAR,CAAqBC,GAArB,CAAyB,SAAzB,EAAoCT,MAApC;EACAO,OAAO,CAACC,YAAR,CAAqBC,GAArB,CAAyB,UAAzB,EAAqCb,eAArC;EACAW,OAAO,CAACC,YAAR,CAAqBC,GAArB,CAAyB,WAAzB,EAAsCd,SAAtC;EACAY,OAAO,CAACC,YAAR,CAAqBC,GAArB,CAAyB,kBAAzB,EAA6C,GAA7C;EACAF,OAAO,CAACC,YAAR,CAAqBC,GAArB,CAAyB,KAAzB,EAAgCJ,GAAhC;EAEAR,GAAG,CAAC,MAAD,EAAS,KAAT,CAAH;EACA,OAAOC,KAAK,CAACY,OAAN,CAAcC,GAAd,CAAkBJ,OAAO,CAACK,IAA1B,CAAP;AACD;;AACM,eAAeC,oBAAf,CAAqC;EAAEC;AAAF,CAArC,EAA4D;EACjEjB,GAAG,CAAC,MAAD,EAAS,OAAT,CAAH;EACA,MAAMkB,GAAG,GAAG,2CACV,YADU,GAET,iEAAgED,iBAAkB,SAFzE,GAGV,aAHF;EAIAjB,GAAG,CAAC,MAAD,EAASkB,GAAT,CAAH;EACA,OAAOA,GAAP;AACD;;AAEM,eAAeC,cAAf,GAAiC;EACtCnB,GAAG,CAAC,MAAD,EAAS,OAAT,CAAH;EACA,MAAMkB,GAAG,GAAG,2CACV,YADU,GAEV,mBAFU,GAGV,aAHF;EAIAlB,GAAG,CAAC,MAAD,EAASkB,GAAT,CAAH;EACA,OAAOA,GAAP;AACD"}},"mtime":1654155751043},"{\"assumptions\":{},\"sourceRoot\":\"/Users/ramireddycharitha/git-explore/services/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/ramireddycharitha/git-explore\",\"filename\":\"/Users/ramireddycharitha/git-explore/services/callEventService.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"default\",\"root\":\"/Users/ramireddycharitha/git-explore\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.17.10:default":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Dial = Dial;\nexports.Disconnect = Disconnect;\nexports.Hangup = Hangup;\nexports.NewCall = NewCall;\n\nvar mongoose = _interopRequireWildcard(require(\"mongoose\"));\n\nvar AbstractModels = _interopRequireWildcard(require(\"../models/AbstractModels\"));\n\nvar kookooService = _interopRequireWildcard(require(\"./KookooService\"));\n\nvar _mongodb = require(\"mongodb\");\n\nvar _index = require(\"../models/mainDbSchema/index\");\n\nvar _DeductCallMinutesService = require(\"./DeductCallMinutesService\");\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\n/* eslint no-import-assign: 0 */\nmongoose.Promise = global.Promise; // ignore: no-import-assign\n\nasync function NewCall(call, data) {\n  // logToJSON('info', { call, data });\n  // console.log('NEWCAll \\n' + call, data);\n  await AbstractModels.mongoFindOneAndUpdate(_index.BusinessCalls, {\n    _id: (0, _mongodb.ObjectId)(call._id)\n  }, {\n    status: data.status,\n    time: new Date().toISOString()\n  }); // const remainingBalance = await get_remaining_call_minutes(call.organisationId);\n  // if (remainingBalance < 0)\n\n  const outgoingCallResponse = kookooService.outgoingCallResponse({\n    destinationNumber: call.destinationNumber\n  }); // console.log('outgoingCallResponse \\n \\n \\n' + outgoingCallResponse);\n\n  return outgoingCallResponse;\n}\n\nasync function Dial(call, data) {\n  const duration = data.callduration; // console.log('CALL HANDLE DIAL DURATION\\n\\n\\n\\n\\n\\n\\n'+ duration);\n\n  await AbstractModels.mongoFindOneAndUpdate(_index.BusinessCalls, {\n    _id: call._id\n  }, {\n    duration,\n    status: data.status,\n    recording: data.data,\n    isCallEnded: true\n  });\n  await (0, _DeductCallMinutesService.adjust_organisation_call_minutes)(call.organisationId, duration);\n  const kookooHangupResponse = kookooService.hangupResponse();\n  log('info', kookooHangupResponse);\n  return kookooHangupResponse;\n}\n\nasync function Hangup(call, data) {\n  log('info', {\n    call,\n    data\n  });\n  const duration = data.callduration; // console.log('CALL HANDLE HANGUP DURATION \\n\\n\\n\\n\\n'+ duration);\n\n  await AbstractModels.mongoFindOneAndUpdate(_index.BusinessCalls, {\n    _id: call._id\n  }, {\n    duration,\n    status: data.status,\n    isCallEnded: true,\n    recording: data.data\n  });\n  await (0, _DeductCallMinutesService.adjust_organisation_call_minutes)(call.organisationId, duration);\n  log('info', 'end');\n  return '';\n}\n\nasync function Disconnect(call, data) {\n  log('info', {\n    call,\n    data\n  }); // console.log('CALL HANDLE DISCONNECT \\n\\n\\n\\n\\n'+ data);\n  // return await AbstractModels.mongoFindOneAndUpdate(BusinessCalls, { _id: call._id }, {\n  //   status: data.status,\n  //   duration: data.callduration,\n  //   isCallEnded: true,\n  // });\n\n  log('info', 'end');\n  return '';\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJtb25nb29zZSIsIlByb21pc2UiLCJnbG9iYWwiLCJOZXdDYWxsIiwiY2FsbCIsImRhdGEiLCJBYnN0cmFjdE1vZGVscyIsIm1vbmdvRmluZE9uZUFuZFVwZGF0ZSIsIkJ1c2luZXNzQ2FsbHMiLCJfaWQiLCJzdGF0dXMiLCJ0aW1lIiwiRGF0ZSIsInRvSVNPU3RyaW5nIiwib3V0Z29pbmdDYWxsUmVzcG9uc2UiLCJrb29rb29TZXJ2aWNlIiwiZGVzdGluYXRpb25OdW1iZXIiLCJEaWFsIiwiZHVyYXRpb24iLCJjYWxsZHVyYXRpb24iLCJyZWNvcmRpbmciLCJpc0NhbGxFbmRlZCIsIm9yZ2FuaXNhdGlvbklkIiwia29va29vSGFuZ3VwUmVzcG9uc2UiLCJoYW5ndXBSZXNwb25zZSIsImxvZyIsIkhhbmd1cCIsIkRpc2Nvbm5lY3QiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy9yYW1pcmVkZHljaGFyaXRoYS9naXQtZXhwbG9yZS9zZXJ2aWNlcy8iLCJzb3VyY2VzIjpbImNhbGxFdmVudFNlcnZpY2UuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyogZXNsaW50IG5vLWltcG9ydC1hc3NpZ246IDAgKi9cbmltcG9ydCAqIGFzIG1vbmdvb3NlIGZyb20gJ21vbmdvb3NlJztcbmltcG9ydCAqIGFzIEFic3RyYWN0TW9kZWxzIGZyb20gXCIuLi9tb2RlbHMvQWJzdHJhY3RNb2RlbHNcIjtcbmltcG9ydCAqIGFzIGtvb2tvb1NlcnZpY2UgZnJvbSBcIi4vS29va29vU2VydmljZVwiO1xuaW1wb3J0IHsgT2JqZWN0SWQgfSBmcm9tICdtb25nb2RiJztcbmltcG9ydCB7QnVzaW5lc3NDYWxsc30gZnJvbSBcIi4uL21vZGVscy9tYWluRGJTY2hlbWEvaW5kZXhcIjtcbmltcG9ydCB7IGFkanVzdF9vcmdhbmlzYXRpb25fY2FsbF9taW51dGVzIH0gZnJvbSBcIi4vRGVkdWN0Q2FsbE1pbnV0ZXNTZXJ2aWNlXCI7XG5cbm1vbmdvb3NlLlByb21pc2UgPSBnbG9iYWwuUHJvbWlzZTsgLy8gaWdub3JlOiBuby1pbXBvcnQtYXNzaWduXG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBOZXdDYWxsIChjYWxsLCBkYXRhKSB7XG4gIC8vIGxvZ1RvSlNPTignaW5mbycsIHsgY2FsbCwgZGF0YSB9KTtcbiAgLy8gY29uc29sZS5sb2coJ05FV0NBbGwgXFxuJyArIGNhbGwsIGRhdGEpO1xuICBhd2FpdCBBYnN0cmFjdE1vZGVscy5tb25nb0ZpbmRPbmVBbmRVcGRhdGUoQnVzaW5lc3NDYWxscywgeyBfaWQ6T2JqZWN0SWQoY2FsbC5faWQpIH0sIHtcbiAgICBzdGF0dXM6IGRhdGEuc3RhdHVzLFxuICAgIHRpbWU6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICB9KTtcblxuICAvLyBjb25zdCByZW1haW5pbmdCYWxhbmNlID0gYXdhaXQgZ2V0X3JlbWFpbmluZ19jYWxsX21pbnV0ZXMoY2FsbC5vcmdhbmlzYXRpb25JZCk7XG4gIC8vIGlmIChyZW1haW5pbmdCYWxhbmNlIDwgMClcblxuICBjb25zdCBvdXRnb2luZ0NhbGxSZXNwb25zZSA9IGtvb2tvb1NlcnZpY2Uub3V0Z29pbmdDYWxsUmVzcG9uc2UoeyBkZXN0aW5hdGlvbk51bWJlcjogY2FsbC5kZXN0aW5hdGlvbk51bWJlciB9KTtcbiAgLy8gY29uc29sZS5sb2coJ291dGdvaW5nQ2FsbFJlc3BvbnNlIFxcbiBcXG4gXFxuJyArIG91dGdvaW5nQ2FsbFJlc3BvbnNlKTtcbiAgcmV0dXJuIG91dGdvaW5nQ2FsbFJlc3BvbnNlO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gRGlhbCAoY2FsbCwgZGF0YSkge1xuICBjb25zdCBkdXJhdGlvbiA9IGRhdGEuY2FsbGR1cmF0aW9uO1xuICAvLyBjb25zb2xlLmxvZygnQ0FMTCBIQU5ETEUgRElBTCBEVVJBVElPTlxcblxcblxcblxcblxcblxcblxcbicrIGR1cmF0aW9uKTtcbiAgYXdhaXQgQWJzdHJhY3RNb2RlbHMubW9uZ29GaW5kT25lQW5kVXBkYXRlKEJ1c2luZXNzQ2FsbHMsIHsgX2lkOiBjYWxsLl9pZCB9LCB7XG4gICAgZHVyYXRpb24sXG4gICAgc3RhdHVzOiBkYXRhLnN0YXR1cyxcbiAgICByZWNvcmRpbmc6IGRhdGEuZGF0YSxcbiAgICBpc0NhbGxFbmRlZDogdHJ1ZVxuICB9KTtcblxuICBhd2FpdCBhZGp1c3Rfb3JnYW5pc2F0aW9uX2NhbGxfbWludXRlcyhjYWxsLm9yZ2FuaXNhdGlvbklkLCBkdXJhdGlvbik7XG5cbiAgY29uc3Qga29va29vSGFuZ3VwUmVzcG9uc2UgPSBrb29rb29TZXJ2aWNlLmhhbmd1cFJlc3BvbnNlKCk7XG4gIGxvZygnaW5mbycsIGtvb2tvb0hhbmd1cFJlc3BvbnNlKTtcbiAgcmV0dXJuIGtvb2tvb0hhbmd1cFJlc3BvbnNlO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gSGFuZ3VwIChjYWxsLCBkYXRhKSB7XG4gIGxvZygnaW5mbycsIHsgY2FsbCwgZGF0YSB9KTtcbiAgY29uc3QgZHVyYXRpb24gPSBkYXRhLmNhbGxkdXJhdGlvbjtcbiAgLy8gY29uc29sZS5sb2coJ0NBTEwgSEFORExFIEhBTkdVUCBEVVJBVElPTiBcXG5cXG5cXG5cXG5cXG4nKyBkdXJhdGlvbik7XG4gIGF3YWl0IEFic3RyYWN0TW9kZWxzLm1vbmdvRmluZE9uZUFuZFVwZGF0ZShCdXNpbmVzc0NhbGxzLCB7IF9pZDogY2FsbC5faWQgfSwge1xuICAgIGR1cmF0aW9uLFxuICAgIHN0YXR1czogZGF0YS5zdGF0dXMsXG4gICAgaXNDYWxsRW5kZWQ6IHRydWUsXG4gICAgcmVjb3JkaW5nOiBkYXRhLmRhdGFcbiAgfSk7XG5cbiAgYXdhaXQgYWRqdXN0X29yZ2FuaXNhdGlvbl9jYWxsX21pbnV0ZXMoY2FsbC5vcmdhbmlzYXRpb25JZCwgZHVyYXRpb24pO1xuXG4gIGxvZygnaW5mbycsICdlbmQnKTtcbiAgcmV0dXJuICcnO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gRGlzY29ubmVjdCAoY2FsbCwgZGF0YSkge1xuICBsb2coJ2luZm8nLCB7IGNhbGwsIGRhdGEgfSk7XG4gIC8vIGNvbnNvbGUubG9nKCdDQUxMIEhBTkRMRSBESVNDT05ORUNUIFxcblxcblxcblxcblxcbicrIGRhdGEpO1xuICAvLyByZXR1cm4gYXdhaXQgQWJzdHJhY3RNb2RlbHMubW9uZ29GaW5kT25lQW5kVXBkYXRlKEJ1c2luZXNzQ2FsbHMsIHsgX2lkOiBjYWxsLl9pZCB9LCB7XG4gIC8vICAgc3RhdHVzOiBkYXRhLnN0YXR1cyxcbiAgLy8gICBkdXJhdGlvbjogZGF0YS5jYWxsZHVyYXRpb24sXG4gIC8vICAgaXNDYWxsRW5kZWQ6IHRydWUsXG4gIC8vIH0pO1xuXG4gIGxvZygnaW5mbycsICdlbmQnKTtcbiAgcmV0dXJuICcnO1xufVxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7Ozs7OztBQU5BO0FBUUFBLFFBQVEsQ0FBQ0MsT0FBVCxHQUFtQkMsTUFBTSxDQUFDRCxPQUExQixDLENBQW1DOztBQUU1QixlQUFlRSxPQUFmLENBQXdCQyxJQUF4QixFQUE4QkMsSUFBOUIsRUFBb0M7RUFDekM7RUFDQTtFQUNBLE1BQU1DLGNBQWMsQ0FBQ0MscUJBQWYsQ0FBcUNDLG9CQUFyQyxFQUFvRDtJQUFFQyxHQUFHLEVBQUMsdUJBQVNMLElBQUksQ0FBQ0ssR0FBZDtFQUFOLENBQXBELEVBQWdGO0lBQ3BGQyxNQUFNLEVBQUVMLElBQUksQ0FBQ0ssTUFEdUU7SUFFcEZDLElBQUksRUFBRSxJQUFJQyxJQUFKLEdBQVdDLFdBQVg7RUFGOEUsQ0FBaEYsQ0FBTixDQUh5QyxDQVF6QztFQUNBOztFQUVBLE1BQU1DLG9CQUFvQixHQUFHQyxhQUFhLENBQUNELG9CQUFkLENBQW1DO0lBQUVFLGlCQUFpQixFQUFFWixJQUFJLENBQUNZO0VBQTFCLENBQW5DLENBQTdCLENBWHlDLENBWXpDOztFQUNBLE9BQU9GLG9CQUFQO0FBQ0Q7O0FBRU0sZUFBZUcsSUFBZixDQUFxQmIsSUFBckIsRUFBMkJDLElBQTNCLEVBQWlDO0VBQ3RDLE1BQU1hLFFBQVEsR0FBR2IsSUFBSSxDQUFDYyxZQUF0QixDQURzQyxDQUV0Qzs7RUFDQSxNQUFNYixjQUFjLENBQUNDLHFCQUFmLENBQXFDQyxvQkFBckMsRUFBb0Q7SUFBRUMsR0FBRyxFQUFFTCxJQUFJLENBQUNLO0VBQVosQ0FBcEQsRUFBdUU7SUFDM0VTLFFBRDJFO0lBRTNFUixNQUFNLEVBQUVMLElBQUksQ0FBQ0ssTUFGOEQ7SUFHM0VVLFNBQVMsRUFBRWYsSUFBSSxDQUFDQSxJQUgyRDtJQUkzRWdCLFdBQVcsRUFBRTtFQUo4RCxDQUF2RSxDQUFOO0VBT0EsTUFBTSxnRUFBaUNqQixJQUFJLENBQUNrQixjQUF0QyxFQUFzREosUUFBdEQsQ0FBTjtFQUVBLE1BQU1LLG9CQUFvQixHQUFHUixhQUFhLENBQUNTLGNBQWQsRUFBN0I7RUFDQUMsR0FBRyxDQUFDLE1BQUQsRUFBU0Ysb0JBQVQsQ0FBSDtFQUNBLE9BQU9BLG9CQUFQO0FBQ0Q7O0FBRU0sZUFBZUcsTUFBZixDQUF1QnRCLElBQXZCLEVBQTZCQyxJQUE3QixFQUFtQztFQUN4Q29CLEdBQUcsQ0FBQyxNQUFELEVBQVM7SUFBRXJCLElBQUY7SUFBUUM7RUFBUixDQUFULENBQUg7RUFDQSxNQUFNYSxRQUFRLEdBQUdiLElBQUksQ0FBQ2MsWUFBdEIsQ0FGd0MsQ0FHeEM7O0VBQ0EsTUFBTWIsY0FBYyxDQUFDQyxxQkFBZixDQUFxQ0Msb0JBQXJDLEVBQW9EO0lBQUVDLEdBQUcsRUFBRUwsSUFBSSxDQUFDSztFQUFaLENBQXBELEVBQXVFO0lBQzNFUyxRQUQyRTtJQUUzRVIsTUFBTSxFQUFFTCxJQUFJLENBQUNLLE1BRjhEO0lBRzNFVyxXQUFXLEVBQUUsSUFIOEQ7SUFJM0VELFNBQVMsRUFBRWYsSUFBSSxDQUFDQTtFQUoyRCxDQUF2RSxDQUFOO0VBT0EsTUFBTSxnRUFBaUNELElBQUksQ0FBQ2tCLGNBQXRDLEVBQXNESixRQUF0RCxDQUFOO0VBRUFPLEdBQUcsQ0FBQyxNQUFELEVBQVMsS0FBVCxDQUFIO0VBQ0EsT0FBTyxFQUFQO0FBQ0Q7O0FBRU0sZUFBZUUsVUFBZixDQUEyQnZCLElBQTNCLEVBQWlDQyxJQUFqQyxFQUF1QztFQUM1Q29CLEdBQUcsQ0FBQyxNQUFELEVBQVM7SUFBRXJCLElBQUY7SUFBUUM7RUFBUixDQUFULENBQUgsQ0FENEMsQ0FFNUM7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBOztFQUVBb0IsR0FBRyxDQUFDLE1BQUQsRUFBUyxLQUFULENBQUg7RUFDQSxPQUFPLEVBQVA7QUFDRCJ9","map":{"version":3,"names":["mongoose","Promise","global","NewCall","call","data","AbstractModels","mongoFindOneAndUpdate","BusinessCalls","_id","status","time","Date","toISOString","outgoingCallResponse","kookooService","destinationNumber","Dial","duration","callduration","recording","isCallEnded","organisationId","kookooHangupResponse","hangupResponse","log","Hangup","Disconnect"],"sourceRoot":"/Users/ramireddycharitha/git-explore/services/","sources":["callEventService.js"],"sourcesContent":["/* eslint no-import-assign: 0 */\nimport * as mongoose from 'mongoose';\nimport * as AbstractModels from \"../models/AbstractModels\";\nimport * as kookooService from \"./KookooService\";\nimport { ObjectId } from 'mongodb';\nimport {BusinessCalls} from \"../models/mainDbSchema/index\";\nimport { adjust_organisation_call_minutes } from \"./DeductCallMinutesService\";\n\nmongoose.Promise = global.Promise; // ignore: no-import-assign\n\nexport async function NewCall (call, data) {\n  // logToJSON('info', { call, data });\n  // console.log('NEWCAll \\n' + call, data);\n  await AbstractModels.mongoFindOneAndUpdate(BusinessCalls, { _id:ObjectId(call._id) }, {\n    status: data.status,\n    time: new Date().toISOString()\n  });\n\n  // const remainingBalance = await get_remaining_call_minutes(call.organisationId);\n  // if (remainingBalance < 0)\n\n  const outgoingCallResponse = kookooService.outgoingCallResponse({ destinationNumber: call.destinationNumber });\n  // console.log('outgoingCallResponse \\n \\n \\n' + outgoingCallResponse);\n  return outgoingCallResponse;\n}\n\nexport async function Dial (call, data) {\n  const duration = data.callduration;\n  // console.log('CALL HANDLE DIAL DURATION\\n\\n\\n\\n\\n\\n\\n'+ duration);\n  await AbstractModels.mongoFindOneAndUpdate(BusinessCalls, { _id: call._id }, {\n    duration,\n    status: data.status,\n    recording: data.data,\n    isCallEnded: true\n  });\n\n  await adjust_organisation_call_minutes(call.organisationId, duration);\n\n  const kookooHangupResponse = kookooService.hangupResponse();\n  log('info', kookooHangupResponse);\n  return kookooHangupResponse;\n}\n\nexport async function Hangup (call, data) {\n  log('info', { call, data });\n  const duration = data.callduration;\n  // console.log('CALL HANDLE HANGUP DURATION \\n\\n\\n\\n\\n'+ duration);\n  await AbstractModels.mongoFindOneAndUpdate(BusinessCalls, { _id: call._id }, {\n    duration,\n    status: data.status,\n    isCallEnded: true,\n    recording: data.data\n  });\n\n  await adjust_organisation_call_minutes(call.organisationId, duration);\n\n  log('info', 'end');\n  return '';\n}\n\nexport async function Disconnect (call, data) {\n  log('info', { call, data });\n  // console.log('CALL HANDLE DISCONNECT \\n\\n\\n\\n\\n'+ data);\n  // return await AbstractModels.mongoFindOneAndUpdate(BusinessCalls, { _id: call._id }, {\n  //   status: data.status,\n  //   duration: data.callduration,\n  //   isCallEnded: true,\n  // });\n\n  log('info', 'end');\n  return '';\n}\n"],"mappings":";;;;;;;;;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;;;;;AANA;AAQAA,QAAQ,CAACC,OAAT,GAAmBC,MAAM,CAACD,OAA1B,C,CAAmC;;AAE5B,eAAeE,OAAf,CAAwBC,IAAxB,EAA8BC,IAA9B,EAAoC;EACzC;EACA;EACA,MAAMC,cAAc,CAACC,qBAAf,CAAqCC,oBAArC,EAAoD;IAAEC,GAAG,EAAC,uBAASL,IAAI,CAACK,GAAd;EAAN,CAApD,EAAgF;IACpFC,MAAM,EAAEL,IAAI,CAACK,MADuE;IAEpFC,IAAI,EAAE,IAAIC,IAAJ,GAAWC,WAAX;EAF8E,CAAhF,CAAN,CAHyC,CAQzC;EACA;;EAEA,MAAMC,oBAAoB,GAAGC,aAAa,CAACD,oBAAd,CAAmC;IAAEE,iBAAiB,EAAEZ,IAAI,CAACY;EAA1B,CAAnC,CAA7B,CAXyC,CAYzC;;EACA,OAAOF,oBAAP;AACD;;AAEM,eAAeG,IAAf,CAAqBb,IAArB,EAA2BC,IAA3B,EAAiC;EACtC,MAAMa,QAAQ,GAAGb,IAAI,CAACc,YAAtB,CADsC,CAEtC;;EACA,MAAMb,cAAc,CAACC,qBAAf,CAAqCC,oBAArC,EAAoD;IAAEC,GAAG,EAAEL,IAAI,CAACK;EAAZ,CAApD,EAAuE;IAC3ES,QAD2E;IAE3ER,MAAM,EAAEL,IAAI,CAACK,MAF8D;IAG3EU,SAAS,EAAEf,IAAI,CAACA,IAH2D;IAI3EgB,WAAW,EAAE;EAJ8D,CAAvE,CAAN;EAOA,MAAM,gEAAiCjB,IAAI,CAACkB,cAAtC,EAAsDJ,QAAtD,CAAN;EAEA,MAAMK,oBAAoB,GAAGR,aAAa,CAACS,cAAd,EAA7B;EACAC,GAAG,CAAC,MAAD,EAASF,oBAAT,CAAH;EACA,OAAOA,oBAAP;AACD;;AAEM,eAAeG,MAAf,CAAuBtB,IAAvB,EAA6BC,IAA7B,EAAmC;EACxCoB,GAAG,CAAC,MAAD,EAAS;IAAErB,IAAF;IAAQC;EAAR,CAAT,CAAH;EACA,MAAMa,QAAQ,GAAGb,IAAI,CAACc,YAAtB,CAFwC,CAGxC;;EACA,MAAMb,cAAc,CAACC,qBAAf,CAAqCC,oBAArC,EAAoD;IAAEC,GAAG,EAAEL,IAAI,CAACK;EAAZ,CAApD,EAAuE;IAC3ES,QAD2E;IAE3ER,MAAM,EAAEL,IAAI,CAACK,MAF8D;IAG3EW,WAAW,EAAE,IAH8D;IAI3ED,SAAS,EAAEf,IAAI,CAACA;EAJ2D,CAAvE,CAAN;EAOA,MAAM,gEAAiCD,IAAI,CAACkB,cAAtC,EAAsDJ,QAAtD,CAAN;EAEAO,GAAG,CAAC,MAAD,EAAS,KAAT,CAAH;EACA,OAAO,EAAP;AACD;;AAEM,eAAeE,UAAf,CAA2BvB,IAA3B,EAAiCC,IAAjC,EAAuC;EAC5CoB,GAAG,CAAC,MAAD,EAAS;IAAErB,IAAF;IAAQC;EAAR,CAAT,CAAH,CAD4C,CAE5C;EACA;EACA;EACA;EACA;EACA;;EAEAoB,GAAG,CAAC,MAAD,EAAS,KAAT,CAAH;EACA,OAAO,EAAP;AACD"}},"mtime":1654155484821},"{\"assumptions\":{},\"sourceRoot\":\"/Users/ramireddycharitha/git-explore/services/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/ramireddycharitha/git-explore\",\"filename\":\"/Users/ramireddycharitha/git-explore/services/DeductCallMinutesService.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"default\",\"root\":\"/Users/ramireddycharitha/git-explore\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.17.10:default":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.get_remaining_call_minutes = exports.adjust_organisation_call_minutes = void 0;\n\nvar AbstractModels = _interopRequireWildcard(require(\"../models/AbstractModels\"));\n\nvar _index = require(\"../models/mainDbSchema/index\");\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nconst get_remaining_call_minutes = async organisation_id => {\n  log(\"info\", {\n    organisation_id\n  });\n  const organisation = await AbstractModels.mongoFindOne(_index.Organisations, {\n    organisation_id: organisation_id\n  });\n  const out = parseInt((organisation.call_minutes_available || 0).toString() || \"0\");\n  log(\"info\", out);\n  console.log('GET REMAINING CALLMINUTES OUT RESPONSE\\n\\n\\n\\n\\n' + out);\n  return out;\n};\n\nexports.get_remaining_call_minutes = get_remaining_call_minutes;\n\nconst adjust_organisation_call_minutes = async (organisation_id, call_duration) => {\n  console.log('ADJUST ORGANISATION CALL MINUTES\\n\\n\\n\\n\\n ', {\n    organisation_id,\n    call_duration\n  });\n  await AbstractModels.mongoUpdateOne(_index.Organisations, {\n    organisation_id\n  }, {\n    $inc: {\n      call_minutes_available: -1 * call_duration\n    }\n  });\n};\n\nexports.adjust_organisation_call_minutes = adjust_organisation_call_minutes;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJnZXRfcmVtYWluaW5nX2NhbGxfbWludXRlcyIsIm9yZ2FuaXNhdGlvbl9pZCIsImxvZyIsIm9yZ2FuaXNhdGlvbiIsIkFic3RyYWN0TW9kZWxzIiwibW9uZ29GaW5kT25lIiwiT3JnYW5pc2F0aW9ucyIsIm91dCIsInBhcnNlSW50IiwiY2FsbF9taW51dGVzX2F2YWlsYWJsZSIsInRvU3RyaW5nIiwiY29uc29sZSIsImFkanVzdF9vcmdhbmlzYXRpb25fY2FsbF9taW51dGVzIiwiY2FsbF9kdXJhdGlvbiIsIm1vbmdvVXBkYXRlT25lIiwiJGluYyJdLCJzb3VyY2VSb290IjoiL1VzZXJzL3JhbWlyZWRkeWNoYXJpdGhhL2dpdC1leHBsb3JlL3NlcnZpY2VzLyIsInNvdXJjZXMiOlsiRGVkdWN0Q2FsbE1pbnV0ZXNTZXJ2aWNlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIEFic3RyYWN0TW9kZWxzIGZyb20gXCIuLi9tb2RlbHMvQWJzdHJhY3RNb2RlbHNcIjtcbmltcG9ydCB7T3JnYW5pc2F0aW9uc30gZnJvbSBcIi4uL21vZGVscy9tYWluRGJTY2hlbWEvaW5kZXhcIjtcblxuZXhwb3J0IGNvbnN0IGdldF9yZW1haW5pbmdfY2FsbF9taW51dGVzID0gYXN5bmMgKG9yZ2FuaXNhdGlvbl9pZCkgPT4ge1xuICBsb2coXCJpbmZvXCIsIHsgb3JnYW5pc2F0aW9uX2lkIH0pO1xuICBjb25zdCBvcmdhbmlzYXRpb24gPSBhd2FpdCBBYnN0cmFjdE1vZGVscy5tb25nb0ZpbmRPbmUoXG4gICAgT3JnYW5pc2F0aW9ucyxcbiAgICB7IG9yZ2FuaXNhdGlvbl9pZDogb3JnYW5pc2F0aW9uX2lkIH1cbiAgKTtcbiAgY29uc3Qgb3V0ID0gcGFyc2VJbnQoKG9yZ2FuaXNhdGlvbi5jYWxsX21pbnV0ZXNfYXZhaWxhYmxlIHx8IDApLnRvU3RyaW5nKCkgfHwgXCIwXCIpO1xuICBsb2coXCJpbmZvXCIsIG91dCk7XG4gIGNvbnNvbGUubG9nKCdHRVQgUkVNQUlOSU5HIENBTExNSU5VVEVTIE9VVCBSRVNQT05TRVxcblxcblxcblxcblxcbicrb3V0KTtcbiAgcmV0dXJuIG91dDtcbn07XG5cbmV4cG9ydCBjb25zdCBhZGp1c3Rfb3JnYW5pc2F0aW9uX2NhbGxfbWludXRlcyA9IGFzeW5jIChvcmdhbmlzYXRpb25faWQsIGNhbGxfZHVyYXRpb24pID0+IHtcbiAgY29uc29sZS5sb2coJ0FESlVTVCBPUkdBTklTQVRJT04gQ0FMTCBNSU5VVEVTXFxuXFxuXFxuXFxuXFxuICcsIHsgb3JnYW5pc2F0aW9uX2lkLCBjYWxsX2R1cmF0aW9uIH0pO1xuICBhd2FpdCBBYnN0cmFjdE1vZGVscy5tb25nb1VwZGF0ZU9uZShcbiAgICBPcmdhbmlzYXRpb25zLFxuICAgIHsgb3JnYW5pc2F0aW9uX2lkIH0sXG4gICAgeyAkaW5jOiB7IGNhbGxfbWludXRlc19hdmFpbGFibGU6IC0xICogY2FsbF9kdXJhdGlvbiB9IH1cbiAgKTtcbn07XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTs7QUFDQTs7Ozs7O0FBRU8sTUFBTUEsMEJBQTBCLEdBQUcsTUFBT0MsZUFBUCxJQUEyQjtFQUNuRUMsR0FBRyxDQUFDLE1BQUQsRUFBUztJQUFFRDtFQUFGLENBQVQsQ0FBSDtFQUNBLE1BQU1FLFlBQVksR0FBRyxNQUFNQyxjQUFjLENBQUNDLFlBQWYsQ0FDekJDLG9CQUR5QixFQUV6QjtJQUFFTCxlQUFlLEVBQUVBO0VBQW5CLENBRnlCLENBQTNCO0VBSUEsTUFBTU0sR0FBRyxHQUFHQyxRQUFRLENBQUMsQ0FBQ0wsWUFBWSxDQUFDTSxzQkFBYixJQUF1QyxDQUF4QyxFQUEyQ0MsUUFBM0MsTUFBeUQsR0FBMUQsQ0FBcEI7RUFDQVIsR0FBRyxDQUFDLE1BQUQsRUFBU0ssR0FBVCxDQUFIO0VBQ0FJLE9BQU8sQ0FBQ1QsR0FBUixDQUFZLHFEQUFtREssR0FBL0Q7RUFDQSxPQUFPQSxHQUFQO0FBQ0QsQ0FWTTs7OztBQVlBLE1BQU1LLGdDQUFnQyxHQUFHLE9BQU9YLGVBQVAsRUFBd0JZLGFBQXhCLEtBQTBDO0VBQ3hGRixPQUFPLENBQUNULEdBQVIsQ0FBWSw2Q0FBWixFQUEyRDtJQUFFRCxlQUFGO0lBQW1CWTtFQUFuQixDQUEzRDtFQUNBLE1BQU1ULGNBQWMsQ0FBQ1UsY0FBZixDQUNKUixvQkFESSxFQUVKO0lBQUVMO0VBQUYsQ0FGSSxFQUdKO0lBQUVjLElBQUksRUFBRTtNQUFFTixzQkFBc0IsRUFBRSxDQUFDLENBQUQsR0FBS0k7SUFBL0I7RUFBUixDQUhJLENBQU47QUFLRCxDQVBNIn0=","map":{"version":3,"names":["get_remaining_call_minutes","organisation_id","log","organisation","AbstractModels","mongoFindOne","Organisations","out","parseInt","call_minutes_available","toString","console","adjust_organisation_call_minutes","call_duration","mongoUpdateOne","$inc"],"sourceRoot":"/Users/ramireddycharitha/git-explore/services/","sources":["DeductCallMinutesService.js"],"sourcesContent":["import * as AbstractModels from \"../models/AbstractModels\";\nimport {Organisations} from \"../models/mainDbSchema/index\";\n\nexport const get_remaining_call_minutes = async (organisation_id) => {\n  log(\"info\", { organisation_id });\n  const organisation = await AbstractModels.mongoFindOne(\n    Organisations,\n    { organisation_id: organisation_id }\n  );\n  const out = parseInt((organisation.call_minutes_available || 0).toString() || \"0\");\n  log(\"info\", out);\n  console.log('GET REMAINING CALLMINUTES OUT RESPONSE\\n\\n\\n\\n\\n'+out);\n  return out;\n};\n\nexport const adjust_organisation_call_minutes = async (organisation_id, call_duration) => {\n  console.log('ADJUST ORGANISATION CALL MINUTES\\n\\n\\n\\n\\n ', { organisation_id, call_duration });\n  await AbstractModels.mongoUpdateOne(\n    Organisations,\n    { organisation_id },\n    { $inc: { call_minutes_available: -1 * call_duration } }\n  );\n};\n"],"mappings":";;;;;;;AAAA;;AACA;;;;;;AAEO,MAAMA,0BAA0B,GAAG,MAAOC,eAAP,IAA2B;EACnEC,GAAG,CAAC,MAAD,EAAS;IAAED;EAAF,CAAT,CAAH;EACA,MAAME,YAAY,GAAG,MAAMC,cAAc,CAACC,YAAf,CACzBC,oBADyB,EAEzB;IAAEL,eAAe,EAAEA;EAAnB,CAFyB,CAA3B;EAIA,MAAMM,GAAG,GAAGC,QAAQ,CAAC,CAACL,YAAY,CAACM,sBAAb,IAAuC,CAAxC,EAA2CC,QAA3C,MAAyD,GAA1D,CAApB;EACAR,GAAG,CAAC,MAAD,EAASK,GAAT,CAAH;EACAI,OAAO,CAACT,GAAR,CAAY,qDAAmDK,GAA/D;EACA,OAAOA,GAAP;AACD,CAVM;;;;AAYA,MAAMK,gCAAgC,GAAG,OAAOX,eAAP,EAAwBY,aAAxB,KAA0C;EACxFF,OAAO,CAACT,GAAR,CAAY,6CAAZ,EAA2D;IAAED,eAAF;IAAmBY;EAAnB,CAA3D;EACA,MAAMT,cAAc,CAACU,cAAf,CACJR,oBADI,EAEJ;IAAEL;EAAF,CAFI,EAGJ;IAAEc,IAAI,EAAE;MAAEN,sBAAsB,EAAE,CAAC,CAAD,GAAKI;IAA/B;EAAR,CAHI,CAAN;AAKD,CAPM"}},"mtime":1654154234068},"{\"assumptions\":{},\"sourceRoot\":\"/Users/ramireddycharitha/git-explore/routes/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/ramireddycharitha/git-explore\",\"filename\":\"/Users/ramireddycharitha/git-explore/routes/Health.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"default\",\"root\":\"/Users/ramireddycharitha/git-explore\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.17.10:default":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _express = require(\"express\");\n\nvar _HealthController = _interopRequireDefault(require(\"../controllers/HealthController\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst router = (0, _express.Router)();\nrouter.get(\"/health-check\", _HealthController.default);\nvar _default = router;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJyb3V0ZXIiLCJnZXQiLCJoZWFsdGhDaGVjayJdLCJzb3VyY2VSb290IjoiL1VzZXJzL3JhbWlyZWRkeWNoYXJpdGhhL2dpdC1leHBsb3JlL3JvdXRlcy8iLCJzb3VyY2VzIjpbIkhlYWx0aC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBSb3V0ZXIgfSBmcm9tIFwiZXhwcmVzc1wiO1xuaW1wb3J0IGhlYWx0aENoZWNrIGZyb20gXCIuLi9jb250cm9sbGVycy9IZWFsdGhDb250cm9sbGVyXCI7XG5cbmNvbnN0IHJvdXRlciA9IFJvdXRlcigpO1xuXG5yb3V0ZXIuZ2V0KFwiL2hlYWx0aC1jaGVja1wiLCBoZWFsdGhDaGVjayk7XG5leHBvcnQgZGVmYXVsdCByb3V0ZXI7XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTs7QUFDQTs7OztBQUVBLE1BQU1BLE1BQU0sR0FBRyxzQkFBZjtBQUVBQSxNQUFNLENBQUNDLEdBQVAsQ0FBVyxlQUFYLEVBQTRCQyx5QkFBNUI7ZUFDZUYsTSJ9","map":{"version":3,"names":["router","get","healthCheck"],"sourceRoot":"/Users/ramireddycharitha/git-explore/routes/","sources":["Health.js"],"sourcesContent":["import { Router } from \"express\";\nimport healthCheck from \"../controllers/HealthController\";\n\nconst router = Router();\n\nrouter.get(\"/health-check\", healthCheck);\nexport default router;\n"],"mappings":";;;;;;;AAAA;;AACA;;;;AAEA,MAAMA,MAAM,GAAG,sBAAf;AAEAA,MAAM,CAACC,GAAP,CAAW,eAAX,EAA4BC,yBAA5B;eACeF,M"}},"mtime":1653643634187},"{\"assumptions\":{},\"sourceRoot\":\"/Users/ramireddycharitha/git-explore/controllers/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/ramireddycharitha/git-explore\",\"filename\":\"/Users/ramireddycharitha/git-explore/controllers/HealthController.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"default\",\"root\":\"/Users/ramireddycharitha/git-explore\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.17.10:default":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nconst healthCheck = async (req, res, next) => {\n  res.data = {};\n  log(\"info\", \"health check\");\n  next();\n};\n\nvar _default = healthCheck;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJoZWFsdGhDaGVjayIsInJlcSIsInJlcyIsIm5leHQiLCJkYXRhIiwibG9nIl0sInNvdXJjZVJvb3QiOiIvVXNlcnMvcmFtaXJlZGR5Y2hhcml0aGEvZ2l0LWV4cGxvcmUvY29udHJvbGxlcnMvIiwic291cmNlcyI6WyJIZWFsdGhDb250cm9sbGVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGhlYWx0aENoZWNrID0gYXN5bmMgKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gIHJlcy5kYXRhID0ge307XG4gIGxvZyhcImluZm9cIiwgXCJoZWFsdGggY2hlY2tcIik7XG4gIG5leHQoKTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGhlYWx0aENoZWNrO1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUEsTUFBTUEsV0FBVyxHQUFHLE9BQU9DLEdBQVAsRUFBWUMsR0FBWixFQUFpQkMsSUFBakIsS0FBMEI7RUFDNUNELEdBQUcsQ0FBQ0UsSUFBSixHQUFXLEVBQVg7RUFDQUMsR0FBRyxDQUFDLE1BQUQsRUFBUyxjQUFULENBQUg7RUFDQUYsSUFBSTtBQUNMLENBSkQ7O2VBTWVILFcifQ==","map":{"version":3,"names":["healthCheck","req","res","next","data","log"],"sourceRoot":"/Users/ramireddycharitha/git-explore/controllers/","sources":["HealthController.js"],"sourcesContent":["const healthCheck = async (req, res, next) => {\n  res.data = {};\n  log(\"info\", \"health check\");\n  next();\n};\n\nexport default healthCheck;\n"],"mappings":";;;;;;;AAAA,MAAMA,WAAW,GAAG,OAAOC,GAAP,EAAYC,GAAZ,EAAiBC,IAAjB,KAA0B;EAC5CD,GAAG,CAACE,IAAJ,GAAW,EAAX;EACAC,GAAG,CAAC,MAAD,EAAS,cAAT,CAAH;EACAF,IAAI;AACL,CAJD;;eAMeH,W"}},"mtime":1653643634179},"{\"assumptions\":{},\"sourceRoot\":\"/Users/ramireddycharitha/git-explore/middlewares/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/ramireddycharitha/git-explore\",\"filename\":\"/Users/ramireddycharitha/git-explore/middlewares/RequestLogger.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"default\",\"root\":\"/Users/ramireddycharitha/git-explore\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.17.10:default":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = exports.auditLogRequest = void 0;\n\nvar AbstractModels = _interopRequireWildcard(require(\"../models/AbstractModels\"));\n\nvar Auth = _interopRequireWildcard(require(\"./Auth\"));\n\nvar _index = require(\"../models/analyticsDbSchema/index\");\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nconst auditLogRequest = req => {\n  const doc = {\n    originalUrl: req.originalUrl,\n    method: req.method,\n    userAgent: req.headers[\"user-agent\"],\n    ipAddress: req.headers[\"x-forwarded-for\"] || req.connection.remoteAddress,\n    correlationId: req.headers.correlationId,\n    eventType: req.routeObj.eventType,\n    requestBody: req.body\n  };\n  const apiKey = req.header(\"api-key\");\n\n  if (apiKey) {\n    doc.apiKey = apiKey;\n  }\n\n  AbstractModels.mongoInsertOne(_index.AuditLogs, doc);\n};\n\nexports.auditLogRequest = auditLogRequest;\n\nconst reqLog = (req, res, next) => {\n  const routeObj = Auth.setMetrics(req, res);\n  req.routeObj = routeObj;\n\n  if (routeObj.routeCategory !== \"healthCheckRoutes\") {\n    next();\n  } else {\n    next();\n  }\n};\n\nvar _default = reqLog;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJhdWRpdExvZ1JlcXVlc3QiLCJyZXEiLCJkb2MiLCJvcmlnaW5hbFVybCIsIm1ldGhvZCIsInVzZXJBZ2VudCIsImhlYWRlcnMiLCJpcEFkZHJlc3MiLCJjb25uZWN0aW9uIiwicmVtb3RlQWRkcmVzcyIsImNvcnJlbGF0aW9uSWQiLCJldmVudFR5cGUiLCJyb3V0ZU9iaiIsInJlcXVlc3RCb2R5IiwiYm9keSIsImFwaUtleSIsImhlYWRlciIsIkFic3RyYWN0TW9kZWxzIiwibW9uZ29JbnNlcnRPbmUiLCJBdWRpdExvZ3MiLCJyZXFMb2ciLCJyZXMiLCJuZXh0IiwiQXV0aCIsInNldE1ldHJpY3MiLCJyb3V0ZUNhdGVnb3J5Il0sInNvdXJjZVJvb3QiOiIvVXNlcnMvcmFtaXJlZGR5Y2hhcml0aGEvZ2l0LWV4cGxvcmUvbWlkZGxld2FyZXMvIiwic291cmNlcyI6WyJSZXF1ZXN0TG9nZ2VyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIEFic3RyYWN0TW9kZWxzIGZyb20gXCIuLi9tb2RlbHMvQWJzdHJhY3RNb2RlbHNcIjtcbmltcG9ydCAqIGFzIEF1dGggZnJvbSBcIi4vQXV0aFwiO1xuXG5pbXBvcnQgeyBBdWRpdExvZ3MgfSBmcm9tIFwiLi4vbW9kZWxzL2FuYWx5dGljc0RiU2NoZW1hL2luZGV4XCI7XG5cbmV4cG9ydCBjb25zdCBhdWRpdExvZ1JlcXVlc3QgPSAocmVxKSA9PiB7XG4gIGNvbnN0IGRvYyA9IHtcbiAgICBvcmlnaW5hbFVybDogcmVxLm9yaWdpbmFsVXJsLFxuICAgIG1ldGhvZDogcmVxLm1ldGhvZCxcbiAgICB1c2VyQWdlbnQ6IHJlcS5oZWFkZXJzW1widXNlci1hZ2VudFwiXSxcbiAgICBpcEFkZHJlc3M6IHJlcS5oZWFkZXJzW1wieC1mb3J3YXJkZWQtZm9yXCJdIHx8IHJlcS5jb25uZWN0aW9uLnJlbW90ZUFkZHJlc3MsXG4gICAgY29ycmVsYXRpb25JZDogcmVxLmhlYWRlcnMuY29ycmVsYXRpb25JZCxcbiAgICBldmVudFR5cGU6IHJlcS5yb3V0ZU9iai5ldmVudFR5cGUsXG4gICAgcmVxdWVzdEJvZHk6IHJlcS5ib2R5LFxuICB9O1xuICBjb25zdCBhcGlLZXkgPSByZXEuaGVhZGVyKFwiYXBpLWtleVwiKTtcbiAgaWYgKGFwaUtleSkge1xuICAgIGRvYy5hcGlLZXkgPSBhcGlLZXk7XG4gIH1cbiAgQWJzdHJhY3RNb2RlbHMubW9uZ29JbnNlcnRPbmUoQXVkaXRMb2dzLCBkb2MpO1xufTtcblxuY29uc3QgcmVxTG9nID0gKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gIGNvbnN0IHJvdXRlT2JqID0gQXV0aC5zZXRNZXRyaWNzKHJlcSwgcmVzKTtcbiAgcmVxLnJvdXRlT2JqID0gcm91dGVPYmo7XG4gIGlmIChyb3V0ZU9iai5yb3V0ZUNhdGVnb3J5ICE9PSBcImhlYWx0aENoZWNrUm91dGVzXCIpIHtcbiAgICBuZXh0KCk7XG4gIH0gZWxzZSB7XG4gICAgbmV4dCgpO1xuICB9XG59O1xuXG5leHBvcnQgZGVmYXVsdCByZXFMb2c7XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTs7QUFDQTs7QUFFQTs7Ozs7O0FBRU8sTUFBTUEsZUFBZSxHQUFJQyxHQUFELElBQVM7RUFDdEMsTUFBTUMsR0FBRyxHQUFHO0lBQ1ZDLFdBQVcsRUFBRUYsR0FBRyxDQUFDRSxXQURQO0lBRVZDLE1BQU0sRUFBRUgsR0FBRyxDQUFDRyxNQUZGO0lBR1ZDLFNBQVMsRUFBRUosR0FBRyxDQUFDSyxPQUFKLENBQVksWUFBWixDQUhEO0lBSVZDLFNBQVMsRUFBRU4sR0FBRyxDQUFDSyxPQUFKLENBQVksaUJBQVosS0FBa0NMLEdBQUcsQ0FBQ08sVUFBSixDQUFlQyxhQUpsRDtJQUtWQyxhQUFhLEVBQUVULEdBQUcsQ0FBQ0ssT0FBSixDQUFZSSxhQUxqQjtJQU1WQyxTQUFTLEVBQUVWLEdBQUcsQ0FBQ1csUUFBSixDQUFhRCxTQU5kO0lBT1ZFLFdBQVcsRUFBRVosR0FBRyxDQUFDYTtFQVBQLENBQVo7RUFTQSxNQUFNQyxNQUFNLEdBQUdkLEdBQUcsQ0FBQ2UsTUFBSixDQUFXLFNBQVgsQ0FBZjs7RUFDQSxJQUFJRCxNQUFKLEVBQVk7SUFDVmIsR0FBRyxDQUFDYSxNQUFKLEdBQWFBLE1BQWI7RUFDRDs7RUFDREUsY0FBYyxDQUFDQyxjQUFmLENBQThCQyxnQkFBOUIsRUFBeUNqQixHQUF6QztBQUNELENBZk07Ozs7QUFpQlAsTUFBTWtCLE1BQU0sR0FBRyxDQUFDbkIsR0FBRCxFQUFNb0IsR0FBTixFQUFXQyxJQUFYLEtBQW9CO0VBQ2pDLE1BQU1WLFFBQVEsR0FBR1csSUFBSSxDQUFDQyxVQUFMLENBQWdCdkIsR0FBaEIsRUFBcUJvQixHQUFyQixDQUFqQjtFQUNBcEIsR0FBRyxDQUFDVyxRQUFKLEdBQWVBLFFBQWY7O0VBQ0EsSUFBSUEsUUFBUSxDQUFDYSxhQUFULEtBQTJCLG1CQUEvQixFQUFvRDtJQUNsREgsSUFBSTtFQUNMLENBRkQsTUFFTztJQUNMQSxJQUFJO0VBQ0w7QUFDRixDQVJEOztlQVVlRixNIn0=","map":{"version":3,"names":["auditLogRequest","req","doc","originalUrl","method","userAgent","headers","ipAddress","connection","remoteAddress","correlationId","eventType","routeObj","requestBody","body","apiKey","header","AbstractModels","mongoInsertOne","AuditLogs","reqLog","res","next","Auth","setMetrics","routeCategory"],"sourceRoot":"/Users/ramireddycharitha/git-explore/middlewares/","sources":["RequestLogger.js"],"sourcesContent":["import * as AbstractModels from \"../models/AbstractModels\";\nimport * as Auth from \"./Auth\";\n\nimport { AuditLogs } from \"../models/analyticsDbSchema/index\";\n\nexport const auditLogRequest = (req) => {\n  const doc = {\n    originalUrl: req.originalUrl,\n    method: req.method,\n    userAgent: req.headers[\"user-agent\"],\n    ipAddress: req.headers[\"x-forwarded-for\"] || req.connection.remoteAddress,\n    correlationId: req.headers.correlationId,\n    eventType: req.routeObj.eventType,\n    requestBody: req.body,\n  };\n  const apiKey = req.header(\"api-key\");\n  if (apiKey) {\n    doc.apiKey = apiKey;\n  }\n  AbstractModels.mongoInsertOne(AuditLogs, doc);\n};\n\nconst reqLog = (req, res, next) => {\n  const routeObj = Auth.setMetrics(req, res);\n  req.routeObj = routeObj;\n  if (routeObj.routeCategory !== \"healthCheckRoutes\") {\n    next();\n  } else {\n    next();\n  }\n};\n\nexport default reqLog;\n"],"mappings":";;;;;;;AAAA;;AACA;;AAEA;;;;;;AAEO,MAAMA,eAAe,GAAIC,GAAD,IAAS;EACtC,MAAMC,GAAG,GAAG;IACVC,WAAW,EAAEF,GAAG,CAACE,WADP;IAEVC,MAAM,EAAEH,GAAG,CAACG,MAFF;IAGVC,SAAS,EAAEJ,GAAG,CAACK,OAAJ,CAAY,YAAZ,CAHD;IAIVC,SAAS,EAAEN,GAAG,CAACK,OAAJ,CAAY,iBAAZ,KAAkCL,GAAG,CAACO,UAAJ,CAAeC,aAJlD;IAKVC,aAAa,EAAET,GAAG,CAACK,OAAJ,CAAYI,aALjB;IAMVC,SAAS,EAAEV,GAAG,CAACW,QAAJ,CAAaD,SANd;IAOVE,WAAW,EAAEZ,GAAG,CAACa;EAPP,CAAZ;EASA,MAAMC,MAAM,GAAGd,GAAG,CAACe,MAAJ,CAAW,SAAX,CAAf;;EACA,IAAID,MAAJ,EAAY;IACVb,GAAG,CAACa,MAAJ,GAAaA,MAAb;EACD;;EACDE,cAAc,CAACC,cAAf,CAA8BC,gBAA9B,EAAyCjB,GAAzC;AACD,CAfM;;;;AAiBP,MAAMkB,MAAM,GAAG,CAACnB,GAAD,EAAMoB,GAAN,EAAWC,IAAX,KAAoB;EACjC,MAAMV,QAAQ,GAAGW,IAAI,CAACC,UAAL,CAAgBvB,GAAhB,EAAqBoB,GAArB,CAAjB;EACApB,GAAG,CAACW,QAAJ,GAAeA,QAAf;;EACA,IAAIA,QAAQ,CAACa,aAAT,KAA2B,mBAA/B,EAAoD;IAClDH,IAAI;EACL,CAFD,MAEO;IACLA,IAAI;EACL;AACF,CARD;;eAUeF,M"}},"mtime":1653643634183},"{\"assumptions\":{},\"sourceRoot\":\"/Users/ramireddycharitha/git-explore/models/analyticsDbSchema/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/ramireddycharitha/git-explore\",\"filename\":\"/Users/ramireddycharitha/git-explore/models/analyticsDbSchema/index.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"default\",\"root\":\"/Users/ramireddycharitha/git-explore\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.17.10:default":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.conn = exports.AuditLogs = void 0;\n\nvar analyticsDbConnection = _interopRequireWildcard(require(\"../../connections/AnalyticsDb\"));\n\nvar _AuditLogsSchema = _interopRequireDefault(require(\"./AuditLogsSchema\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\n// load schemas\nconst conn = analyticsDbConnection.getDbInstance();\nexports.conn = conn;\nconst AuditLogs = conn.model(\"AuditLogs\", _AuditLogsSchema.default, \"AuditLogs\");\nexports.AuditLogs = AuditLogs;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb25uIiwiYW5hbHl0aWNzRGJDb25uZWN0aW9uIiwiZ2V0RGJJbnN0YW5jZSIsIkF1ZGl0TG9ncyIsIm1vZGVsIiwiQXVkaXRMb2dzU2NoZW1hIl0sInNvdXJjZVJvb3QiOiIvVXNlcnMvcmFtaXJlZGR5Y2hhcml0aGEvZ2l0LWV4cGxvcmUvbW9kZWxzL2FuYWx5dGljc0RiU2NoZW1hLyIsInNvdXJjZXMiOlsiaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgYW5hbHl0aWNzRGJDb25uZWN0aW9uIGZyb20gXCIuLi8uLi9jb25uZWN0aW9ucy9BbmFseXRpY3NEYlwiO1xuLy8gbG9hZCBzY2hlbWFzXG5pbXBvcnQgQXVkaXRMb2dzU2NoZW1hIGZyb20gXCIuL0F1ZGl0TG9nc1NjaGVtYVwiO1xuXG5leHBvcnQgY29uc3QgY29ubiA9IGFuYWx5dGljc0RiQ29ubmVjdGlvbi5nZXREYkluc3RhbmNlKCk7XG5leHBvcnQgY29uc3QgQXVkaXRMb2dzID0gY29ubi5tb2RlbChcIkF1ZGl0TG9nc1wiLCBBdWRpdExvZ3NTY2hlbWEsIFwiQXVkaXRMb2dzXCIpO1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7O0FBRUE7Ozs7Ozs7O0FBREE7QUFHTyxNQUFNQSxJQUFJLEdBQUdDLHFCQUFxQixDQUFDQyxhQUF0QixFQUFiOztBQUNBLE1BQU1DLFNBQVMsR0FBR0gsSUFBSSxDQUFDSSxLQUFMLENBQVcsV0FBWCxFQUF3QkMsd0JBQXhCLEVBQXlDLFdBQXpDLENBQWxCIn0=","map":{"version":3,"names":["conn","analyticsDbConnection","getDbInstance","AuditLogs","model","AuditLogsSchema"],"sourceRoot":"/Users/ramireddycharitha/git-explore/models/analyticsDbSchema/","sources":["index.js"],"sourcesContent":["import * as analyticsDbConnection from \"../../connections/AnalyticsDb\";\n// load schemas\nimport AuditLogsSchema from \"./AuditLogsSchema\";\n\nexport const conn = analyticsDbConnection.getDbInstance();\nexport const AuditLogs = conn.model(\"AuditLogs\", AuditLogsSchema, \"AuditLogs\");\n"],"mappings":";;;;;;;AAAA;;AAEA;;;;;;;;AADA;AAGO,MAAMA,IAAI,GAAGC,qBAAqB,CAACC,aAAtB,EAAb;;AACA,MAAMC,SAAS,GAAGH,IAAI,CAACI,KAAL,CAAW,WAAX,EAAwBC,wBAAxB,EAAyC,WAAzC,CAAlB"}},"mtime":1653643634185},"{\"assumptions\":{},\"sourceRoot\":\"/Users/ramireddycharitha/git-explore/models/analyticsDbSchema/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/ramireddycharitha/git-explore\",\"filename\":\"/Users/ramireddycharitha/git-explore/models/analyticsDbSchema/AuditLogsSchema.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"default\",\"root\":\"/Users/ramireddycharitha/git-explore\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.17.10:default":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _mongoose = require(\"mongoose\");\n\nconst AuditLogsSchema = new _mongoose.Schema({\n  originalUrl: {\n    type: String,\n    required: true\n  },\n  method: {\n    type: String,\n    required: true\n  },\n  userAgent: {\n    type: String,\n    required: true\n  },\n  ipAddress: {\n    type: String,\n    required: true\n  },\n  correlationId: {\n    type: String,\n    required: true\n  },\n  status: {\n    type: String\n  },\n  responseTime: {\n    type: Number\n  },\n  username: {\n    type: String\n  },\n  apiKey: {\n    type: String\n  },\n  clientId: {\n    type: String\n  },\n  eventType: {\n    type: String\n  },\n  requestBody: {\n    type: Object\n  },\n  response: {\n    type: Object\n  },\n  createdAt: {\n    type: Date,\n    default: Date.now\n  },\n  updatedAt: {\n    type: Date,\n    default: Date.now\n  }\n});\nvar _default = AuditLogsSchema;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJBdWRpdExvZ3NTY2hlbWEiLCJTY2hlbWEiLCJvcmlnaW5hbFVybCIsInR5cGUiLCJTdHJpbmciLCJyZXF1aXJlZCIsIm1ldGhvZCIsInVzZXJBZ2VudCIsImlwQWRkcmVzcyIsImNvcnJlbGF0aW9uSWQiLCJzdGF0dXMiLCJyZXNwb25zZVRpbWUiLCJOdW1iZXIiLCJ1c2VybmFtZSIsImFwaUtleSIsImNsaWVudElkIiwiZXZlbnRUeXBlIiwicmVxdWVzdEJvZHkiLCJPYmplY3QiLCJyZXNwb25zZSIsImNyZWF0ZWRBdCIsIkRhdGUiLCJkZWZhdWx0Iiwibm93IiwidXBkYXRlZEF0Il0sInNvdXJjZVJvb3QiOiIvVXNlcnMvcmFtaXJlZGR5Y2hhcml0aGEvZ2l0LWV4cGxvcmUvbW9kZWxzL2FuYWx5dGljc0RiU2NoZW1hLyIsInNvdXJjZXMiOlsiQXVkaXRMb2dzU2NoZW1hLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFNjaGVtYSB9IGZyb20gXCJtb25nb29zZVwiO1xuXG5jb25zdCBBdWRpdExvZ3NTY2hlbWEgPSBuZXcgU2NoZW1hKHtcbiAgb3JpZ2luYWxVcmw6IHtcbiAgICB0eXBlOiBTdHJpbmcsXG4gICAgcmVxdWlyZWQ6IHRydWUsXG4gIH0sXG4gIG1ldGhvZDoge1xuICAgIHR5cGU6IFN0cmluZyxcbiAgICByZXF1aXJlZDogdHJ1ZSxcbiAgfSxcbiAgdXNlckFnZW50OiB7XG4gICAgdHlwZTogU3RyaW5nLFxuICAgIHJlcXVpcmVkOiB0cnVlLFxuICB9LFxuICBpcEFkZHJlc3M6IHtcbiAgICB0eXBlOiBTdHJpbmcsXG4gICAgcmVxdWlyZWQ6IHRydWUsXG4gIH0sXG4gIGNvcnJlbGF0aW9uSWQ6IHtcbiAgICB0eXBlOiBTdHJpbmcsXG4gICAgcmVxdWlyZWQ6IHRydWUsXG4gIH0sXG4gIHN0YXR1czoge1xuICAgIHR5cGU6IFN0cmluZyxcbiAgfSxcbiAgcmVzcG9uc2VUaW1lOiB7XG4gICAgdHlwZTogTnVtYmVyLFxuICB9LFxuICB1c2VybmFtZToge1xuICAgIHR5cGU6IFN0cmluZyxcbiAgfSxcbiAgYXBpS2V5OiB7XG4gICAgdHlwZTogU3RyaW5nLFxuICB9LFxuICBjbGllbnRJZDoge1xuICAgIHR5cGU6IFN0cmluZyxcbiAgfSxcbiAgZXZlbnRUeXBlOiB7XG4gICAgdHlwZTogU3RyaW5nLFxuICB9LFxuICByZXF1ZXN0Qm9keToge1xuICAgIHR5cGU6IE9iamVjdCxcbiAgfSxcbiAgcmVzcG9uc2U6IHtcbiAgICB0eXBlOiBPYmplY3QsXG4gIH0sXG4gIGNyZWF0ZWRBdDoge1xuICAgIHR5cGU6IERhdGUsXG4gICAgZGVmYXVsdDogRGF0ZS5ub3csXG4gIH0sXG4gIHVwZGF0ZWRBdDoge1xuICAgIHR5cGU6IERhdGUsXG4gICAgZGVmYXVsdDogRGF0ZS5ub3csXG4gIH0sXG59KTtcblxuZXhwb3J0IGRlZmF1bHQgQXVkaXRMb2dzU2NoZW1hO1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7O0FBRUEsTUFBTUEsZUFBZSxHQUFHLElBQUlDLGdCQUFKLENBQVc7RUFDakNDLFdBQVcsRUFBRTtJQUNYQyxJQUFJLEVBQUVDLE1BREs7SUFFWEMsUUFBUSxFQUFFO0VBRkMsQ0FEb0I7RUFLakNDLE1BQU0sRUFBRTtJQUNOSCxJQUFJLEVBQUVDLE1BREE7SUFFTkMsUUFBUSxFQUFFO0VBRkosQ0FMeUI7RUFTakNFLFNBQVMsRUFBRTtJQUNUSixJQUFJLEVBQUVDLE1BREc7SUFFVEMsUUFBUSxFQUFFO0VBRkQsQ0FUc0I7RUFhakNHLFNBQVMsRUFBRTtJQUNUTCxJQUFJLEVBQUVDLE1BREc7SUFFVEMsUUFBUSxFQUFFO0VBRkQsQ0Fic0I7RUFpQmpDSSxhQUFhLEVBQUU7SUFDYk4sSUFBSSxFQUFFQyxNQURPO0lBRWJDLFFBQVEsRUFBRTtFQUZHLENBakJrQjtFQXFCakNLLE1BQU0sRUFBRTtJQUNOUCxJQUFJLEVBQUVDO0VBREEsQ0FyQnlCO0VBd0JqQ08sWUFBWSxFQUFFO0lBQ1pSLElBQUksRUFBRVM7RUFETSxDQXhCbUI7RUEyQmpDQyxRQUFRLEVBQUU7SUFDUlYsSUFBSSxFQUFFQztFQURFLENBM0J1QjtFQThCakNVLE1BQU0sRUFBRTtJQUNOWCxJQUFJLEVBQUVDO0VBREEsQ0E5QnlCO0VBaUNqQ1csUUFBUSxFQUFFO0lBQ1JaLElBQUksRUFBRUM7RUFERSxDQWpDdUI7RUFvQ2pDWSxTQUFTLEVBQUU7SUFDVGIsSUFBSSxFQUFFQztFQURHLENBcENzQjtFQXVDakNhLFdBQVcsRUFBRTtJQUNYZCxJQUFJLEVBQUVlO0VBREssQ0F2Q29CO0VBMENqQ0MsUUFBUSxFQUFFO0lBQ1JoQixJQUFJLEVBQUVlO0VBREUsQ0ExQ3VCO0VBNkNqQ0UsU0FBUyxFQUFFO0lBQ1RqQixJQUFJLEVBQUVrQixJQURHO0lBRVRDLE9BQU8sRUFBRUQsSUFBSSxDQUFDRTtFQUZMLENBN0NzQjtFQWlEakNDLFNBQVMsRUFBRTtJQUNUckIsSUFBSSxFQUFFa0IsSUFERztJQUVUQyxPQUFPLEVBQUVELElBQUksQ0FBQ0U7RUFGTDtBQWpEc0IsQ0FBWCxDQUF4QjtlQXVEZXZCLGUifQ==","map":{"version":3,"names":["AuditLogsSchema","Schema","originalUrl","type","String","required","method","userAgent","ipAddress","correlationId","status","responseTime","Number","username","apiKey","clientId","eventType","requestBody","Object","response","createdAt","Date","default","now","updatedAt"],"sourceRoot":"/Users/ramireddycharitha/git-explore/models/analyticsDbSchema/","sources":["AuditLogsSchema.js"],"sourcesContent":["import { Schema } from \"mongoose\";\n\nconst AuditLogsSchema = new Schema({\n  originalUrl: {\n    type: String,\n    required: true,\n  },\n  method: {\n    type: String,\n    required: true,\n  },\n  userAgent: {\n    type: String,\n    required: true,\n  },\n  ipAddress: {\n    type: String,\n    required: true,\n  },\n  correlationId: {\n    type: String,\n    required: true,\n  },\n  status: {\n    type: String,\n  },\n  responseTime: {\n    type: Number,\n  },\n  username: {\n    type: String,\n  },\n  apiKey: {\n    type: String,\n  },\n  clientId: {\n    type: String,\n  },\n  eventType: {\n    type: String,\n  },\n  requestBody: {\n    type: Object,\n  },\n  response: {\n    type: Object,\n  },\n  createdAt: {\n    type: Date,\n    default: Date.now,\n  },\n  updatedAt: {\n    type: Date,\n    default: Date.now,\n  },\n});\n\nexport default AuditLogsSchema;\n"],"mappings":";;;;;;;AAAA;;AAEA,MAAMA,eAAe,GAAG,IAAIC,gBAAJ,CAAW;EACjCC,WAAW,EAAE;IACXC,IAAI,EAAEC,MADK;IAEXC,QAAQ,EAAE;EAFC,CADoB;EAKjCC,MAAM,EAAE;IACNH,IAAI,EAAEC,MADA;IAENC,QAAQ,EAAE;EAFJ,CALyB;EASjCE,SAAS,EAAE;IACTJ,IAAI,EAAEC,MADG;IAETC,QAAQ,EAAE;EAFD,CATsB;EAajCG,SAAS,EAAE;IACTL,IAAI,EAAEC,MADG;IAETC,QAAQ,EAAE;EAFD,CAbsB;EAiBjCI,aAAa,EAAE;IACbN,IAAI,EAAEC,MADO;IAEbC,QAAQ,EAAE;EAFG,CAjBkB;EAqBjCK,MAAM,EAAE;IACNP,IAAI,EAAEC;EADA,CArByB;EAwBjCO,YAAY,EAAE;IACZR,IAAI,EAAES;EADM,CAxBmB;EA2BjCC,QAAQ,EAAE;IACRV,IAAI,EAAEC;EADE,CA3BuB;EA8BjCU,MAAM,EAAE;IACNX,IAAI,EAAEC;EADA,CA9ByB;EAiCjCW,QAAQ,EAAE;IACRZ,IAAI,EAAEC;EADE,CAjCuB;EAoCjCY,SAAS,EAAE;IACTb,IAAI,EAAEC;EADG,CApCsB;EAuCjCa,WAAW,EAAE;IACXd,IAAI,EAAEe;EADK,CAvCoB;EA0CjCC,QAAQ,EAAE;IACRhB,IAAI,EAAEe;EADE,CA1CuB;EA6CjCE,SAAS,EAAE;IACTjB,IAAI,EAAEkB,IADG;IAETC,OAAO,EAAED,IAAI,CAACE;EAFL,CA7CsB;EAiDjCC,SAAS,EAAE;IACTrB,IAAI,EAAEkB,IADG;IAETC,OAAO,EAAED,IAAI,CAACE;EAFL;AAjDsB,CAAX,CAAxB;eAuDevB,e"}},"mtime":1653643634185},"{\"assumptions\":{},\"sourceRoot\":\"/Users/ramireddycharitha/git-explore/middlewares/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/ramireddycharitha/git-explore\",\"filename\":\"/Users/ramireddycharitha/git-explore/middlewares/ResponseLogger.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"default\",\"root\":\"/Users/ramireddycharitha/git-explore\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.17.10:default":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.resSuccessLog = exports.resErrorLog = void 0;\n\nvar AbstractModels = _interopRequireWildcard(require(\"../models/AbstractModels\"));\n\nvar _index = require(\"../models/analyticsDbSchema/index\");\n\nvar ErrorUtils = _interopRequireWildcard(require(\"../errors/ErrorUtils\"));\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nconst auditLogResponse = (error, req, res) => {\n  const doc = {\n    originalUrl: req.originalUrl,\n    method: req.method,\n    userAgent: req.headers[\"user-agent\"],\n    ipAddress: req.headers[\"x-forwarded-for\"] || req.connection.remoteAddress,\n    correlationId: req.headers.correlationId,\n    eventType: req.routeObj.eventType,\n    requestBody: req.body,\n    responseTime: new Date().getTime() - req.routeObj.startTime,\n    status: true\n  };\n  const apiKey = req.header(\"api-key\");\n\n  if (apiKey) {\n    doc.apiKey = apiKey;\n  }\n\n  if (req.session) {\n    doc.mobileNumber = req.session.mobileNumber;\n    doc.clientId = req.session.clientId;\n    doc.apiKey = req.session.apiKey;\n  }\n\n  if (req.routeObj) {\n    doc.routeCategory = req.routeObj.routeCategory;\n  }\n\n  if (error) {\n    doc.response = {\n      code: error.code || 1000,\n      reason: error.message,\n      stack: error.stack\n    };\n    doc.status = false;\n  } else {\n    doc.response = res.data;\n  }\n\n  AbstractModels.mongoInsertOne(_index.AuditLogs, doc);\n};\n\nconst resSuccessLog = (req, res) => {\n  let routeCategory;\n\n  if (req.routeObj && req.routeObj.routeCategory) {\n    routeCategory = req.routeObj.routeCategory;\n  }\n\n  if (routeCategory !== \"healthCheckRoutes\") {\n    auditLogResponse(null, req, res);\n  }\n\n  res.status(res.statusCode || 200).send({\n    status: true,\n    response: res.data\n  });\n};\n/**\n * Check if not custom error, creates internal error and returns\n * @param {*} error\n * @returns\n */\n\n\nexports.resSuccessLog = resSuccessLog;\n\nfunction maskSystemError(error) {\n  if (error.name !== \"ErrorUtils\") {\n    return ErrorUtils.InternalServerError();\n  }\n\n  return error;\n}\n\nconst resErrorLog = (error, req, res, next) => {\n  log(\"error\", error.stack);\n  auditLogResponse(error, req, res); // eslint-disable-next-line\n\n  error = maskSystemError(error);\n\n  if (res.headersSent) {\n    return next(error);\n  }\n\n  res.status(error.statusCode || 200);\n  return res.send({\n    status: false,\n    response: {\n      code: error.code || 1000,\n      reason: error.message\n    }\n  });\n};\n\nexports.resErrorLog = resErrorLog;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJhdWRpdExvZ1Jlc3BvbnNlIiwiZXJyb3IiLCJyZXEiLCJyZXMiLCJkb2MiLCJvcmlnaW5hbFVybCIsIm1ldGhvZCIsInVzZXJBZ2VudCIsImhlYWRlcnMiLCJpcEFkZHJlc3MiLCJjb25uZWN0aW9uIiwicmVtb3RlQWRkcmVzcyIsImNvcnJlbGF0aW9uSWQiLCJldmVudFR5cGUiLCJyb3V0ZU9iaiIsInJlcXVlc3RCb2R5IiwiYm9keSIsInJlc3BvbnNlVGltZSIsIkRhdGUiLCJnZXRUaW1lIiwic3RhcnRUaW1lIiwic3RhdHVzIiwiYXBpS2V5IiwiaGVhZGVyIiwic2Vzc2lvbiIsIm1vYmlsZU51bWJlciIsImNsaWVudElkIiwicm91dGVDYXRlZ29yeSIsInJlc3BvbnNlIiwiY29kZSIsInJlYXNvbiIsIm1lc3NhZ2UiLCJzdGFjayIsImRhdGEiLCJBYnN0cmFjdE1vZGVscyIsIm1vbmdvSW5zZXJ0T25lIiwiQXVkaXRMb2dzIiwicmVzU3VjY2Vzc0xvZyIsInN0YXR1c0NvZGUiLCJzZW5kIiwibWFza1N5c3RlbUVycm9yIiwibmFtZSIsIkVycm9yVXRpbHMiLCJJbnRlcm5hbFNlcnZlckVycm9yIiwicmVzRXJyb3JMb2ciLCJuZXh0IiwibG9nIiwiaGVhZGVyc1NlbnQiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy9yYW1pcmVkZHljaGFyaXRoYS9naXQtZXhwbG9yZS9taWRkbGV3YXJlcy8iLCJzb3VyY2VzIjpbIlJlc3BvbnNlTG9nZ2VyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIEFic3RyYWN0TW9kZWxzIGZyb20gXCIuLi9tb2RlbHMvQWJzdHJhY3RNb2RlbHNcIjtcbmltcG9ydCB7IEF1ZGl0TG9ncyB9IGZyb20gXCIuLi9tb2RlbHMvYW5hbHl0aWNzRGJTY2hlbWEvaW5kZXhcIjtcbmltcG9ydCAqIGFzIEVycm9yVXRpbHMgZnJvbSBcIi4uL2Vycm9ycy9FcnJvclV0aWxzXCI7XG5cbmNvbnN0IGF1ZGl0TG9nUmVzcG9uc2UgPSAoZXJyb3IsIHJlcSwgcmVzKSA9PiB7XG4gIGNvbnN0IGRvYyA9IHtcbiAgICBvcmlnaW5hbFVybDogcmVxLm9yaWdpbmFsVXJsLFxuICAgIG1ldGhvZDogcmVxLm1ldGhvZCxcbiAgICB1c2VyQWdlbnQ6IHJlcS5oZWFkZXJzW1widXNlci1hZ2VudFwiXSxcbiAgICBpcEFkZHJlc3M6IHJlcS5oZWFkZXJzW1wieC1mb3J3YXJkZWQtZm9yXCJdIHx8IHJlcS5jb25uZWN0aW9uLnJlbW90ZUFkZHJlc3MsXG4gICAgY29ycmVsYXRpb25JZDogcmVxLmhlYWRlcnMuY29ycmVsYXRpb25JZCxcbiAgICBldmVudFR5cGU6IHJlcS5yb3V0ZU9iai5ldmVudFR5cGUsXG4gICAgcmVxdWVzdEJvZHk6IHJlcS5ib2R5LFxuICAgIHJlc3BvbnNlVGltZTogbmV3IERhdGUoKS5nZXRUaW1lKCkgLSByZXEucm91dGVPYmouc3RhcnRUaW1lLFxuICAgIHN0YXR1czogdHJ1ZSxcbiAgfTtcbiAgY29uc3QgYXBpS2V5ID0gcmVxLmhlYWRlcihcImFwaS1rZXlcIik7XG4gIGlmIChhcGlLZXkpIHtcbiAgICBkb2MuYXBpS2V5ID0gYXBpS2V5O1xuICB9XG4gIGlmIChyZXEuc2Vzc2lvbikge1xuICAgIGRvYy5tb2JpbGVOdW1iZXIgPSByZXEuc2Vzc2lvbi5tb2JpbGVOdW1iZXI7XG4gICAgZG9jLmNsaWVudElkID0gcmVxLnNlc3Npb24uY2xpZW50SWQ7XG4gICAgZG9jLmFwaUtleSA9IHJlcS5zZXNzaW9uLmFwaUtleTtcbiAgfVxuICBpZiAocmVxLnJvdXRlT2JqKSB7XG4gICAgZG9jLnJvdXRlQ2F0ZWdvcnkgPSByZXEucm91dGVPYmoucm91dGVDYXRlZ29yeTtcbiAgfVxuXG4gIGlmIChlcnJvcikge1xuICAgIGRvYy5yZXNwb25zZSA9IHtcbiAgICAgIGNvZGU6IGVycm9yLmNvZGUgfHwgMTAwMCxcbiAgICAgIHJlYXNvbjogZXJyb3IubWVzc2FnZSxcbiAgICAgIHN0YWNrOiBlcnJvci5zdGFjayxcbiAgICB9O1xuICAgIGRvYy5zdGF0dXMgPSBmYWxzZTtcbiAgfSBlbHNlIHtcbiAgICBkb2MucmVzcG9uc2UgPSByZXMuZGF0YTtcbiAgfVxuICBBYnN0cmFjdE1vZGVscy5tb25nb0luc2VydE9uZShBdWRpdExvZ3MsIGRvYyk7XG59O1xuXG5leHBvcnQgY29uc3QgcmVzU3VjY2Vzc0xvZyA9IChyZXEsIHJlcykgPT4ge1xuICBsZXQgcm91dGVDYXRlZ29yeTtcbiAgaWYgKHJlcS5yb3V0ZU9iaiAmJiByZXEucm91dGVPYmoucm91dGVDYXRlZ29yeSkge1xuICAgIHJvdXRlQ2F0ZWdvcnkgPSByZXEucm91dGVPYmoucm91dGVDYXRlZ29yeTtcbiAgfVxuICBpZiAocm91dGVDYXRlZ29yeSAhPT0gXCJoZWFsdGhDaGVja1JvdXRlc1wiKSB7XG4gICAgYXVkaXRMb2dSZXNwb25zZShudWxsLCByZXEsIHJlcyk7XG4gIH1cbiAgcmVzLnN0YXR1cyhyZXMuc3RhdHVzQ29kZSB8fCAyMDApLnNlbmQoeyBzdGF0dXM6IHRydWUsIHJlc3BvbnNlOiByZXMuZGF0YSB9KTtcbn07XG5cbi8qKlxuICogQ2hlY2sgaWYgbm90IGN1c3RvbSBlcnJvciwgY3JlYXRlcyBpbnRlcm5hbCBlcnJvciBhbmQgcmV0dXJuc1xuICogQHBhcmFtIHsqfSBlcnJvclxuICogQHJldHVybnNcbiAqL1xuZnVuY3Rpb24gbWFza1N5c3RlbUVycm9yKGVycm9yKSB7XG4gIGlmIChlcnJvci5uYW1lICE9PSBcIkVycm9yVXRpbHNcIikge1xuICAgIHJldHVybiBFcnJvclV0aWxzLkludGVybmFsU2VydmVyRXJyb3IoKTtcbiAgfVxuICByZXR1cm4gZXJyb3I7XG59XG5cbmV4cG9ydCBjb25zdCByZXNFcnJvckxvZyA9IChlcnJvciwgcmVxLCByZXMsIG5leHQpID0+IHtcbiAgbG9nKFwiZXJyb3JcIiwgZXJyb3Iuc3RhY2spO1xuICBhdWRpdExvZ1Jlc3BvbnNlKGVycm9yLCByZXEsIHJlcyk7XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZVxuICBlcnJvciA9IG1hc2tTeXN0ZW1FcnJvcihlcnJvcik7XG4gIGlmIChyZXMuaGVhZGVyc1NlbnQpIHtcbiAgICByZXR1cm4gbmV4dChlcnJvcik7XG4gIH1cbiAgcmVzLnN0YXR1cyhlcnJvci5zdGF0dXNDb2RlIHx8IDIwMCk7XG4gIHJldHVybiByZXMuc2VuZCh7XG4gICAgc3RhdHVzOiBmYWxzZSxcbiAgICByZXNwb25zZToge1xuICAgICAgY29kZTogZXJyb3IuY29kZSB8fCAxMDAwLFxuICAgICAgcmVhc29uOiBlcnJvci5tZXNzYWdlLFxuICAgIH0sXG4gIH0pO1xufTtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOztBQUNBOztBQUNBOzs7Ozs7QUFFQSxNQUFNQSxnQkFBZ0IsR0FBRyxDQUFDQyxLQUFELEVBQVFDLEdBQVIsRUFBYUMsR0FBYixLQUFxQjtFQUM1QyxNQUFNQyxHQUFHLEdBQUc7SUFDVkMsV0FBVyxFQUFFSCxHQUFHLENBQUNHLFdBRFA7SUFFVkMsTUFBTSxFQUFFSixHQUFHLENBQUNJLE1BRkY7SUFHVkMsU0FBUyxFQUFFTCxHQUFHLENBQUNNLE9BQUosQ0FBWSxZQUFaLENBSEQ7SUFJVkMsU0FBUyxFQUFFUCxHQUFHLENBQUNNLE9BQUosQ0FBWSxpQkFBWixLQUFrQ04sR0FBRyxDQUFDUSxVQUFKLENBQWVDLGFBSmxEO0lBS1ZDLGFBQWEsRUFBRVYsR0FBRyxDQUFDTSxPQUFKLENBQVlJLGFBTGpCO0lBTVZDLFNBQVMsRUFBRVgsR0FBRyxDQUFDWSxRQUFKLENBQWFELFNBTmQ7SUFPVkUsV0FBVyxFQUFFYixHQUFHLENBQUNjLElBUFA7SUFRVkMsWUFBWSxFQUFFLElBQUlDLElBQUosR0FBV0MsT0FBWCxLQUF1QmpCLEdBQUcsQ0FBQ1ksUUFBSixDQUFhTSxTQVJ4QztJQVNWQyxNQUFNLEVBQUU7RUFURSxDQUFaO0VBV0EsTUFBTUMsTUFBTSxHQUFHcEIsR0FBRyxDQUFDcUIsTUFBSixDQUFXLFNBQVgsQ0FBZjs7RUFDQSxJQUFJRCxNQUFKLEVBQVk7SUFDVmxCLEdB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","map":{"version":3,"names":["auditLogResponse","error","req","res","doc","originalUrl","method","userAgent","headers","ipAddress","connection","remoteAddress","correlationId","eventType","routeObj","requestBody","body","responseTime","Date","getTime","startTime","status","apiKey","header","session","mobileNumber","clientId","routeCategory","response","code","reason","message","stack","data","AbstractModels","mongoInsertOne","AuditLogs","resSuccessLog","statusCode","send","maskSystemError","name","ErrorUtils","InternalServerError","resErrorLog","next","log","headersSent"],"sourceRoot":"/Users/ramireddycharitha/git-explore/middlewares/","sources":["ResponseLogger.js"],"sourcesContent":["import * as AbstractModels from \"../models/AbstractModels\";\nimport { AuditLogs } from \"../models/analyticsDbSchema/index\";\nimport * as ErrorUtils from \"../errors/ErrorUtils\";\n\nconst auditLogResponse = (error, req, res) => {\n  const doc = {\n    originalUrl: req.originalUrl,\n    method: req.method,\n    userAgent: req.headers[\"user-agent\"],\n    ipAddress: req.headers[\"x-forwarded-for\"] || req.connection.remoteAddress,\n    correlationId: req.headers.correlationId,\n    eventType: req.routeObj.eventType,\n    requestBody: req.body,\n    responseTime: new Date().getTime() - req.routeObj.startTime,\n    status: true,\n  };\n  const apiKey = req.header(\"api-key\");\n  if (apiKey) {\n    doc.apiKey = apiKey;\n  }\n  if (req.session) {\n    doc.mobileNumber = req.session.mobileNumber;\n    doc.clientId = req.session.clientId;\n    doc.apiKey = req.session.apiKey;\n  }\n  if (req.routeObj) {\n    doc.routeCategory = req.routeObj.routeCategory;\n  }\n\n  if (error) {\n    doc.response = {\n      code: error.code || 1000,\n      reason: error.message,\n      stack: error.stack,\n    };\n    doc.status = false;\n  } else {\n    doc.response = res.data;\n  }\n  AbstractModels.mongoInsertOne(AuditLogs, doc);\n};\n\nexport const resSuccessLog = (req, res) => {\n  let routeCategory;\n  if (req.routeObj && req.routeObj.routeCategory) {\n    routeCategory = req.routeObj.routeCategory;\n  }\n  if (routeCategory !== \"healthCheckRoutes\") {\n    auditLogResponse(null, req, res);\n  }\n  res.status(res.statusCode || 200).send({ status: true, response: res.data });\n};\n\n/**\n * Check if not custom error, creates internal error and returns\n * @param {*} error\n * @returns\n */\nfunction maskSystemError(error) {\n  if (error.name !== \"ErrorUtils\") {\n    return ErrorUtils.InternalServerError();\n  }\n  return error;\n}\n\nexport const resErrorLog = (error, req, res, next) => {\n  log(\"error\", error.stack);\n  auditLogResponse(error, req, res);\n  // eslint-disable-next-line\n  error = maskSystemError(error);\n  if (res.headersSent) {\n    return next(error);\n  }\n  res.status(error.statusCode || 200);\n  return res.send({\n    status: false,\n    response: {\n      code: error.code || 1000,\n      reason: error.message,\n    },\n  });\n};\n"],"mappings":"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"}},"mtime":1653643634184},"{\"assumptions\":{},\"sourceRoot\":\"/Users/ramireddycharitha/git-explore/middlewares/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/ramireddycharitha/git-explore\",\"filename\":\"/Users/ramireddycharitha/git-explore/middlewares/SchemaValidator.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"default\",\"root\":\"/Users/ramireddycharitha/git-explore\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.17.10:default":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.validate = exports.default = void 0;\n\nvar jsValidator = _interopRequireWildcard(require(\"json-schema\"));\n\nvar ErrorUtils = _interopRequireWildcard(require(\"../errors/ErrorUtils\"));\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\n// event type and schema type should be same, its a assumption\nconst validate = (req, res, next) => {\n  const {\n    query,\n    body,\n    routeObj\n  } = req;\n  const querySchema = routeObj.schema?.query;\n  const bodySchema = routeObj.schema?.body;\n  const isValidReqQuery = jsValidator.validate(query, querySchema);\n  const isValidReqBody = jsValidator.validate(body, bodySchema);\n\n  if (!isValidReqQuery.valid) {\n    next(ErrorUtils.InvalidSchemaError(JSON.stringify(isValidReqQuery.errors)));\n  } else if (!isValidReqBody.valid) {\n    next(ErrorUtils.InvalidSchemaError(JSON.stringify(isValidReqBody.errors)));\n  } else {\n    next();\n  }\n};\n\nexports.validate = validate;\nvar _default = validate;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJ2YWxpZGF0ZSIsInJlcSIsInJlcyIsIm5leHQiLCJxdWVyeSIsImJvZHkiLCJyb3V0ZU9iaiIsInF1ZXJ5U2NoZW1hIiwic2NoZW1hIiwiYm9keVNjaGVtYSIsImlzVmFsaWRSZXFRdWVyeSIsImpzVmFsaWRhdG9yIiwiaXNWYWxpZFJlcUJvZHkiLCJ2YWxpZCIsIkVycm9yVXRpbHMiLCJJbnZhbGlkU2NoZW1hRXJyb3IiLCJKU09OIiwic3RyaW5naWZ5IiwiZXJyb3JzIl0sInNvdXJjZVJvb3QiOiIvVXNlcnMvcmFtaXJlZGR5Y2hhcml0aGEvZ2l0LWV4cGxvcmUvbWlkZGxld2FyZXMvIiwic291cmNlcyI6WyJTY2hlbWFWYWxpZGF0b3IuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMganNWYWxpZGF0b3IgZnJvbSBcImpzb24tc2NoZW1hXCI7XG5pbXBvcnQgKiBhcyBFcnJvclV0aWxzIGZyb20gXCIuLi9lcnJvcnMvRXJyb3JVdGlsc1wiO1xuXG4vLyBldmVudCB0eXBlIGFuZCBzY2hlbWEgdHlwZSBzaG91bGQgYmUgc2FtZSwgaXRzIGEgYXNzdW1wdGlvblxuZXhwb3J0IGNvbnN0IHZhbGlkYXRlID0gKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gIGNvbnN0IHsgcXVlcnksIGJvZHksIHJvdXRlT2JqIH0gPSByZXE7XG4gIGNvbnN0IHF1ZXJ5U2NoZW1hID0gcm91dGVPYmouc2NoZW1hPy5xdWVyeTtcbiAgY29uc3QgYm9keVNjaGVtYSA9IHJvdXRlT2JqLnNjaGVtYT8uYm9keTtcblxuICBjb25zdCBpc1ZhbGlkUmVxUXVlcnkgPSBqc1ZhbGlkYXRvci52YWxpZGF0ZShxdWVyeSwgcXVlcnlTY2hlbWEpO1xuICBjb25zdCBpc1ZhbGlkUmVxQm9keSA9IGpzVmFsaWRhdG9yLnZhbGlkYXRlKGJvZHksIGJvZHlTY2hlbWEpO1xuICBpZiAoIWlzVmFsaWRSZXFRdWVyeS52YWxpZCkge1xuICAgIG5leHQoRXJyb3JVdGlscy5JbnZhbGlkU2NoZW1hRXJyb3IoSlNPTi5zdHJpbmdpZnkoaXNWYWxpZFJlcVF1ZXJ5LmVycm9ycykpKTtcbiAgfSBlbHNlIGlmICghaXNWYWxpZFJlcUJvZHkudmFsaWQpIHtcbiAgICBuZXh0KEVycm9yVXRpbHMuSW52YWxpZFNjaGVtYUVycm9yKEpTT04uc3RyaW5naWZ5KGlzVmFsaWRSZXFCb2R5LmVycm9ycykpKTtcbiAgfSBlbHNlIHtcbiAgICBuZXh0KCk7XG4gIH1cbn07XG5cbmV4cG9ydCBkZWZhdWx0IHZhbGlkYXRlO1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7O0FBQ0E7Ozs7OztBQUVBO0FBQ08sTUFBTUEsUUFBUSxHQUFHLENBQUNDLEdBQUQsRUFBTUMsR0FBTixFQUFXQyxJQUFYLEtBQW9CO0VBQzFDLE1BQU07SUFBRUMsS0FBRjtJQUFTQyxJQUFUO0lBQWVDO0VBQWYsSUFBNEJMLEdBQWxDO0VBQ0EsTUFBTU0sV0FBVyxHQUFHRCxRQUFRLENBQUNFLE1BQVQsRUFBaUJKLEtBQXJDO0VBQ0EsTUFBTUssVUFBVSxHQUFHSCxRQUFRLENBQUNFLE1BQVQsRUFBaUJILElBQXBDO0VBRUEsTUFBTUssZUFBZSxHQUFHQyxXQUFXLENBQUNYLFFBQVosQ0FBcUJJLEtBQXJCLEVBQTRCRyxXQUE1QixDQUF4QjtFQUNBLE1BQU1LLGNBQWMsR0FBR0QsV0FBVyxDQUFDWCxRQUFaLENBQXFCSyxJQUFyQixFQUEyQkksVUFBM0IsQ0FBdkI7O0VBQ0EsSUFBSSxDQUFDQyxlQUFlLENBQUNHLEtBQXJCLEVBQTRCO0lBQzFCVixJQUFJLENBQUNXLFVBQVUsQ0FBQ0Msa0JBQVgsQ0FBOEJDLElBQUksQ0FBQ0MsU0FBTCxDQUFlUCxlQUFlLENBQUNRLE1BQS9CLENBQTlCLENBQUQsQ0FBSjtFQUNELENBRkQsTUFFTyxJQUFJLENBQUNOLGNBQWMsQ0FBQ0MsS0FBcEIsRUFBMkI7SUFDaENWLElBQUksQ0FBQ1csVUFBVSxDQUFDQyxrQkFBWCxDQUE4QkMsSUFBSSxDQUFDQyxTQUFMLENBQWVMLGNBQWMsQ0FBQ00sTUFBOUIsQ0FBOUIsQ0FBRCxDQUFKO0VBQ0QsQ0FGTSxNQUVBO0lBQ0xmLElBQUk7RUFDTDtBQUNGLENBZE07OztlQWdCUUgsUSJ9","map":{"version":3,"names":["validate","req","res","next","query","body","routeObj","querySchema","schema","bodySchema","isValidReqQuery","jsValidator","isValidReqBody","valid","ErrorUtils","InvalidSchemaError","JSON","stringify","errors"],"sourceRoot":"/Users/ramireddycharitha/git-explore/middlewares/","sources":["SchemaValidator.js"],"sourcesContent":["import * as jsValidator from \"json-schema\";\nimport * as ErrorUtils from \"../errors/ErrorUtils\";\n\n// event type and schema type should be same, its a assumption\nexport const validate = (req, res, next) => {\n  const { query, body, routeObj } = req;\n  const querySchema = routeObj.schema?.query;\n  const bodySchema = routeObj.schema?.body;\n\n  const isValidReqQuery = jsValidator.validate(query, querySchema);\n  const isValidReqBody = jsValidator.validate(body, bodySchema);\n  if (!isValidReqQuery.valid) {\n    next(ErrorUtils.InvalidSchemaError(JSON.stringify(isValidReqQuery.errors)));\n  } else if (!isValidReqBody.valid) {\n    next(ErrorUtils.InvalidSchemaError(JSON.stringify(isValidReqBody.errors)));\n  } else {\n    next();\n  }\n};\n\nexport default validate;\n"],"mappings":";;;;;;;AAAA;;AACA;;;;;;AAEA;AACO,MAAMA,QAAQ,GAAG,CAACC,GAAD,EAAMC,GAAN,EAAWC,IAAX,KAAoB;EAC1C,MAAM;IAAEC,KAAF;IAASC,IAAT;IAAeC;EAAf,IAA4BL,GAAlC;EACA,MAAMM,WAAW,GAAGD,QAAQ,CAACE,MAAT,EAAiBJ,KAArC;EACA,MAAMK,UAAU,GAAGH,QAAQ,CAACE,MAAT,EAAiBH,IAApC;EAEA,MAAMK,eAAe,GAAGC,WAAW,CAACX,QAAZ,CAAqBI,KAArB,EAA4BG,WAA5B,CAAxB;EACA,MAAMK,cAAc,GAAGD,WAAW,CAACX,QAAZ,CAAqBK,IAArB,EAA2BI,UAA3B,CAAvB;;EACA,IAAI,CAACC,eAAe,CAACG,KAArB,EAA4B;IAC1BV,IAAI,CAACW,UAAU,CAACC,kBAAX,CAA8BC,IAAI,CAACC,SAAL,CAAeP,eAAe,CAACQ,MAA/B,CAA9B,CAAD,CAAJ;EACD,CAFD,MAEO,IAAI,CAACN,cAAc,CAACC,KAApB,EAA2B;IAChCV,IAAI,CAACW,UAAU,CAACC,kBAAX,CAA8BC,IAAI,CAACC,SAAL,CAAeL,cAAc,CAACM,MAA9B,CAA9B,CAAD,CAAJ;EACD,CAFM,MAEA;IACLf,IAAI;EACL;AACF,CAdM;;;eAgBQH,Q"}},"mtime":1654147075974},"{\"assumptions\":{},\"sourceRoot\":\"/Users/ramireddycharitha/git-explore/middlewares/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/ramireddycharitha/git-explore\",\"filename\":\"/Users/ramireddycharitha/git-explore/middlewares/HttpContextMiddleware.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"default\",\"root\":\"/Users/ramireddycharitha/git-explore\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.17.10:default":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.setHttpContextErrorResponsePayload = setHttpContextErrorResponsePayload;\nexports.setHttpContextMetrics = setHttpContextMetrics;\nexports.setHttpContextRequestPayload = setHttpContextRequestPayload;\nexports.setHttpContextResponsePayload = setHttpContextResponsePayload;\nexports.setHttpContextUserDetails = setHttpContextUserDetails;\n\nvar Constants = _interopRequireWildcard(require(\"../constants/Constants\"));\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nconst httpContext = require(\"express-http-context\");\n\nconst _ = require(\"lodash\");\n\nfunction setHttpContextMetrics(req, res, next) {\n  httpContext.set(Constants.LOGGER_REQUEST_START_TIME, process.hrtime.bigint());\n  httpContext.set(Constants.LOGGER_API_ROUTE, req.path);\n  httpContext.set(Constants.LOGGER_USER_IP_ADDRESS, req.headers[\"x-forwarded-for\"] || req.connection.remoteAddress);\n  next();\n}\n\nfunction setHttpContextUserDetails(req, res, next) {\n  // set session payload for metroauth initi\n  if (req.session) {\n    httpContext.set(Constants.LOGGER_USER_DETAILS, {\n      userId: req.session.user_id || \"\",\n      primaryNumber: req.session.zvr_mobile_no || \"\",\n      doosraNumber: req.session.v_mobile_no || \"\"\n    });\n  }\n\n  next();\n} // unable to capture dynamic url path in request middleware\n// req.route.path is populated when it hits matched route only\n// is captured in response middleware\n// http://expressjs.com/en/api.html#req.route\n\n\nfunction setHttpContextRequestPayload(req, res, next) {\n  httpContext.set(Constants.LOGGER_REQUEST_PAYLOAD, {\n    // clone\n    urlDetails: _.cloneDeep({\n      path: req.path,\n      baseUrl: req.baseUrl,\n      host: req.hostname,\n      httpVersion: req.httpVersion,\n      method: req.method,\n      originalUrl: req.originalUrl,\n      protocol: req.protocol,\n      url: req.url\n    }),\n    headers: _.cloneDeep(req.headers),\n    params: _.cloneDeep(req.params),\n    body: _.cloneDeep(req.body),\n    query: _.cloneDeep(req.query)\n  });\n  next();\n}\n/**\n *\n * @param {*} req\n *\n * https://expressjs.com/en/api.html#req.route\n * Contains the currently-matched route, a string.\n * req.route.path is update on matched route and available in response middleware.\n */\n\n\nfunction setHttpContextDynamicRoutePath(req) {\n  const requestPayload = httpContext.get(Constants.LOGGER_REQUEST_PAYLOAD);\n\n  if (requestPayload && requestPayload.urlDetails) {\n    requestPayload.urlDetails.dynamicRoutePath = req.route?.path;\n    httpContext.set(Constants.LOGGER_REQUEST_PAYLOAD, _.cloneDeep(requestPayload));\n  }\n}\n\nfunction getResponseTime() {\n  let timeDiff = \"-\";\n  const nanoToMilli = BigInt(1e6);\n  const startTime = httpContext.get(Constants.LOGGER_REQUEST_START_TIME);\n  const endTime = process.hrtime.bigint();\n\n  try {\n    if (typeof startTime === \"bigint\" && typeof endTime === \"bigint\") {\n      timeDiff = (endTime - startTime) / nanoToMilli;\n    }\n  } catch (error) {\n    log(\"error\", {\n      error\n    });\n  }\n\n  return `${timeDiff}ms`;\n}\n\nfunction setHttpContextResponsePayload(req, res, next) {\n  const out = {\n    headers: res.getHeaders(),\n    data: res.data\n  };\n  setHttpContextDynamicRoutePath(req);\n  httpContext.set(Constants.LOGGER_RESPONSE_PAYLOAD, _.cloneDeep(out));\n  httpContext.set(Constants.LOGGER_RESPONSE_TIME, getResponseTime());\n  next();\n}\n\nfunction setHttpContextErrorResponsePayload(error, req, res, next) {\n  const out = {\n    headers: res.getHeaders(),\n    error\n  };\n  setHttpContextDynamicRoutePath(req);\n  httpContext.set(Constants.LOGGER_RESPONSE_PAYLOAD, _.cloneDeep(out));\n  httpContext.set(Constants.LOGGER_RESPONSE_TIME, getResponseTime());\n  next(error);\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJodHRwQ29udGV4dCIsInJlcXVpcmUiLCJfIiwic2V0SHR0cENvbnRleHRNZXRyaWNzIiwicmVxIiwicmVzIiwibmV4dCIsInNldCIsIkNvbnN0YW50cyIsIkxPR0dFUl9SRVFVRVNUX1NUQVJUX1RJTUUiLCJwcm9jZXNzIiwiaHJ0aW1lIiwiYmlnaW50IiwiTE9HR0VSX0FQSV9ST1VURSIsInBhdGgiLCJMT0dHRVJfVVNFUl9JUF9BRERSRVNTIiwiaGVhZGVycyIsImNvbm5lY3Rpb24iLCJyZW1vdGVBZGRyZXNzIiwic2V0SHR0cENvbnRleHRVc2VyRGV0YWlscyIsInNlc3Npb24iLCJMT0dHRVJfVVNFUl9ERVRBSUxTIiwidXNlcklkIiwidXNlcl9pZCIsInByaW1hcnlOdW1iZXIiLCJ6dnJfbW9iaWxlX25vIiwiZG9vc3JhTnVtYmVyIiwidl9tb2JpbGVfbm8iLCJzZXRIdHRwQ29udGV4dFJlcXVlc3RQYXlsb2FkIiwiTE9HR0VSX1JFUVVFU1RfUEFZTE9BRCIsInVybERldGFpbHMiLCJjbG9uZURlZXAiLCJiYXNlVXJsIiwiaG9zdCIsImhvc3RuYW1lIiwiaHR0cFZlcnNpb24iLCJtZXRob2QiLCJvcmlnaW5hbFVybCIsInByb3RvY29sIiwidXJsIiwicGFyYW1zIiwiYm9keSIsInF1ZXJ5Iiwic2V0SHR0cENvbnRleHREeW5hbWljUm91dGVQYXRoIiwicmVxdWVzdFBheWxvYWQiLCJnZXQiLCJkeW5hbWljUm91dGVQYXRoIiwicm91dGUiLCJnZXRSZXNwb25zZVRpbWUiLCJ0aW1lRGlmZiIsIm5hbm9Ub01pbGxpIiwiQmlnSW50Iiwic3RhcnRUaW1lIiwiZW5kVGltZSIsImVycm9yIiwibG9nIiwic2V0SHR0cENvbnRleHRSZXNwb25zZVBheWxvYWQiLCJvdXQiLCJnZXRIZWFkZXJzIiwiZGF0YSIsIkxPR0dFUl9SRVNQT05TRV9QQVlMT0FEIiwiTE9HR0VSX1JFU1BPTlNFX1RJTUUiLCJzZXRIdHRwQ29udGV4dEVycm9yUmVzcG9uc2VQYXlsb2FkIl0sInNvdXJjZVJvb3QiOiIvVXNlcnMvcmFtaXJlZGR5Y2hhcml0aGEvZ2l0LWV4cGxvcmUvbWlkZGxld2FyZXMvIiwic291cmNlcyI6WyJIdHRwQ29udGV4dE1pZGRsZXdhcmUuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgQ29uc3RhbnRzIGZyb20gXCIuLi9jb25zdGFudHMvQ29uc3RhbnRzXCI7XG5cbmNvbnN0IGh0dHBDb250ZXh0ID0gcmVxdWlyZShcImV4cHJlc3MtaHR0cC1jb250ZXh0XCIpO1xuY29uc3QgXyA9IHJlcXVpcmUoXCJsb2Rhc2hcIik7XG5cbmV4cG9ydCBmdW5jdGlvbiBzZXRIdHRwQ29udGV4dE1ldHJpY3MocmVxLCByZXMsIG5leHQpIHtcbiAgaHR0cENvbnRleHQuc2V0KENvbnN0YW50cy5MT0dHRVJfUkVRVUVTVF9TVEFSVF9USU1FLCBwcm9jZXNzLmhydGltZS5iaWdpbnQoKSk7XG4gIGh0dHBDb250ZXh0LnNldChDb25zdGFudHMuTE9HR0VSX0FQSV9ST1VURSwgcmVxLnBhdGgpO1xuICBodHRwQ29udGV4dC5zZXQoQ29uc3RhbnRzLkxPR0dFUl9VU0VSX0lQX0FERFJFU1MsIHJlcS5oZWFkZXJzW1wieC1mb3J3YXJkZWQtZm9yXCJdIHx8IHJlcS5jb25uZWN0aW9uLnJlbW90ZUFkZHJlc3MpO1xuICBuZXh0KCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzZXRIdHRwQ29udGV4dFVzZXJEZXRhaWxzKHJlcSwgcmVzLCBuZXh0KSB7XG4gIC8vIHNldCBzZXNzaW9uIHBheWxvYWQgZm9yIG1ldHJvYXV0aCBpbml0aVxuICBpZiAocmVxLnNlc3Npb24pIHtcbiAgICBodHRwQ29udGV4dC5zZXQoQ29uc3RhbnRzLkxPR0dFUl9VU0VSX0RFVEFJTFMsIHtcbiAgICAgIHVzZXJJZDogcmVxLnNlc3Npb24udXNlcl9pZCB8fCBcIlwiLFxuICAgICAgcHJpbWFyeU51bWJlcjogcmVxLnNlc3Npb24uenZyX21vYmlsZV9ubyB8fCBcIlwiLFxuICAgICAgZG9vc3JhTnVtYmVyOiByZXEuc2Vzc2lvbi52X21vYmlsZV9ubyB8fCBcIlwiLFxuICAgIH0pO1xuICB9XG4gIG5leHQoKTtcbn1cblxuLy8gdW5hYmxlIHRvIGNhcHR1cmUgZHluYW1pYyB1cmwgcGF0aCBpbiByZXF1ZXN0IG1pZGRsZXdhcmVcbi8vIHJlcS5yb3V0ZS5wYXRoIGlzIHBvcHVsYXRlZCB3aGVuIGl0IGhpdHMgbWF0Y2hlZCByb3V0ZSBvbmx5XG4vLyBpcyBjYXB0dXJlZCBpbiByZXNwb25zZSBtaWRkbGV3YXJlXG4vLyBodHRwOi8vZXhwcmVzc2pzLmNvbS9lbi9hcGkuaHRtbCNyZXEucm91dGVcbmV4cG9ydCBmdW5jdGlvbiBzZXRIdHRwQ29udGV4dFJlcXVlc3RQYXlsb2FkKHJlcSwgcmVzLCBuZXh0KSB7XG4gIGh0dHBDb250ZXh0LnNldChDb25zdGFudHMuTE9HR0VSX1JFUVVFU1RfUEFZTE9BRCwge1xuICAgIC8vIGNsb25lXG4gICAgdXJsRGV0YWlsczogXy5jbG9uZURlZXAoe1xuICAgICAgcGF0aDogcmVxLnBhdGgsXG4gICAgICBiYXNlVXJsOiByZXEuYmFzZVVybCxcbiAgICAgIGhvc3Q6IHJlcS5ob3N0bmFtZSxcbiAgICAgIGh0dHBWZXJzaW9uOiByZXEuaHR0cFZlcnNpb24sXG4gICAgICBtZXRob2Q6IHJlcS5tZXRob2QsXG4gICAgICBvcmlnaW5hbFVybDogcmVxLm9yaWdpbmFsVXJsLFxuICAgICAgcHJvdG9jb2w6IHJlcS5wcm90b2NvbCxcbiAgICAgIHVybDogcmVxLnVybCxcbiAgICB9KSxcbiAgICBoZWFkZXJzOiBfLmNsb25lRGVlcChyZXEuaGVhZGVycyksXG4gICAgcGFyYW1zOiBfLmNsb25lRGVlcChyZXEucGFyYW1zKSxcbiAgICBib2R5OiBfLmNsb25lRGVlcChyZXEuYm9keSksXG4gICAgcXVlcnk6IF8uY2xvbmVEZWVwKHJlcS5xdWVyeSksXG4gIH0pO1xuICBuZXh0KCk7XG59XG5cbi8qKlxuICpcbiAqIEBwYXJhbSB7Kn0gcmVxXG4gKlxuICogaHR0cHM6Ly9leHByZXNzanMuY29tL2VuL2FwaS5odG1sI3JlcS5yb3V0ZVxuICogQ29udGFpbnMgdGhlIGN1cnJlbnRseS1tYXRjaGVkIHJvdXRlLCBhIHN0cmluZy5cbiAqIHJlcS5yb3V0ZS5wYXRoIGlzIHVwZGF0ZSBvbiBtYXRjaGVkIHJvdXRlIGFuZCBhdmFpbGFibGUgaW4gcmVzcG9uc2UgbWlkZGxld2FyZS5cbiAqL1xuZnVuY3Rpb24gc2V0SHR0cENvbnRleHREeW5hbWljUm91dGVQYXRoKHJlcSkge1xuICBjb25zdCByZXF1ZXN0UGF5bG9hZCA9IGh0dHBDb250ZXh0LmdldChDb25zdGFudHMuTE9HR0VSX1JFUVVFU1RfUEFZTE9BRCk7XG4gIGlmIChyZXF1ZXN0UGF5bG9hZCAmJiByZXF1ZXN0UGF5bG9hZC51cmxEZXRhaWxzKSB7XG4gICAgcmVxdWVzdFBheWxvYWQudXJsRGV0YWlscy5keW5hbWljUm91dGVQYXRoID0gcmVxLnJvdXRlPy5wYXRoO1xuICAgIGh0dHBDb250ZXh0LnNldChDb25zdGFudHMuTE9HR0VSX1JFUVVFU1RfUEFZTE9BRCwgXy5jbG9uZURlZXAocmVxdWVzdFBheWxvYWQpKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBnZXRSZXNwb25zZVRpbWUoKSB7XG4gIGxldCB0aW1lRGlmZiA9IFwiLVwiO1xuICBjb25zdCBuYW5vVG9NaWxsaSA9IEJpZ0ludCgxZTYpO1xuICBjb25zdCBzdGFydFRpbWUgPSBodHRwQ29udGV4dC5nZXQoQ29uc3RhbnRzLkxPR0dFUl9SRVFVRVNUX1NUQVJUX1RJTUUpO1xuICBjb25zdCBlbmRUaW1lID0gcHJvY2Vzcy5ocnRpbWUuYmlnaW50KCk7XG4gIHRyeSB7XG4gICAgaWYgKHR5cGVvZiBzdGFydFRpbWUgPT09IFwiYmlnaW50XCIgJiYgdHlwZW9mIGVuZFRpbWUgPT09IFwiYmlnaW50XCIpIHtcbiAgICAgIHRpbWVEaWZmID0gKGVuZFRpbWUgLSBzdGFydFRpbWUpIC8gbmFub1RvTWlsbGk7XG4gICAgfVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGxvZyhcImVycm9yXCIsIHsgZXJyb3IgfSk7XG4gIH1cbiAgcmV0dXJuIGAke3RpbWVEaWZmfW1zYDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNldEh0dHBDb250ZXh0UmVzcG9uc2VQYXlsb2FkKHJlcSwgcmVzLCBuZXh0KSB7XG4gIGNvbnN0IG91dCA9IHtcbiAgICBoZWFkZXJzOiByZXMuZ2V0SGVhZGVycygpLFxuICAgIGRhdGE6IHJlcy5kYXRhLFxuICB9O1xuICBzZXRIdHRwQ29udGV4dER5bmFtaWNSb3V0ZVBhdGgocmVxKTtcbiAgaHR0cENvbnRleHQuc2V0KENvbnN0YW50cy5MT0dHRVJfUkVTUE9OU0VfUEFZTE9BRCwgXy5jbG9uZURlZXAob3V0KSk7XG4gIGh0dHBDb250ZXh0LnNldChDb25zdGFudHMuTE9HR0VSX1JFU1BPTlNFX1RJTUUsIGdldFJlc3BvbnNlVGltZSgpKTtcbiAgbmV4dCgpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc2V0SHR0cENvbnRleHRFcnJvclJlc3BvbnNlUGF5bG9hZChlcnJvciwgcmVxLCByZXMsIG5leHQpIHtcbiAgY29uc3Qgb3V0ID0ge1xuICAgIGhlYWRlcnM6IHJlcy5nZXRIZWFkZXJzKCksXG4gICAgZXJyb3IsXG4gIH07XG4gIHNldEh0dHBDb250ZXh0RHluYW1pY1JvdXRlUGF0aChyZXEpO1xuICBodHRwQ29udGV4dC5zZXQoQ29uc3RhbnRzLkxPR0dFUl9SRVNQT05TRV9QQVlMT0FELCBfLmNsb25lRGVlcChvdXQpKTtcbiAgaHR0cENvbnRleHQuc2V0KENvbnN0YW50cy5MT0dHRVJfUkVTUE9OU0VfVElNRSwgZ2V0UmVzcG9uc2VUaW1lKCkpO1xuICBuZXh0KGVycm9yKTtcbn1cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBQTs7Ozs7O0FBRUEsTUFBTUEsV0FBVyxHQUFHQyxPQUFPLENBQUMsc0JBQUQsQ0FBM0I7O0FBQ0EsTUFBTUMsQ0FBQyxHQUFHRCxPQUFPLENBQUMsUUFBRCxDQUFqQjs7QUFFTyxTQUFTRSxxQkFBVCxD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","map":{"version":3,"names":["httpContext","require","_","setHttpContextMetrics","req","res","next","set","Constants","LOGGER_REQUEST_START_TIME","process","hrtime","bigint","LOGGER_API_ROUTE","path","LOGGER_USER_IP_ADDRESS","headers","connection","remoteAddress","setHttpContextUserDetails","session","LOGGER_USER_DETAILS","userId","user_id","primaryNumber","zvr_mobile_no","doosraNumber","v_mobile_no","setHttpContextRequestPayload","LOGGER_REQUEST_PAYLOAD","urlDetails","cloneDeep","baseUrl","host","hostname","httpVersion","method","originalUrl","protocol","url","params","body","query","setHttpContextDynamicRoutePath","requestPayload","get","dynamicRoutePath","route","getResponseTime","timeDiff","nanoToMilli","BigInt","startTime","endTime","error","log","setHttpContextResponsePayload","out","getHeaders","data","LOGGER_RESPONSE_PAYLOAD","LOGGER_RESPONSE_TIME","setHttpContextErrorResponsePayload"],"sourceRoot":"/Users/ramireddycharitha/git-explore/middlewares/","sources":["HttpContextMiddleware.js"],"sourcesContent":["import * as Constants from \"../constants/Constants\";\n\nconst httpContext = require(\"express-http-context\");\nconst _ = require(\"lodash\");\n\nexport function setHttpContextMetrics(req, res, next) {\n  httpContext.set(Constants.LOGGER_REQUEST_START_TIME, process.hrtime.bigint());\n  httpContext.set(Constants.LOGGER_API_ROUTE, req.path);\n  httpContext.set(Constants.LOGGER_USER_IP_ADDRESS, req.headers[\"x-forwarded-for\"] || req.connection.remoteAddress);\n  next();\n}\n\nexport function setHttpContextUserDetails(req, res, next) {\n  // set session payload for metroauth initi\n  if (req.session) {\n    httpContext.set(Constants.LOGGER_USER_DETAILS, {\n      userId: req.session.user_id || \"\",\n      primaryNumber: req.session.zvr_mobile_no || \"\",\n      doosraNumber: req.session.v_mobile_no || \"\",\n    });\n  }\n  next();\n}\n\n// unable to capture dynamic url path in request middleware\n// req.route.path is populated when it hits matched route only\n// is captured in response middleware\n// http://expressjs.com/en/api.html#req.route\nexport function setHttpContextRequestPayload(req, res, next) {\n  httpContext.set(Constants.LOGGER_REQUEST_PAYLOAD, {\n    // clone\n    urlDetails: _.cloneDeep({\n      path: req.path,\n      baseUrl: req.baseUrl,\n      host: req.hostname,\n      httpVersion: req.httpVersion,\n      method: req.method,\n      originalUrl: req.originalUrl,\n      protocol: req.protocol,\n      url: req.url,\n    }),\n    headers: _.cloneDeep(req.headers),\n    params: _.cloneDeep(req.params),\n    body: _.cloneDeep(req.body),\n    query: _.cloneDeep(req.query),\n  });\n  next();\n}\n\n/**\n *\n * @param {*} req\n *\n * https://expressjs.com/en/api.html#req.route\n * Contains the currently-matched route, a string.\n * req.route.path is update on matched route and available in response middleware.\n */\nfunction setHttpContextDynamicRoutePath(req) {\n  const requestPayload = httpContext.get(Constants.LOGGER_REQUEST_PAYLOAD);\n  if (requestPayload && requestPayload.urlDetails) {\n    requestPayload.urlDetails.dynamicRoutePath = req.route?.path;\n    httpContext.set(Constants.LOGGER_REQUEST_PAYLOAD, _.cloneDeep(requestPayload));\n  }\n}\n\nfunction getResponseTime() {\n  let timeDiff = \"-\";\n  const nanoToMilli = BigInt(1e6);\n  const startTime = httpContext.get(Constants.LOGGER_REQUEST_START_TIME);\n  const endTime = process.hrtime.bigint();\n  try {\n    if (typeof startTime === \"bigint\" && typeof endTime === \"bigint\") {\n      timeDiff = (endTime - startTime) / nanoToMilli;\n    }\n  } catch (error) {\n    log(\"error\", { error });\n  }\n  return `${timeDiff}ms`;\n}\n\nexport function setHttpContextResponsePayload(req, res, next) {\n  const out = {\n    headers: res.getHeaders(),\n    data: res.data,\n  };\n  setHttpContextDynamicRoutePath(req);\n  httpContext.set(Constants.LOGGER_RESPONSE_PAYLOAD, _.cloneDeep(out));\n  httpContext.set(Constants.LOGGER_RESPONSE_TIME, getResponseTime());\n  next();\n}\n\nexport function setHttpContextErrorResponsePayload(error, req, res, next) {\n  const out = {\n    headers: res.getHeaders(),\n    error,\n  };\n  setHttpContextDynamicRoutePath(req);\n  httpContext.set(Constants.LOGGER_RESPONSE_PAYLOAD, _.cloneDeep(out));\n  httpContext.set(Constants.LOGGER_RESPONSE_TIME, getResponseTime());\n  next(error);\n}\n"],"mappings":"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"}},"mtime":1653643634181},"{\"assumptions\":{},\"sourceRoot\":\"/Users/ramireddycharitha/git-explore/connections/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/ramireddycharitha/git-explore\",\"filename\":\"/Users/ramireddycharitha/git-explore/connections/RedisClient.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"default\",\"root\":\"/Users/ramireddycharitha/git-explore\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.17.10:default":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.RedisClient = void 0;\nexports.getDbInstance = getDbInstance;\nexports.init = init;\n\nvar _redis = require(\"redis\");\n\nvar _index = _interopRequireDefault(require(\"../config/index\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// eslint-disable-next-line import/no-mutable-exports\nlet RedisClient;\nexports.RedisClient = RedisClient;\n\nfunction init() {\n  const CONN_URL = _index.default.redisConfig.connString;\n\n  if (RedisClient) {\n    return RedisClient;\n  }\n\n  log(\"info\", `CONN_URL to connect to redis ${CONN_URL}`);\n  exports.RedisClient = RedisClient = (0, _redis.createClient)({\n    url: CONN_URL\n  }); //  Redis Connection Events\n\n  RedisClient.on(\"connect\", () => log(\"info\", {\n    redisConnection: \"connect\"\n  }));\n  RedisClient.on(\"ready\", () => log(\"info\", {\n    redisConnection: \"ready\"\n  }));\n  RedisClient.on(\"reconnecting\", () => log(\"info\", {\n    redisConnection: \"reconnecting\"\n  }));\n  RedisClient.on(\"end\", () => log(\"info\", {\n    redisConnection: \"disconnected\"\n  }));\n  RedisClient.on(\"error\", error => log(\"info\", {\n    error\n  }));\n\n  try {\n    RedisClient.connect();\n  } catch (error) {\n    log(\"error\", {\n      error\n    });\n  }\n\n  return RedisClient;\n}\n\nfunction getDbInstance() {\n  return RedisClient;\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJSZWRpc0NsaWVudCIsImluaXQiLCJDT05OX1VSTCIsImNvbmZpZyIsInJlZGlzQ29uZmlnIiwiY29ublN0cmluZyIsImxvZyIsInVybCIsIm9uIiwicmVkaXNDb25uZWN0aW9uIiwiZXJyb3IiLCJjb25uZWN0IiwiZ2V0RGJJbnN0YW5jZSJdLCJzb3VyY2VSb290IjoiL1VzZXJzL3JhbWlyZWRkeWNoYXJpdGhhL2dpdC1leHBsb3JlL2Nvbm5lY3Rpb25zLyIsInNvdXJjZXMiOlsiUmVkaXNDbGllbnQuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY3JlYXRlQ2xpZW50IH0gZnJvbSBcInJlZGlzXCI7XG5pbXBvcnQgY29uZmlnIGZyb20gXCIuLi9jb25maWcvaW5kZXhcIjtcblxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGltcG9ydC9uby1tdXRhYmxlLWV4cG9ydHNcbmV4cG9ydCBsZXQgUmVkaXNDbGllbnQ7XG5cbmV4cG9ydCBmdW5jdGlvbiBpbml0KCkge1xuICBjb25zdCBDT05OX1VSTCA9IGNvbmZpZy5yZWRpc0NvbmZpZy5jb25uU3RyaW5nO1xuXG4gIGlmIChSZWRpc0NsaWVudCkge1xuICAgIHJldHVybiBSZWRpc0NsaWVudDtcbiAgfVxuXG4gIGxvZyhcImluZm9cIiwgYENPTk5fVVJMIHRvIGNvbm5lY3QgdG8gcmVkaXMgJHtDT05OX1VSTH1gKTtcblxuICBSZWRpc0NsaWVudCA9IGNyZWF0ZUNsaWVudCh7XG4gICAgdXJsOiBDT05OX1VSTCxcbiAgfSk7XG5cbiAgLy8gIFJlZGlzIENvbm5lY3Rpb24gRXZlbnRzXG4gIFJlZGlzQ2xpZW50Lm9uKFwiY29ubmVjdFwiLCAoKSA9PiBsb2coXCJpbmZvXCIsIHsgcmVkaXNDb25uZWN0aW9uOiBcImNvbm5lY3RcIiB9KSk7XG4gIFJlZGlzQ2xpZW50Lm9uKFwicmVhZHlcIiwgKCkgPT4gbG9nKFwiaW5mb1wiLCB7IHJlZGlzQ29ubmVjdGlvbjogXCJyZWFkeVwiIH0pKTtcbiAgUmVkaXNDbGllbnQub24oXCJyZWNvbm5lY3RpbmdcIiwgKCkgPT4gbG9nKFwiaW5mb1wiLCB7IHJlZGlzQ29ubmVjdGlvbjogXCJyZWNvbm5lY3RpbmdcIiB9KSk7XG4gIFJlZGlzQ2xpZW50Lm9uKFwiZW5kXCIsICgpID0+IGxvZyhcImluZm9cIiwgeyByZWRpc0Nvbm5lY3Rpb246IFwiZGlzY29ubmVjdGVkXCIgfSkpO1xuICBSZWRpc0NsaWVudC5vbihcImVycm9yXCIsIChlcnJvcikgPT4gbG9nKFwiaW5mb1wiLCB7IGVycm9yIH0pKTtcbiAgdHJ5IHtcbiAgICBSZWRpc0NsaWVudC5jb25uZWN0KCk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgbG9nKFwiZXJyb3JcIiwgeyBlcnJvciB9KTtcbiAgfVxuXG4gIHJldHVybiBSZWRpc0NsaWVudDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldERiSW5zdGFuY2UoKSB7XG4gIHJldHVybiBSZWRpc0NsaWVudDtcbn1cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQUE7O0FBQ0E7Ozs7QUFFQTtBQUNPLElBQUlBLFdBQUo7OztBQUVBLFNBQVNDLElBQVQsR0FBZ0I7RUFDckIsTUFBTUMsUUFBUSxHQUFHQyxlQUFPQyxXQUFQLENBQW1CQyxVQUFwQzs7RUFFQSxJQUFJTCxXQUFKLEVBQWlCO0lBQ2YsT0FBT0EsV0FBUDtFQUNEOztFQUVETSxHQUFHLENBQUMsTUFBRCxFQUFVLGdDQUErQkosUUFBUyxFQUFsRCxDQUFIO0VBRUEsc0JBQUFGLFdBQVcsR0FBRyx5QkFBYTtJQUN6Qk8sR0FBRyxFQUFFTDtFQURvQixDQUFiLENBQWQsQ0FUcUIsQ0FhckI7O0VBQ0FGLFdBQVcsQ0FBQ1EsRUFBWixDQUFlLFNBQWYsRUFBMEIsTUFBTUYsR0FBRyxDQUFDLE1BQUQsRUFBUztJQUFFRyxlQUFlLEVBQUU7RUFBbkIsQ0FBVCxDQUFuQztFQUNBVCxXQUFXLENBQUNRLEVBQVosQ0FBZSxPQUFmLEVBQXdCLE1BQU1GLEdBQUcsQ0FBQyxNQUFELEVBQVM7SUFBRUcsZUFBZSxFQUFFO0VBQW5CLENBQVQsQ0FBakM7RUFDQVQsV0FBVyxDQUFDUSxFQUFaLENBQWUsY0FBZixFQUErQixNQUFNRixHQUFHLENBQUMsTUFBRCxFQUFTO0lBQUVHLGVBQWUsRUFBRTtFQUFuQixDQUFULENBQXhDO0VBQ0FULFdBQVcsQ0FBQ1EsRUFBWixDQUFlLEtBQWYsRUFBc0IsTUFBTUYsR0FBRyxDQUFDLE1BQUQsRUFBUztJQUFFRyxlQUFlLEVBQUU7RUFBbkIsQ0FBVCxDQUEvQjtFQUNBVCxXQUFXLENBQUNRLEVBQVosQ0FBZSxPQUFmLEVBQXlCRSxLQUFELElBQVdKLEdBQUcsQ0FBQyxNQUFELEVBQVM7SUFBRUk7RUFBRixDQUFULENBQXRDOztFQUNBLElBQUk7SUFDRlYsV0FBVyxDQUFDVyxPQUFaO0VBQ0QsQ0FGRCxDQUVFLE9BQU9ELEtBQVAsRUFBYztJQUNkSixHQUFHLENBQUMsT0FBRCxFQUFVO01BQUVJO0lBQUYsQ0FBVixDQUFIO0VBQ0Q7O0VBRUQsT0FBT1YsV0FBUDtBQUNEOztBQUVNLFNBQVNZLGFBQVQsR0FBeUI7RUFDOUIsT0FBT1osV0FBUDtBQUNEIn0=","map":{"version":3,"names":["RedisClient","init","CONN_URL","config","redisConfig","connString","log","url","on","redisConnection","error","connect","getDbInstance"],"sourceRoot":"/Users/ramireddycharitha/git-explore/connections/","sources":["RedisClient.js"],"sourcesContent":["import { createClient } from \"redis\";\nimport config from \"../config/index\";\n\n// eslint-disable-next-line import/no-mutable-exports\nexport let RedisClient;\n\nexport function init() {\n  const CONN_URL = config.redisConfig.connString;\n\n  if (RedisClient) {\n    return RedisClient;\n  }\n\n  log(\"info\", `CONN_URL to connect to redis ${CONN_URL}`);\n\n  RedisClient = createClient({\n    url: CONN_URL,\n  });\n\n  //  Redis Connection Events\n  RedisClient.on(\"connect\", () => log(\"info\", { redisConnection: \"connect\" }));\n  RedisClient.on(\"ready\", () => log(\"info\", { redisConnection: \"ready\" }));\n  RedisClient.on(\"reconnecting\", () => log(\"info\", { redisConnection: \"reconnecting\" }));\n  RedisClient.on(\"end\", () => log(\"info\", { redisConnection: \"disconnected\" }));\n  RedisClient.on(\"error\", (error) => log(\"info\", { error }));\n  try {\n    RedisClient.connect();\n  } catch (error) {\n    log(\"error\", { error });\n  }\n\n  return RedisClient;\n}\n\nexport function getDbInstance() {\n  return RedisClient;\n}\n"],"mappings":";;;;;;;;;AAAA;;AACA;;;;AAEA;AACO,IAAIA,WAAJ;;;AAEA,SAASC,IAAT,GAAgB;EACrB,MAAMC,QAAQ,GAAGC,eAAOC,WAAP,CAAmBC,UAApC;;EAEA,IAAIL,WAAJ,EAAiB;IACf,OAAOA,WAAP;EACD;;EAEDM,GAAG,CAAC,MAAD,EAAU,gCAA+BJ,QAAS,EAAlD,CAAH;EAEA,sBAAAF,WAAW,GAAG,yBAAa;IACzBO,GAAG,EAAEL;EADoB,CAAb,CAAd,CATqB,CAarB;;EACAF,WAAW,CAACQ,EAAZ,CAAe,SAAf,EAA0B,MAAMF,GAAG,CAAC,MAAD,EAAS;IAAEG,eAAe,EAAE;EAAnB,CAAT,CAAnC;EACAT,WAAW,CAACQ,EAAZ,CAAe,OAAf,EAAwB,MAAMF,GAAG,CAAC,MAAD,EAAS;IAAEG,eAAe,EAAE;EAAnB,CAAT,CAAjC;EACAT,WAAW,CAACQ,EAAZ,CAAe,cAAf,EAA+B,MAAMF,GAAG,CAAC,MAAD,EAAS;IAAEG,eAAe,EAAE;EAAnB,CAAT,CAAxC;EACAT,WAAW,CAACQ,EAAZ,CAAe,KAAf,EAAsB,MAAMF,GAAG,CAAC,MAAD,EAAS;IAAEG,eAAe,EAAE;EAAnB,CAAT,CAA/B;EACAT,WAAW,CAACQ,EAAZ,CAAe,OAAf,EAAyBE,KAAD,IAAWJ,GAAG,CAAC,MAAD,EAAS;IAAEI;EAAF,CAAT,CAAtC;;EACA,IAAI;IACFV,WAAW,CAACW,OAAZ;EACD,CAFD,CAEE,OAAOD,KAAP,EAAc;IACdJ,GAAG,CAAC,OAAD,EAAU;MAAEI;IAAF,CAAV,CAAH;EACD;;EAED,OAAOV,WAAP;AACD;;AAEM,SAASY,aAAT,GAAyB;EAC9B,OAAOZ,WAAP;AACD"}},"mtime":1653643634177},"{\"assumptions\":{},\"sourceRoot\":\"/Users/ramireddycharitha/git-explore/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/ramireddycharitha/git-explore\",\"filename\":\"/Users/ramireddycharitha/git-explore/app.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"default\",\"root\":\"/Users/ramireddycharitha/git-explore\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.17.10:default":{"value":{"code":"\"use strict\";\n\nvar _express = _interopRequireDefault(require(\"express\"));\n\nvar Sentry = _interopRequireWildcard(require(\"@sentry/node\"));\n\nvar _cors = _interopRequireDefault(require(\"cors\"));\n\nvar _bodyParser = _interopRequireDefault(require(\"body-parser\"));\n\nrequire(\"express-async-errors\");\n\nvar _User = _interopRequireDefault(require(\"./routes/User\"));\n\nvar _Outboundcall = _interopRequireDefault(require(\"./routes/Outboundcall\"));\n\nvar _Health = _interopRequireDefault(require(\"./routes/Health\"));\n\nvar _index = _interopRequireDefault(require(\"./config/index\"));\n\nvar _RequestLogger = _interopRequireDefault(require(\"./middlewares/RequestLogger\"));\n\nvar _Auth = require(\"./middlewares/Auth\");\n\nvar _ResponseLogger = require(\"./middlewares/ResponseLogger\");\n\nvar _SchemaValidator = require(\"./middlewares/SchemaValidator\");\n\nvar HttpContextMiddleware = _interopRequireWildcard(require(\"./middlewares/HttpContextMiddleware\"));\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/* eslint-disable import/no-import-module-exports */\n// Module Imports\n// Default Imports\n// Named Imports\nconst httpContext = require(\"express-http-context\");\n\nconst app = (0, _express.default)(); // init sentry\n\nSentry.init({\n  dsn: _index.default.sentry_dsn,\n  environment: process.env.NODE_ENV,\n  // name is set in ecosystem config file\n  serverName: process.env.name,\n  // ignore middleware errors\n  ignoreErrors: [/^Non-Error exception captured$/]\n});\napp.use(_bodyParser.default.json());\napp.use((0, _cors.default)()); // init httpcontext\n\napp.use(httpContext.middleware); // set http context\n\napp.use(HttpContextMiddleware.setHttpContextMetrics);\napp.use(HttpContextMiddleware.setHttpContextUserDetails);\napp.use(HttpContextMiddleware.setHttpContextRequestPayload);\napp.use(\"*\", [_RequestLogger.default, _Auth.checks, _SchemaValidator.validate]);\napp.use(\"/v1/health\", _Health.default);\napp.use(\"/v1/user\", _User.default);\napp.use(\"/v1/organisation/outbound-call\", _Outboundcall.default); // The error handler must be before any other error middleware and after all controllers\n\napp.use(Sentry.Handlers.errorHandler()); // attach response payload\n\napp.use(HttpContextMiddleware.setHttpContextResponsePayload); // attach response payload on error\n\napp.use(HttpContextMiddleware.setHttpContextErrorResponsePayload);\napp.use(\"*\", [_ResponseLogger.resSuccessLog, _ResponseLogger.resErrorLog]);\nmodule.exports = app;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJodHRwQ29udGV4dCIsInJlcXVpcmUiLCJhcHAiLCJTZW50cnkiLCJpbml0IiwiZHNuIiwiY29uZmlnIiwic2VudHJ5X2RzbiIsImVudmlyb25tZW50IiwicHJvY2VzcyIsImVudiIsIk5PREVfRU5WIiwic2VydmVyTmFtZSIsIm5hbWUiLCJpZ25vcmVFcnJvcnMiLCJ1c2UiLCJib2R5UGFyc2VyIiwianNvbiIsIm1pZGRsZXdhcmUiLCJIdHRwQ29udGV4dE1pZGRsZXdhcmUiLCJzZXRIdHRwQ29udGV4dE1ldHJpY3MiLCJzZXRIdHRwQ29udGV4dFVzZXJEZXRhaWxzIiwic2V0SHR0cENvbnRleHRSZXF1ZXN0UGF5bG9hZCIsInJlcUxvZyIsImNoZWNrcyIsInZhbGlkYXRlIiwiaGVhbHRoIiwidXNlciIsIk91dGJvdW5kY2FsbCIsIkhhbmRsZXJzIiwiZXJyb3JIYW5kbGVyIiwic2V0SHR0cENvbnRleHRSZXNwb25zZVBheWxvYWQiLCJzZXRIdHRwQ29udGV4dEVycm9yUmVzcG9uc2VQYXlsb2FkIiwicmVzU3VjY2Vzc0xvZyIsInJlc0Vycm9yTG9nIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiL1VzZXJzL3JhbWlyZWRkeWNoYXJpdGhhL2dpdC1leHBsb3JlLyIsInNvdXJjZXMiOlsiYXBwLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIGVzbGludC1kaXNhYmxlIGltcG9ydC9uby1pbXBvcnQtbW9kdWxlLWV4cG9ydHMgKi9cbi8vIE1vZHVsZSBJbXBvcnRzXG5pbXBvcnQgZXhwcmVzcyBmcm9tIFwiZXhwcmVzc1wiO1xuaW1wb3J0ICogYXMgU2VudHJ5IGZyb20gXCJAc2VudHJ5L25vZGVcIjtcbmltcG9ydCBjb3JzIGZyb20gXCJjb3JzXCI7XG5pbXBvcnQgYm9keVBhcnNlciBmcm9tIFwiYm9keS1wYXJzZXJcIjtcbmltcG9ydCBcImV4cHJlc3MtYXN5bmMtZXJyb3JzXCI7XG5cbi8vIERlZmF1bHQgSW1wb3J0c1xuaW1wb3J0IHVzZXIgZnJvbSBcIi4vcm91dGVzL1VzZXJcIjtcbmltcG9ydCBPdXRib3VuZGNhbGwgZnJvbSBcIi4vcm91dGVzL091dGJvdW5kY2FsbFwiO1xuaW1wb3J0IGhlYWx0aCBmcm9tIFwiLi9yb3V0ZXMvSGVhbHRoXCI7XG5pbXBvcnQgY29uZmlnIGZyb20gXCIuL2NvbmZpZy9pbmRleFwiO1xuXG5pbXBvcnQgcmVxTG9nIGZyb20gXCIuL21pZGRsZXdhcmVzL1JlcXVlc3RMb2dnZXJcIjtcblxuLy8gTmFtZWQgSW1wb3J0c1xuaW1wb3J0IHsgY2hlY2tzIH0gZnJvbSBcIi4vbWlkZGxld2FyZXMvQXV0aFwiO1xuaW1wb3J0IHsgcmVzU3VjY2Vzc0xvZywgcmVzRXJyb3JMb2cgfSBmcm9tIFwiLi9taWRkbGV3YXJlcy9SZXNwb25zZUxvZ2dlclwiO1xuaW1wb3J0IHsgdmFsaWRhdGUgfSBmcm9tIFwiLi9taWRkbGV3YXJlcy9TY2hlbWFWYWxpZGF0b3JcIjtcbmltcG9ydCAqIGFzIEh0dHBDb250ZXh0TWlkZGxld2FyZSBmcm9tIFwiLi9taWRkbGV3YXJlcy9IdHRwQ29udGV4dE1pZGRsZXdhcmVcIjtcblxuY29uc3QgaHR0cENvbnRleHQgPSByZXF1aXJlKFwiZXhwcmVzcy1odHRwLWNvbnRleHRcIik7XG5cbmNvbnN0IGFwcCA9IGV4cHJlc3MoKTtcblxuLy8gaW5pdCBzZW50cnlcblNlbnRyeS5pbml0KHtcbiAgZHNuOiBjb25maWcuc2VudHJ5X2RzbixcbiAgZW52aXJvbm1lbnQ6IHByb2Nlc3MuZW52Lk5PREVfRU5WLFxuICAvLyBuYW1lIGlzIHNldCBpbiBlY29zeXN0ZW0gY29uZmlnIGZpbGVcbiAgc2VydmVyTmFtZTogcHJvY2Vzcy5lbnYubmFtZSxcbiAgLy8gaWdub3JlIG1pZGRsZXdhcmUgZXJyb3JzXG4gIGlnbm9yZUVycm9yczogWy9eTm9uLUVycm9yIGV4Y2VwdGlvbiBjYXB0dXJlZCQvXSxcbn0pO1xuYXBwLnVzZShib2R5UGFyc2VyLmpzb24oKSk7XG5hcHAudXNlKGNvcnMoKSk7XG4vLyBpbml0IGh0dHBjb250ZXh0XG5hcHAudXNlKGh0dHBDb250ZXh0Lm1pZGRsZXdhcmUpO1xuXG4vLyBzZXQgaHR0cCBjb250ZXh0XG5hcHAudXNlKEh0dHBDb250ZXh0TWlkZGxld2FyZS5zZXRIdHRwQ29udGV4dE1ldHJpY3MpO1xuYXBwLnVzZShIdHRwQ29udGV4dE1pZGRsZXdhcmUuc2V0SHR0cENvbnRleHRVc2VyRGV0YWlscyk7XG5hcHAudXNlKEh0dHBDb250ZXh0TWlkZGxld2FyZS5zZXRIdHRwQ29udGV4dFJlcXVlc3RQYXlsb2FkKTtcblxuYXBwLnVzZShcIipcIiwgW3JlcUxvZywgY2hlY2tzLCB2YWxpZGF0ZV0pO1xuYXBwLnVzZShcIi92MS9oZWFsdGhcIiwgaGVhbHRoKTtcbmFwcC51c2UoXCIvdjEvdXNlclwiLCB1c2VyKTtcbmFwcC51c2UoXCIvdjEvb3JnYW5pc2F0aW9uL291dGJvdW5kLWNhbGxcIiwgT3V0Ym91bmRjYWxsKTtcblxuLy8gVGhlIGVycm9yIGhhbmRsZXIgbXVzdCBiZSBiZWZvcmUgYW55IG90aGVyIGVycm9yIG1pZGRsZXdhcmUgYW5kIGFmdGVyIGFsbCBjb250cm9sbGVyc1xuYXBwLnVzZShTZW50cnkuSGFuZGxlcnMuZXJyb3JIYW5kbGVyKCkpO1xuXG4vLyBhdHRhY2ggcmVzcG9uc2UgcGF5bG9hZFxuYXBwLnVzZShIdHRwQ29udGV4dE1pZGRsZXdhcmUuc2V0SHR0cENvbnRleHRSZXNwb25zZVBheWxvYWQpO1xuXG4vLyBhdHRhY2ggcmVzcG9uc2UgcGF5bG9hZCBvbiBlcnJvclxuYXBwLnVzZShIdHRwQ29udGV4dE1pZGRsZXdhcmUuc2V0SHR0cENvbnRleHRFcnJvclJlc3BvbnNlUGF5bG9hZCk7XG5cbmFwcC51c2UoXCIqXCIsIFtyZXNTdWNjZXNzTG9nLCByZXNFcnJvckxvZ10pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGFwcDtcbiJdLCJtYXBwaW5ncyI6Ijs7QUFFQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFHQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFFQTs7QUFHQTs7QUFDQTs7QUFDQTs7QUFDQTs7Ozs7Ozs7QUFwQkE7QUFDQTtBQU9BO0FBUUE7QUFNQSxNQUFNQSxXQUFXLEdBQUdDLE9BQU8sQ0FBQyxzQkFBRCxDQUEzQjs7QUFFQSxNQUFNQyxHQUFHLEdBQUcsdUJBQVosQyxDQUVBOztBQUNBQyxNQUFNLENBQUNDLElBQVAsQ0FBWTtFQUNWQyxHQUFHLEVBQUVDLGVBQU9DLFVBREY7RUFFVkMsV0FBVyxFQUFFQyxPQUFPLENBQUNDLEdBQVIsQ0FBWUMsUUFGZjtFQUdWO0VBQ0FDLFVBQVUsRUFBRUgsT0FBTyxDQUFDQyxHQUFSLENBQVlHLElBSmQ7RUFLVjtFQUNBQyxZQUFZLEVBQUUsQ0FBQyxnQ0FBRDtBQU5KLENBQVo7QUFRQVosR0FBRyxDQUFDYSxHQUFKLENBQVFDLG9CQUFXQyxJQUFYLEVBQVI7QUFDQWYsR0FBRyxDQUFDYSxHQUFKLENBQVEsb0JBQVIsRSxDQUNBOztBQUNBYixHQUFHLENBQUNhLEdBQUosQ0FBUWYsV0FBVyxDQUFDa0IsVUFBcEIsRSxDQUVBOztBQUNBaEIsR0FBRyxDQUFDYSxHQUFKLENBQVFJLHFCQUFxQixDQUFDQyxxQkFBOUI7QUFDQWxCLEdBQUcsQ0FBQ2EsR0FBSixDQUFRSSxxQkFBcUIsQ0FBQ0UseUJBQTlCO0FBQ0FuQixHQUFHLENBQUNhLEdBQUosQ0FBUUkscUJBQXFCLENBQUNHLDRCQUE5QjtBQUVBcEIsR0FBRyxDQUFDYSxHQUFKLENBQVEsR0FBUixFQUFhLENBQUNRLHNCQUFELEVBQVNDLFlBQVQsRUFBaUJDLHlCQUFqQixDQUFiO0FBQ0F2QixHQUFHLENBQUNhLEdBQUosQ0FBUSxZQUFSLEVBQXNCVyxlQUF0QjtBQUNBeEIsR0FBRyxDQUFDYSxHQUFKLENBQVEsVUFBUixFQUFvQlksYUFBcEI7QUFDQXpCLEdBQUcsQ0FBQ2EsR0FBSixDQUFRLGdDQUFSLEVBQTBDYSxxQkFBMUMsRSxDQUVBOztBQUNBMUIsR0FBRyxDQUFDYSxHQUFKLENBQVFaLE1BQU0sQ0FBQzBCLFFBQVAsQ0FBZ0JDLFlBQWhCLEVBQVIsRSxDQUVBOztBQUNBNUIsR0FBRyxDQUFDYSxHQUFKLENBQVFJLHFCQUFxQixDQUFDWSw2QkFBOUIsRSxDQUVBOztBQUNBN0IsR0FBRyxDQUFDYSxHQUFKLENBQVFJLHFCQUFxQixDQUFDYSxrQ0FBOUI7QUFFQTlCLEdBQUcsQ0FBQ2EsR0FBSixDQUFRLEdBQVIsRUFBYSxDQUFDa0IsNkJBQUQsRUFBZ0JDLDJCQUFoQixDQUFiO0FBRUFDLE1BQU0sQ0FBQ0MsT0FBUCxHQUFpQmxDLEdBQWpCIn0=","map":{"version":3,"names":["httpContext","require","app","Sentry","init","dsn","config","sentry_dsn","environment","process","env","NODE_ENV","serverName","name","ignoreErrors","use","bodyParser","json","middleware","HttpContextMiddleware","setHttpContextMetrics","setHttpContextUserDetails","setHttpContextRequestPayload","reqLog","checks","validate","health","user","Outboundcall","Handlers","errorHandler","setHttpContextResponsePayload","setHttpContextErrorResponsePayload","resSuccessLog","resErrorLog","module","exports"],"sourceRoot":"/Users/ramireddycharitha/git-explore/","sources":["app.js"],"sourcesContent":["/* eslint-disable import/no-import-module-exports */\n// Module Imports\nimport express from \"express\";\nimport * as Sentry from \"@sentry/node\";\nimport cors from \"cors\";\nimport bodyParser from \"body-parser\";\nimport \"express-async-errors\";\n\n// Default Imports\nimport user from \"./routes/User\";\nimport Outboundcall from \"./routes/Outboundcall\";\nimport health from \"./routes/Health\";\nimport config from \"./config/index\";\n\nimport reqLog from \"./middlewares/RequestLogger\";\n\n// Named Imports\nimport { checks } from \"./middlewares/Auth\";\nimport { resSuccessLog, resErrorLog } from \"./middlewares/ResponseLogger\";\nimport { validate } from \"./middlewares/SchemaValidator\";\nimport * as HttpContextMiddleware from \"./middlewares/HttpContextMiddleware\";\n\nconst httpContext = require(\"express-http-context\");\n\nconst app = express();\n\n// init sentry\nSentry.init({\n  dsn: config.sentry_dsn,\n  environment: process.env.NODE_ENV,\n  // name is set in ecosystem config file\n  serverName: process.env.name,\n  // ignore middleware errors\n  ignoreErrors: [/^Non-Error exception captured$/],\n});\napp.use(bodyParser.json());\napp.use(cors());\n// init httpcontext\napp.use(httpContext.middleware);\n\n// set http context\napp.use(HttpContextMiddleware.setHttpContextMetrics);\napp.use(HttpContextMiddleware.setHttpContextUserDetails);\napp.use(HttpContextMiddleware.setHttpContextRequestPayload);\n\napp.use(\"*\", [reqLog, checks, validate]);\napp.use(\"/v1/health\", health);\napp.use(\"/v1/user\", user);\napp.use(\"/v1/organisation/outbound-call\", Outboundcall);\n\n// The error handler must be before any other error middleware and after all controllers\napp.use(Sentry.Handlers.errorHandler());\n\n// attach response payload\napp.use(HttpContextMiddleware.setHttpContextResponsePayload);\n\n// attach response payload on error\napp.use(HttpContextMiddleware.setHttpContextErrorResponsePayload);\n\napp.use(\"*\", [resSuccessLog, resErrorLog]);\n\nmodule.exports = app;\n"],"mappings":";;AAEA;;AACA;;AACA;;AACA;;AACA;;AAGA;;AACA;;AACA;;AACA;;AAEA;;AAGA;;AACA;;AACA;;AACA;;;;;;;;AApBA;AACA;AAOA;AAQA;AAMA,MAAMA,WAAW,GAAGC,OAAO,CAAC,sBAAD,CAA3B;;AAEA,MAAMC,GAAG,GAAG,uBAAZ,C,CAEA;;AACAC,MAAM,CAACC,IAAP,CAAY;EACVC,GAAG,EAAEC,eAAOC,UADF;EAEVC,WAAW,EAAEC,OAAO,CAACC,GAAR,CAAYC,QAFf;EAGV;EACAC,UAAU,EAAEH,OAAO,CAACC,GAAR,CAAYG,IAJd;EAKV;EACAC,YAAY,EAAE,CAAC,gCAAD;AANJ,CAAZ;AAQAZ,GAAG,CAACa,GAAJ,CAAQC,oBAAWC,IAAX,EAAR;AACAf,GAAG,CAACa,GAAJ,CAAQ,oBAAR,E,CACA;;AACAb,GAAG,CAACa,GAAJ,CAAQf,WAAW,CAACkB,UAApB,E,CAEA;;AACAhB,GAAG,CAACa,GAAJ,CAAQI,qBAAqB,CAACC,qBAA9B;AACAlB,GAAG,CAACa,GAAJ,CAAQI,qBAAqB,CAACE,yBAA9B;AACAnB,GAAG,CAACa,GAAJ,CAAQI,qBAAqB,CAACG,4BAA9B;AAEApB,GAAG,CAACa,GAAJ,CAAQ,GAAR,EAAa,CAACQ,sBAAD,EAASC,YAAT,EAAiBC,yBAAjB,CAAb;AACAvB,GAAG,CAACa,GAAJ,CAAQ,YAAR,EAAsBW,eAAtB;AACAxB,GAAG,CAACa,GAAJ,CAAQ,UAAR,EAAoBY,aAApB;AACAzB,GAAG,CAACa,GAAJ,CAAQ,gCAAR,EAA0Ca,qBAA1C,E,CAEA;;AACA1B,GAAG,CAACa,GAAJ,CAAQZ,MAAM,CAAC0B,QAAP,CAAgBC,YAAhB,EAAR,E,CAEA;;AACA5B,GAAG,CAACa,GAAJ,CAAQI,qBAAqB,CAACY,6BAA9B,E,CAEA;;AACA7B,GAAG,CAACa,GAAJ,CAAQI,qBAAqB,CAACa,kCAA9B;AAEA9B,GAAG,CAACa,GAAJ,CAAQ,GAAR,EAAa,CAACkB,6BAAD,EAAgBC,2BAAhB,CAAb;AAEAC,MAAM,CAACC,OAAP,GAAiBlC,GAAjB"}},"mtime":1653653756267},"{\"assumptions\":{},\"sourceRoot\":\"/Users/ramireddycharitha/git-explore/routes/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/ramireddycharitha/git-explore\",\"filename\":\"/Users/ramireddycharitha/git-explore/routes/User.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"default\",\"root\":\"/Users/ramireddycharitha/git-explore\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.17.10:default":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _express = require(\"express\");\n\nvar UserController = _interopRequireWildcard(require(\"../controllers/UserController\"));\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nconst router = (0, _express.Router)();\nrouter.post(\"/register\", UserController.register);\nrouter.get(\"/user-details\", UserController.getUserDetails);\nrouter.put(\"/user-details\", UserController.updateUserDetails);\nvar _default = router;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJyb3V0ZXIiLCJwb3N0IiwiVXNlckNvbnRyb2xsZXIiLCJyZWdpc3RlciIsImdldCIsImdldFVzZXJEZXRhaWxzIiwicHV0IiwidXBkYXRlVXNlckRldGFpbHMiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy9yYW1pcmVkZHljaGFyaXRoYS9naXQtZXhwbG9yZS9yb3V0ZXMvIiwic291cmNlcyI6WyJVc2VyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFJvdXRlciB9IGZyb20gXCJleHByZXNzXCI7XG5pbXBvcnQgKiBhcyBVc2VyQ29udHJvbGxlciBmcm9tIFwiLi4vY29udHJvbGxlcnMvVXNlckNvbnRyb2xsZXJcIjtcblxuY29uc3Qgcm91dGVyID0gUm91dGVyKCk7XG5cbnJvdXRlci5wb3N0KFwiL3JlZ2lzdGVyXCIsIFVzZXJDb250cm9sbGVyLnJlZ2lzdGVyKTtcbnJvdXRlci5nZXQoXCIvdXNlci1kZXRhaWxzXCIsIFVzZXJDb250cm9sbGVyLmdldFVzZXJEZXRhaWxzKTtcbnJvdXRlci5wdXQoXCIvdXNlci1kZXRhaWxzXCIsIFVzZXJDb250cm9sbGVyLnVwZGF0ZVVzZXJEZXRhaWxzKTtcblxuZXhwb3J0IGRlZmF1bHQgcm91dGVyO1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7O0FBQ0E7Ozs7OztBQUVBLE1BQU1BLE1BQU0sR0FBRyxzQkFBZjtBQUVBQSxNQUFNLENBQUNDLElBQVAsQ0FBWSxXQUFaLEVBQXlCQyxjQUFjLENBQUNDLFFBQXhDO0FBQ0FILE1BQU0sQ0FBQ0ksR0FBUCxDQUFXLGVBQVgsRUFBNEJGLGNBQWMsQ0FBQ0csY0FBM0M7QUFDQUwsTUFBTSxDQUFDTSxHQUFQLENBQVcsZUFBWCxFQUE0QkosY0FBYyxDQUFDSyxpQkFBM0M7ZUFFZVAsTSJ9","map":{"version":3,"names":["router","post","UserController","register","get","getUserDetails","put","updateUserDetails"],"sourceRoot":"/Users/ramireddycharitha/git-explore/routes/","sources":["User.js"],"sourcesContent":["import { Router } from \"express\";\nimport * as UserController from \"../controllers/UserController\";\n\nconst router = Router();\n\nrouter.post(\"/register\", UserController.register);\nrouter.get(\"/user-details\", UserController.getUserDetails);\nrouter.put(\"/user-details\", UserController.updateUserDetails);\n\nexport default router;\n"],"mappings":";;;;;;;AAAA;;AACA;;;;;;AAEA,MAAMA,MAAM,GAAG,sBAAf;AAEAA,MAAM,CAACC,IAAP,CAAY,WAAZ,EAAyBC,cAAc,CAACC,QAAxC;AACAH,MAAM,CAACI,GAAP,CAAW,eAAX,EAA4BF,cAAc,CAACG,cAA3C;AACAL,MAAM,CAACM,GAAP,CAAW,eAAX,EAA4BJ,cAAc,CAACK,iBAA3C;eAEeP,M"}},"mtime":1653643634187},"{\"assumptions\":{},\"sourceRoot\":\"/Users/ramireddycharitha/git-explore/controllers/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/ramireddycharitha/git-explore\",\"filename\":\"/Users/ramireddycharitha/git-explore/controllers/UserController.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"default\",\"root\":\"/Users/ramireddycharitha/git-explore\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.17.10:default":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.updateUserDetails = exports.register = exports.getUserDetails = void 0;\n\nvar Auth = _interopRequireWildcard(require(\"../middlewares/Auth\"));\n\nvar UserService = _interopRequireWildcard(require(\"../services/UserService\"));\n\nvar _Keys = require(\"../constants/Keys\");\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nconst register = async (req, res, next) => {\n  const {\n    mobileNo,\n    password,\n    firstName,\n    lastName\n  } = req.body;\n  const userDetails = {\n    mobileNo,\n    password,\n    firstName,\n    lastName\n  };\n  const clientDetails = {\n    apiKey: req.header(_Keys.HEADER_API_KEY)\n  };\n  const userObj = await UserService.registerUser(userDetails, clientDetails);\n  req.session = Auth.createSessionObj(userObj);\n  res.data = {\n    userDetails: userObj,\n    sessiontoken: req.session\n  };\n  next();\n};\n\nexports.register = register;\n\nconst getUserDetails = async (req, res, next) => {\n  const sessionObj = await Auth.getSessionObj(req);\n  const {\n    mobileNo\n  } = sessionObj;\n  const userObj = await UserService.getUserDetails(mobileNo);\n  res.data = userObj;\n  next();\n};\n\nexports.getUserDetails = getUserDetails;\n\nconst updateUserDetails = async (req, res, next) => {\n  const {\n    firstName,\n    lastName,\n    alternateMobileNo,\n    email\n  } = req.body;\n  const sessionObj = await Auth.getSessionObj(req);\n  const {\n    mobileNo\n  } = sessionObj;\n  const userDetails = {\n    firstName,\n    lastName,\n    alternateMobileNo,\n    email,\n    mobileNo\n  };\n  await UserService.updateUserDetails(userDetails);\n  res.data = { ...userDetails\n  };\n  next();\n};\n\nexports.updateUserDetails = updateUserDetails;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJyZWdpc3RlciIsInJlcSIsInJlcyIsIm5leHQiLCJtb2JpbGVObyIsInBhc3N3b3JkIiwiZmlyc3ROYW1lIiwibGFzdE5hbWUiLCJib2R5IiwidXNlckRldGFpbHMiLCJjbGllbnREZXRhaWxzIiwiYXBpS2V5IiwiaGVhZGVyIiwiSEVBREVSX0FQSV9LRVkiLCJ1c2VyT2JqIiwiVXNlclNlcnZpY2UiLCJyZWdpc3RlclVzZXIiLCJzZXNzaW9uIiwiQXV0aCIsImNyZWF0ZVNlc3Npb25PYmoiLCJkYXRhIiwic2Vzc2lvbnRva2VuIiwiZ2V0VXNlckRldGFpbHMiLCJzZXNzaW9uT2JqIiwiZ2V0U2Vzc2lvbk9iaiIsInVwZGF0ZVVzZXJEZXRhaWxzIiwiYWx0ZXJuYXRlTW9iaWxlTm8iLCJlbWFpbCJdLCJzb3VyY2VSb290IjoiL1VzZXJzL3JhbWlyZWRkeWNoYXJpdGhhL2dpdC1leHBsb3JlL2NvbnRyb2xsZXJzLyIsInNvdXJjZXMiOlsiVXNlckNvbnRyb2xsZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgQXV0aCBmcm9tIFwiLi4vbWlkZGxld2FyZXMvQXV0aFwiO1xuaW1wb3J0ICogYXMgVXNlclNlcnZpY2UgZnJvbSBcIi4uL3NlcnZpY2VzL1VzZXJTZXJ2aWNlXCI7XG5pbXBvcnQge1xuICBIRUFERVJfQVBJX0tFWSxcbn0gZnJvbSBcIi4uL2NvbnN0YW50cy9LZXlzXCI7XG5cbmV4cG9ydCBjb25zdCByZWdpc3RlciA9IGFzeW5jIChyZXEsIHJlcywgbmV4dCkgPT4ge1xuICBjb25zdCB7XG4gICAgbW9iaWxlTm8sIHBhc3N3b3JkLCBmaXJzdE5hbWUsIGxhc3ROYW1lLFxuICB9ID0gcmVxLmJvZHk7XG4gIGNvbnN0IHVzZXJEZXRhaWxzID0ge1xuICAgIG1vYmlsZU5vLFxuICAgIHBhc3N3b3JkLFxuICAgIGZpcnN0TmFtZSxcbiAgICBsYXN0TmFtZSxcbiAgfTtcbiAgY29uc3QgY2xpZW50RGV0YWlscyA9IHtcbiAgICBhcGlLZXk6IHJlcS5oZWFkZXIoSEVBREVSX0FQSV9LRVkpLFxuICB9O1xuICBjb25zdCB1c2VyT2JqID0gYXdhaXQgVXNlclNlcnZpY2UucmVnaXN0ZXJVc2VyKHVzZXJEZXRhaWxzLCBjbGllbnREZXRhaWxzKTtcbiAgcmVxLnNlc3Npb24gPSBBdXRoLmNyZWF0ZVNlc3Npb25PYmoodXNlck9iaik7XG4gIHJlcy5kYXRhID0ge1xuICAgIHVzZXJEZXRhaWxzOiB1c2VyT2JqLFxuICAgIHNlc3Npb250b2tlbjogcmVxLnNlc3Npb24sXG4gIH07XG4gIG5leHQoKTtcbn07XG5cbmV4cG9ydCBjb25zdCBnZXRVc2VyRGV0YWlscyA9IGFzeW5jIChyZXEsIHJlcywgbmV4dCkgPT4ge1xuICBjb25zdCBzZXNzaW9uT2JqID0gYXdhaXQgQXV0aC5nZXRTZXNzaW9uT2JqKHJlcSk7XG4gIGNvbnN0IHsgbW9iaWxlTm8gfSA9IHNlc3Npb25PYmo7XG4gIGNvbnN0IHVzZXJPYmogPSBhd2FpdCBVc2VyU2VydmljZS5nZXRVc2VyRGV0YWlscyhtb2JpbGVObyk7XG4gIHJlcy5kYXRhID0gdXNlck9iajtcbiAgbmV4dCgpO1xufTtcblxuZXhwb3J0IGNvbnN0IHVwZGF0ZVVzZXJEZXRhaWxzID0gYXN5bmMgKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gIGNvbnN0IHtcbiAgICBmaXJzdE5hbWUsIGxhc3ROYW1lLCBhbHRlcm5hdGVNb2JpbGVObywgZW1haWwsXG4gIH0gPSByZXEuYm9keTtcbiAgY29uc3Qgc2Vzc2lvbk9iaiA9IGF3YWl0IEF1dGguZ2V0U2Vzc2lvbk9iaihyZXEpO1xuICBjb25zdCB7IG1vYmlsZU5vIH0gPSBzZXNzaW9uT2JqO1xuICBjb25zdCB1c2VyRGV0YWlscyA9IHtcbiAgICBmaXJzdE5hbWUsXG4gICAgbGFzdE5hbWUsXG4gICAgYWx0ZXJuYXRlTW9iaWxlTm8sXG4gICAgZW1haWwsXG4gICAgbW9iaWxlTm8sXG4gIH07XG4gIGF3YWl0IFVzZXJTZXJ2aWNlLnVwZGF0ZVVzZXJEZXRhaWxzKHVzZXJEZXRhaWxzKTtcbiAgcmVzLmRhdGEgPSB7XG4gICAgLi4udXNlckRldGFpbHMsXG4gIH07XG4gIG5leHQoKTtcbn07XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTs7QUFDQTs7QUFDQTs7Ozs7O0FBSU8sTUFBTUEsUUFBUSxHQUFHLE9BQU9DLEdBQVAsRUFBWUMsR0FBWixFQUFpQkMsSUFBakIsS0FBMEI7RUFDaEQsTUFBTTtJQUNKQyxRQURJO0lBQ01DLFFBRE47SUFDZ0JDLFNBRGhCO0lBQzJCQztFQUQzQixJQUVGTixHQUFHLENBQUNPLElBRlI7RUFHQSxNQUFNQyxXQUFXLEdBQUc7SUFDbEJMLFFBRGtCO0lBRWxCQyxRQUZrQjtJQUdsQkMsU0FIa0I7SUFJbEJDO0VBSmtCLENBQXBCO0VBTUEsTUFBTUcsYUFBYSxHQUFHO0lBQ3BCQyxNQUFNLEVBQUVWLEdBQUcsQ0FBQ1csTUFBSixDQUFXQyxvQkFBWDtFQURZLENBQXRCO0VBR0EsTUFBTUMsT0FBTyxHQUFHLE1BQU1DLFdBQVcsQ0FBQ0MsWUFBWixDQUF5QlAsV0FBekIsRUFBc0NDLGFBQXRDLENBQXRCO0VBQ0FULEdBQUcsQ0FBQ2dCLE9BQUosR0FBY0MsSUFBSSxDQUFDQyxnQkFBTCxDQUFzQkwsT0FBdEIsQ0FBZDtFQUNBWixHQUFHLENBQUNrQixJQUFKLEdBQVc7SUFDVFgsV0FBVyxFQUFFSyxPQURKO0lBRVRPLFlBQVksRUFBRXBCLEdBQUcsQ0FBQ2dCO0VBRlQsQ0FBWDtFQUlBZCxJQUFJO0FBQ0wsQ0FwQk07Ozs7QUFzQkEsTUFBTW1CLGNBQWMsR0FBRyxPQUFPckIsR0FBUCxFQUFZQyxHQUFaLEVBQWlCQyxJQUFqQixLQUEwQjtFQUN0RCxNQUFNb0IsVUFBVSxHQUFHLE1BQU1MLElBQUksQ0FBQ00sYUFBTCxDQUFtQnZCLEdBQW5CLENBQXpCO0VBQ0EsTUFBTTtJQUFFRztFQUFGLElBQWVtQixVQUFyQjtFQUNBLE1BQU1ULE9BQU8sR0FBRyxNQUFNQyxXQUFXLENBQUNPLGNBQVosQ0FBMkJsQixRQUEzQixDQUF0QjtFQUNBRixHQUFHLENBQUNrQixJQUFKLEdBQVdOLE9BQVg7RUFDQVgsSUFBSTtBQUNMLENBTk07Ozs7QUFRQSxNQUFNc0IsaUJBQWlCLEdBQUcsT0FBT3hCLEdBQVAsRUFBWUMsR0FBWixFQUFpQkMsSUFBakIsS0FBMEI7RUFDekQsTUFBTTtJQUNKRyxTQURJO0lBQ09DLFFBRFA7SUFDaUJtQixpQkFEakI7SUFDb0NDO0VBRHBDLElBRUYxQixHQUFHLENBQUNPLElBRlI7RUFHQSxNQUFNZSxVQUFVLEdBQUcsTUFBTUwsSUFBSSxDQUFDTSxhQUFMLENBQW1CdkIsR0FBbkIsQ0FBekI7RUFDQSxNQUFNO0lBQUVHO0VBQUYsSUFBZW1CLFVBQXJCO0VBQ0EsTUFBTWQsV0FBVyxHQUFHO0lBQ2xCSCxTQURrQjtJQUVsQkMsUUFGa0I7SUFHbEJtQixpQkFIa0I7SUFJbEJDLEtBSmtCO0lBS2xCdkI7RUFMa0IsQ0FBcEI7RUFPQSxNQUFNVyxXQUFXLENBQUNVLGlCQUFaLENBQThCaEIsV0FBOUIsQ0FBTjtFQUNBUCxHQUFHLENBQUNrQixJQUFKLEdBQVcsRUFDVCxHQUFHWDtFQURNLENBQVg7RUFHQU4sSUFBSTtBQUNMLENBbEJNIn0=","map":{"version":3,"names":["register","req","res","next","mobileNo","password","firstName","lastName","body","userDetails","clientDetails","apiKey","header","HEADER_API_KEY","userObj","UserService","registerUser","session","Auth","createSessionObj","data","sessiontoken","getUserDetails","sessionObj","getSessionObj","updateUserDetails","alternateMobileNo","email"],"sourceRoot":"/Users/ramireddycharitha/git-explore/controllers/","sources":["UserController.js"],"sourcesContent":["import * as Auth from \"../middlewares/Auth\";\nimport * as UserService from \"../services/UserService\";\nimport {\n  HEADER_API_KEY,\n} from \"../constants/Keys\";\n\nexport const register = async (req, res, next) => {\n  const {\n    mobileNo, password, firstName, lastName,\n  } = req.body;\n  const userDetails = {\n    mobileNo,\n    password,\n    firstName,\n    lastName,\n  };\n  const clientDetails = {\n    apiKey: req.header(HEADER_API_KEY),\n  };\n  const userObj = await UserService.registerUser(userDetails, clientDetails);\n  req.session = Auth.createSessionObj(userObj);\n  res.data = {\n    userDetails: userObj,\n    sessiontoken: req.session,\n  };\n  next();\n};\n\nexport const getUserDetails = async (req, res, next) => {\n  const sessionObj = await Auth.getSessionObj(req);\n  const { mobileNo } = sessionObj;\n  const userObj = await UserService.getUserDetails(mobileNo);\n  res.data = userObj;\n  next();\n};\n\nexport const updateUserDetails = async (req, res, next) => {\n  const {\n    firstName, lastName, alternateMobileNo, email,\n  } = req.body;\n  const sessionObj = await Auth.getSessionObj(req);\n  const { mobileNo } = sessionObj;\n  const userDetails = {\n    firstName,\n    lastName,\n    alternateMobileNo,\n    email,\n    mobileNo,\n  };\n  await UserService.updateUserDetails(userDetails);\n  res.data = {\n    ...userDetails,\n  };\n  next();\n};\n"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;;;;;AAIO,MAAMA,QAAQ,GAAG,OAAOC,GAAP,EAAYC,GAAZ,EAAiBC,IAAjB,KAA0B;EAChD,MAAM;IACJC,QADI;IACMC,QADN;IACgBC,SADhB;IAC2BC;EAD3B,IAEFN,GAAG,CAACO,IAFR;EAGA,MAAMC,WAAW,GAAG;IAClBL,QADkB;IAElBC,QAFkB;IAGlBC,SAHkB;IAIlBC;EAJkB,CAApB;EAMA,MAAMG,aAAa,GAAG;IACpBC,MAAM,EAAEV,GAAG,CAACW,MAAJ,CAAWC,oBAAX;EADY,CAAtB;EAGA,MAAMC,OAAO,GAAG,MAAMC,WAAW,CAACC,YAAZ,CAAyBP,WAAzB,EAAsCC,aAAtC,CAAtB;EACAT,GAAG,CAACgB,OAAJ,GAAcC,IAAI,CAACC,gBAAL,CAAsBL,OAAtB,CAAd;EACAZ,GAAG,CAACkB,IAAJ,GAAW;IACTX,WAAW,EAAEK,OADJ;IAETO,YAAY,EAAEpB,GAAG,CAACgB;EAFT,CAAX;EAIAd,IAAI;AACL,CApBM;;;;AAsBA,MAAMmB,cAAc,GAAG,OAAOrB,GAAP,EAAYC,GAAZ,EAAiBC,IAAjB,KAA0B;EACtD,MAAMoB,UAAU,GAAG,MAAML,IAAI,CAACM,aAAL,CAAmBvB,GAAnB,CAAzB;EACA,MAAM;IAAEG;EAAF,IAAemB,UAArB;EACA,MAAMT,OAAO,GAAG,MAAMC,WAAW,CAACO,cAAZ,CAA2BlB,QAA3B,CAAtB;EACAF,GAAG,CAACkB,IAAJ,GAAWN,OAAX;EACAX,IAAI;AACL,CANM;;;;AAQA,MAAMsB,iBAAiB,GAAG,OAAOxB,GAAP,EAAYC,GAAZ,EAAiBC,IAAjB,KAA0B;EACzD,MAAM;IACJG,SADI;IACOC,QADP;IACiBmB,iBADjB;IACoCC;EADpC,IAEF1B,GAAG,CAACO,IAFR;EAGA,MAAMe,UAAU,GAAG,MAAML,IAAI,CAACM,aAAL,CAAmBvB,GAAnB,CAAzB;EACA,MAAM;IAAEG;EAAF,IAAemB,UAArB;EACA,MAAMd,WAAW,GAAG;IAClBH,SADkB;IAElBC,QAFkB;IAGlBmB,iBAHkB;IAIlBC,KAJkB;IAKlBvB;EALkB,CAApB;EAOA,MAAMW,WAAW,CAACU,iBAAZ,CAA8BhB,WAA9B,CAAN;EACAP,GAAG,CAACkB,IAAJ,GAAW,EACT,GAAGX;EADM,CAAX;EAGAN,IAAI;AACL,CAlBM"}},"mtime":1653643634180},"{\"assumptions\":{},\"sourceRoot\":\"/Users/ramireddycharitha/git-explore/middlewares/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/ramireddycharitha/git-explore\",\"filename\":\"/Users/ramireddycharitha/git-explore/middlewares/Auth.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"default\",\"root\":\"/Users/ramireddycharitha/git-explore\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.17.10:default":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.setMetrics = exports.getSessionObj = exports.createSessionObj = exports.checks = void 0;\n\nvar _path = _interopRequireDefault(require(\"path\"));\n\nvar _jsonwebtoken = _interopRequireDefault(require(\"jsonwebtoken\"));\n\nvar _fs = _interopRequireDefault(require(\"fs\"));\n\nvar _crypto = _interopRequireDefault(require(\"crypto\"));\n\nvar Constants = _interopRequireWildcard(require(\"../constants/Constants\"));\n\nvar ErrorUtils = _interopRequireWildcard(require(\"../errors/ErrorUtils\"));\n\nvar AbstractModels = _interopRequireWildcard(require(\"../models/AbstractModels\"));\n\nvar _index = require(\"../models/mainDbSchema/index\");\n\nvar _RedisClient = require(\"../connections/RedisClient\");\n\nvar _Credentials = require(\"../constants/Credentials\");\n\nvar _Keys = require(\"../constants/Keys\");\n\nvar _util = require(\"util\");\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst httpContext = require(\"express-http-context\"); // Static data can be read using require or fs\n\n\nlet newSessionRoutes = _fs.default.readFileSync(_path.default.resolve(__dirname, \"NewSessionRoutes.json\"), \"utf8\");\n\nnewSessionRoutes = JSON.parse(newSessionRoutes);\n\nlet authenticatedRoutes = _fs.default.readFileSync(_path.default.resolve(__dirname, \"./AuthenticatedRoutes.json\"), \"utf8\");\n\nauthenticatedRoutes = JSON.parse(authenticatedRoutes);\n\nconst uuid = require(\"uuid\");\n\nconst healthCheckRoutes = require(\"./HealthCheckRoutes.json\");\n\nconst noAPIKeyRoutes = require(\"./NoClientIdRoutes.json\");\n\nconst noSessionRoutes = require(\"./NoSessionRoutes.json\");\n\nconst routeMaps = [newSessionRoutes, authenticatedRoutes, noSessionRoutes, noAPIKeyRoutes, healthCheckRoutes];\n\nconst getRouteCategory = routeMapsIndex => {\n  let routeCategory = \"others\";\n\n  if (routeMapsIndex === 0) {\n    routeCategory = \"newSessionRoutes\";\n  } else if (routeMapsIndex === 1) {\n    routeCategory = \"authenticatedRoutes\";\n  } else if (routeMapsIndex === 2) {\n    routeCategory = \"noSessionRoutes\";\n  } else if (routeMapsIndex === 3) {\n    routeCategory = \"noAPIKeyRoutes\";\n  } else if (routeMapsIndex === 4) {\n    routeCategory = \"healthCheckRoutes\";\n  }\n\n  return routeCategory;\n};\n\nconst checkApiKeyValidity = async req => {\n  const apiKey = req.header(_Keys.HEADER_API_KEY); // console.log(\"******************\"+apiKey);\n\n  const selectCondition = {\n    metro_auth_key: apiKey\n  }; // console.log(\"+++++++++++++++++++\"+JSON.stringify(selectCondition));\n\n  const projectCondition = {\n    metro_auth_key: 1,\n    _id: 0\n  }; // console.log(\"+++++++++++++++++++\"+JSON.stringify(projectCondition));\n\n  const isValidAPIKey = await AbstractModels.mongoFindOne(_index.Clients, selectCondition, projectCondition); // console.log(\"********************\"+isValidAPIKey);\n\n  return isValidAPIKey;\n};\n\nconst getRedisSession = async sessionId => {\n  try {\n    // @hotfix: For backward compatibility preprending \"sess:\" to sessionId\n    const redisSession = await _RedisClient.RedisClient.get(`sess:${sessionId}`);\n    return redisSession;\n  } catch (error) {\n    log(\"error\", {\n      error\n    });\n    throw ErrorUtils.redisConnectionError();\n  }\n};\n\nconst decrypt = text => {\n  let resultChiper = \"\";\n\n  const decipher = _crypto.default.createDecipher(_Credentials.ALGORITHM, _Credentials.PASSWORD); // console.log(\"+++++++++++++ length is \"+ text,text.length);\n\n\n  resultChiper = decipher.update(text, \"hex\", \"utf8\");\n  resultChiper += decipher.final(\"utf8\");\n  return resultChiper;\n};\n\nconst getSessionObj = async req => {\n  const sessiontoken = req.header(_Keys.HEADER_SESSION_TOKEN);\n  if (!sessiontoken) throw ErrorUtils.InvalidSessionToken(); // const session = jwt.verify(sessiontoken, SECREAT);\n\n  const sessionId = decrypt(sessiontoken);\n  let session = await getRedisSession(sessionId);\n  log(\"info\", {\n    session,\n    sessionId,\n    sessiontoken\n  });\n\n  if (!session) {\n    throw ErrorUtils.InvalidSessionToken();\n  }\n\n  try {\n    session = JSON.parse(session);\n  } catch (error) {\n    throw ErrorUtils.InvalidSessionToken();\n  } //  console.log(\"the returned value formthe session is +++++++++++++++\"+session);\n\n\n  return session;\n};\n\nexports.getSessionObj = getSessionObj;\n\nconst getRouteObj = (originalUrl, httpMethod) => {\n  let routeObj = {};\n  const normalizedURL = originalUrl.toLowerCase().split(\"?\")[0];\n  const index = normalizedURL.lastIndexOf(\"/\");\n  const baseURL = normalizedURL.substring(0, index);\n  let isRouteObjFound = false;\n\n  for (let i = 0; i < routeMaps.length; i++) {\n    const routeMap = routeMaps[i];\n\n    if (routeMap && routeMap[httpMethod]) {\n      if (routeMap[httpMethod][normalizedURL]) {\n        routeObj = routeMap[httpMethod][normalizedURL];\n        isRouteObjFound = true;\n      } else if (routeMap[httpMethod][`${baseURL}/:param`] && index !== normalizedURL.length - 1) {\n        routeObj = routeMap[httpMethod][`${baseURL}/:param`];\n        isRouteObjFound = true;\n      }\n\n      if (isRouteObjFound) {\n        routeObj.httpMethod = httpMethod;\n        routeObj.baseURL = baseURL;\n        routeObj.normalizedURL = normalizedURL;\n        routeObj.routeCategory = getRouteCategory(i);\n        break;\n      }\n    }\n  } // If route is not found from RoutesMap it shoud be treated as others\n\n\n  if (!isRouteObjFound) {\n    routeObj.httpMethod = httpMethod;\n    routeObj.baseURL = baseURL;\n    routeObj.normalizedURL = normalizedURL;\n    routeObj.routeCategory = \"others\";\n  }\n\n  return routeObj;\n}; // @hotfix: For backward compatibility\n// Business & consumer user roles are stored in different keys in session\n// Possible values for users_business_portal_role are \"admin\" & \"user\"\n\n\nasync function getUserRoles(req) {\n  const session = await getSessionObj(req); // console.log('*****************************'+JSON.stringify(session));\n\n  const {\n    users_business_portal_role: userRoles\n  } = session; // console.log(\"+++++++++++ the role of user is \"+JSON.stringify(userRoles))\n\n  return [].concat(userRoles).map(value => value.toUpperCase());\n}\n\nconst checkAutorization = async req => {\n  let isAuthorizedToAccessRoute = false; // console.log(\"in the check authorization rule--------------------------\");\n\n  const userRoles = await getUserRoles(req);\n  const routeAutorizedRoles = req.routeObj?.roles || [];\n\n  if (routeAutorizedRoles?.filter(value => userRoles.includes(value.toUpperCase()))?.length > 0) {\n    isAuthorizedToAccessRoute = true;\n  }\n\n  return isAuthorizedToAccessRoute;\n};\n\nconst checkBlockListedUser = async () => {\n  // @hotfix: Rewrite this logic according to service need\n  const isBlockedUser = false;\n  return isBlockedUser; // let isBlockedUser = false;\n  // const session = await getSessionObj(req);\n  // const { mobileNo } = session;\n  // const selectCondition = {\n  //   mobileNo,\n  //   isBlockedUser: true,\n  // };\n  // const projectCondition = {\n  //   mobileNo: 1,\n  //   _id: 0,\n  // };\n  // const userObj = await AbstractModels.mongoFindOne(\n  //   Users,\n  //   selectCondition,\n  //   projectCondition,\n  // );\n  // if (userObj) {\n  //   isBlockedUser = true;\n  // }\n  // return isBlockedUser;\n};\n\nconst createSessionObj = data => {\n  const session = _jsonwebtoken.default.sign(data, _Credentials.SECREAT, {\n    expiresIn: 60 * 60 * 24 * 30\n  }); // default is in sec\n\n\n  return session;\n};\n/*\n1.newSessionRoutes\n2.authenticatedRoutes(api key check,sessoin token check,Authorize check,blocklist users check)\n3.noSessionRoutes(api key check)\n4.noAPIKeyRoutes\n5.healthCheckRoutes(Dont' store Audits)\n6.others\n\nFor each req store req, res audits\n*/\n\n\nexports.createSessionObj = createSessionObj;\n\nconst checks = async (req, res, next) => {\n  const {\n    routeCategory\n  } = req.routeObj; // console.log(\"++++++++++++++++++++++++THIS IS ROUTE CATEGORY          \"+routeCategory);\n\n  if (routeCategory === \"others\") {\n    const error = ErrorUtils.InvalidRequest();\n    next(error);\n  } else if (routeCategory === \"healthCheckRoutes\") {\n    next();\n  } else if (routeCategory === \"noAPIKeyRoutes\") {\n    next();\n  } else if (routeCategory === \"noSessionRoutes\" || routeCategory === \"newSessionRoutes\") {\n    const isValidAPIKey = await checkApiKeyValidity(req);\n\n    if (!isValidAPIKey) {\n      const error = ErrorUtils.InvalidAPIKey();\n      next(error);\n    } else {\n      next();\n    }\n  } else if (routeCategory === \"authenticatedRoutes\") {\n    // 1.api key check 2.session token check 3.autorization check 4.blocklisted user check\n    const isValidAPIKey = await checkApiKeyValidity(req);\n    const session = await getSessionObj(req);\n\n    if (!session) {\n      const error = ErrorUtils.InvalidSessionToken();\n      next(error);\n    } else {\n      const isAuthorizedToAccessRoute = await checkAutorization(req); // console.log('***************** is authorized user '+isAuthorizedToAccessRoute);\n\n      const isBlockListeduser = await checkBlockListedUser();\n\n      if (!isValidAPIKey) {\n        const error = ErrorUtils.InvalidAPIKey();\n        next(error);\n      } else if (isBlockListeduser) {\n        const error = ErrorUtils.BlockListedUser();\n        next(error);\n      } else if (!isAuthorizedToAccessRoute) {\n        const error = ErrorUtils.InvalidAuthorization();\n        next(error);\n      } else {\n        req.sesssion = session;\n        next();\n      }\n    }\n  }\n};\n\nexports.checks = checks;\n\nconst setMetrics = (req, res) => {\n  const {\n    originalUrl\n  } = req;\n  const httpMethod = req.method;\n  const routeObj = getRouteObj(originalUrl, httpMethod); // console.log(\"CHecking++++++++++++ \"+JSON.stringify(routeObj));\n\n  routeObj.startTime = new Date().getTime();\n  let correlationId = req.get(Constants.LOGGER_CORRELATIONID);\n\n  if (!correlationId) {\n    // generate and set uuid v4 version\n    correlationId = uuid.v4();\n    httpContext.set(Constants.LOGGER_CORRELATIONID, correlationId); // inject correlationId in headers\n\n    req.headers.correlationId = httpContext.get(Constants.LOGGER_CORRELATIONID);\n    res.set(\"CorrelationId\", httpContext.get(Constants.LOGGER_CORRELATIONID));\n  }\n\n  return routeObj;\n};\n\nexports.setMetrics = setMetrics;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJodHRwQ29udGV4dCIsInJlcXVpcmUiLCJuZXdTZXNzaW9uUm91dGVzIiwiZnMiLCJyZWFkRmlsZVN5bmMiLCJwYXRoIiwicmVzb2x2ZSIsIl9fZGlybmFtZSIsIkpTT04iLCJwYXJzZSIsImF1dGhlbnRpY2F0ZWRSb3V0ZXMiLCJ1dWlkIiwiaGVhbHRoQ2hlY2tSb3V0ZXMiLCJub0FQSUtleVJvdXRlcyIsIm5vU2Vzc2lvblJvdXRlcyIsInJvdXRlTWFwcyIsImdldFJvdXRlQ2F0ZWdvcnkiLCJyb3V0ZU1hcHNJbmRleCIsInJvdXRlQ2F0ZWdvcnkiLCJjaGVja0FwaUtleVZhbGlkaXR5IiwicmVxIiwiYXBpS2V5IiwiaGVhZGVyIiwiSEVBREVSX0FQSV9LRVkiLCJzZWxlY3RDb25kaXRpb24iLCJtZXRyb19hdXRoX2tleSIsInByb2plY3RDb25kaXRpb24iLCJfaWQiLCJpc1ZhbGlkQVBJS2V5IiwiQWJzdHJhY3RNb2RlbHMiLCJtb25nb0ZpbmRPbmUiLCJDbGllbnRzIiwiZ2V0UmVkaXNTZXNzaW9uIiwic2Vzc2lvbklkIiwicmVkaXNTZXNzaW9uIiwiUmVkaXNDbGllbnQiLCJnZXQiLCJlcnJvciIsImxvZyIsIkVycm9yVXRpbHMiLCJyZWRpc0Nvbm5lY3Rpb25FcnJvciIsImRlY3J5cHQiLCJ0ZXh0IiwicmVzdWx0Q2hpcGVyIiwiZGVjaXBoZXIiLCJjcnlwdG8iLCJjcmVhdGVEZWNpcGhlciIsIkFMR09SSVRITSIsIlBBU1NXT1JEIiwidXBkYXRlIiwiZmluYWwiLCJnZXRTZXNzaW9uT2JqIiwic2Vzc2lvbnRva2VuIiwiSEVBREVSX1NFU1NJT05fVE9LRU4iLCJJbnZhbGlkU2Vzc2lvblRva2VuIiwic2Vzc2lvbiIsImdldFJvdXRlT2JqIiwib3JpZ2luYWxVcmwiLCJodHRwTWV0aG9kIiwicm91dGVPYmoiLCJub3JtYWxpemVkVVJMIiwidG9Mb3dlckNhc2UiLCJzcGxpdCIsImluZGV4IiwibGFzdEluZGV4T2YiLCJiYXNlVVJMIiwic3Vic3RyaW5nIiwiaXNSb3V0ZU9iakZvdW5kIiwiaSIsImxlbmd0aCIsInJvdXRlTWFwIiwiZ2V0VXNlclJvbGVzIiwidXNlcnNfYnVzaW5lc3NfcG9ydGFsX3JvbGUiLCJ1c2VyUm9sZXMiLCJjb25jYXQiLCJtYXAiLCJ2YWx1ZSIsInRvVXBwZXJDYXNlIiwiY2hlY2tBdXRvcml6YXRpb24iLCJpc0F1dGhvcml6ZWRUb0FjY2Vzc1JvdXRlIiwicm91dGVBdXRvcml6ZWRSb2xlcyIsInJvbGVzIiwiZmlsdGVyIiwiaW5jbHVkZXMiLCJjaGVja0Jsb2NrTGlzdGVkVXNlciIsImlzQmxvY2tlZFVzZXIiLCJjcmVhdGVTZXNzaW9uT2JqIiwiZGF0YSIsImp3dCIsInNpZ24iLCJTRUNSRUFUIiwiZXhwaXJlc0luIiwiY2hlY2tzIiwicmVzIiwibmV4dCIsIkludmFsaWRSZXF1ZXN0IiwiSW52YWxpZEFQSUtleSIsImlzQmxvY2tMaXN0ZWR1c2VyIiwiQmxvY2tMaXN0ZWRVc2VyIiwiSW52YWxpZEF1dGhvcml6YXRpb24iLCJzZXNzc2lvbiIsInNldE1ldHJpY3MiLCJtZXRob2QiLCJzdGFydFRpbWUiLCJEYXRlIiwiZ2V0VGltZSIsImNvcnJlbGF0aW9uSWQiLCJDb25zdGFudHMiLCJMT0dHRVJfQ09SUkVMQVRJT05JRCIsInY0Iiwic2V0IiwiaGVhZGVycyJdLCJzb3VyY2VSb290IjoiL1VzZXJzL3JhbWlyZWRkeWNoYXJpdGhhL2dpdC1leHBsb3JlL21pZGRsZXdhcmVzLyIsInNvdXJjZXMiOlsiQXV0aC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgcGF0aCBmcm9tIFwicGF0aFwiO1xuaW1wb3J0IGp3dCBmcm9tIFwianNvbndlYnRva2VuXCI7XG5pbXBvcnQgZnMgZnJvbSBcImZzXCI7XG5pbXBvcnQgY3J5cHRvIGZyb20gXCJjcnlwdG9cIjtcbmltcG9ydCAqIGFzIENvbnN0YW50cyBmcm9tIFwiLi4vY29uc3RhbnRzL0NvbnN0YW50c1wiO1xuXG5pbXBvcnQgKiBhcyBFcnJvclV0aWxzIGZyb20gXCIuLi9lcnJvcnMvRXJyb3JVdGlsc1wiO1xuaW1wb3J0ICogYXMgQWJzdHJhY3RNb2RlbHMgZnJvbSBcIi4uL21vZGVscy9BYnN0cmFjdE1vZGVsc1wiO1xuaW1wb3J0IHsgQ2xpZW50cyB9IGZyb20gXCIuLi9tb2RlbHMvbWFpbkRiU2NoZW1hL2luZGV4XCI7XG5cbmltcG9ydCB7IFJlZGlzQ2xpZW50IH0gZnJvbSBcIi4uL2Nvbm5lY3Rpb25zL1JlZGlzQ2xpZW50XCI7XG5cbmltcG9ydCB7XG4gIFNFQ1JFQVQsIEFMR09SSVRITSwgUEFTU1dPUkQsXG59IGZyb20gXCIuLi9jb25zdGFudHMvQ3JlZGVudGlhbHNcIjtcblxuaW1wb3J0IHtcbiAgSEVBREVSX0FQSV9LRVksIEhFQURFUl9TRVNTSU9OX1RPS0VOLFxufSBmcm9tIFwiLi4vY29uc3RhbnRzL0tleXNcIjtcbmltcG9ydCB7IGRlcHJlY2F0ZSB9IGZyb20gXCJ1dGlsXCI7XG5cbmNvbnN0IGh0dHBDb250ZXh0ID0gcmVxdWlyZShcImV4cHJlc3MtaHR0cC1jb250ZXh0XCIpO1xuXG4vLyBTdGF0aWMgZGF0YSBjYW4gYmUgcmVhZCB1c2luZyByZXF1aXJlIG9yIGZzXG5sZXQgbmV3U2Vzc2lvblJvdXRlcyA9IGZzLnJlYWRGaWxlU3luYyhcbiAgcGF0aC5yZXNvbHZlKF9fZGlybmFtZSwgXCJOZXdTZXNzaW9uUm91dGVzLmpzb25cIiksXG4gIFwidXRmOFwiLFxuKTtcbm5ld1Nlc3Npb25Sb3V0ZXMgPSBKU09OLnBhcnNlKG5ld1Nlc3Npb25Sb3V0ZXMpO1xuXG5sZXQgYXV0aGVudGljYXRlZFJvdXRlcyA9IGZzLnJlYWRGaWxlU3luYyhcbiAgcGF0aC5yZXNvbHZlKF9fZGlybmFtZSwgXCIuL0F1dGhlbnRpY2F0ZWRSb3V0ZXMuanNvblwiKSxcbiAgXCJ1dGY4XCIsXG4pO1xuYXV0aGVudGljYXRlZFJvdXRlcyA9IEpTT04ucGFyc2UoYXV0aGVudGljYXRlZFJvdXRlcyk7XG5cbmNvbnN0IHV1aWQgPSByZXF1aXJlKFwidXVpZFwiKTtcbmNvbnN0IGhlYWx0aENoZWNrUm91dGVzID0gcmVxdWlyZShcIi4vSGVhbHRoQ2hlY2tSb3V0ZXMuanNvblwiKTtcbmNvbnN0IG5vQVBJS2V5Um91dGVzID0gcmVxdWlyZShcIi4vTm9DbGllbnRJZFJvdXRlcy5qc29uXCIpO1xuY29uc3Qgbm9TZXNzaW9uUm91dGVzID0gcmVxdWlyZShcIi4vTm9TZXNzaW9uUm91dGVzLmpzb25cIik7XG5cbmNvbnN0IHJvdXRlTWFwcyA9IFtcbiAgbmV3U2Vzc2lvblJvdXRlcyxcbiAgYXV0aGVudGljYXRlZFJvdXRlcyxcbiAgbm9TZXNzaW9uUm91dGVzLFxuICBub0FQSUtleVJvdXRlcyxcbiAgaGVhbHRoQ2hlY2tSb3V0ZXMsXG5dO1xuXG5jb25zdCBnZXRSb3V0ZUNhdGVnb3J5ID0gKHJvdXRlTWFwc0luZGV4KSA9PiB7XG4gIGxldCByb3V0ZUNhdGVnb3J5ID0gXCJvdGhlcnNcIjtcbiAgaWYgKHJvdXRlTWFwc0luZGV4ID09PSAwKSB7XG4gICAgcm91dGVDYXRlZ29yeSA9IFwibmV3U2Vzc2lvblJvdXRlc1wiO1xuICB9IGVsc2UgaWYgKHJvdXRlTWFwc0luZGV4ID09PSAxKSB7XG4gICAgcm91dGVDYXRlZ29yeSA9IFwiYXV0aGVudGljYXRlZFJvdXRlc1wiO1xuICB9IGVsc2UgaWYgKHJvdXRlTWFwc0luZGV4ID09PSAyKSB7XG4gICAgcm91dGVDYXRlZ29yeSA9IFwibm9TZXNzaW9uUm91dGVzXCI7XG4gIH0gZWxzZSBpZiAocm91dGVNYXBzSW5kZXggPT09IDMpIHtcbiAgICByb3V0ZUNhdGVnb3J5ID0gXCJub0FQSUtleVJvdXRlc1wiO1xuICB9IGVsc2UgaWYgKHJvdXRlTWFwc0luZGV4ID09PSA0KSB7XG4gICAgcm91dGVDYXRlZ29yeSA9IFwiaGVhbHRoQ2hlY2tSb3V0ZXNcIjtcbiAgfVxuICByZXR1cm4gcm91dGVDYXRlZ29yeTtcbn07XG5cbmNvbnN0IGNoZWNrQXBpS2V5VmFsaWRpdHkgPSBhc3luYyAocmVxKSA9PiB7XG4gIGNvbnN0IGFwaUtleSA9IHJlcS5oZWFkZXIoSEVBREVSX0FQSV9LRVkpO1xuIC8vIGNvbnNvbGUubG9nKFwiKioqKioqKioqKioqKioqKioqXCIrYXBpS2V5KTtcbiAgY29uc3Qgc2VsZWN0Q29uZGl0aW9uID0ge1xuICAgIG1ldHJvX2F1dGhfa2V5OiBhcGlLZXksXG4gIH07XG4gLy8gY29uc29sZS5sb2coXCIrKysrKysrKysrKysrKysrKysrXCIrSlNPTi5zdHJpbmdpZnkoc2VsZWN0Q29uZGl0aW9uKSk7XG4gIGNvbnN0IHByb2plY3RDb25kaXRpb24gPSB7XG4gICAgbWV0cm9fYXV0aF9rZXk6IDEsXG4gICAgX2lkOiAwLFxuICB9O1xuIC8vIGNvbnNvbGUubG9nKFwiKysrKysrKysrKysrKysrKysrK1wiK0pTT04uc3RyaW5naWZ5KHByb2plY3RDb25kaXRpb24pKTtcbiAgY29uc3QgaXNWYWxpZEFQSUtleSA9IGF3YWl0IEFic3RyYWN0TW9kZWxzLm1vbmdvRmluZE9uZShcbiAgICBDbGllbnRzLFxuICAgIHNlbGVjdENvbmRpdGlvbixcbiAgICBwcm9qZWN0Q29uZGl0aW9uLFxuICApO1xuIC8vIGNvbnNvbGUubG9nKFwiKioqKioqKioqKioqKioqKioqKipcIitpc1ZhbGlkQVBJS2V5KTtcbiAgcmV0dXJuIGlzVmFsaWRBUElLZXk7XG59O1xuXG5jb25zdCBnZXRSZWRpc1Nlc3Npb24gPSBhc3luYyAoc2Vzc2lvbklkKSA9PiB7XG4gIHRyeSB7XG4gICAgLy8gQGhvdGZpeDogRm9yIGJhY2t3YXJkIGNvbXBhdGliaWxpdHkgcHJlcHJlbmRpbmcgXCJzZXNzOlwiIHRvIHNlc3Npb25JZFxuICAgIGNvbnN0IHJlZGlzU2Vzc2lvbiA9IGF3YWl0IFJlZGlzQ2xpZW50LmdldChgc2Vzczoke3Nlc3Npb25JZH1gKTtcbiAgICByZXR1cm4gcmVkaXNTZXNzaW9uO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGxvZyhcImVycm9yXCIsIHsgZXJyb3IgfSk7XG4gICAgdGhyb3cgRXJyb3JVdGlscy5yZWRpc0Nvbm5lY3Rpb25FcnJvcigpO1xuICB9XG59O1xuXG5jb25zdCBkZWNyeXB0ID0gKHRleHQpID0+IHtcbiAgbGV0IHJlc3VsdENoaXBlciA9IFwiXCI7XG4gIGNvbnN0IGRlY2lwaGVyID0gY3J5cHRvLmNyZWF0ZURlY2lwaGVyKEFMR09SSVRITSwgUEFTU1dPUkQpO1xuICAvLyBjb25zb2xlLmxvZyhcIisrKysrKysrKysrKysgbGVuZ3RoIGlzIFwiKyB0ZXh0LHRleHQubGVuZ3RoKTtcbiAgcmVzdWx0Q2hpcGVyID0gZGVjaXBoZXIudXBkYXRlKHRleHQsIFwiaGV4XCIsIFwidXRmOFwiKTtcbiAgcmVzdWx0Q2hpcGVyICs9IGRlY2lwaGVyLmZpbmFsKFwidXRmOFwiKTtcbiAgcmV0dXJuIHJlc3VsdENoaXBlcjtcbn07XG5cbmV4cG9ydCBjb25zdCBnZXRTZXNzaW9uT2JqID0gYXN5bmMgKHJlcSkgPT4ge1xuICBjb25zdCBzZXNzaW9udG9rZW4gPSByZXEuaGVhZGVyKEhFQURFUl9TRVNTSU9OX1RPS0VOKTtcbiAgaWYgKCFzZXNzaW9udG9rZW4pIHRocm93IEVycm9yVXRpbHMuSW52YWxpZFNlc3Npb25Ub2tlbigpO1xuICAvLyBjb25zdCBzZXNzaW9uID0gand0LnZlcmlmeShzZXNzaW9udG9rZW4sIFNFQ1JFQVQpO1xuXG4gIGNvbnN0IHNlc3Npb25JZCA9IGRlY3J5cHQoc2Vzc2lvbnRva2VuKTtcbiAgbGV0IHNlc3Npb24gPSBhd2FpdCBnZXRSZWRpc1Nlc3Npb24oc2Vzc2lvbklkKTtcbiAgbG9nKFwiaW5mb1wiLCB7IHNlc3Npb24sIHNlc3Npb25JZCwgc2Vzc2lvbnRva2VuIH0pO1xuXG4gIGlmICghc2Vzc2lvbikge1xuICAgIHRocm93IEVycm9yVXRpbHMuSW52YWxpZFNlc3Npb25Ub2tlbigpO1xuICB9XG4gIHRyeSB7XG4gICAgc2Vzc2lvbiA9IEpTT04ucGFyc2Uoc2Vzc2lvbik7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgdGhyb3cgRXJyb3JVdGlscy5JbnZhbGlkU2Vzc2lvblRva2VuKCk7XG4gIH1cbi8vICBjb25zb2xlLmxvZyhcInRoZSByZXR1cm5lZCB2YWx1ZSBmb3JtdGhlIHNlc3Npb24gaXMgKysrKysrKysrKysrKysrXCIrc2Vzc2lvbik7XG4gIHJldHVybiBzZXNzaW9uO1xufTtcbmNvbnN0IGdldFJvdXRlT2JqID0gKG9yaWdpbmFsVXJsLCBodHRwTWV0aG9kKSA9PiB7XG4gIGxldCByb3V0ZU9iaiA9IHt9O1xuICBjb25zdCBub3JtYWxpemVkVVJMID0gb3JpZ2luYWxVcmwudG9Mb3dlckNhc2UoKS5zcGxpdChcIj9cIilbMF07XG4gIGNvbnN0IGluZGV4ID0gbm9ybWFsaXplZFVSTC5sYXN0SW5kZXhPZihcIi9cIik7XG4gIGNvbnN0IGJhc2VVUkwgPSBub3JtYWxpemVkVVJMLnN1YnN0cmluZygwLCBpbmRleCk7XG4gIGxldCBpc1JvdXRlT2JqRm91bmQgPSBmYWxzZTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCByb3V0ZU1hcHMubGVuZ3RoOyBpKyspIHtcbiAgICBjb25zdCByb3V0ZU1hcCA9IHJvdXRlTWFwc1tpXTtcbiAgICBpZiAocm91dGVNYXAgJiYgcm91dGVNYXBbaHR0cE1ldGhvZF0pIHtcbiAgICAgIGlmIChyb3V0ZU1hcFtodHRwTWV0aG9kXVtub3JtYWxpemVkVVJMXSkge1xuICAgICAgICByb3V0ZU9iaiA9IHJvdXRlTWFwW2h0dHBNZXRob2RdW25vcm1hbGl6ZWRVUkxdO1xuICAgICAgICBpc1JvdXRlT2JqRm91bmQgPSB0cnVlO1xuICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgcm91dGVNYXBbaHR0cE1ldGhvZF1bYCR7YmFzZVVSTH0vOnBhcmFtYF1cbiAgICAgICAgJiYgaW5kZXggIT09IG5vcm1hbGl6ZWRVUkwubGVuZ3RoIC0gMVxuICAgICAgKSB7XG4gICAgICAgIHJvdXRlT2JqID0gcm91dGVNYXBbaHR0cE1ldGhvZF1bYCR7YmFzZVVSTH0vOnBhcmFtYF07XG4gICAgICAgIGlzUm91dGVPYmpGb3VuZCA9IHRydWU7XG4gICAgICB9XG4gICAgICBpZiAoaXNSb3V0ZU9iakZvdW5kKSB7XG4gICAgICAgIHJvdXRlT2JqLmh0dHBNZXRob2QgPSBodHRwTWV0aG9kO1xuICAgICAgICByb3V0ZU9iai5iYXNlVVJMID0gYmFzZVVSTDtcbiAgICAgICAgcm91dGVPYmoubm9ybWFsaXplZFVSTCA9IG5vcm1hbGl6ZWRVUkw7XG4gICAgICAgIHJvdXRlT2JqLnJvdXRlQ2F0ZWdvcnkgPSBnZXRSb3V0ZUNhdGVnb3J5KGkpO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgLy8gSWYgcm91dGUgaXMgbm90IGZvdW5kIGZyb20gUm91dGVzTWFwIGl0IHNob3VkIGJlIHRyZWF0ZWQgYXMgb3RoZXJzXG4gIGlmICghaXNSb3V0ZU9iakZvdW5kKSB7XG4gICAgcm91dGVPYmouaHR0cE1ldGhvZCA9IGh0dHBNZXRob2Q7XG4gICAgcm91dGVPYmouYmFzZVVSTCA9IGJhc2VVUkw7XG4gICAgcm91dGVPYmoubm9ybWFsaXplZFVSTCA9IG5vcm1hbGl6ZWRVUkw7XG4gICAgcm91dGVPYmoucm91dGVDYXRlZ29yeSA9IFwib3RoZXJzXCI7XG4gIH1cbiAgcmV0dXJuIHJvdXRlT2JqO1xufTtcblxuLy8gQGhvdGZpeDogRm9yIGJhY2t3YXJkIGNvbXBhdGliaWxpdHlcbi8vIEJ1c2luZXNzICYgY29uc3VtZXIgdXNlciByb2xlcyBhcmUgc3RvcmVkIGluIGRpZmZlcmVudCBrZXlzIGluIHNlc3Npb25cbi8vIFBvc3NpYmxlIHZhbHVlcyBmb3IgdXNlcnNfYnVzaW5lc3NfcG9ydGFsX3JvbGUgYXJlIFwiYWRtaW5cIiAmIFwidXNlclwiXG5hc3luYyBmdW5jdGlvbiBnZXRVc2VyUm9sZXMocmVxKSB7XG4gIGNvbnN0IHNlc3Npb24gPSBhd2FpdCBnZXRTZXNzaW9uT2JqKHJlcSk7XG4gIC8vIGNvbnNvbGUubG9nKCcqKioqKioqKioqKioqKioqKioqKioqKioqKioqKicrSlNPTi5zdHJpbmdpZnkoc2Vzc2lvbikpO1xuICBjb25zdCB7IHVzZXJzX2J1c2luZXNzX3BvcnRhbF9yb2xlOiB1c2VyUm9sZXMgfSA9IHNlc3Npb247XG4gIC8vIGNvbnNvbGUubG9nKFwiKysrKysrKysrKysgdGhlIHJvbGUgb2YgdXNlciBpcyBcIitKU09OLnN0cmluZ2lmeSh1c2VyUm9sZXMpKVxuICByZXR1cm4gW10uY29uY2F0KHVzZXJSb2xlcykubWFwKCh2YWx1ZSkgPT4gdmFsdWUudG9VcHBlckNhc2UoKSk7XG59XG5cbmNvbnN0IGNoZWNrQXV0b3JpemF0aW9uID0gYXN5bmMgKHJlcSkgPT4ge1xuICBsZXQgaXNBdXRob3JpemVkVG9BY2Nlc3NSb3V0ZSA9IGZhbHNlO1xuICAvLyBjb25zb2xlLmxvZyhcImluIHRoZSBjaGVjayBhdXRob3JpemF0aW9uIHJ1bGUtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVwiKTtcbiAgY29uc3QgdXNlclJvbGVzID0gYXdhaXQgZ2V0VXNlclJvbGVzKHJlcSk7XG4gIGNvbnN0IHJvdXRlQXV0b3JpemVkUm9sZXMgPSByZXEucm91dGVPYmo/LnJvbGVzIHx8IFtdO1xuICBpZiAocm91dGVBdXRvcml6ZWRSb2xlcz8uZmlsdGVyKCh2YWx1ZSkgPT4gdXNlclJvbGVzLmluY2x1ZGVzKHZhbHVlLnRvVXBwZXJDYXNlKCkpKT8ubGVuZ3RoID4gMCkge1xuICAgIGlzQXV0aG9yaXplZFRvQWNjZXNzUm91dGUgPSB0cnVlO1xuICB9XG4gIHJldHVybiBpc0F1dGhvcml6ZWRUb0FjY2Vzc1JvdXRlO1xufTtcblxuY29uc3QgY2hlY2tCbG9ja0xpc3RlZFVzZXIgPSBhc3luYyAoKSA9PiB7XG4gIC8vIEBob3RmaXg6IFJld3JpdGUgdGhpcyBsb2dpYyBhY2NvcmRpbmcgdG8gc2VydmljZSBuZWVkXG4gIGNvbnN0IGlzQmxvY2tlZFVzZXIgPSBmYWxzZTtcbiAgcmV0dXJuIGlzQmxvY2tlZFVzZXI7XG4gIC8vIGxldCBpc0Jsb2NrZWRVc2VyID0gZmFsc2U7XG4gIC8vIGNvbnN0IHNlc3Npb24gPSBhd2FpdCBnZXRTZXNzaW9uT2JqKHJlcSk7XG4gIC8vIGNvbnN0IHsgbW9iaWxlTm8gfSA9IHNlc3Npb247XG4gIC8vIGNvbnN0IHNlbGVjdENvbmRpdGlvbiA9IHtcbiAgLy8gICBtb2JpbGVObyxcbiAgLy8gICBpc0Jsb2NrZWRVc2VyOiB0cnVlLFxuICAvLyB9O1xuICAvLyBjb25zdCBwcm9qZWN0Q29uZGl0aW9uID0ge1xuICAvLyAgIG1vYmlsZU5vOiAxLFxuICAvLyAgIF9pZDogMCxcbiAgLy8gfTtcbiAgLy8gY29uc3QgdXNlck9iaiA9IGF3YWl0IEFic3RyYWN0TW9kZWxzLm1vbmdvRmluZE9uZShcbiAgLy8gICBVc2VycyxcbiAgLy8gICBzZWxlY3RDb25kaXRpb24sXG4gIC8vICAgcHJvamVjdENvbmRpdGlvbixcbiAgLy8gKTtcbiAgLy8gaWYgKHVzZXJPYmopIHtcbiAgLy8gICBpc0Jsb2NrZWRVc2VyID0gdHJ1ZTtcbiAgLy8gfVxuICAvLyByZXR1cm4gaXNCbG9ja2VkVXNlcjtcbn07XG5cbmV4cG9ydCBjb25zdCBjcmVhdGVTZXNzaW9uT2JqID0gKGRhdGEpID0+IHtcbiAgY29uc3Qgc2Vzc2lvbiA9IGp3dC5zaWduKGRhdGEsIFNFQ1JFQVQsIHsgZXhwaXJlc0luOiA2MCAqIDYwICogMjQgKiAzMCB9KTsgLy8gZGVmYXVsdCBpcyBpbiBzZWNcbiAgcmV0dXJuIHNlc3Npb247XG59O1xuXG4vKlxuMS5uZXdTZXNzaW9uUm91dGVzXG4yLmF1dGhlbnRpY2F0ZWRSb3V0ZXMoYXBpIGtleSBjaGVjayxzZXNzb2luIHRva2VuIGNoZWNrLEF1dGhvcml6ZSBjaGVjayxibG9ja2xpc3QgdXNlcnMgY2hlY2spXG4zLm5vU2Vzc2lvblJvdXRlcyhhcGkga2V5IGNoZWNrKVxuNC5ub0FQSUtleVJvdXRlc1xuNS5oZWFsdGhDaGVja1JvdXRlcyhEb250JyBzdG9yZSBBdWRpdHMpXG42Lm90aGVyc1xuXG5Gb3IgZWFjaCByZXEgc3RvcmUgcmVxLCByZXMgYXVkaXRzXG4qL1xuXG5leHBvcnQgY29uc3QgY2hlY2tzID0gYXN5bmMgKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gIGNvbnN0IHsgcm91dGVDYXRlZ29yeSB9ID0gcmVxLnJvdXRlT2JqO1xuIC8vIGNvbnNvbGUubG9nKFwiKysrKysrKysrKysrKysrKysrKysrKysrVEhJUyBJUyBST1VURSBDQVRFR09SWSAgICAgICAgICBcIityb3V0ZUNhdGVnb3J5KTtcbiAgaWYgKHJvdXRlQ2F0ZWdvcnkgPT09IFwib3RoZXJzXCIpIHtcbiAgICBjb25zdCBlcnJvciA9IEVycm9yVXRpbHMuSW52YWxpZFJlcXVlc3QoKTtcbiAgICBuZXh0KGVycm9yKTtcbiAgfSBlbHNlIGlmIChyb3V0ZUNhdGVnb3J5ID09PSBcImhlYWx0aENoZWNrUm91dGVzXCIpIHtcbiAgICBuZXh0KCk7XG4gIH0gZWxzZSBpZiAocm91dGVDYXRlZ29yeSA9PT0gXCJub0FQSUtleVJvdXRlc1wiKSB7XG4gICAgbmV4dCgpO1xuICB9IGVsc2UgaWYgKFxuICAgIHJvdXRlQ2F0ZWdvcnkgPT09IFwibm9TZXNzaW9uUm91dGVzXCJcbiAgICB8fCByb3V0ZUNhdGVnb3J5ID09PSBcIm5ld1Nlc3Npb25Sb3V0ZXNcIlxuICApIHtcbiAgICBjb25zdCBpc1ZhbGlkQVBJS2V5ID0gYXdhaXQgY2hlY2tBcGlLZXlWYWxpZGl0eShyZXEpO1xuICAgIGlmICghaXNWYWxpZEFQSUtleSkge1xuICAgICAgY29uc3QgZXJyb3IgPSBFcnJvclV0aWxzLkludmFsaWRBUElLZXkoKTtcbiAgICAgIG5leHQoZXJyb3IpO1xuICAgIH0gZWxzZSB7XG4gICAgICBuZXh0KCk7XG4gICAgfVxuICB9IGVsc2UgaWYgKHJvdXRlQ2F0ZWdvcnkgPT09IFwiYXV0aGVudGljYXRlZFJvdXRlc1wiKSB7XG4gICAgLy8gMS5hcGkga2V5IGNoZWNrIDIuc2Vzc2lvbiB0b2tlbiBjaGVjayAzLmF1dG9yaXphdGlvbiBjaGVjayA0LmJsb2NrbGlzdGVkIHVzZXIgY2hlY2tcbiAgICBjb25zdCBpc1ZhbGlkQVBJS2V5ID0gYXdhaXQgY2hlY2tBcGlLZXlWYWxpZGl0eShyZXEpO1xuICAgIGNvbnN0IHNlc3Npb24gPSBhd2FpdCBnZXRTZXNzaW9uT2JqKHJlcSk7XG4gICAgaWYgKCFzZXNzaW9uKSB7XG4gICAgICBjb25zdCBlcnJvciA9IEVycm9yVXRpbHMuSW52YWxpZFNlc3Npb25Ub2tlbigpO1xuICAgICAgbmV4dChlcnJvcik7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IGlzQXV0aG9yaXplZFRvQWNjZXNzUm91dGUgPSBhd2FpdCBjaGVja0F1dG9yaXphdGlvbihyZXEpO1xuICAgICAgLy8gY29uc29sZS5sb2coJyoqKioqKioqKioqKioqKioqIGlzIGF1dGhvcml6ZWQgdXNlciAnK2lzQXV0aG9yaXplZFRvQWNjZXNzUm91dGUpO1xuICAgICAgY29uc3QgaXNCbG9ja0xpc3RlZHVzZXIgPSBhd2FpdCBjaGVja0Jsb2NrTGlzdGVkVXNlcigpO1xuICAgICAgaWYgKCFpc1ZhbGlkQVBJS2V5KSB7XG4gICAgICAgIGNvbnN0IGVycm9yID0gRXJyb3JVdGlscy5JbnZhbGlkQVBJS2V5KCk7XG4gICAgICAgIG5leHQoZXJyb3IpO1xuICAgICAgfSBlbHNlIGlmIChpc0Jsb2NrTGlzdGVkdXNlcikge1xuICAgICAgICBjb25zdCBlcnJvciA9IEVycm9yVXRpbHMuQmxvY2tMaXN0ZWRVc2VyKCk7XG4gICAgICAgIG5leHQoZXJyb3IpO1xuICAgICAgfSBlbHNlIGlmICghaXNBdXRob3JpemVkVG9BY2Nlc3NSb3V0ZSkge1xuICAgICAgICBjb25zdCBlcnJvciA9IEVycm9yVXRpbHMuSW52YWxpZEF1dGhvcml6YXRpb24oKTtcbiAgICAgICAgbmV4dChlcnJvcik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXEuc2Vzc3Npb24gPSBzZXNzaW9uO1xuICAgICAgICBuZXh0KCk7XG4gICAgICB9XG4gICAgfVxuICB9XG59O1xuXG5leHBvcnQgY29uc3Qgc2V0TWV0cmljcyA9IChyZXEsIHJlcykgPT4ge1xuICBjb25zdCB7IG9yaWdpbmFsVXJsIH0gPSByZXE7XG4gIGNvbnN0IGh0dHBNZXRob2QgPSByZXEubWV0aG9kO1xuICBjb25zdCByb3V0ZU9iaiA9IGdldFJvdXRlT2JqKG9yaWdpbmFsVXJsLCBodHRwTWV0aG9kKTtcbiAgLy8gY29uc29sZS5sb2coXCJDSGVja2luZysrKysrKysrKysrKyBcIitKU09OLnN0cmluZ2lmeShyb3V0ZU9iaikpO1xuICByb3V0ZU9iai5zdGFydFRpbWUgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcblxuICBsZXQgY29ycmVsYXRpb25JZCA9IHJlcS5nZXQoQ29uc3RhbnRzLkxPR0dFUl9DT1JSRUxBVElPTklEKTtcbiAgaWYgKCFjb3JyZWxhdGlvbklkKSB7XG4gICAgLy8gZ2VuZXJhdGUgYW5kIHNldCB1dWlkIHY0IHZlcnNpb25cbiAgICBjb3JyZWxhdGlvbklkID0gdXVpZC52NCgpO1xuICAgIGh0dHBDb250ZXh0LnNldChDb25zdGFudHMuTE9HR0VSX0NPUlJFTEFUSU9OSUQsIGNvcnJlbGF0aW9uSWQpO1xuICAgIC8vIGluamVjdCBjb3JyZWxhdGlvbklkIGluIGhlYWRlcnNcbiAgICByZXEuaGVhZGVycy5jb3JyZWxhdGlvbklkID0gaHR0cENvbnRleHQuZ2V0KENvbnN0YW50cy5MT0dHRVJfQ09SUkVMQVRJT05JRCk7XG4gICAgcmVzLnNldChcIkNvcnJlbGF0aW9uSWRcIiwgaHR0cENvbnRleHQuZ2V0KENvbnN0YW50cy5MT0dHRVJfQ09SUkVMQVRJT05JRCkpO1xuICB9XG5cbiAgcmV0dXJuIHJvdXRlT2JqO1xufTtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUVBOztBQUNBOztBQUNBOztBQUVBOztBQUVBOztBQUlBOztBQUdBOzs7Ozs7OztBQUVBLE1BQU1BLFdBQVcsR0FBR0MsT0FBTyxDQUFDLHNCQUFELENBQTNCLEMsQ0FFQTs7O0FBQ0EsSUFBSUMsZ0JBQWdCLEdBQUdDLFlBQUdDLFlBQUgsQ0FDckJDLGNBQUtDLE9BQUwsQ0FBYUMs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","map":{"version":3,"names":["httpContext","require","newSessionRoutes","fs","readFileSync","path","resolve","__dirname","JSON","parse","authenticatedRoutes","uuid","healthCheckRoutes","noAPIKeyRoutes","noSessionRoutes","routeMaps","getRouteCategory","routeMapsIndex","routeCategory","checkApiKeyValidity","req","apiKey","header","HEADER_API_KEY","selectCondition","metro_auth_key","projectCondition","_id","isValidAPIKey","AbstractModels","mongoFindOne","Clients","getRedisSession","sessionId","redisSession","RedisClient","get","error","log","ErrorUtils","redisConnectionError","decrypt","text","resultChiper","decipher","crypto","createDecipher","ALGORITHM","PASSWORD","update","final","getSessionObj","sessiontoken","HEADER_SESSION_TOKEN","InvalidSessionToken","session","getRouteObj","originalUrl","httpMethod","routeObj","normalizedURL","toLowerCase","split","index","lastIndexOf","baseURL","substring","isRouteObjFound","i","length","routeMap","getUserRoles","users_business_portal_role","userRoles","concat","map","value","toUpperCase","checkAutorization","isAuthorizedToAccessRoute","routeAutorizedRoles","roles","filter","includes","checkBlockListedUser","isBlockedUser","createSessionObj","data","jwt","sign","SECREAT","expiresIn","checks","res","next","InvalidRequest","InvalidAPIKey","isBlockListeduser","BlockListedUser","InvalidAuthorization","sesssion","setMetrics","method","startTime","Date","getTime","correlationId","Constants","LOGGER_CORRELATIONID","v4","set","headers"],"sourceRoot":"/Users/ramireddycharitha/git-explore/middlewares/","sources":["Auth.js"],"sourcesContent":["import path from \"path\";\nimport jwt from \"jsonwebtoken\";\nimport fs from \"fs\";\nimport crypto from \"crypto\";\nimport * as Constants from \"../constants/Constants\";\n\nimport * as ErrorUtils from \"../errors/ErrorUtils\";\nimport * as AbstractModels from \"../models/AbstractModels\";\nimport { Clients } from \"../models/mainDbSchema/index\";\n\nimport { RedisClient } from \"../connections/RedisClient\";\n\nimport {\n  SECREAT, ALGORITHM, PASSWORD,\n} from \"../constants/Credentials\";\n\nimport {\n  HEADER_API_KEY, HEADER_SESSION_TOKEN,\n} from \"../constants/Keys\";\nimport { deprecate } from \"util\";\n\nconst httpContext = require(\"express-http-context\");\n\n// Static data can be read using require or fs\nlet newSessionRoutes = fs.readFileSync(\n  path.resolve(__dirname, \"NewSessionRoutes.json\"),\n  \"utf8\",\n);\nnewSessionRoutes = JSON.parse(newSessionRoutes);\n\nlet authenticatedRoutes = fs.readFileSync(\n  path.resolve(__dirname, \"./AuthenticatedRoutes.json\"),\n  \"utf8\",\n);\nauthenticatedRoutes = JSON.parse(authenticatedRoutes);\n\nconst uuid = require(\"uuid\");\nconst healthCheckRoutes = require(\"./HealthCheckRoutes.json\");\nconst noAPIKeyRoutes = require(\"./NoClientIdRoutes.json\");\nconst noSessionRoutes = require(\"./NoSessionRoutes.json\");\n\nconst routeMaps = [\n  newSessionRoutes,\n  authenticatedRoutes,\n  noSessionRoutes,\n  noAPIKeyRoutes,\n  healthCheckRoutes,\n];\n\nconst getRouteCategory = (routeMapsIndex) => {\n  let routeCategory = \"others\";\n  if (routeMapsIndex === 0) {\n    routeCategory = \"newSessionRoutes\";\n  } else if (routeMapsIndex === 1) {\n    routeCategory = \"authenticatedRoutes\";\n  } else if (routeMapsIndex === 2) {\n    routeCategory = \"noSessionRoutes\";\n  } else if (routeMapsIndex === 3) {\n    routeCategory = \"noAPIKeyRoutes\";\n  } else if (routeMapsIndex === 4) {\n    routeCategory = \"healthCheckRoutes\";\n  }\n  return routeCategory;\n};\n\nconst checkApiKeyValidity = async (req) => {\n  const apiKey = req.header(HEADER_API_KEY);\n // console.log(\"******************\"+apiKey);\n  const selectCondition = {\n    metro_auth_key: apiKey,\n  };\n // console.log(\"+++++++++++++++++++\"+JSON.stringify(selectCondition));\n  const projectCondition = {\n    metro_auth_key: 1,\n    _id: 0,\n  };\n // console.log(\"+++++++++++++++++++\"+JSON.stringify(projectCondition));\n  const isValidAPIKey = await AbstractModels.mongoFindOne(\n    Clients,\n    selectCondition,\n    projectCondition,\n  );\n // console.log(\"********************\"+isValidAPIKey);\n  return isValidAPIKey;\n};\n\nconst getRedisSession = async (sessionId) => {\n  try {\n    // @hotfix: For backward compatibility preprending \"sess:\" to sessionId\n    const redisSession = await RedisClient.get(`sess:${sessionId}`);\n    return redisSession;\n  } catch (error) {\n    log(\"error\", { error });\n    throw ErrorUtils.redisConnectionError();\n  }\n};\n\nconst decrypt = (text) => {\n  let resultChiper = \"\";\n  const decipher = crypto.createDecipher(ALGORITHM, PASSWORD);\n  // console.log(\"+++++++++++++ length is \"+ text,text.length);\n  resultChiper = decipher.update(text, \"hex\", \"utf8\");\n  resultChiper += decipher.final(\"utf8\");\n  return resultChiper;\n};\n\nexport const getSessionObj = async (req) => {\n  const sessiontoken = req.header(HEADER_SESSION_TOKEN);\n  if (!sessiontoken) throw ErrorUtils.InvalidSessionToken();\n  // const session = jwt.verify(sessiontoken, SECREAT);\n\n  const sessionId = decrypt(sessiontoken);\n  let session = await getRedisSession(sessionId);\n  log(\"info\", { session, sessionId, sessiontoken });\n\n  if (!session) {\n    throw ErrorUtils.InvalidSessionToken();\n  }\n  try {\n    session = JSON.parse(session);\n  } catch (error) {\n    throw ErrorUtils.InvalidSessionToken();\n  }\n//  console.log(\"the returned value formthe session is +++++++++++++++\"+session);\n  return session;\n};\nconst getRouteObj = (originalUrl, httpMethod) => {\n  let routeObj = {};\n  const normalizedURL = originalUrl.toLowerCase().split(\"?\")[0];\n  const index = normalizedURL.lastIndexOf(\"/\");\n  const baseURL = normalizedURL.substring(0, index);\n  let isRouteObjFound = false;\n  for (let i = 0; i < routeMaps.length; i++) {\n    const routeMap = routeMaps[i];\n    if (routeMap && routeMap[httpMethod]) {\n      if (routeMap[httpMethod][normalizedURL]) {\n        routeObj = routeMap[httpMethod][normalizedURL];\n        isRouteObjFound = true;\n      } else if (\n        routeMap[httpMethod][`${baseURL}/:param`]\n        && index !== normalizedURL.length - 1\n      ) {\n        routeObj = routeMap[httpMethod][`${baseURL}/:param`];\n        isRouteObjFound = true;\n      }\n      if (isRouteObjFound) {\n        routeObj.httpMethod = httpMethod;\n        routeObj.baseURL = baseURL;\n        routeObj.normalizedURL = normalizedURL;\n        routeObj.routeCategory = getRouteCategory(i);\n        break;\n      }\n    }\n  }\n  // If route is not found from RoutesMap it shoud be treated as others\n  if (!isRouteObjFound) {\n    routeObj.httpMethod = httpMethod;\n    routeObj.baseURL = baseURL;\n    routeObj.normalizedURL = normalizedURL;\n    routeObj.routeCategory = \"others\";\n  }\n  return routeObj;\n};\n\n// @hotfix: For backward compatibility\n// Business & consumer user roles are stored in different keys in session\n// Possible values for users_business_portal_role are \"admin\" & \"user\"\nasync function getUserRoles(req) {\n  const session = await getSessionObj(req);\n  // console.log('*****************************'+JSON.stringify(session));\n  const { users_business_portal_role: userRoles } = session;\n  // console.log(\"+++++++++++ the role of user is \"+JSON.stringify(userRoles))\n  return [].concat(userRoles).map((value) => value.toUpperCase());\n}\n\nconst checkAutorization = async (req) => {\n  let isAuthorizedToAccessRoute = false;\n  // console.log(\"in the check authorization rule--------------------------\");\n  const userRoles = await getUserRoles(req);\n  const routeAutorizedRoles = req.routeObj?.roles || [];\n  if (routeAutorizedRoles?.filter((value) => userRoles.includes(value.toUpperCase()))?.length > 0) {\n    isAuthorizedToAccessRoute = true;\n  }\n  return isAuthorizedToAccessRoute;\n};\n\nconst checkBlockListedUser = async () => {\n  // @hotfix: Rewrite this logic according to service need\n  const isBlockedUser = false;\n  return isBlockedUser;\n  // let isBlockedUser = false;\n  // const session = await getSessionObj(req);\n  // const { mobileNo } = session;\n  // const selectCondition = {\n  //   mobileNo,\n  //   isBlockedUser: true,\n  // };\n  // const projectCondition = {\n  //   mobileNo: 1,\n  //   _id: 0,\n  // };\n  // const userObj = await AbstractModels.mongoFindOne(\n  //   Users,\n  //   selectCondition,\n  //   projectCondition,\n  // );\n  // if (userObj) {\n  //   isBlockedUser = true;\n  // }\n  // return isBlockedUser;\n};\n\nexport const createSessionObj = (data) => {\n  const session = jwt.sign(data, SECREAT, { expiresIn: 60 * 60 * 24 * 30 }); // default is in sec\n  return session;\n};\n\n/*\n1.newSessionRoutes\n2.authenticatedRoutes(api key check,sessoin token check,Authorize check,blocklist users check)\n3.noSessionRoutes(api key check)\n4.noAPIKeyRoutes\n5.healthCheckRoutes(Dont' store Audits)\n6.others\n\nFor each req store req, res audits\n*/\n\nexport const checks = async (req, res, next) => {\n  const { routeCategory } = req.routeObj;\n // console.log(\"++++++++++++++++++++++++THIS IS ROUTE CATEGORY          \"+routeCategory);\n  if (routeCategory === \"others\") {\n    const error = ErrorUtils.InvalidRequest();\n    next(error);\n  } else if (routeCategory === \"healthCheckRoutes\") {\n    next();\n  } else if (routeCategory === \"noAPIKeyRoutes\") {\n    next();\n  } else if (\n    routeCategory === \"noSessionRoutes\"\n    || routeCategory === \"newSessionRoutes\"\n  ) {\n    const isValidAPIKey = await checkApiKeyValidity(req);\n    if (!isValidAPIKey) {\n      const error = ErrorUtils.InvalidAPIKey();\n      next(error);\n    } else {\n      next();\n    }\n  } else if (routeCategory === \"authenticatedRoutes\") {\n    // 1.api key check 2.session token check 3.autorization check 4.blocklisted user check\n    const isValidAPIKey = await checkApiKeyValidity(req);\n    const session = await getSessionObj(req);\n    if (!session) {\n      const error = ErrorUtils.InvalidSessionToken();\n      next(error);\n    } else {\n      const isAuthorizedToAccessRoute = await checkAutorization(req);\n      // console.log('***************** is authorized user '+isAuthorizedToAccessRoute);\n      const isBlockListeduser = await checkBlockListedUser();\n      if (!isValidAPIKey) {\n        const error = ErrorUtils.InvalidAPIKey();\n        next(error);\n      } else if (isBlockListeduser) {\n        const error = ErrorUtils.BlockListedUser();\n        next(error);\n      } else if (!isAuthorizedToAccessRoute) {\n        const error = ErrorUtils.InvalidAuthorization();\n        next(error);\n      } else {\n        req.sesssion = session;\n        next();\n      }\n    }\n  }\n};\n\nexport const setMetrics = (req, res) => {\n  const { originalUrl } = req;\n  const httpMethod = req.method;\n  const routeObj = getRouteObj(originalUrl, httpMethod);\n  // console.log(\"CHecking++++++++++++ \"+JSON.stringify(routeObj));\n  routeObj.startTime = new Date().getTime();\n\n  let correlationId = req.get(Constants.LOGGER_CORRELATIONID);\n  if (!correlationId) {\n    // generate and set uuid v4 version\n    correlationId = uuid.v4();\n    httpContext.set(Constants.LOGGER_CORRELATIONID, correlationId);\n    // inject correlationId in headers\n    req.headers.correlationId = httpContext.get(Constants.LOGGER_CORRELATIONID);\n    res.set(\"CorrelationId\", httpContext.get(Constants.LOGGER_CORRELATIONID));\n  }\n\n  return routeObj;\n};\n"],"mappings":"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"}},"mtime":1654146805024},"{\"assumptions\":{},\"sourceRoot\":\"/Users/ramireddycharitha/git-explore/errors/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/ramireddycharitha/git-explore\",\"filename\":\"/Users/ramireddycharitha/git-explore/errors/ErrorUtils.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"default\",\"root\":\"/Users/ramireddycharitha/git-explore\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.17.10:default":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.BlockListedUser = BlockListedUser;\nexports.DataAlreadyExists = DataAlreadyExists;\nexports.DataNotFound = DataNotFound;\nexports.ExpiredUser = ExpiredUser;\nexports.IncorrectOTP = IncorrectOTP;\nexports.InternalServerError = InternalServerError;\nexports.InvalidAPIKey = InvalidAPIKey;\nexports.InvalidAuthorization = InvalidAuthorization;\nexports.InvalidPasswordError = InvalidPasswordError;\nexports.InvalidRequest = InvalidRequest;\nexports.InvalidSchemaError = InvalidSchemaError;\nexports.InvalidSessionToken = InvalidSessionToken;\nexports.InvalidUserError = InvalidUserError;\nexports.MongoError = MongoError;\nexports.NotRegisteredUser = NotRegisteredUser;\nexports.UnableCallSameNo = UnableCallSameNo;\nexports.UserNotFoundError = UserNotFoundError;\nexports.businessDidNumberNotFound = businessDidNumberNotFound;\nexports.organisaitonNotExists = organisaitonNotExists;\nexports.redisConnectionError = redisConnectionError;\n\nvar ErrorType = _interopRequireWildcard(require(\"../constants/ErrorConstants\"));\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nconst RESPONSE_STATUS_400_BAD_REQUEST = 400;\nconst RESPONSE_STATUS_401_UNAUTHORIZED = 401;\nconst RESPONSE_STATUS_403_FORBIDDEN = 403;\nconst RESPONSE_STATUS_404_NOT_FOUND = 404;\nconst RESPONSE_STATUS_409_CONFLICT = 409;\nconst RESPONSE_STATUS_500_INTERNAL_SERVER_ERROR = 500;\n\nfunction ErrorUtils(functionName, customMessage, httpResponseStatusCode) {\n  Error.captureStackTrace(this, functionName || ErrorUtils);\n  this.name = this.constructor.name;\n  this.message = customMessage?.message;\n  this.code = customMessage?.code;\n  this.statusCode = httpResponseStatusCode;\n}\n\nfunction InvalidRequest() {\n  return new ErrorUtils(InvalidRequest, ErrorType.INVALID_REQUEST, RESPONSE_STATUS_400_BAD_REQUEST);\n}\n\nfunction InvalidAPIKey() {\n  return new ErrorUtils(InvalidAPIKey, ErrorType.INVALID_API_KEY, RESPONSE_STATUS_400_BAD_REQUEST);\n}\n\nfunction InvalidSessionToken() {\n  return new ErrorUtils(InvalidSessionToken, ErrorType.INVALID_SESSION_TOKEN, RESPONSE_STATUS_400_BAD_REQUEST);\n}\n\nfunction InvalidAuthorization() {\n  return new ErrorUtils(InvalidAuthorization, ErrorType.INVALID_AUTHORIZATION, RESPONSE_STATUS_401_UNAUTHORIZED);\n}\n\nfunction BlockListedUser() {\n  return new ErrorUtils(BlockListedUser, ErrorType.BLOCK_LISTED_USER, RESPONSE_STATUS_403_FORBIDDEN);\n}\n\nfunction UserNotFoundError() {\n  return new ErrorUtils(UserNotFoundError, ErrorType.USER_DOES_NOT_EXIST, RESPONSE_STATUS_404_NOT_FOUND);\n}\n\nfunction InvalidPasswordError() {\n  return new ErrorUtils(InvalidPasswordError, ErrorType.INVALID_PASSWORD, RESPONSE_STATUS_401_UNAUTHORIZED);\n}\n\nfunction InvalidSchemaError() {\n  return new ErrorUtils(InvalidSchemaError, ErrorType.INVALID_SCHEMA.code, RESPONSE_STATUS_500_INTERNAL_SERVER_ERROR);\n}\n\nfunction InternalServerError() {\n  return new ErrorUtils(InternalServerError, ErrorType.INTERNAL_SERVER_ERR, RESPONSE_STATUS_500_INTERNAL_SERVER_ERROR);\n}\n\nfunction DataNotFound() {\n  return new ErrorUtils(DataNotFound, ErrorType.DATA_NOT_FOUND, RESPONSE_STATUS_404_NOT_FOUND);\n}\n\nfunction MongoError() {\n  return new ErrorUtils(MongoError, ErrorType.MONGO_ERROR, RESPONSE_STATUS_500_INTERNAL_SERVER_ERROR);\n}\n\nfunction DataAlreadyExists() {\n  return new ErrorUtils(DataAlreadyExists, ErrorType.DATA_ALREADY_EXISTS, RESPONSE_STATUS_409_CONFLICT);\n}\n\nfunction IncorrectOTP() {\n  return new ErrorUtils(IncorrectOTP, ErrorType.INCORRECT_OTP, RESPONSE_STATUS_401_UNAUTHORIZED);\n}\n\nfunction InvalidUserError() {\n  return new ErrorUtils(InvalidUserError, ErrorType.INVALID_USER, RESPONSE_STATUS_401_UNAUTHORIZED);\n}\n\nfunction ExpiredUser() {\n  return new ErrorUtils(ExpiredUser, ErrorType.EXPIRED_USER, RESPONSE_STATUS_403_FORBIDDEN);\n}\n\nfunction NotRegisteredUser() {\n  return new ErrorUtils(NotRegisteredUser, ErrorType.NOT_REGISTERED_USER, RESPONSE_STATUS_404_NOT_FOUND);\n}\n\nfunction redisConnectionError() {\n  return new ErrorUtils(redisConnectionError, ErrorType.REDIS_CONNECTION_ERROR, RESPONSE_STATUS_500_INTERNAL_SERVER_ERROR);\n}\n\nfunction organisaitonNotExists() {\n  return new ErrorUtils(organisaitonNotExists, ErrorType.ORGANISATION_NOT_EXISTS, RESPONSE_STATUS_404_NOT_FOUND);\n}\n\nfunction businessDidNumberNotFound() {\n  return new ErrorUtils(businessDidNumberNotFound, ErrorType.BUSINESS_DID_NUMBER_NOT_FOUND, RESPONSE_STATUS_404_NOT_FOUND);\n}\n\nfunction UnableCallSameNo() {\n  return new ErrorUtils(UnableCallSameNo, ErrorType.BUSINESS_DID_NUMBER_UNABLE_CALL_SAME_NO, RESPONSE_STATUS_400_BAD_REQUEST);\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJSRVNQT05TRV9TVEFUVVNfNDAwX0JBRF9SRVFVRVNUIiwiUkVTUE9OU0VfU1RBVFVTXzQwMV9VTkFVVEhPUklaRUQiLCJSRVNQT05TRV9TVEFUVVNfNDAzX0ZPUkJJRERFTiIsIlJFU1BPTlNFX1NUQVRVU180MDRfTk9UX0ZPVU5EIiwiUkVTUE9OU0VfU1RBVFVTXzQwOV9DT05GTElDVCIsIlJFU1BPTlNFX1NUQVRVU181MDBfSU5URVJOQUxfU0VSVkVSX0VSUk9SIiwiRXJyb3JVdGlscyIsImZ1bmN0aW9uTmFtZSIsImN1c3RvbU1lc3NhZ2UiLCJodHRwUmVzcG9uc2VTdGF0dXNDb2RlIiwiRXJyb3IiLCJjYXB0dXJlU3RhY2tUcmFjZSIsIm5hbWUiLCJjb25zdHJ1Y3RvciIsIm1lc3NhZ2UiLCJjb2RlIiwic3RhdHVzQ29kZSIsIkludmFsaWRSZXF1ZXN0IiwiRXJyb3JUeXBlIiwiSU5WQUxJRF9SRVFVRVNUIiwiSW52YWxpZEFQSUtleSIsIklOVkFMSURfQVBJX0tFWSIsIkludmFsaWRTZXNzaW9uVG9rZW4iLCJJTlZBTElEX1NFU1NJT05fVE9LRU4iLCJJbnZhbGlkQXV0aG9yaXphdGlvbiIsIklOVkFMSURfQVVUSE9SSVpBVElPTiIsIkJsb2NrTGlzdGVkVXNlciIsIkJMT0NLX0xJU1RFRF9VU0VSIiwiVXNlck5vdEZvdW5kRXJyb3IiLCJVU0VSX0RPRVNfTk9UX0VYSVNUIiwiSW52YWxpZFBhc3N3b3JkRXJyb3IiLCJJTlZBTElEX1BBU1NXT1JEIiwiSW52YWxpZFNjaGVtYUVycm9yIiwiSU5WQUxJRF9TQ0hFTUEiLCJJbnRlcm5hbFNlcnZlckVycm9yIiwiSU5URVJOQUxfU0VSVkVSX0VSUiIsIkRhdGFOb3RGb3VuZCIsIkRBVEFfTk9UX0ZPVU5EIiwiTW9uZ29FcnJvciIsIk1PTkdPX0VSUk9SIiwiRGF0YUFscmVhZHlFeGlzdHMiLCJEQVRBX0FMUkVBRFlfRVhJU1RTIiwiSW5jb3JyZWN0T1RQIiwiSU5DT1JSRUNUX09UUCIsIkludmFsaWRVc2VyRXJyb3IiLCJJTlZBTElEX1VTRVIiLCJFeHBpcmVkVXNlciIsIkVYUElSRURfVVNFUiIsIk5vdFJlZ2lzdGVyZWRVc2VyIiwiTk9UX1JFR0lTVEVSRURfVVNFUiIsInJlZGlzQ29ubmVjdGlvbkVycm9yIiwiUkVESVNfQ09OTkVDVElPTl9FUlJPUiIsIm9yZ2FuaXNhaXRvbk5vdEV4aXN0cyIsIk9SR0FOSVNBVElPTl9OT1RfRVhJU1RTIiwiYnVzaW5lc3NEaWROdW1iZXJOb3RGb3VuZCIsIkJVU0lORVNTX0RJRF9OVU1CRVJfTk9UX0ZPVU5EIiwiVW5hYmxlQ2FsbFNhbWVObyIsIkJVU0lORVNTX0RJRF9OVU1CRVJfVU5BQkxFX0NBTExfU0FNRV9OTyJdLCJzb3VyY2VSb290IjoiL1VzZXJzL3JhbWlyZWRkeWNoYXJpdGhhL2dpdC1leHBsb3JlL2Vycm9ycy8iLCJzb3VyY2VzIjpbIkVycm9yVXRpbHMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgRXJyb3JUeXBlIGZyb20gXCIuLi9jb25zdGFudHMvRXJyb3JDb25zdGFudHNcIjtcblxuY29uc3QgUkVTUE9OU0VfU1RBVFVTXzQwMF9CQURfUkVRVUVTVCA9IDQwMDtcbmNvbnN0IFJFU1BPTlNFX1NUQVRVU180MDFfVU5BVVRIT1JJWkVEID0gNDAxO1xuY29uc3QgUkVTUE9OU0VfU1RBVFVTXzQwM19GT1JCSURERU4gPSA0MDM7XG5jb25zdCBSRVNQT05TRV9TVEFUVVNfNDA0X05PVF9GT1VORCA9IDQwNDtcbmNvbnN0IFJFU1BPTlNFX1NUQVRVU180MDlfQ09ORkxJQ1QgPSA0MDk7XG5cbmNvbnN0IFJFU1BPTlNFX1NUQVRVU181MDBfSU5URVJOQUxfU0VSVkVSX0VSUk9SID0gNTAwO1xuXG5mdW5jdGlvbiBFcnJvclV0aWxzKGZ1bmN0aW9uTmFtZSwgY3VzdG9tTWVzc2FnZSwgaHR0cFJlc3BvbnNlU3RhdHVzQ29kZSkge1xuICBFcnJvci5jYXB0dXJlU3RhY2tUcmFjZSh0aGlzLCBmdW5jdGlvbk5hbWUgfHwgRXJyb3JVdGlscyk7XG4gIHRoaXMubmFtZSA9IHRoaXMuY29uc3RydWN0b3IubmFtZTtcbiAgdGhpcy5tZXNzYWdlID0gY3VzdG9tTWVzc2FnZT8ubWVzc2FnZTtcbiAgdGhpcy5jb2RlID0gY3VzdG9tTWVzc2FnZT8uY29kZTtcbiAgdGhpcy5zdGF0dXNDb2RlID0gaHR0cFJlc3BvbnNlU3RhdHVzQ29kZTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIEludmFsaWRSZXF1ZXN0KCkge1xuICByZXR1cm4gbmV3IEVycm9yVXRpbHMoXG4gICAgSW52YWxpZFJlcXVlc3QsXG4gICAgRXJyb3JUeXBlLklOVkFMSURfUkVRVUVTVCxcbiAgICBSRVNQT05TRV9TVEFUVVNfNDAwX0JBRF9SRVFVRVNULFxuICApO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gSW52YWxpZEFQSUtleSgpIHtcbiAgcmV0dXJuIG5ldyBFcnJvclV0aWxzKFxuICAgIEludmFsaWRBUElLZXksXG4gICAgRXJyb3JUeXBlLklOVkFMSURfQVBJX0tFWSxcbiAgICBSRVNQT05TRV9TVEFUVVNfNDAwX0JBRF9SRVFVRVNULFxuICApO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gSW52YWxpZFNlc3Npb25Ub2tlbigpIHtcbiAgcmV0dXJuIG5ldyBFcnJvclV0aWxzKFxuICAgIEludmFsaWRTZXNzaW9uVG9rZW4sXG4gICAgRXJyb3JUeXBlLklOVkFMSURfU0VTU0lPTl9UT0tFTixcbiAgICBSRVNQT05TRV9TVEFUVVNfNDAwX0JBRF9SRVFVRVNULFxuICApO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gSW52YWxpZEF1dGhvcml6YXRpb24oKSB7XG4gIHJldHVybiBuZXcgRXJyb3JVdGlscyhcbiAgICBJbnZhbGlkQXV0aG9yaXphdGlvbixcbiAgICBFcnJvclR5cGUuSU5WQUxJRF9BVVRIT1JJWkFUSU9OLFxuICAgIFJFU1BPTlNFX1NUQVRVU180MDFfVU5BVVRIT1JJWkVELFxuICApO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gQmxvY2tMaXN0ZWRVc2VyKCkge1xuICByZXR1cm4gbmV3IEVycm9yVXRpbHMoXG4gICAgQmxvY2tMaXN0ZWRVc2VyLFxuICAgIEVycm9yVHlwZS5CTE9DS19MSVNURURfVVNFUixcbiAgICBSRVNQT05TRV9TVEFUVVNfNDAzX0ZPUkJJRERFTixcbiAgKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIFVzZXJOb3RGb3VuZEVycm9yKCkge1xuICByZXR1cm4gbmV3IEVycm9yVXRpbHMoXG4gICAgVXNlck5vdEZvdW5kRXJyb3IsXG4gICAgRXJyb3JUeXBlLlVTRVJfRE9FU19OT1RfRVhJU1QsXG4gICAgUkVTUE9OU0VfU1RBVFVTXzQwNF9OT1RfRk9VTkQsXG4gICk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBJbnZhbGlkUGFzc3dvcmRFcnJvcigpIHtcbiAgcmV0dXJuIG5ldyBFcnJvclV0aWxzKFxuICAgIEludmFsaWRQYXNzd29yZEVycm9yLFxuICAgIEVycm9yVHlwZS5JTlZBTElEX1BBU1NXT1JELFxuICAgIFJFU1BPTlNFX1NUQVRVU180MDFfVU5BVVRIT1JJWkVELFxuICApO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gSW52YWxpZFNjaGVtYUVycm9yKCkge1xuICByZXR1cm4gbmV3IEVycm9yVXRpbHMoXG4gICAgSW52YWxpZFNjaGVtYUVycm9yLFxuICAgIEVycm9yVHlwZS5JTlZBTElEX1NDSEVNQS5jb2RlLFxuICAgIFJFU1BPTlNFX1NUQVRVU181MDBfSU5URVJOQUxfU0VSVkVSX0VSUk9SLFxuICApO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gSW50ZXJuYWxTZXJ2ZXJFcnJvcigpIHtcbiAgcmV0dXJuIG5ldyBFcnJvclV0aWxzKFxuICAgIEludGVybmFsU2VydmVyRXJyb3IsXG4gICAgRXJyb3JUeXBlLklOVEVSTkFMX1NFUlZFUl9FUlIsXG4gICAgUkVTUE9OU0VfU1RBVFVTXzUwMF9JTlRFUk5BTF9TRVJWRVJfRVJST1IsXG4gICk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBEYXRhTm90Rm91bmQoKSB7XG4gIHJldHVybiBuZXcgRXJyb3JVdGlscyhcbiAgICBEYXRhTm90Rm91bmQsXG4gICAgRXJyb3JUeXBlLkRBVEFfTk9UX0ZPVU5ELFxuICAgIFJFU1BPTlNFX1NUQVRVU180MDRfTk9UX0ZPVU5ELFxuICApO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gTW9uZ29FcnJvcigpIHtcbiAgcmV0dXJuIG5ldyBFcnJvclV0aWxzKFxuICAgIE1vbmdvRXJyb3IsXG4gICAgRXJyb3JUeXBlLk1PTkdPX0VSUk9SLFxuICAgIFJFU1BPTlNFX1NUQVRVU181MDBfSU5URVJOQUxfU0VSVkVSX0VSUk9SLFxuICApO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gRGF0YUFscmVhZHlFeGlzdHMoKSB7XG4gIHJldHVybiBuZXcgRXJyb3JVdGlscyhcbiAgICBEYXRhQWxyZWFkeUV4aXN0cyxcbiAgICBFcnJvclR5cGUuREFUQV9BTFJFQURZX0VYSVNUUyxcbiAgICBSRVNQT05TRV9TVEFUVVNfNDA5X0NPTkZMSUNULFxuICApO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gSW5jb3JyZWN0T1RQKCkge1xuICByZXR1cm4gbmV3IEVycm9yVXRpbHMoXG4gICAgSW5jb3JyZWN0T1RQLFxuICAgIEVycm9yVHlwZS5JTkNPUlJFQ1RfT1RQLFxuICAgIFJFU1BPTlNFX1NUQVRVU180MDFfVU5BVVRIT1JJWkVELFxuICApO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gSW52YWxpZFVzZXJFcnJvcigpIHtcbiAgcmV0dXJuIG5ldyBFcnJvclV0aWxzKFxuICAgIEludmFsaWRVc2VyRXJyb3IsXG4gICAgRXJyb3JUeXBlLklOVkFMSURfVVNFUixcbiAgICBSRVNQT05TRV9TVEFUVVNfNDAxX1VOQVVUSE9SSVpFRCxcbiAgKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIEV4cGlyZWRVc2VyKCkge1xuICByZXR1cm4gbmV3IEVycm9yVXRpbHMoXG4gICAgRXhwaXJlZFVzZXIsXG4gICAgRXJyb3JUeXBlLkVYUElSRURfVVNFUixcbiAgICBSRVNQT05TRV9TVEFUVVNfNDAzX0ZPUkJJRERFTixcbiAgKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIE5vdFJlZ2lzdGVyZWRVc2VyKCkge1xuICByZXR1cm4gbmV3IEVycm9yVXRpbHMoXG4gICAgTm90UmVnaXN0ZXJlZFVzZXIsXG4gICAgRXJyb3JUeXBlLk5PVF9SRUdJU1RFUkVEX1VTRVIsXG4gICAgUkVTUE9OU0VfU1RBVFVTXzQwNF9OT1RfRk9VTkQsXG4gICk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiByZWRpc0Nvbm5lY3Rpb25FcnJvcigpIHtcbiAgcmV0dXJuIG5ldyBFcnJvclV0aWxzKFxuICAgIHJlZGlzQ29ubmVjdGlvbkVycm9yLFxuICAgIEVycm9yVHlwZS5SRURJU19DT05ORUNUSU9OX0VSUk9SLFxuICAgIFJFU1BPTlNFX1NUQVRVU181MDBfSU5URVJOQUxfU0VSVkVSX0VSUk9SLFxuICApO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gb3JnYW5pc2FpdG9uTm90RXhpc3RzKClcbntcbiAgcmV0dXJuIG5ldyBFcnJvclV0aWxzKFxuICAgIG9yZ2FuaXNhaXRvbk5vdEV4aXN0cyxcbiAgICBFcnJvclR5cGUuT1JHQU5JU0FUSU9OX05PVF9FWElTVFMsXG4gICAgUkVTUE9OU0VfU1RBVFVTXzQwNF9OT1RfRk9VTkRcbiAgKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGJ1c2luZXNzRGlkTnVtYmVyTm90Rm91bmQoKVxue1xuICByZXR1cm4gbmV3IEVycm9yVXRpbHMoXG4gICAgYnVzaW5lc3NEaWROdW1iZXJOb3RGb3VuZCxcbiAgICBFcnJvclR5cGUuQlVTSU5FU1NfRElEX05VTUJFUl9OT1RfRk9VTkQsXG4gICAgUkVTUE9OU0VfU1RBVFVTXzQwNF9OT1RfRk9VTkRcbiAgKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIFVuYWJsZUNhbGxTYW1lTm8oKVxue1xuICByZXR1cm4gbmV3IEVycm9yVXRpbHMoXG4gICAgVW5hYmxlQ2FsbFNhbWVObyxcbiAgICBFcnJvclR5cGUuQlVTSU5FU1NfRElEX05VTUJFUl9VTkFCTEVfQ0FMTF9T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","map":{"version":3,"names":["RESPONSE_STATUS_400_BAD_REQUEST","RESPONSE_STATUS_401_UNAUTHORIZED","RESPONSE_STATUS_403_FORBIDDEN","RESPONSE_STATUS_404_NOT_FOUND","RESPONSE_STATUS_409_CONFLICT","RESPONSE_STATUS_500_INTERNAL_SERVER_ERROR","ErrorUtils","functionName","customMessage","httpResponseStatusCode","Error","captureStackTrace","name","constructor","message","code","statusCode","InvalidRequest","ErrorType","INVALID_REQUEST","InvalidAPIKey","INVALID_API_KEY","InvalidSessionToken","INVALID_SESSION_TOKEN","InvalidAuthorization","INVALID_AUTHORIZATION","BlockListedUser","BLOCK_LISTED_USER","UserNotFoundError","USER_DOES_NOT_EXIST","InvalidPasswordError","INVALID_PASSWORD","InvalidSchemaError","INVALID_SCHEMA","InternalServerError","INTERNAL_SERVER_ERR","DataNotFound","DATA_NOT_FOUND","MongoError","MONGO_ERROR","DataAlreadyExists","DATA_ALREADY_EXISTS","IncorrectOTP","INCORRECT_OTP","InvalidUserError","INVALID_USER","ExpiredUser","EXPIRED_USER","NotRegisteredUser","NOT_REGISTERED_USER","redisConnectionError","REDIS_CONNECTION_ERROR","organisaitonNotExists","ORGANISATION_NOT_EXISTS","businessDidNumberNotFound","BUSINESS_DID_NUMBER_NOT_FOUND","UnableCallSameNo","BUSINESS_DID_NUMBER_UNABLE_CALL_SAME_NO"],"sourceRoot":"/Users/ramireddycharitha/git-explore/errors/","sources":["ErrorUtils.js"],"sourcesContent":["import * as ErrorType from \"../constants/ErrorConstants\";\n\nconst RESPONSE_STATUS_400_BAD_REQUEST = 400;\nconst RESPONSE_STATUS_401_UNAUTHORIZED = 401;\nconst RESPONSE_STATUS_403_FORBIDDEN = 403;\nconst RESPONSE_STATUS_404_NOT_FOUND = 404;\nconst RESPONSE_STATUS_409_CONFLICT = 409;\n\nconst RESPONSE_STATUS_500_INTERNAL_SERVER_ERROR = 500;\n\nfunction ErrorUtils(functionName, customMessage, httpResponseStatusCode) {\n  Error.captureStackTrace(this, functionName || ErrorUtils);\n  this.name = this.constructor.name;\n  this.message = customMessage?.message;\n  this.code = customMessage?.code;\n  this.statusCode = httpResponseStatusCode;\n}\n\nexport function InvalidRequest() {\n  return new ErrorUtils(\n    InvalidRequest,\n    ErrorType.INVALID_REQUEST,\n    RESPONSE_STATUS_400_BAD_REQUEST,\n  );\n}\n\nexport function InvalidAPIKey() {\n  return new ErrorUtils(\n    InvalidAPIKey,\n    ErrorType.INVALID_API_KEY,\n    RESPONSE_STATUS_400_BAD_REQUEST,\n  );\n}\n\nexport function InvalidSessionToken() {\n  return new ErrorUtils(\n    InvalidSessionToken,\n    ErrorType.INVALID_SESSION_TOKEN,\n    RESPONSE_STATUS_400_BAD_REQUEST,\n  );\n}\n\nexport function InvalidAuthorization() {\n  return new ErrorUtils(\n    InvalidAuthorization,\n    ErrorType.INVALID_AUTHORIZATION,\n    RESPONSE_STATUS_401_UNAUTHORIZED,\n  );\n}\n\nexport function BlockListedUser() {\n  return new ErrorUtils(\n    BlockListedUser,\n    ErrorType.BLOCK_LISTED_USER,\n    RESPONSE_STATUS_403_FORBIDDEN,\n  );\n}\n\nexport function UserNotFoundError() {\n  return new ErrorUtils(\n    UserNotFoundError,\n    ErrorType.USER_DOES_NOT_EXIST,\n    RESPONSE_STATUS_404_NOT_FOUND,\n  );\n}\n\nexport function InvalidPasswordError() {\n  return new ErrorUtils(\n    InvalidPasswordError,\n    ErrorType.INVALID_PASSWORD,\n    RESPONSE_STATUS_401_UNAUTHORIZED,\n  );\n}\n\nexport function InvalidSchemaError() {\n  return new ErrorUtils(\n    InvalidSchemaError,\n    ErrorType.INVALID_SCHEMA.code,\n    RESPONSE_STATUS_500_INTERNAL_SERVER_ERROR,\n  );\n}\n\nexport function InternalServerError() {\n  return new ErrorUtils(\n    InternalServerError,\n    ErrorType.INTERNAL_SERVER_ERR,\n    RESPONSE_STATUS_500_INTERNAL_SERVER_ERROR,\n  );\n}\n\nexport function DataNotFound() {\n  return new ErrorUtils(\n    DataNotFound,\n    ErrorType.DATA_NOT_FOUND,\n    RESPONSE_STATUS_404_NOT_FOUND,\n  );\n}\n\nexport function MongoError() {\n  return new ErrorUtils(\n    MongoError,\n    ErrorType.MONGO_ERROR,\n    RESPONSE_STATUS_500_INTERNAL_SERVER_ERROR,\n  );\n}\n\nexport function DataAlreadyExists() {\n  return new ErrorUtils(\n    DataAlreadyExists,\n    ErrorType.DATA_ALREADY_EXISTS,\n    RESPONSE_STATUS_409_CONFLICT,\n  );\n}\n\nexport function IncorrectOTP() {\n  return new ErrorUtils(\n    IncorrectOTP,\n    ErrorType.INCORRECT_OTP,\n    RESPONSE_STATUS_401_UNAUTHORIZED,\n  );\n}\n\nexport function InvalidUserError() {\n  return new ErrorUtils(\n    InvalidUserError,\n    ErrorType.INVALID_USER,\n    RESPONSE_STATUS_401_UNAUTHORIZED,\n  );\n}\n\nexport function ExpiredUser() {\n  return new ErrorUtils(\n    ExpiredUser,\n    ErrorType.EXPIRED_USER,\n    RESPONSE_STATUS_403_FORBIDDEN,\n  );\n}\n\nexport function NotRegisteredUser() {\n  return new ErrorUtils(\n    NotRegisteredUser,\n    ErrorType.NOT_REGISTERED_USER,\n    RESPONSE_STATUS_404_NOT_FOUND,\n  );\n}\n\nexport function redisConnectionError() {\n  return new ErrorUtils(\n    redisConnectionError,\n    ErrorType.REDIS_CONNECTION_ERROR,\n    RESPONSE_STATUS_500_INTERNAL_SERVER_ERROR,\n  );\n}\n\nexport function organisaitonNotExists()\n{\n  return new ErrorUtils(\n    organisaitonNotExists,\n    ErrorType.ORGANISATION_NOT_EXISTS,\n    RESPONSE_STATUS_404_NOT_FOUND\n  );\n}\n\nexport function businessDidNumberNotFound()\n{\n  return new ErrorUtils(\n    businessDidNumberNotFound,\n    ErrorType.BUSINESS_DID_NUMBER_NOT_FOUND,\n    RESPONSE_STATUS_404_NOT_FOUND\n  );\n}\n\nexport function UnableCallSameNo()\n{\n  return new ErrorUtils(\n    UnableCallSameNo,\n    ErrorType.BUSINESS_DID_NUMBER_UNABLE_CALL_SAME_NO,\n    RESPONSE_STATUS_400_BAD_REQUEST\n  )\n}\n"],"mappings":"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"}},"mtime":1654085554335},"{\"assumptions\":{},\"sourceRoot\":\"/Users/ramireddycharitha/git-explore/constants/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/ramireddycharitha/git-explore\",\"filename\":\"/Users/ramireddycharitha/git-explore/constants/ErrorConstants.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"default\",\"root\":\"/Users/ramireddycharitha/git-explore\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.17.10:default":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.USER_DOES_NOT_EXIST = exports.REDIS_CONNECTION_ERROR = exports.ORGANISATION_NOT_EXISTS = exports.NOT_REGISTERED_USER = exports.MONGO_ERROR = exports.INVALID_SESSION_TOKEN = exports.INVALID_SCHEMA = exports.INVALID_REQUEST = exports.INVALID_PASSWORD = exports.INVALID_AUTHORIZATION = exports.INVALID_API_KEY = exports.INTERNAL_SERVER_ERR = exports.INCORRECT_OTP = exports.EXPIRED_USER = exports.DATA_NOT_FOUND = exports.DATA_ALREADY_EXISTS = exports.BUSINESS_DID_NUMBER_UNABLE_CALL_SAME_NO = exports.BUSINESS_DID_NUMBER_NOT_FOUND = exports.BLOCK_LISTED_USER = void 0;\nconst INTERNAL_SERVER_ERR = {\n  code: 1000,\n  message: \"Internal Server Error. Something went wrong!\"\n};\nexports.INTERNAL_SERVER_ERR = INTERNAL_SERVER_ERR;\nconst INVALID_REQUEST = {\n  code: 1001,\n  message: \"invalid request\"\n};\nexports.INVALID_REQUEST = INVALID_REQUEST;\nconst INVALID_API_KEY = {\n  code: 1002,\n  message: \"invalid api key id\"\n};\nexports.INVALID_API_KEY = INVALID_API_KEY;\nconst INVALID_SESSION_TOKEN = {\n  code: 1003,\n  message: \"invalid session token\"\n};\nexports.INVALID_SESSION_TOKEN = INVALID_SESSION_TOKEN;\nconst INVALID_AUTHORIZATION = {\n  code: 1004,\n  message: \"invalid authorization\"\n};\nexports.INVALID_AUTHORIZATION = INVALID_AUTHORIZATION;\nconst BLOCK_LISTED_USER = {\n  code: 1005,\n  message: \"invalid authorization\"\n};\nexports.BLOCK_LISTED_USER = BLOCK_LISTED_USER;\nconst USER_DOES_NOT_EXIST = {\n  code: 1006,\n  message: \"User does not exist\"\n};\nexports.USER_DOES_NOT_EXIST = USER_DOES_NOT_EXIST;\nconst INCORRECT_OTP = {\n  code: 1007,\n  message: \"Incorrect OTP\"\n};\nexports.INCORRECT_OTP = INCORRECT_OTP;\nconst INVALID_PASSWORD = {\n  code: 1008,\n  message: \"Invalid Password\"\n};\nexports.INVALID_PASSWORD = INVALID_PASSWORD;\nconst INVALID_SCHEMA = {\n  code: 1009,\n  message: \"Invalid schema or Missing Data sent\"\n};\nexports.INVALID_SCHEMA = INVALID_SCHEMA;\nconst DATA_NOT_FOUND = {\n  code: 1010,\n  message: \"Data not found\"\n};\nexports.DATA_NOT_FOUND = DATA_NOT_FOUND;\nconst MONGO_ERROR = {\n  code: 1011,\n  message: \"Error in Mongo Query\"\n};\nexports.MONGO_ERROR = MONGO_ERROR;\nconst DATA_ALREADY_EXISTS = {\n  code: 1012,\n  message: \"Data already exist\"\n};\nexports.DATA_ALREADY_EXISTS = DATA_ALREADY_EXISTS;\nconst EXPIRED_USER = {\n  code: 1016,\n  message: \"Expired user\"\n};\nexports.EXPIRED_USER = EXPIRED_USER;\nconst NOT_REGISTERED_USER = {\n  code: 1017,\n  message: \"Not registered user\"\n};\nexports.NOT_REGISTERED_USER = NOT_REGISTERED_USER;\nconst REDIS_CONNECTION_ERROR = {\n  code: 1018,\n  message: \"Redis connection error\"\n};\nexports.REDIS_CONNECTION_ERROR = REDIS_CONNECTION_ERROR;\nconst ORGANISATION_NOT_EXISTS = {\n  code: 1019,\n  messsage: \"Organisation does not exists\"\n};\nexports.ORGANISATION_NOT_EXISTS = ORGANISATION_NOT_EXISTS;\nconst BUSINESS_DID_NUMBER_NOT_FOUND = {\n  code: 1020,\n  messsage: \"Business DID Number Is Not Found\"\n};\nexports.BUSINESS_DID_NUMBER_NOT_FOUND = BUSINESS_DID_NUMBER_NOT_FOUND;\nconst BUSINESS_DID_NUMBER_UNABLE_CALL_SAME_NO = {\n  code: 1021,\n  message: \"Unable To Call The Same Business DID Number\"\n};\nexports.BUSINESS_DID_NUMBER_UNABLE_CALL_SAME_NO = BUSINESS_DID_NUMBER_UNABLE_CALL_SAME_NO;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJJTlRFUk5BTF9TRVJWRVJfRVJSIiwiY29kZSIsIm1lc3NhZ2UiLCJJTlZBTElEX1JFUVVFU1QiLCJJTlZBTElEX0FQSV9LRVkiLCJJTlZBTElEX1NFU1NJT05fVE9LRU4iLCJJTlZBTElEX0FVVEhPUklaQVRJT04iLCJCTE9DS19MSVNURURfVVNFUiIsIlVTRVJfRE9FU19OT1RfRVhJU1QiLCJJTkNPUlJFQ1RfT1RQIiwiSU5WQUxJRF9QQVNTV09SRCIsIklOVkFMSURfU0NIRU1BIiwiREFUQV9OT1RfRk9VTkQiLCJNT05HT19FUlJPUiIsIkRBVEFfQUxSRUFEWV9FWElTVFMiLCJFWFBJUkVEX1VTRVIiLCJOT1RfUkVHSVNURVJFRF9VU0VSIiwiUkVESVNfQ09OTkVDVElPTl9FUlJPUiIsIk9SR0FOSVNBVElPTl9OT1RfRVhJU1RTIiwibWVzc3NhZ2UiLCJCVVNJTkVTU19ESURfTlVNQkVSX05PVF9GT1VORCIsIkJVU0lORVNTX0RJRF9OVU1CRVJfVU5BQkxFX0NBTExfU0FNRV9OTyJdLCJzb3VyY2VSb290IjoiL1VzZXJzL3JhbWlyZWRkeWNoYXJpdGhhL2dpdC1leHBsb3JlL2NvbnN0YW50cy8iLCJzb3VyY2VzIjpbIkVycm9yQ29uc3RhbnRzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjb25zdCBJTlRFUk5BTF9TRVJWRVJfRVJSID0ge1xuICBjb2RlOiAxMDAwLFxuICBtZXNzYWdlOiBcIkludGVybmFsIFNlcnZlciBFcnJvci4gU29tZXRoaW5nIHdlbnQgd3JvbmchXCIsXG59O1xuXG5leHBvcnQgY29uc3QgSU5WQUxJRF9SRVFVRVNUID0ge1xuICBjb2RlOiAxMDAxLFxuICBtZXNzYWdlOiBcImludmFsaWQgcmVxdWVzdFwiLFxufTtcblxuZXhwb3J0IGNvbnN0IElOVkFMSURfQVBJX0tFWSA9IHtcbiAgY29kZTogMTAwMixcbiAgbWVzc2FnZTogXCJpbnZhbGlkIGFwaSBrZXkgaWRcIixcbn07XG5cbmV4cG9ydCBjb25zdCBJTlZBTElEX1NFU1NJT05fVE9LRU4gPSB7XG4gIGNvZGU6IDEwMDMsXG4gIG1lc3NhZ2U6IFwiaW52YWxpZCBzZXNzaW9uIHRva2VuXCIsXG59O1xuXG5leHBvcnQgY29uc3QgSU5WQUxJRF9BVVRIT1JJWkFUSU9OID0ge1xuICBjb2RlOiAxMDA0LFxuICBtZXNzYWdlOiBcImludmFsaWQgYXV0aG9yaXphdGlvblwiLFxufTtcblxuZXhwb3J0IGNvbnN0IEJMT0NLX0xJU1RFRF9VU0VSID0ge1xuICBjb2RlOiAxMDA1LFxuICBtZXNzYWdlOiBcImludmFsaWQgYXV0aG9yaXphdGlvblwiLFxufTtcblxuZXhwb3J0IGNvbnN0IFVTRVJfRE9FU19OT1RfRVhJU1QgPSB7XG4gIGNvZGU6IDEwMDYsXG4gIG1lc3NhZ2U6IFwiVXNlciBkb2VzIG5vdCBleGlzdFwiLFxufTtcblxuZXhwb3J0IGNvbnN0IElOQ09SUkVDVF9PVFAgPSB7XG4gIGNvZGU6IDEwMDcsXG4gIG1lc3NhZ2U6IFwiSW5jb3JyZWN0IE9UUFwiLFxufTtcblxuZXhwb3J0IGNvbnN0IElOVkFMSURfUEFTU1dPUkQgPSB7XG4gIGNvZGU6IDEwMDgsXG4gIG1lc3NhZ2U6IFwiSW52YWxpZCBQYXNzd29yZFwiLFxufTtcblxuZXhwb3J0IGNvbnN0IElOVkFMSURfU0NIRU1BID0ge1xuICBjb2RlOiAxMDA5LFxuICBtZXNzYWdlOiBcIkludmFsaWQgc2NoZW1hIG9yIE1pc3NpbmcgRGF0YSBzZW50XCIsXG59O1xuXG5leHBvcnQgY29uc3QgREFUQV9OT1RfRk9VTkQgPSB7XG4gIGNvZGU6IDEwMTAsXG4gIG1lc3NhZ2U6IFwiRGF0YSBub3QgZm91bmRcIixcbn07XG5cbmV4cG9ydCBjb25zdCBNT05HT19FUlJPUiA9IHtcbiAgY29kZTogMTAxMSxcbiAgbWVzc2FnZTogXCJFcnJvciBpbiBNb25nbyBRdWVyeVwiLFxufTtcblxuZXhwb3J0IGNvbnN0IERBVEFfQUxSRUFEWV9FWElTVFMgPSB7XG4gIGNvZGU6IDEwMTIsXG4gIG1lc3NhZ2U6IFwiRGF0YSBhbHJlYWR5IGV4aXN0XCIsXG59O1xuXG5leHBvcnQgY29uc3QgRVhQSVJFRF9VU0VSID0ge1xuICBjb2RlOiAxMDE2LFxuICBtZXNzYWdlOiBcIkV4cGlyZWQgdXNlclwiLFxufTtcblxuZXhwb3J0IGNvbnN0IE5PVF9SRUdJU1RFUkVEX1VTRVIgPSB7XG4gIGNvZGU6IDEwMTcsXG4gIG1lc3NhZ2U6IFwiTm90IHJlZ2lzdGVyZWQgdXNlclwiLFxufTtcblxuZXhwb3J0IGNvbnN0IFJFRElTX0NPTk5FQ1RJT05fRVJST1IgPSB7XG4gIGNvZGU6IDEwMTgsXG4gIG1lc3NhZ2U6IFwiUmVkaXMgY29ubmVjdGlvbiBlcnJvclwiLFxufTtcbmV4cG9ydCBjb25zdCBPUkdBTklTQVRJT05fTk9UX0VYSVNUUyA9XG57XG4gIGNvZGUgOjEwMTksXG4gIG1lc3NzYWdlOlwiT3JnYW5pc2F0aW9uIGRvZXMgbm90IGV4aXN0c1wiXG59XG5cbmV4cG9ydCBjb25zdCBCVVNJTkVTU19ESURfTlVNQkVSX05PVF9GT1VORCA9XG57XG4gIGNvZGUgOjEwMjAsXG4gIG1lc3NzYWdlOlwiQnVzaW5lc3MgRElEIE51bWJlciBJcyBOb3QgRm91bmRcIlxufVxuZXhwb3J0IGNvbnN0IEJVU0lORVNTX0RJRF9OVU1CRVJfVU5BQkxFX0NBTExfU0FNRV9OTz1cbntcbiAgY29kZSA6IDEwMjEsXG4gIG1lc3NhZ2U6XCJVbmFibGUgVG8gQ2FsbCBUaGUgU2FtZSBCdXNpbmVzcyBESUQgTnVtYmVyXCJcbn1cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQU8sTUFBTUEsbUJBQW1CLEdBQUc7RUFDakNDLElBQUksRUFBRSxJQUQyQjtFQUVqQ0MsT0FBTyxFQUFFO0FBRndCLENBQTVCOztBQUtBLE1BQU1DLGVBQWUsR0FBRztFQUM3QkYsSUFBSSxFQUFFLElBRHVCO0VBRTdCQyxPQUFPLEVBQUU7QUFGb0IsQ0FBeEI7O0FBS0EsTUFBTUUsZUFBZSxHQUFHO0VBQzdCSCxJQUFJLEVBQUUsSUFEdUI7RUFFN0JDLE9BQU8sRUFBRTtBQUZvQixDQUF4Qjs7QUFLQSxNQUFNRyxxQkFBcUIsR0FBRztFQUNuQ0osSUFBSSxFQUFFLElBRDZCO0VBRW5DQyxPQUFPLEVBQUU7QUFGMEIsQ0FBOUI7O0FBS0EsTUFBTUkscUJBQXFCLEdBQUc7RUFDbkNMLElBQUksRUFBRSxJQUQ2QjtFQUVuQ0MsT0FBTyxFQUFFO0FBRjBCLENBQTlCOztBQUtBLE1BQU1LLGlCQUFpQixHQUFHO0VBQy9CTixJQUFJLEVBQUUsSUFEeUI7RUFFL0JDLE9BQU8sRUFBRTtBQUZzQixDQUExQjs7QUFLQSxNQUFNTSxtQkFBbUIsR0FBRztFQUNqQ1AsSUFBSSxFQUFFLElBRDJCO0VBRWpDQyxPQUFPLEVBQUU7QUFGd0IsQ0FBNUI7O0FBS0EsTUFBTU8sYUFBYSxHQUFHO0VBQzNCUixJQUFJLEVBQUUsSUFEcUI7RUFFM0JDLE9BQU8sRUFBRTtBQUZrQixDQUF0Qjs7QUFLQSxNQUFNUSxnQkFBZ0IsR0FBRztFQUM5QlQsSUFBSSxFQUFFLElBRHdCO0VBRTlCQyxPQUFPLEVBQUU7QUFGcUIsQ0FBekI7O0FBS0EsTUFBTVMsY0FBYyxHQUFHO0VBQzVCVixJQUFJLEVBQUUsSUFEc0I7RUFFNUJDLE9BQU8sRUFBRTtBQUZtQixDQUF2Qjs7QUFLQSxNQUFNVSxjQUFjLEdBQUc7RUFDNUJYLElBQUksRUFBRSxJQURzQjtFQUU1QkMsT0FBTyxFQUFFO0FBRm1CLENBQXZCOztBQUtBLE1BQU1XLFdBQVcsR0FBRztFQUN6QlosSUFBSSxFQUFFLElBRG1CO0VBRXpCQyxPQUFPLEVBQUU7QUFGZ0IsQ0FBcEI7O0FBS0EsTUFBTVksbUJBQW1CLEdBQUc7RUFDakNiLElBQUksRUFBRSxJQUQyQjtFQUVqQ0MsT0FBTyxFQUFFO0FBRndCLENBQTVCOztBQUtBLE1BQU1hLFlBQVksR0FBRztFQUMxQmQsSUFBSSxFQUFFLElBRG9CO0VBRTFCQyxPQUFPLEVBQUU7QUFGaUIsQ0FBckI7O0FBS0EsTUFBTWMsbUJBQW1CLEdBQUc7RUFDakNmLElBQUksRUFBRSxJQUQyQjtFQUVqQ0MsT0FBTyxFQUFFO0FBRndCLENBQTVCOztBQUtBLE1BQU1lLHNCQUFzQixHQUFHO0VBQ3BDaEIsSUFBSSxFQUFFLElBRDhCO0VBRXBDQyxPQUFPLEVBQUU7QUFGMkIsQ0FBL0I7O0FBSUEsTUFBTWdCLHVCQUF1QixHQUNwQztFQUNFakIsSUFBSSxFQUFFLElBRFI7RUFFRWtCLFFBQVEsRUFBQztBQUZYLENBRE87O0FBTUEsTUFBTUMsNkJBQTZCLEdBQzFDO0VBQ0VuQixJQUFJLEVBQUUsSUFEUjtFQUVFa0IsUUFBUSxFQUFDO0FBRlgsQ0FETzs7QUFLQSxNQUFNRSx1Q0FBdUMsR0FDcEQ7RUFDRXBCLElBQUksRUFBRyxJQURUO0VBRUVDLE9BQU8sRUFBQztBQUZWLENBRE8ifQ==","map":{"version":3,"names":["INTERNAL_SERVER_ERR","code","message","INVALID_REQUEST","INVALID_API_KEY","INVALID_SESSION_TOKEN","INVALID_AUTHORIZATION","BLOCK_LISTED_USER","USER_DOES_NOT_EXIST","INCORRECT_OTP","INVALID_PASSWORD","INVALID_SCHEMA","DATA_NOT_FOUND","MONGO_ERROR","DATA_ALREADY_EXISTS","EXPIRED_USER","NOT_REGISTERED_USER","REDIS_CONNECTION_ERROR","ORGANISATION_NOT_EXISTS","messsage","BUSINESS_DID_NUMBER_NOT_FOUND","BUSINESS_DID_NUMBER_UNABLE_CALL_SAME_NO"],"sourceRoot":"/Users/ramireddycharitha/git-explore/constants/","sources":["ErrorConstants.js"],"sourcesContent":["export const INTERNAL_SERVER_ERR = {\n  code: 1000,\n  message: \"Internal Server Error. Something went wrong!\",\n};\n\nexport const INVALID_REQUEST = {\n  code: 1001,\n  message: \"invalid request\",\n};\n\nexport const INVALID_API_KEY = {\n  code: 1002,\n  message: \"invalid api key id\",\n};\n\nexport const INVALID_SESSION_TOKEN = {\n  code: 1003,\n  message: \"invalid session token\",\n};\n\nexport const INVALID_AUTHORIZATION = {\n  code: 1004,\n  message: \"invalid authorization\",\n};\n\nexport const BLOCK_LISTED_USER = {\n  code: 1005,\n  message: \"invalid authorization\",\n};\n\nexport const USER_DOES_NOT_EXIST = {\n  code: 1006,\n  message: \"User does not exist\",\n};\n\nexport const INCORRECT_OTP = {\n  code: 1007,\n  message: \"Incorrect OTP\",\n};\n\nexport const INVALID_PASSWORD = {\n  code: 1008,\n  message: \"Invalid Password\",\n};\n\nexport const INVALID_SCHEMA = {\n  code: 1009,\n  message: \"Invalid schema or Missing Data sent\",\n};\n\nexport const DATA_NOT_FOUND = {\n  code: 1010,\n  message: \"Data not found\",\n};\n\nexport const MONGO_ERROR = {\n  code: 1011,\n  message: \"Error in Mongo Query\",\n};\n\nexport const DATA_ALREADY_EXISTS = {\n  code: 1012,\n  message: \"Data already exist\",\n};\n\nexport const EXPIRED_USER = {\n  code: 1016,\n  message: \"Expired user\",\n};\n\nexport const NOT_REGISTERED_USER = {\n  code: 1017,\n  message: \"Not registered user\",\n};\n\nexport const REDIS_CONNECTION_ERROR = {\n  code: 1018,\n  message: \"Redis connection error\",\n};\nexport const ORGANISATION_NOT_EXISTS =\n{\n  code :1019,\n  messsage:\"Organisation does not exists\"\n}\n\nexport const BUSINESS_DID_NUMBER_NOT_FOUND =\n{\n  code :1020,\n  messsage:\"Business DID Number Is Not Found\"\n}\nexport const BUSINESS_DID_NUMBER_UNABLE_CALL_SAME_NO=\n{\n  code : 1021,\n  message:\"Unable To Call The Same Business DID Number\"\n}\n"],"mappings":";;;;;;AAAO,MAAMA,mBAAmB,GAAG;EACjCC,IAAI,EAAE,IAD2B;EAEjCC,OAAO,EAAE;AAFwB,CAA5B;;AAKA,MAAMC,eAAe,GAAG;EAC7BF,IAAI,EAAE,IADuB;EAE7BC,OAAO,EAAE;AAFoB,CAAxB;;AAKA,MAAME,eAAe,GAAG;EAC7BH,IAAI,EAAE,IADuB;EAE7BC,OAAO,EAAE;AAFoB,CAAxB;;AAKA,MAAMG,qBAAqB,GAAG;EACnCJ,IAAI,EAAE,IAD6B;EAEnCC,OAAO,EAAE;AAF0B,CAA9B;;AAKA,MAAMI,qBAAqB,GAAG;EACnCL,IAAI,EAAE,IAD6B;EAEnCC,OAAO,EAAE;AAF0B,CAA9B;;AAKA,MAAMK,iBAAiB,GAAG;EAC/BN,IAAI,EAAE,IADyB;EAE/BC,OAAO,EAAE;AAFsB,CAA1B;;AAKA,MAAMM,mBAAmB,GAAG;EACjCP,IAAI,EAAE,IAD2B;EAEjCC,OAAO,EAAE;AAFwB,CAA5B;;AAKA,MAAMO,aAAa,GAAG;EAC3BR,IAAI,EAAE,IADqB;EAE3BC,OAAO,EAAE;AAFkB,CAAtB;;AAKA,MAAMQ,gBAAgB,GAAG;EAC9BT,IAAI,EAAE,IADwB;EAE9BC,OAAO,EAAE;AAFqB,CAAzB;;AAKA,MAAMS,cAAc,GAAG;EAC5BV,IAAI,EAAE,IADsB;EAE5BC,OAAO,EAAE;AAFmB,CAAvB;;AAKA,MAAMU,cAAc,GAAG;EAC5BX,IAAI,EAAE,IADsB;EAE5BC,OAAO,EAAE;AAFmB,CAAvB;;AAKA,MAAMW,WAAW,GAAG;EACzBZ,IAAI,EAAE,IADmB;EAEzBC,OAAO,EAAE;AAFgB,CAApB;;AAKA,MAAMY,mBAAmB,GAAG;EACjCb,IAAI,EAAE,IAD2B;EAEjCC,OAAO,EAAE;AAFwB,CAA5B;;AAKA,MAAMa,YAAY,GAAG;EAC1Bd,IAAI,EAAE,IADoB;EAE1BC,OAAO,EAAE;AAFiB,CAArB;;AAKA,MAAMc,mBAAmB,GAAG;EACjCf,IAAI,EAAE,IAD2B;EAEjCC,OAAO,EAAE;AAFwB,CAA5B;;AAKA,MAAMe,sBAAsB,GAAG;EACpChB,IAAI,EAAE,IAD8B;EAEpCC,OAAO,EAAE;AAF2B,CAA/B;;AAIA,MAAMgB,uBAAuB,GACpC;EACEjB,IAAI,EAAE,IADR;EAEEkB,QAAQ,EAAC;AAFX,CADO;;AAMA,MAAMC,6BAA6B,GAC1C;EACEnB,IAAI,EAAE,IADR;EAEEkB,QAAQ,EAAC;AAFX,CADO;;AAKA,MAAME,uCAAuC,GACpD;EACEpB,IAAI,EAAG,IADT;EAEEC,OAAO,EAAC;AAFV,CADO"}},"mtime":1654085554324},"{\"assumptions\":{},\"sourceRoot\":\"/Users/ramireddycharitha/git-explore/models/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/ramireddycharitha/git-explore\",\"filename\":\"/Users/ramireddycharitha/git-explore/models/AbstractModels.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"default\",\"root\":\"/Users/ramireddycharitha/git-explore\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.17.10:default":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.mongoUpsertOne = exports.mongoUpdateOne = exports.mongoUpdateMany = exports.mongoInsertOne = exports.mongoInsertMany = exports.mongoFindWithSort = exports.mongoFindOneWithOutLean = exports.mongoFindOneAndUpdate = exports.mongoFindOneAndRemove = exports.mongoFindOne = exports.mongoFindMany = exports.mongoFindCursor = exports.mongoDistinct = exports.mongoDeleteOne = exports.mongoDeleteMany = exports.mongoCount = exports.mongoAggregate = void 0;\n\nconst mongoFindOne = async (col, findCondition, selectCondition = {}) => {\n  const result = await col.findOne(findCondition).select(selectCondition).lean().exec(); // console.log(\"===== from the mongo find one \"+JSON.stringify(result));\n\n  return result;\n};\n\nexports.mongoFindOne = mongoFindOne;\n\nconst mongoFindOneWithOutLean = async (col, findCondition, selectCondition = {}) => {\n  const result = await col.findOne(findCondition).select(selectCondition).exec();\n  return result;\n};\n\nexports.mongoFindOneWithOutLean = mongoFindOneWithOutLean;\n\nconst mongoFindWithSort = async (col, findCondition, selectCondition = {}, limit = 0, sortCondition = {\n  _id: -1\n}) => {\n  const result = await col.find(findCondition).select(selectCondition).sort(sortCondition).limit(limit).lean().exec();\n  return result;\n};\n\nexports.mongoFindWithSort = mongoFindWithSort;\n\nconst mongoFindMany = async (col, findCondition, selectCondition = {}, limit = 0) => {\n  const result = await col.find(findCondition).select(selectCondition).limit(limit).lean().exec();\n  return result;\n};\n\nexports.mongoFindMany = mongoFindMany;\n\nconst mongoFindCursor = async (col, findCondition, selectCondition = {}, limit = 0) => {\n  const cursor = await col.find(findCondition).select(selectCondition).limit(limit).lean().cursor();\n  return cursor;\n};\n\nexports.mongoFindCursor = mongoFindCursor;\n\nconst mongoCount = async (col, findCondition) => {\n  const count = await col.count(findCondition);\n  return count;\n};\n\nexports.mongoCount = mongoCount;\n\nconst mongoUpdateOne = async (col, findCondition, updateCondition) => {\n  await col.updateOne(findCondition, updateCondition);\n};\n\nexports.mongoUpdateOne = mongoUpdateOne;\n\nconst mongoUpsertOne = async (col, findCondition, updateCondition) => {\n  await col.updateOne(findCondition, updateCondition, {\n    upsert: true\n  });\n};\n\nexports.mongoUpsertOne = mongoUpsertOne;\n\nconst mongoUpdateMany = async (col, findCondition, updateCondition) => {\n  await col.updateOne(findCondition, updateCondition, {\n    multi: true\n  });\n};\n\nexports.mongoUpdateMany = mongoUpdateMany;\n\nconst mongoAggregate = async (col, aggregateCondition) => {\n  const result = col.aggregate(aggregateCondition);\n  return result;\n};\n\nexports.mongoAggregate = mongoAggregate;\n\nconst mongoDeleteOne = async (col, findCondition) => {\n  await col.deleteOne(findCondition);\n};\n\nexports.mongoDeleteOne = mongoDeleteOne;\n\nconst mongoDeleteMany = async (col, findCondition) => {\n  await col.deleteMany(findCondition);\n};\n\nexports.mongoDeleteMany = mongoDeleteMany;\n\nconst mongoInsertOne = async (col, doc) => {\n  const moongooseDoc = col(doc);\n  const result = await moongooseDoc.save();\n  return result;\n};\n\nexports.mongoInsertOne = mongoInsertOne;\n\nconst mongoInsertMany = async (col, docs) => {\n  await col.insertMany(docs);\n};\n\nexports.mongoInsertMany = mongoInsertMany;\n\nconst mongoDistinct = async (col, string, findCondition) => {\n  const result = await col.distinct(string, findCondition);\n  return result;\n}; // export const mongoFindOneAndUpdate = async (\n//   col,\n//   findCondition,\n//   updateCondition,\n//   returnCondition,\n// ) => {\n//   console.log(\"+++++ the col is\"+col);\n//   console.log(\"+++++ the find cond  is\"+JSON.stringify(findCondition));\n//   console.log(\"+++++ the update cond  is\"+JSON.stringify(updateCondition));\n//   const result = await col.findOneAndUpdate(\n//     findCondition,\n//     updateCondition,\n//     returnCondition,\n//   );\n//   console.log(\"+++++++++++++++++++FIND AND UPDATE\"+ result);\n//   return result;\n// };\n\n\nexports.mongoDistinct = mongoDistinct;\n\nconst mongoFindOneAndUpdate = async (col, selectCondition, updateCondition, returnCondition) => {\n  return new Promise(async (resolve, reject) => {\n    try {\n      // console.log(\"TEsting ERROR -----------------------------\",col,selectCondition,updateCondition);\n      col.findOneAndUpdate(selectCondition, updateCondition, returnCondition, function (error, res) {\n        if (error) {\n          reject(new Error(error));\n        } else {\n          resolve(res);\n        }\n      });\n    } catch (error) {\n      reject(new Error(error));\n    }\n  });\n};\n\nexports.mongoFindOneAndUpdate = mongoFindOneAndUpdate;\n\nconst mongoFindOneAndRemove = async (col, findCondition) => {\n  const result = await col.findOneAndRemove(findCondition);\n  return result;\n};\n\nexports.mongoFindOneAndRemove = mongoFindOneAndRemove;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJtb25nb0ZpbmRPbmUiLCJjb2wiLCJmaW5kQ29uZGl0aW9uIiwic2VsZWN0Q29uZGl0aW9uIiwicmVzdWx0IiwiZmluZE9uZSIsInNlbGVjdCIsImxlYW4iLCJleGVjIiwibW9uZ29GaW5kT25lV2l0aE91dExlYW4iLCJtb25nb0ZpbmRXaXRoU29ydCIsImxpbWl0Iiwic29ydENvbmRpdGlvbiIsIl9pZCIsImZpbmQiLCJzb3J0IiwibW9uZ29GaW5kTWFueSIsIm1vbmdvRmluZEN1cnNvciIsImN1cnNvciIsIm1vbmdvQ291bnQiLCJjb3VudCIsIm1vbmdvVXBkYXRlT25lIiwidXBkYXRlQ29uZGl0aW9uIiwidXBkYXRlT25lIiwibW9uZ29VcHNlcnRPbmUiLCJ1cHNlcnQiLCJtb25nb1VwZGF0ZU1hbnkiLCJtdWx0aSIsIm1vbmdvQWdncmVnYXRlIiwiYWdncmVnYXRlQ29uZGl0aW9uIiwiYWdncmVnYXRlIiwibW9uZ29EZWxldGVPbmUiLCJkZWxldGVPbmUiLCJtb25nb0RlbGV0ZU1hbnkiLCJkZWxldGVNYW55IiwibW9uZ29JbnNlcnRPbmUiLCJkb2MiLCJtb29uZ29vc2VEb2MiLCJzYXZlIiwibW9uZ29JbnNlcnRNYW55IiwiZG9jcyIsImluc2VydE1hbnkiLCJtb25nb0Rpc3RpbmN0Iiwic3RyaW5nIiwiZGlzdGluY3QiLCJtb25nb0ZpbmRPbmVBbmRVcGRhdGUiLCJyZXR1cm5Db25kaXRpb24iLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsImZpbmRPbmVBbmRVcGRhdGUiLCJlcnJvciIsInJlcyIsIkVycm9yIiwibW9uZ29GaW5kT25lQW5kUmVtb3ZlIiwiZmluZE9uZUFuZFJlbW92ZSJdLCJzb3VyY2VSb290IjoiL1VzZXJzL3JhbWlyZWRkeWNoYXJpdGhhL2dpdC1leHBsb3JlL21vZGVscy8iLCJzb3VyY2VzIjpbIkFic3RyYWN0TW9kZWxzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjb25zdCBtb25nb0ZpbmRPbmUgPSBhc3luYyAoXG4gIGNvbCxcbiAgZmluZENvbmRpdGlvbixcbiAgc2VsZWN0Q29uZGl0aW9uID0ge30sXG4pID0+IHtcbiAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY29sXG4gICAgLmZpbmRPbmUoZmluZENvbmRpdGlvbilcbiAgICAuc2VsZWN0KHNlbGVjdENvbmRpdGlvbilcbiAgICAubGVhbigpXG4gICAgLmV4ZWMoKTtcbiAgLy8gY29uc29sZS5sb2coXCI9PT09PSBmcm9tIHRoZSBtb25nbyBmaW5kIG9uZSBcIitKU09OLnN0cmluZ2lmeShyZXN1bHQpKTtcbiAgcmV0dXJuIHJlc3VsdDtcbn07XG5cbmV4cG9ydCBjb25zdCBtb25nb0ZpbmRPbmVXaXRoT3V0TGVhbiA9IGFzeW5jIChcbiAgY29sLFxuICBmaW5kQ29uZGl0aW9uLFxuICBzZWxlY3RDb25kaXRpb24gPSB7fSxcbikgPT4ge1xuICBjb25zdCByZXN1bHQgPSBhd2FpdCBjb2xcbiAgICAuZmluZE9uZShmaW5kQ29uZGl0aW9uKVxuICAgIC5zZWxlY3Qoc2VsZWN0Q29uZGl0aW9uKVxuICAgIC5leGVjKCk7XG4gIHJldHVybiByZXN1bHQ7XG59O1xuXG5leHBvcnQgY29uc3QgbW9uZ29GaW5kV2l0aFNvcnQgPSBhc3luYyAoXG4gIGNvbCxcbiAgZmluZENvbmRpdGlvbixcbiAgc2VsZWN0Q29uZGl0aW9uID0ge30sXG4gIGxpbWl0ID0gMCxcbiAgc29ydENvbmRpdGlvbiA9IHsgX2lkOiAtMSB9LFxuKSA9PiB7XG4gIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNvbFxuICAgIC5maW5kKGZpbmRDb25kaXRpb24pXG4gICAgLnNlbGVjdChzZWxlY3RDb25kaXRpb24pXG4gICAgLnNvcnQoc29ydENvbmRpdGlvbilcbiAgICAubGltaXQobGltaXQpXG4gICAgLmxlYW4oKVxuICAgIC5leGVjKCk7XG4gIHJldHVybiByZXN1bHQ7XG59O1xuXG5leHBvcnQgY29uc3QgbW9uZ29GaW5kTWFueSA9IGFzeW5jIChcbiAgY29sLFxuICBmaW5kQ29uZGl0aW9uLFxuICBzZWxlY3RDb25kaXRpb24gPSB7fSxcbiAgbGltaXQgPSAwLFxuKSA9PiB7XG4gIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNvbFxuICAgIC5maW5kKGZpbmRDb25kaXRpb24pXG4gICAgLnNlbGVjdChzZWxlY3RDb25kaXRpb24pXG4gICAgLmxpbWl0KGxpbWl0KVxuICAgIC5sZWFuKClcbiAgICAuZXhlYygpO1xuICByZXR1cm4gcmVzdWx0O1xufTtcblxuZXhwb3J0IGNvbnN0IG1vbmdvRmluZEN1cnNvciA9IGFzeW5jIChcbiAgY29sLFxuICBmaW5kQ29uZGl0aW9uLFxuICBzZWxlY3RDb25kaXRpb24gPSB7fSxcbiAgbGltaXQgPSAwLFxuKSA9PiB7XG4gIGNvbnN0IGN1cnNvciA9IGF3YWl0IGNvbFxuICAgIC5maW5kKGZpbmRDb25kaXRpb24pXG4gICAgLnNlbGVjdChzZWxlY3RDb25kaXRpb24pXG4gICAgLmxpbWl0KGxpbWl0KVxuICAgIC5sZWFuKClcbiAgICAuY3Vyc29yKCk7XG4gIHJldHVybiBjdXJzb3I7XG59O1xuXG5leHBvcnQgY29uc3QgbW9uZ29Db3VudCA9IGFzeW5jIChjb2wsIGZpbmRDb25kaXRpb24pID0+IHtcbiAgY29uc3QgY291bnQgPSBhd2FpdCBjb2wuY291bnQoZmluZENvbmRpdGlvbik7XG4gIHJldHVybiBjb3VudDtcbn07XG5cbmV4cG9ydCBjb25zdCBtb25nb1VwZGF0ZU9uZSA9IGFzeW5jIChjb2wsIGZpbmRDb25kaXRpb24sIHVwZGF0ZUNvbmRpdGlvbikgPT4ge1xuICBhd2FpdCBjb2wudXBkYXRlT25lKGZpbmRDb25kaXRpb24sIHVwZGF0ZUNvbmRpdGlvbik7XG59O1xuXG5leHBvcnQgY29uc3QgbW9uZ29VcHNlcnRPbmUgPSBhc3luYyAoY29sLCBmaW5kQ29uZGl0aW9uLCB1cGRhdGVDb25kaXRpb24pID0+IHtcbiAgYXdhaXQgY29sLnVwZGF0ZU9uZShmaW5kQ29uZGl0aW9uLCB1cGRhdGVDb25kaXRpb24sIHsgdXBzZXJ0OiB0cnVlIH0pO1xufTtcblxuZXhwb3J0IGNvbnN0IG1vbmdvVXBkYXRlTWFueSA9IGFzeW5jIChjb2wsIGZpbmRDb25kaXRpb24sIHVwZGF0ZUNvbmRpdGlvbikgPT4ge1xuICBhd2FpdCBjb2wudXBkYXRlT25lKGZpbmRDb25kaXRpb24sIHVwZGF0ZUNvbmRpdGlvbiwgeyBtdWx0aTogdHJ1ZSB9KTtcbn07XG5cbmV4cG9ydCBjb25zdCBtb25nb0FnZ3JlZ2F0ZSA9IGFzeW5jIChjb2wsIGFnZ3JlZ2F0ZUNvbmRpdGlvbikgPT4ge1xuICBjb25zdCByZXN1bHQgPSBjb2wuYWdncmVnYXRlKGFnZ3JlZ2F0ZUNvbmRpdGlvbik7XG4gIHJldHVybiByZXN1bHQ7XG59O1xuXG5leHBvcnQgY29uc3QgbW9uZ29EZWxldGVPbmUgPSBhc3luYyAoY29sLCBmaW5kQ29uZGl0aW9uKSA9PiB7XG4gIGF3YWl0IGNvbC5kZWxldGVPbmUoZmluZENvbmRpdGlvbik7XG59O1xuXG5leHBvcnQgY29uc3QgbW9uZ29EZWxldGVNYW55ID0gYXN5bmMgKGNvbCwgZmluZENvbmRpdGlvbikgPT4ge1xuICBhd2FpdCBjb2wuZGVsZXRlTWFueShmaW5kQ29uZGl0aW9uKTtcbn07XG5cbmV4cG9ydCBjb25zdCBtb25nb0luc2VydE9uZSA9IGFzeW5jIChjb2wsIGRvYykgPT4ge1xuICBjb25zdCBtb29uZ29vc2VEb2MgPSBjb2woZG9jKTtcbiAgY29uc3QgcmVzdWx0ID0gYXdhaXQgbW9vbmdvb3NlRG9jLnNhdmUoKTtcbiAgcmV0dXJuIHJlc3VsdDtcbn07XG5cbmV4cG9ydCBjb25zdCBtb25nb0luc2VydE1hbnkgPSBhc3luYyAoY29sLCBkb2NzKSA9PiB7XG4gIGF3YWl0IGNvbC5pbnNlcnRNYW55KGRvY3MpO1xufTtcblxuZXhwb3J0IGNvbnN0IG1vbmdvRGlzdGluY3QgPSBhc3luYyAoY29sLCBzdHJpbmcsIGZpbmRDb25kaXRpb24pID0+IHtcbiAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY29sLmRpc3RpbmN0KHN0cmluZywgZmluZENvbmRpdGlvbik7XG4gIHJldHVybiByZXN1bHQ7XG59O1xuXG4vLyBleHBvcnQgY29uc3QgbW9uZ29GaW5kT25lQW5kVXBkYXRlID0gYXN5bmMgKFxuLy8gICBjb2wsXG4vLyAgIGZpbmRDb25kaXRpb24sXG4vLyAgIHVwZGF0ZUNvbmRpdGlvbixcbi8vICAgcmV0dXJuQ29uZGl0aW9uLFxuLy8gKSA9PiB7XG4vLyAgIGNvbnNvbGUubG9nKFwiKysrKysgdGhlIGNvbCBpc1wiK2NvbCk7XG4vLyAgIGNvbnNvbGUubG9nKFwiKysrKysgdGhlIGZpbmQgY29uZCAgaXNcIitKU09OLnN0cmluZ2lmeShmaW5kQ29uZGl0aW9uKSk7XG4vLyAgIGNvbnNvbGUubG9nKFwiKysrKysgdGhlIHVwZGF0ZSBjb25kICBpc1wiK0pTT04uc3RyaW5naWZ5KHVwZGF0ZUNvbmRpdGlvbikpO1xuLy8gICBjb25zdCByZXN1bHQgPSBhd2FpdCBjb2wuZmluZE9uZUFuZFVwZGF0ZShcbi8vICAgICBmaW5kQ29uZGl0aW9uLFxuLy8gICAgIHVwZGF0ZUNvbmRpdGlvbixcbi8vICAgICByZXR1cm5Db25kaXRpb24sXG4vLyAgICk7XG4vLyAgIGNvbnNvbGUubG9nKFwiKysrKysrKysrKysrKysrKysrK0ZJTkQgQU5EIFVQREFURVwiKyByZXN1bHQpO1xuLy8gICByZXR1cm4gcmVzdWx0O1xuICBcbi8vIH07XG5leHBvcnQgY29uc3QgbW9uZ29GaW5kT25lQW5kVXBkYXRlID0gYXN5bmMgKFxuICBjb2wsXG4gIHNlbGVjdENvbmRpdGlvbixcbiAgdXBkYXRlQ29uZGl0aW9uLFxuICByZXR1cm5Db25kaXRpb25cbikgPT4ge1xuICByZXR1cm4gbmV3IFByb21pc2UoYXN5bmMgKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgIHRyeSB7XG4gICAgIC8vIGNvbnNvbGUubG9nKFwiVEVzdGluZyBFUlJPUiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVwiLGNvbCxzZWxlY3RDb25kaXRpb24sdXBkYXRlQ29uZGl0aW9uKTtcbiAgICAgIGNvbC5maW5kT25lQW5kVXBkYXRlKFxuICAgICAgICBzZWxlY3RDb25kaXRpb24sXG4gICAgICAgIHVwZGF0ZUNvbmRpdGlvbixcbiAgICAgICAgcmV0dXJuQ29uZGl0aW9uLFxuICAgICAgICBmdW5jdGlvbiAoZXJyb3IsIHJlcykge1xuICAgICAgICAgIGlmIChlcnJvcikge1xuICAgICAgICAgICAgcmVqZWN0KG5ldyBFcnJvcihlcnJvcikpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXNvbHZlKHJlcyk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICApO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICByZWplY3QobmV3IEVycm9yKGVycm9yKSk7XG4gICAgfVxuICB9KTtcbn07XG5cbmV4cG9ydCBjb25zdCBtb25nb0ZpbmRPbmVBbmRSZW1vdmUgPSBhc3luYyAoY29sLCBmaW5kQ29uZGl0aW9uKSA9PiB7XG4gIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNvbC5maW5kT25lQW5kUmVtb3ZlKGZpbmRDb25kaXRpb24pO1xuICByZXR1cm4gcmVzdWx0O1xufTtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFPLE1BQU1BLFlBQVksR0FBRyxPQUMxQkMsR0FEMEIsRUFFMUJDLGFBRjBCLEVBRzFCQyxlQUFlLEdBQUcsRUFIUSxLQUl2QjtFQUNILE1BQU1DLE1BQU0sR0FBRyxNQUFNSCxHQUFHLENBQ3JCSSxPQURrQixDQUNWSCxhQURVLEVBRWxCSSxNQUZrQixDQUVYSCxlQUZXLEVBR2xCSSxJQUhrQixHQUlsQkMsSUFKa0IsRUFBckIsQ0FERyxDQU1IOztFQUNBLE9BQU9KLE1BQVA7QUFDRCxDQVpNOzs7O0FBY0EsTUFBTUssdUJBQXVCLEdBQUcsT0FDckNSLEdBRHFDLEVBRXJDQyxhQUZxQyxFQUdyQ0MsZUFBZSxHQUFHLEVBSG1CLEtBSWxDO0VBQ0gsTUFBTUMsTUFBTSxHQUFHLE1BQU1ILEdBQUcsQ0FDckJJLE9BRGtCLENBQ1ZILGFBRFUsRUFFbEJJLE1B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","map":{"version":3,"names":["mongoFindOne","col","findCondition","selectCondition","result","findOne","select","lean","exec","mongoFindOneWithOutLean","mongoFindWithSort","limit","sortCondition","_id","find","sort","mongoFindMany","mongoFindCursor","cursor","mongoCount","count","mongoUpdateOne","updateCondition","updateOne","mongoUpsertOne","upsert","mongoUpdateMany","multi","mongoAggregate","aggregateCondition","aggregate","mongoDeleteOne","deleteOne","mongoDeleteMany","deleteMany","mongoInsertOne","doc","moongooseDoc","save","mongoInsertMany","docs","insertMany","mongoDistinct","string","distinct","mongoFindOneAndUpdate","returnCondition","Promise","resolve","reject","findOneAndUpdate","error","res","Error","mongoFindOneAndRemove","findOneAndRemove"],"sourceRoot":"/Users/ramireddycharitha/git-explore/models/","sources":["AbstractModels.js"],"sourcesContent":["export const mongoFindOne = async (\n  col,\n  findCondition,\n  selectCondition = {},\n) => {\n  const result = await col\n    .findOne(findCondition)\n    .select(selectCondition)\n    .lean()\n    .exec();\n  // console.log(\"===== from the mongo find one \"+JSON.stringify(result));\n  return result;\n};\n\nexport const mongoFindOneWithOutLean = async (\n  col,\n  findCondition,\n  selectCondition = {},\n) => {\n  const result = await col\n    .findOne(findCondition)\n    .select(selectCondition)\n    .exec();\n  return result;\n};\n\nexport const mongoFindWithSort = async (\n  col,\n  findCondition,\n  selectCondition = {},\n  limit = 0,\n  sortCondition = { _id: -1 },\n) => {\n  const result = await col\n    .find(findCondition)\n    .select(selectCondition)\n    .sort(sortCondition)\n    .limit(limit)\n    .lean()\n    .exec();\n  return result;\n};\n\nexport const mongoFindMany = async (\n  col,\n  findCondition,\n  selectCondition = {},\n  limit = 0,\n) => {\n  const result = await col\n    .find(findCondition)\n    .select(selectCondition)\n    .limit(limit)\n    .lean()\n    .exec();\n  return result;\n};\n\nexport const mongoFindCursor = async (\n  col,\n  findCondition,\n  selectCondition = {},\n  limit = 0,\n) => {\n  const cursor = await col\n    .find(findCondition)\n    .select(selectCondition)\n    .limit(limit)\n    .lean()\n    .cursor();\n  return cursor;\n};\n\nexport const mongoCount = async (col, findCondition) => {\n  const count = await col.count(findCondition);\n  return count;\n};\n\nexport const mongoUpdateOne = async (col, findCondition, updateCondition) => {\n  await col.updateOne(findCondition, updateCondition);\n};\n\nexport const mongoUpsertOne = async (col, findCondition, updateCondition) => {\n  await col.updateOne(findCondition, updateCondition, { upsert: true });\n};\n\nexport const mongoUpdateMany = async (col, findCondition, updateCondition) => {\n  await col.updateOne(findCondition, updateCondition, { multi: true });\n};\n\nexport const mongoAggregate = async (col, aggregateCondition) => {\n  const result = col.aggregate(aggregateCondition);\n  return result;\n};\n\nexport const mongoDeleteOne = async (col, findCondition) => {\n  await col.deleteOne(findCondition);\n};\n\nexport const mongoDeleteMany = async (col, findCondition) => {\n  await col.deleteMany(findCondition);\n};\n\nexport const mongoInsertOne = async (col, doc) => {\n  const moongooseDoc = col(doc);\n  const result = await moongooseDoc.save();\n  return result;\n};\n\nexport const mongoInsertMany = async (col, docs) => {\n  await col.insertMany(docs);\n};\n\nexport const mongoDistinct = async (col, string, findCondition) => {\n  const result = await col.distinct(string, findCondition);\n  return result;\n};\n\n// export const mongoFindOneAndUpdate = async (\n//   col,\n//   findCondition,\n//   updateCondition,\n//   returnCondition,\n// ) => {\n//   console.log(\"+++++ the col is\"+col);\n//   console.log(\"+++++ the find cond  is\"+JSON.stringify(findCondition));\n//   console.log(\"+++++ the update cond  is\"+JSON.stringify(updateCondition));\n//   const result = await col.findOneAndUpdate(\n//     findCondition,\n//     updateCondition,\n//     returnCondition,\n//   );\n//   console.log(\"+++++++++++++++++++FIND AND UPDATE\"+ result);\n//   return result;\n  \n// };\nexport const mongoFindOneAndUpdate = async (\n  col,\n  selectCondition,\n  updateCondition,\n  returnCondition\n) => {\n  return new Promise(async (resolve, reject) => {\n    try {\n     // console.log(\"TEsting ERROR -----------------------------\",col,selectCondition,updateCondition);\n      col.findOneAndUpdate(\n        selectCondition,\n        updateCondition,\n        returnCondition,\n        function (error, res) {\n          if (error) {\n            reject(new Error(error));\n          } else {\n            resolve(res);\n          }\n        }\n      );\n    } catch (error) {\n      reject(new Error(error));\n    }\n  });\n};\n\nexport const mongoFindOneAndRemove = async (col, findCondition) => {\n  const result = await col.findOneAndRemove(findCondition);\n  return result;\n};\n"],"mappings":";;;;;;;AAAO,MAAMA,YAAY,GAAG,OAC1BC,GAD0B,EAE1BC,aAF0B,EAG1BC,eAAe,GAAG,EAHQ,KAIvB;EACH,MAAMC,MAAM,GAAG,MAAMH,GAAG,CACrBI,OADkB,CACVH,aADU,EAElBI,MAFkB,CAEXH,eAFW,EAGlBI,IAHkB,GAIlBC,IAJkB,EAArB,CADG,CAMH;;EACA,OAAOJ,MAAP;AACD,CAZM;;;;AAcA,MAAMK,uBAAuB,GAAG,OACrCR,GADqC,EAErCC,aAFqC,EAGrCC,eAAe,GAAG,EAHmB,KAIlC;EACH,MAAMC,MAAM,GAAG,MAAMH,GAAG,CACrBI,OADkB,CACVH,aADU,EAElBI,MAFkB,CAEXH,eAFW,EAGlBK,IAHkB,EAArB;EAIA,OAAOJ,MAAP;AACD,CAVM;;;;AAYA,MAAMM,iBAAiB,GAAG,OAC/BT,GAD+B,EAE/BC,aAF+B,EAG/BC,eAAe,GAAG,EAHa,EAI/BQ,KAAK,GAAG,CAJuB,EAK/BC,aAAa,GAAG;EAAEC,GAAG,EAAE,CAAC;AAAR,CALe,KAM5B;EACH,MAAMT,MAAM,GAAG,MAAMH,GAAG,CACrBa,IADkB,CACbZ,aADa,EAElBI,MAFkB,CAEXH,eAFW,EAGlBY,IAHkB,CAGbH,aAHa,EAIlBD,KAJkB,CAIZA,KAJY,EAKlBJ,IALkB,GAMlBC,IANkB,EAArB;EAOA,OAAOJ,MAAP;AACD,CAfM;;;;AAiBA,MAAMY,aAAa,GAAG,OAC3Bf,GAD2B,EAE3BC,aAF2B,EAG3BC,eAAe,GAAG,EAHS,EAI3BQ,KAAK,GAAG,CAJmB,KAKxB;EACH,MAAMP,MAAM,GAAG,MAAMH,GAAG,CACrBa,IADkB,CACbZ,aADa,EAElBI,MAFkB,CAEXH,eAFW,EAGlBQ,KAHkB,CAGZA,KAHY,EAIlBJ,IAJkB,GAKlBC,IALkB,EAArB;EAMA,OAAOJ,MAAP;AACD,CAbM;;;;AAeA,MAAMa,eAAe,GAAG,OAC7BhB,GAD6B,EAE7BC,aAF6B,EAG7BC,eAAe,GAAG,EAHW,EAI7BQ,KAAK,GAAG,CAJqB,KAK1B;EACH,MAAMO,MAAM,GAAG,MAAMjB,GAAG,CACrBa,IADkB,CACbZ,aADa,EAElBI,MAFkB,CAEXH,eAFW,EAGlBQ,KAHkB,CAGZA,KAHY,EAIlBJ,IAJkB,GAKlBW,MALkB,EAArB;EAMA,OAAOA,MAAP;AACD,CAbM;;;;AAeA,MAAMC,UAAU,GAAG,OAAOlB,GAAP,EAAYC,aAAZ,KAA8B;EACtD,MAAMkB,KAAK,GAAG,MAAMnB,GAAG,CAACmB,KAAJ,CAAUlB,aAAV,CAApB;EACA,OAAOkB,KAAP;AACD,CAHM;;;;AAKA,MAAMC,cAAc,GAAG,OAAOpB,GAAP,EAAYC,aAAZ,EAA2BoB,eAA3B,KAA+C;EAC3E,MAAMrB,GAAG,CAACsB,SAAJ,CAAcrB,aAAd,EAA6BoB,eAA7B,CAAN;AACD,CAFM;;;;AAIA,MAAME,cAAc,GAAG,OAAOvB,GAAP,EAAYC,aAAZ,EAA2BoB,eAA3B,KAA+C;EAC3E,MAAMrB,GAAG,CAACsB,SAAJ,CAAcrB,aAAd,EAA6BoB,eAA7B,EAA8C;IAAEG,MAAM,EAAE;EAAV,CAA9C,CAAN;AACD,CAFM;;;;AAIA,MAAMC,eAAe,GAAG,OAAOzB,GAAP,EAAYC,aAAZ,EAA2BoB,eAA3B,KAA+C;EAC5E,MAAMrB,GAAG,CAACsB,SAAJ,CAAcrB,aAAd,EAA6BoB,eAA7B,EAA8C;IAAEK,KAAK,EAAE;EAAT,CAA9C,CAAN;AACD,CAFM;;;;AAIA,MAAMC,cAAc,GAAG,OAAO3B,GAAP,EAAY4B,kBAAZ,KAAmC;EAC/D,MAAMzB,MAAM,GAAGH,GAAG,CAAC6B,SAAJ,CAAcD,kBAAd,CAAf;EACA,OAAOzB,MAAP;AACD,CAHM;;;;AAKA,MAAM2B,cAAc,GAAG,OAAO9B,GAAP,EAAYC,aAAZ,KAA8B;EAC1D,MAAMD,GAAG,CAAC+B,SAAJ,CAAc9B,aAAd,CAAN;AACD,CAFM;;;;AAIA,MAAM+B,eAAe,GAAG,OAAOhC,GAAP,EAAYC,aAAZ,KAA8B;EAC3D,MAAMD,GAAG,CAACiC,UAAJ,CAAehC,aAAf,CAAN;AACD,CAFM;;;;AAIA,MAAMiC,cAAc,GAAG,OAAOlC,GAAP,EAAYmC,GAAZ,KAAoB;EAChD,MAAMC,YAAY,GAAGpC,GAAG,CAACmC,GAAD,CAAxB;EACA,MAAMhC,MAAM,GAAG,MAAMiC,YAAY,CAACC,IAAb,EAArB;EACA,OAAOlC,MAAP;AACD,CAJM;;;;AAMA,MAAMmC,eAAe,GAAG,OAAOtC,GAAP,EAAYuC,IAAZ,KAAqB;EAClD,MAAMvC,GAAG,CAACwC,UAAJ,CAAeD,IAAf,CAAN;AACD,CAFM;;;;AAIA,MAAME,aAAa,GAAG,OAAOzC,GAAP,EAAY0C,MAAZ,EAAoBzC,aAApB,KAAsC;EACjE,MAAME,MAAM,GAAG,MAAMH,GAAG,CAAC2C,QAAJ,CAAaD,MAAb,EAAqBzC,aAArB,CAArB;EACA,OAAOE,MAAP;AACD,CAHM,C,CAKP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;;;;;AACO,MAAMyC,qBAAqB,GAAG,OACnC5C,GADmC,EAEnCE,eAFmC,EAGnCmB,eAHmC,EAInCwB,eAJmC,KAKhC;EACH,OAAO,IAAIC,OAAJ,CAAY,OAAOC,OAAP,EAAgBC,MAAhB,KAA2B;IAC5C,IAAI;MACH;MACChD,GAAG,CAACiD,gBAAJ,CACE/C,eADF,EAEEmB,eAFF,EAGEwB,eAHF,EAIE,UAAUK,KAAV,EAAiBC,GAAjB,EAAsB;QACpB,IAAID,KAAJ,EAAW;UACTF,MAAM,CAAC,IAAII,KAAJ,CAAUF,KAAV,CAAD,CAAN;QACD,CAFD,MAEO;UACLH,OAAO,CAACI,GAAD,CAAP;QACD;MACF,CAVH;IAYD,CAdD,CAcE,OAAOD,KAAP,EAAc;MACdF,MAAM,CAAC,IAAII,KAAJ,CAAUF,KAAV,CAAD,CAAN;IACD;EACF,CAlBM,CAAP;AAmBD,CAzBM;;;;AA2BA,MAAMG,qBAAqB,GAAG,OAAOrD,GAAP,EAAYC,aAAZ,KAA8B;EACjE,MAAME,MAAM,GAAG,MAAMH,GAAG,CAACsD,gBAAJ,CAAqBrD,aAArB,CAArB;EACA,OAAOE,MAAP;AACD,CAHM"}},"mtime":1654155899021},"{\"assumptions\":{},\"sourceRoot\":\"/Users/ramireddycharitha/git-explore/models/mainDbSchema/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/ramireddycharitha/git-explore\",\"filename\":\"/Users/ramireddycharitha/git-explore/models/mainDbSchema/index.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"default\",\"root\":\"/Users/ramireddycharitha/git-explore\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.17.10:default":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Users = exports.Organisations = exports.IVRVirtualProfile = exports.Clients = exports.BusinessDIDNumbers = exports.BusinessCalls = void 0;\n\nvar mainDbConnection = _interopRequireWildcard(require(\"../../connections/MainDb\"));\n\nvar _ClientsSchema = _interopRequireDefault(require(\"./ClientsSchema\"));\n\nvar _UsersSchema = _interopRequireDefault(require(\"./UsersSchema\"));\n\nvar _OrganisationSchema = _interopRequireDefault(require(\"./OrganisationSchema\"));\n\nvar _IVRVirtualprofileSchema = _interopRequireDefault(require(\"./IVRVirtualprofileSchema\"));\n\nvar _BussinesscallSchema = _interopRequireDefault(require(\"./BussinesscallSchema\"));\n\nvar _BussinessDIDNumbersSchema = _interopRequireDefault(require(\"./BussinessDIDNumbersSchema\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nconst conn = mainDbConnection.getDbInstance();\nconst Users = conn.model(\"Users\", _UsersSchema.default, \"Users\"); // @hotfix: Collection name is Client (singular)\n// We can use plural name through out the code (Collection name can be changed while migrating)\n\nexports.Users = Users;\nconst Clients = conn.model(\"Clients\", _ClientsSchema.default, \"Client\");\nexports.Clients = Clients;\nconst Organisations = conn.model(\"Organisations\", _OrganisationSchema.default, \"Organisations\");\nexports.Organisations = Organisations;\nconst IVRVirtualProfile = conn.model(\"IVRVirtualProfile\", _IVRVirtualprofileSchema.default, \"IVRVirtualProfile\");\nexports.IVRVirtualProfile = IVRVirtualProfile;\nconst BusinessCalls = conn.model(\"BusinessCalls\", _BussinesscallSchema.default, \"BusinessCalls\");\nexports.BusinessCalls = BusinessCalls;\nconst BusinessDIDNumbers = conn.model(\"BusinessDIDNumbers\", _BussinessDIDNumbersSchema.default, \"BusinessDIDNumbers\");\nexports.BusinessDIDNumbers = BusinessDIDNumbers;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb25uIiwibWFpbkRiQ29ubmVjdGlvbiIsImdldERiSW5zdGFuY2UiLCJVc2VycyIsIm1vZGVsIiwiVXNlcnNTY2hlbWEiLCJDbGllbnRzIiwiQ2xpZW50c1NjaGVtYSIsIk9yZ2FuaXNhdGlvbnMiLCJPcmdhbmlzYXRpb25TY2hlbWEiLCJJVlJWaXJ0dWFsUHJvZmlsZSIsIklWUlZpcnR1YWxwcm9maWxlU2NoZW1hIiwiQnVzaW5lc3NDYWxscyIsIkJ1c3NpbmVzc2NhbGxTY2hlbWEiLCJCdXNpbmVzc0RJRE51bWJlcnMiLCJCdXNpbmVzc0RJRE51bWJlcnNTY2hlbWEiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy9yYW1pcmVkZHljaGFyaXRoYS9naXQtZXhwbG9yZS9tb2RlbHMvbWFpbkRiU2NoZW1hLyIsInNvdXJjZXMiOlsiaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgbWFpbkRiQ29ubmVjdGlvbiBmcm9tIFwiLi4vLi4vY29ubmVjdGlvbnMvTWFpbkRiXCI7XG5pbXBvcnQgQ2xpZW50c1NjaGVtYSBmcm9tIFwiLi9DbGllbnRzU2NoZW1hXCI7XG5pbXBvcnQgVXNlcnNTY2hlbWEgZnJvbSBcIi4vVXNlcnNTY2hlbWFcIjtcbmltcG9ydCBPcmdhbmlzYXRpb25TY2hlbWEgZnJvbSBcIi4vT3JnYW5pc2F0aW9uU2NoZW1hXCI7XG5pbXBvcnQgSVZSVmlydHVhbHByb2ZpbGVTY2hlbWEgZnJvbSBcIi4vSVZSVmlydHVhbHByb2ZpbGVTY2hlbWFcIjtcbmltcG9ydCBCdXNzaW5lc3NjYWxsU2NoZW1hIGZyb20gXCIuL0J1c3NpbmVzc2NhbGxTY2hlbWFcIjtcbmltcG9ydCBCdXNpbmVzc0RJRE51bWJlcnNTY2hlbWEgZnJvbSBcIi4vQnVzc2luZXNzRElETnVtYmVyc1NjaGVtYVwiO1xuXG5jb25zdCBjb25uID0gbWFpbkRiQ29ubmVjdGlvbi5nZXREYkluc3RhbmNlKCk7XG5leHBvcnQgY29uc3QgVXNlcnMgPSBjb25uLm1vZGVsKFwiVXNlcnNcIiwgVXNlcnNTY2hlbWEsIFwiVXNlcnNcIik7XG4vLyBAaG90Zml4OiBDb2xsZWN0aW9uIG5hbWUgaXMgQ2xpZW50IChzaW5ndWxhcilcbi8vIFdlIGNhbiB1c2UgcGx1cmFsIG5hbWUgdGhyb3VnaCBvdXQgdGhlIGNvZGUgKENvbGxlY3Rpb24gbmFtZSBjYW4gYmUgY2hhbmdlZCB3aGlsZSBtaWdyYXRpbmcpXG5leHBvcnQgY29uc3QgQ2xpZW50cyA9IGNvbm4ubW9kZWwoXCJDbGllbnRzXCIsIENsaWVudHNTY2hlbWEsIFwiQ2xpZW50XCIpO1xuXG5leHBvcnQgY29uc3QgT3JnYW5pc2F0aW9ucyA9IGNvbm4ubW9kZWwoXCJPcmdhbmlzYXRpb25zXCIsIE9yZ2FuaXNhdGlvblNjaGVtYSwgXCJPcmdhbmlzYXRpb25zXCIpO1xuZXhwb3J0IGNvbnN0IElWUlZpcnR1YWxQcm9maWxlID0gY29ubi5tb2RlbChcIklWUlZpcnR1YWxQcm9maWxlXCIsIElWUlZpcnR1YWxwcm9maWxlU2NoZW1hLCBcIklWUlZpcnR1YWxQcm9maWxlXCIpO1xuZXhwb3J0IGNvbnN0IEJ1c2luZXNzQ2FsbHMgPSBjb25uLm1vZGVsKFwiQnVzaW5lc3NDYWxsc1wiLCBCdXNzaW5lc3NjYWxsU2NoZW1hLCBcIkJ1c2luZXNzQ2FsbHNcIik7XG5leHBvcnQgY29uc3QgQnVzaW5lc3NESUROdW1iZXJzID0gY29ubi5tb2RlbChcIkJ1c2luZXNzRElETnVtYmVyc1wiLEJ1c2luZXNzRElETnVtYmVyc1NjaGVtYSxcIkJ1c2luZXNzRElETnVtYmVyc1wiKTtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOzs7Ozs7OztBQUVBLE1BQU1BLElBQUksR0FBR0MsZ0JBQWdCLENBQUNDLGFBQWpCLEVBQWI7QUFDTyxNQUFNQyxLQUFLLEdBQUdILElBQUksQ0FBQ0ksS0FBTCxDQUFXLE9BQVgsRUFBb0JDLG9CQUFwQixFQUFpQyxPQUFqQyxDQUFkLEMsQ0FDUDtBQUNBOzs7QUFDTyxNQUFNQyxPQUFPLEdBQUdOLElBQUksQ0FBQ0ksS0FBTCxDQUFXLFNBQVgsRUFBc0JHLHNCQUF0QixFQUFxQyxRQUFyQyxDQUFoQjs7QUFFQSxNQUFNQyxhQUFhLEdBQUdSLElBQUksQ0FBQ0ksS0FBTCxDQUFXLGVBQVgsRUFBNEJLLDJCQUE1QixFQUFnRCxlQUFoRCxDQUF0Qjs7QUFDQSxNQUFNQyxpQkFBaUIsR0FBR1YsSUFBSSxDQUFDSSxLQUFMLENBQVcsbUJBQVgsRUFBZ0NPLGdDQUFoQyxFQUF5RCxtQkFBekQsQ0FBMUI7O0FBQ0EsTUFBTUMsYUFBYSxHQUFHWixJQUFJLENBQUNJLEtBQUwsQ0FBVyxlQUFYLEVBQTRCUyw0QkFBNUIsRUFBaUQsZUFBakQsQ0FBdEI7O0FBQ0EsTUFBTUMsa0JBQWtCLEdBQUdkLElBQUksQ0FBQ0ksS0FBTCxDQUFXLG9CQUFYLEVBQWdDVyxrQ0FBaEMsRUFBeUQsb0JBQXpELENBQTNCIn0=","map":{"version":3,"names":["conn","mainDbConnection","getDbInstance","Users","model","UsersSchema","Clients","ClientsSchema","Organisations","OrganisationSchema","IVRVirtualProfile","IVRVirtualprofileSchema","BusinessCalls","BussinesscallSchema","BusinessDIDNumbers","BusinessDIDNumbersSchema"],"sourceRoot":"/Users/ramireddycharitha/git-explore/models/mainDbSchema/","sources":["index.js"],"sourcesContent":["import * as mainDbConnection from \"../../connections/MainDb\";\nimport ClientsSchema from \"./ClientsSchema\";\nimport UsersSchema from \"./UsersSchema\";\nimport OrganisationSchema from \"./OrganisationSchema\";\nimport IVRVirtualprofileSchema from \"./IVRVirtualprofileSchema\";\nimport BussinesscallSchema from \"./BussinesscallSchema\";\nimport BusinessDIDNumbersSchema from \"./BussinessDIDNumbersSchema\";\n\nconst conn = mainDbConnection.getDbInstance();\nexport const Users = conn.model(\"Users\", UsersSchema, \"Users\");\n// @hotfix: Collection name is Client (singular)\n// We can use plural name through out the code (Collection name can be changed while migrating)\nexport const Clients = conn.model(\"Clients\", ClientsSchema, \"Client\");\n\nexport const Organisations = conn.model(\"Organisations\", OrganisationSchema, \"Organisations\");\nexport const IVRVirtualProfile = conn.model(\"IVRVirtualProfile\", IVRVirtualprofileSchema, \"IVRVirtualProfile\");\nexport const BusinessCalls = conn.model(\"BusinessCalls\", BussinesscallSchema, \"BusinessCalls\");\nexport const BusinessDIDNumbers = conn.model(\"BusinessDIDNumbers\",BusinessDIDNumbersSchema,\"BusinessDIDNumbers\");\n"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;;;;;;;AAEA,MAAMA,IAAI,GAAGC,gBAAgB,CAACC,aAAjB,EAAb;AACO,MAAMC,KAAK,GAAGH,IAAI,CAACI,KAAL,CAAW,OAAX,EAAoBC,oBAApB,EAAiC,OAAjC,CAAd,C,CACP;AACA;;;AACO,MAAMC,OAAO,GAAGN,IAAI,CAACI,KAAL,CAAW,SAAX,EAAsBG,sBAAtB,EAAqC,QAArC,CAAhB;;AAEA,MAAMC,aAAa,GAAGR,IAAI,CAACI,KAAL,CAAW,eAAX,EAA4BK,2BAA5B,EAAgD,eAAhD,CAAtB;;AACA,MAAMC,iBAAiB,GAAGV,IAAI,CAACI,KAAL,CAAW,mBAAX,EAAgCO,gCAAhC,EAAyD,mBAAzD,CAA1B;;AACA,MAAMC,aAAa,GAAGZ,IAAI,CAACI,KAAL,CAAW,eAAX,EAA4BS,4BAA5B,EAAiD,eAAjD,CAAtB;;AACA,MAAMC,kBAAkB,GAAGd,IAAI,CAACI,KAAL,CAAW,oBAAX,EAAgCW,kCAAhC,EAAyD,oBAAzD,CAA3B"}},"mtime":1654085554360},"{\"assumptions\":{},\"sourceRoot\":\"/Users/ramireddycharitha/git-explore/models/mainDbSchema/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/ramireddycharitha/git-explore\",\"filename\":\"/Users/ramireddycharitha/git-explore/models/mainDbSchema/ClientsSchema.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"default\",\"root\":\"/Users/ramireddycharitha/git-explore\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.17.10:default":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _mongoose = require(\"mongoose\");\n\nconst ClientsSchema = new _mongoose.Schema({\n  metro_auth_key: {\n    type: String\n  }\n});\nvar _default = ClientsSchema;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJDbGllbnRzU2NoZW1hIiwiU2NoZW1hIiwibWV0cm9fYXV0aF9rZXkiLCJ0eXBlIiwiU3RyaW5nIl0sInNvdXJjZVJvb3QiOiIvVXNlcnMvcmFtaXJlZGR5Y2hhcml0aGEvZ2l0LWV4cGxvcmUvbW9kZWxzL21haW5EYlNjaGVtYS8iLCJzb3VyY2VzIjpbIkNsaWVudHNTY2hlbWEuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgU2NoZW1hIH0gZnJvbSBcIm1vbmdvb3NlXCI7XG5cbmNvbnN0IENsaWVudHNTY2hlbWEgPSBuZXcgU2NoZW1hKHtcbiAgbWV0cm9fYXV0aF9rZXk6IHtcbiAgICB0eXBlOiBTdHJpbmcsXG4gIH0sXG59KTtcblxuZXhwb3J0IGRlZmF1bHQgQ2xpZW50c1NjaGVtYTtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOztBQUVBLE1BQU1BLGFBQWEsR0FBRyxJQUFJQyxnQkFBSixDQUFXO0VBQy9CQyxjQUFjLEVBQUU7SUFDZEMsSUFBSSxFQUFFQztFQURRO0FBRGUsQ0FBWCxDQUF0QjtlQU1lSixhIn0=","map":{"version":3,"names":["ClientsSchema","Schema","metro_auth_key","type","String"],"sourceRoot":"/Users/ramireddycharitha/git-explore/models/mainDbSchema/","sources":["ClientsSchema.js"],"sourcesContent":["import { Schema } from \"mongoose\";\n\nconst ClientsSchema = new Schema({\n  metro_auth_key: {\n    type: String,\n  },\n});\n\nexport default ClientsSchema;\n"],"mappings":";;;;;;;AAAA;;AAEA,MAAMA,aAAa,GAAG,IAAIC,gBAAJ,CAAW;EAC/BC,cAAc,EAAE;IACdC,IAAI,EAAEC;EADQ;AADe,CAAX,CAAtB;eAMeJ,a"}},"mtime":1653643634186},"{\"assumptions\":{},\"sourceRoot\":\"/Users/ramireddycharitha/git-explore/models/mainDbSchema/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/ramireddycharitha/git-explore\",\"filename\":\"/Users/ramireddycharitha/git-explore/models/mainDbSchema/UsersSchema.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"default\",\"root\":\"/Users/ramireddycharitha/git-explore\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.17.10:default":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _mongoose = require(\"mongoose\");\n\nconst UsersSchema = new _mongoose.Schema({\n  password: {\n    type: String\n  },\n  firstName: {\n    type: String\n  },\n  lastName: {\n    required: false,\n    type: String\n  },\n  mobileNo: {\n    type: String\n  },\n  alternateMobileNo: {\n    type: String\n  },\n  email: {\n    type: String\n  },\n  clientId: {\n    required: true,\n    type: String\n  },\n  userType: {\n    type: Array,\n    required: true\n  },\n  sessionToken: {\n    type: String\n  },\n  isBlockedUser: {\n    type: Boolean\n  },\n  createdAt: {\n    type: Date,\n    default: Date.now\n  },\n  updatedAt: {\n    type: Date,\n    default: Date.now\n  }\n});\nvar _default = UsersSchema;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJVc2Vyc1NjaGVtYSIsIlNjaGVtYSIsInBhc3N3b3JkIiwidHlwZSIsIlN0cmluZyIsImZpcnN0TmFtZSIsImxhc3ROYW1lIiwicmVxdWlyZWQiLCJtb2JpbGVObyIsImFsdGVybmF0ZU1vYmlsZU5vIiwiZW1haWwiLCJjbGllbnRJZCIsInVzZXJUeXBlIiwiQXJyYXkiLCJzZXNzaW9uVG9rZW4iLCJpc0Jsb2NrZWRVc2VyIiwiQm9vbGVhbiIsImNyZWF0ZWRBdCIsIkRhdGUiLCJkZWZhdWx0Iiwibm93IiwidXBkYXRlZEF0Il0sInNvdXJjZVJvb3QiOiIvVXNlcnMvcmFtaXJlZGR5Y2hhcml0aGEvZ2l0LWV4cGxvcmUvbW9kZWxzL21haW5EYlNjaGVtYS8iLCJzb3VyY2VzIjpbIlVzZXJzU2NoZW1hLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFNjaGVtYSB9IGZyb20gXCJtb25nb29zZVwiO1xuXG5jb25zdCBVc2Vyc1NjaGVtYSA9IG5ldyBTY2hlbWEoe1xuICBwYXNzd29yZDoge1xuICAgIHR5cGU6IFN0cmluZyxcbiAgfSxcbiAgZmlyc3ROYW1lOiB7XG4gICAgdHlwZTogU3RyaW5nLFxuICB9LFxuICBsYXN0TmFtZToge1xuICAgIHJlcXVpcmVkOiBmYWxzZSxcbiAgICB0eXBlOiBTdHJpbmcsXG4gIH0sXG4gIG1vYmlsZU5vOiB7XG4gICAgdHlwZTogU3RyaW5nLFxuICB9LFxuICBhbHRlcm5hdGVNb2JpbGVObzoge1xuICAgIHR5cGU6IFN0cmluZyxcbiAgfSxcbiAgZW1haWw6IHtcbiAgICB0eXBlOiBTdHJpbmcsXG4gIH0sXG4gIGNsaWVudElkOiB7XG4gICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgdHlwZTogU3RyaW5nLFxuICB9LFxuICB1c2VyVHlwZToge1xuICAgIHR5cGU6IEFycmF5LFxuICAgIHJlcXVpcmVkOiB0cnVlLFxuICB9LFxuICBzZXNzaW9uVG9rZW46IHtcbiAgICB0eXBlOiBTdHJpbmcsXG4gIH0sXG4gIGlzQmxvY2tlZFVzZXI6IHtcbiAgICB0eXBlOiBCb29sZWFuLFxuICB9LFxuICBjcmVhdGVkQXQ6IHtcbiAgICB0eXBlOiBEYXRlLFxuICAgIGRlZmF1bHQ6IERhdGUubm93LFxuICB9LFxuICB1cGRhdGVkQXQ6IHtcbiAgICB0eXBlOiBEYXRlLFxuICAgIGRlZmF1bHQ6IERhdGUubm93LFxuICB9LFxufSk7XG5cbmV4cG9ydCBkZWZhdWx0IFVzZXJzU2NoZW1hO1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7O0FBRUEsTUFBTUEsV0FBVyxHQUFHLElBQUlDLGdCQUFKLENBQVc7RUFDN0JDLFFBQVEsRUFBRTtJQUNSQyxJQUFJLEVBQUVDO0VBREUsQ0FEbUI7RUFJN0JDLFNBQVMsRUFBRTtJQUNURixJQUFJLEVBQUVDO0VBREcsQ0FKa0I7RUFPN0JFLFFBQVEsRUFBRTtJQUNSQyxRQUFRLEVBQUUsS0FERjtJQUVSSixJQUFJLEVBQUVDO0VBRkUsQ0FQbUI7RUFXN0JJLFFBQVEsRUFBRTtJQUNSTCxJQUFJLEVBQUVDO0VBREUsQ0FYbUI7RUFjN0JLLGlCQUFpQixFQUFFO0lBQ2pCTixJQUFJLEVBQUVDO0VBRFcsQ0FkVTtFQWlCN0JNLEtBQUssRUFBRTtJQUNMUCxJQUFJLEVBQUVDO0VBREQsQ0FqQnNCO0VBb0I3Qk8sUUFBUSxFQUFFO0lBQ1JKLFFBQVEsRUFBRSxJQURGO0lBRVJKLElBQUksRUFBRUM7RUFGRSxDQXBCbUI7RUF3QjdCUSxRQUFRLEVBQUU7SUFDUlQsSUFBSSxFQUFFVSxLQURFO0lBRVJOLFFBQVEsRUFBRTtFQUZGLENBeEJtQjtFQTRCN0JPLFlBQVksRUFBRTtJQUNaWCxJQUFJLEVBQUVDO0VBRE0sQ0E1QmU7RUErQjdCVyxhQUFhLEVBQUU7SUFDYlosSUFBSSxFQUFFYTtFQURPLENBL0JjO0VBa0M3QkMsU0FBUyxFQUFFO0lBQ1RkLElBQUksRUFBRWUsSUFERztJQUVUQyxPQUFPLEVBQUVELElBQUksQ0FBQ0U7RUFGTCxDQWxDa0I7RUFzQzdCQyxTQUFTLEVBQUU7SUFDVGxCLElBQUksRUFBRWUsSUFERztJQUVUQyxPQUFPLEVBQUVELElBQUksQ0FBQ0U7RUFGTDtBQXRDa0IsQ0FBWCxDQUFwQjtlQTRDZXBCLFcifQ==","map":{"version":3,"names":["UsersSchema","Schema","password","type","String","firstName","lastName","required","mobileNo","alternateMobileNo","email","clientId","userType","Array","sessionToken","isBlockedUser","Boolean","createdAt","Date","default","now","updatedAt"],"sourceRoot":"/Users/ramireddycharitha/git-explore/models/mainDbSchema/","sources":["UsersSchema.js"],"sourcesContent":["import { Schema } from \"mongoose\";\n\nconst UsersSchema = new Schema({\n  password: {\n    type: String,\n  },\n  firstName: {\n    type: String,\n  },\n  lastName: {\n    required: false,\n    type: String,\n  },\n  mobileNo: {\n    type: String,\n  },\n  alternateMobileNo: {\n    type: String,\n  },\n  email: {\n    type: String,\n  },\n  clientId: {\n    required: true,\n    type: String,\n  },\n  userType: {\n    type: Array,\n    required: true,\n  },\n  sessionToken: {\n    type: String,\n  },\n  isBlockedUser: {\n    type: Boolean,\n  },\n  createdAt: {\n    type: Date,\n    default: Date.now,\n  },\n  updatedAt: {\n    type: Date,\n    default: Date.now,\n  },\n});\n\nexport default UsersSchema;\n"],"mappings":";;;;;;;AAAA;;AAEA,MAAMA,WAAW,GAAG,IAAIC,gBAAJ,CAAW;EAC7BC,QAAQ,EAAE;IACRC,IAAI,EAAEC;EADE,CADmB;EAI7BC,SAAS,EAAE;IACTF,IAAI,EAAEC;EADG,CAJkB;EAO7BE,QAAQ,EAAE;IACRC,QAAQ,EAAE,KADF;IAERJ,IAAI,EAAEC;EAFE,CAPmB;EAW7BI,QAAQ,EAAE;IACRL,IAAI,EAAEC;EADE,CAXmB;EAc7BK,iBAAiB,EAAE;IACjBN,IAAI,EAAEC;EADW,CAdU;EAiB7BM,KAAK,EAAE;IACLP,IAAI,EAAEC;EADD,CAjBsB;EAoB7BO,QAAQ,EAAE;IACRJ,QAAQ,EAAE,IADF;IAERJ,IAAI,EAAEC;EAFE,CApBmB;EAwB7BQ,QAAQ,EAAE;IACRT,IAAI,EAAEU,KADE;IAERN,QAAQ,EAAE;EAFF,CAxBmB;EA4B7BO,YAAY,EAAE;IACZX,IAAI,EAAEC;EADM,CA5Be;EA+B7BW,aAAa,EAAE;IACbZ,IAAI,EAAEa;EADO,CA/Bc;EAkC7BC,SAAS,EAAE;IACTd,IAAI,EAAEe,IADG;IAETC,OAAO,EAAED,IAAI,CAACE;EAFL,CAlCkB;EAsC7BC,SAAS,EAAE;IACTlB,IAAI,EAAEe,IADG;IAETC,OAAO,EAAED,IAAI,CAACE;EAFL;AAtCkB,CAAX,CAApB;eA4CepB,W"}},"mtime":1653643634186},"{\"assumptions\":{},\"sourceRoot\":\"/Users/ramireddycharitha/git-explore/models/mainDbSchema/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/ramireddycharitha/git-explore\",\"filename\":\"/Users/ramireddycharitha/git-explore/models/mainDbSchema/OrganisationSchema.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"default\",\"root\":\"/Users/ramireddycharitha/git-explore\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.17.10:default":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _MainDb = _interopRequireDefault(require(\"../../connections/MainDb\"));\n\nvar _mongoose = require(\"mongoose\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// import { Organisations } from \".\";\nconst Organisations = new _mongoose.Schema({\n  organisation_id: {\n    type: String,\n    required: true,\n    unique: true\n  },\n  name: {\n    type: String,\n    required: true\n  },\n  email: {\n    type: String\n  },\n  logo: {\n    type: String\n  },\n  client_id: {\n    type: String\n  },\n  contact_name: {\n    type: String\n  },\n  phone_number: {\n    type: String\n  },\n  address: {\n    type: Object\n  },\n  plan: {\n    type: String\n  },\n  status: {\n    type: String,\n    // [\"CREATED\", \"ACTIVE\", \"INACTIVE\"]\n    default: 'CREATED'\n  },\n  created_at: {\n    type: Date,\n    default: Date.now\n  },\n  updated_at: {\n    type: Date,\n    getDbInstance: _MainDb.default\n  },\n  deleted_at: {\n    type: Date\n  },\n  call_priority_routing: {\n    type: Boolean,\n    default: false\n  },\n  isOrgOutboundCallEnabled: {\n    type: Boolean,\n    default: false\n  },\n  call_minutes_available: {\n    type: Number,\n    default: 0\n  },\n  callerTuneUrl: {\n    type: String\n  },\n  is_caller_tune_enable: {\n    type: Boolean,\n    default: false\n  }\n}, {\n  timestamps: {\n    createdAt: 'created_at',\n    updatedAt: 'updated_at'\n  }\n}); // const Organisations = mongo_db.model(\n//   'Organisations',\n//   OrganisationsSchema,\n//   'Organisations'\n// );\n\nvar _default = Organisations; // export default Organisations = getDbInstance();\n\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJPcmdhbmlzYXRpb25zIiwiU2NoZW1hIiwib3JnYW5pc2F0aW9uX2lkIiwidHlwZSIsIlN0cmluZyIsInJlcXVpcmVkIiwidW5pcXVlIiwibmFtZSIsImVtYWlsIiwibG9nbyIsImNsaWVudF9pZCIsImNvbnRhY3RfbmFtZSIsInBob25lX251bWJlciIsImFkZHJlc3MiLCJPYmplY3QiLCJwbGFuIiwic3RhdHVzIiwiZGVmYXVsdCIsImNyZWF0ZWRfYXQiLCJEYXRlIiwibm93IiwidXBkYXRlZF9hdCIsImdldERiSW5zdGFuY2UiLCJkZWxldGVkX2F0IiwiY2FsbF9wcmlvcml0eV9yb3V0aW5nIiwiQm9vbGVhbiIsImlzT3JnT3V0Ym91bmRDYWxsRW5hYmxlZCIsImNhbGxfbWludXRlc19hdmFpbGFibGUiLCJOdW1iZXIiLCJjYWxsZXJUdW5lVXJsIiwiaXNfY2FsbGVyX3R1bmVfZW5hYmxlIiwidGltZXN0YW1wcyIsImNyZWF0ZWRBdCIsInVwZGF0ZWRBdCJdLCJzb3VyY2VSb290IjoiL1VzZXJzL3JhbWlyZWRkeWNoYXJpdGhhL2dpdC1leHBsb3JlL21vZGVscy9tYWluRGJTY2hlbWEvIiwic291cmNlcyI6WyJPcmdhbmlzYXRpb25TY2hlbWEuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGdldERiSW5zdGFuY2UgZnJvbSBcIi4uLy4uL2Nvbm5lY3Rpb25zL01haW5EYlwiO1xuaW1wb3J0IHsgU2NoZW1hIH0gZnJvbSAnbW9uZ29vc2UnO1xuLy8gaW1wb3J0IHsgT3JnYW5pc2F0aW9ucyB9IGZyb20gXCIuXCI7XG5cbmNvbnN0IE9yZ2FuaXNhdGlvbnMgPSBuZXcgU2NoZW1hKFxuICB7XG4gICAgb3JnYW5pc2F0aW9uX2lkOiB7XG4gICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICAgIHVuaXF1ZTogdHJ1ZVxuICAgIH0sXG4gICAgbmFtZToge1xuICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgcmVxdWlyZWQ6IHRydWVcbiAgICB9LFxuICAgIGVtYWlsOiB7XG4gICAgICB0eXBlOiBTdHJpbmdcbiAgICB9LFxuICAgIGxvZ286IHtcbiAgICAgIHR5cGU6IFN0cmluZ1xuICAgIH0sXG4gICAgY2xpZW50X2lkOiB7XG4gICAgICB0eXBlOiBTdHJpbmdcbiAgICB9LFxuICAgIGNvbnRhY3RfbmFtZToge1xuICAgICAgdHlwZTogU3RyaW5nXG4gICAgfSxcbiAgICBwaG9uZV9udW1iZXI6IHtcbiAgICAgIHR5cGU6IFN0cmluZ1xuICAgIH0sXG4gICAgYWRkcmVzczoge1xuICAgICAgdHlwZTogT2JqZWN0XG4gICAgfSxcbiAgICBwbGFuOiB7XG4gICAgICB0eXBlOiBTdHJpbmdcbiAgICB9LFxuICAgIHN0YXR1czoge1xuICAgICAgdHlwZTogU3RyaW5nLCAvLyBbXCJDUkVBVEVEXCIsIFwiQUNUSVZFXCIsIFwiSU5BQ1RJVkVcIl1cbiAgICAgIGRlZmF1bHQ6ICdDUkVBVEVEJ1xuICAgIH0sXG4gICAgY3JlYXRlZF9hdDoge1xuICAgICAgdHlwZTogRGF0ZSxcbiAgICAgIGRlZmF1bHQ6IERhdGUubm93XG4gICAgfSxcbiAgICB1cGRhdGVkX2F0OiB7XG4gICAgICB0eXBlOiBEYXRlLGdldERiSW5zdGFuY2VcbiAgICB9LFxuICAgIGRlbGV0ZWRfYXQ6IHtcbiAgICAgIHR5cGU6IERhdGVcbiAgICB9LFxuICAgIGNhbGxfcHJpb3JpdHlfcm91dGluZzoge1xuICAgICAgdHlwZTogQm9vbGVhbixcbiAgICAgIGRlZmF1bHQ6IGZhbHNlXG4gICAgfSxcbiAgICBpc09yZ091dGJvdW5kQ2FsbEVuYWJsZWQ6IHtcbiAgICAgIHR5cGU6IEJvb2xlYW4sXG4gICAgICBkZWZhdWx0OiBmYWxzZVxuICAgIH0sXG4gICAgY2FsbF9taW51dGVzX2F2YWlsYWJsZToge1xuICAgICAgdHlwZTogTnVtYmVyLFxuICAgICAgZGVmYXVsdDogMFxuICAgIH0sXG4gICAgY2FsbGVyVHVuZVVybDoge1xuICAgICAgdHlwZTogU3RyaW5nXG4gICAgfSxcbiAgICBpc19jYWxsZXJfdHVuZV9lbmFibGU6IHtcbiAgICAgIHR5cGU6IEJvb2xlYW4sXG4gICAgICBkZWZhdWx0OiBmYWxzZVxuICAgIH1cbiAgfSxcbiAgeyB0aW1lc3RhbXBzOiB7IGNyZWF0ZWRBdDogJ2NyZWF0ZWRfYXQnLCB1cGRhdGVkQXQ6ICd1cGRhdGVkX2F0JyB9IH1cbik7XG5cbi8vIGNvbnN0IE9yZ2FuaXNhdGlvbnMgPSBtb25nb19kYi5tb2RlbChcbi8vICAgJ09yZ2FuaXNhdGlvbnMnLFxuLy8gICBPcmdhbmlzYXRpb25zU2NoZW1hLFxuLy8gICAnT3JnYW5pc2F0aW9ucydcbi8vICk7XG5leHBvcnQgZGVmYXVsdCBPcmdhbmlzYXRpb25zO1xuLy8gZXhwb3J0IGRlZmF1bHQgT3JnYW5pc2F0aW9ucyA9IGdldERiSW5zdGFuY2UoKTsiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTs7QUFDQTs7OztBQUNBO0FBRUEsTUFBTUEsYUFBYSxHQUFHLElBQUlDLGdCQUFKLENBQ3BCO0VBQ0VDLGVBQWUsRUFBRTtJQUNmQyxJQUFJLEVBQUVDLE1BRFM7SUFFZkMsUUFBUSxFQUFFLElBRks7SUFHZkMsTUFBTSxFQUFFO0VBSE8sQ0FEbkI7RUFNRUMsSUFBSSxFQUFFO0lBQ0pKLElBQUksRUFBRUMsTUFERjtJQUVKQyxRQUFRLEVBQUU7RUFGTixDQU5SO0VBVUVHLEtBQUssRUFBRTtJQUNMTCxJQUFJLEVBQUVDO0VBREQsQ0FWVDtFQWFFSyxJQUFJLEVBQUU7SUFDSk4sSUFBSSxFQUFFQztFQURGLENBYlI7RUFnQkVNLFNBQVMsRUFBRTtJQUNUUCxJQUFJLEVBQUVDO0VBREcsQ0FoQmI7RUFtQkVPLFlBQVksRUFBRTtJQUNaUixJQUFJLEVBQUVDO0VBRE0sQ0FuQmhCO0VBc0JFUSxZQUFZLEVBQUU7SUFDWlQsSUFBSSxFQUFFQztFQURNLENBdEJoQjtFQXlCRVMsT0FBTyxFQUFFO0lBQ1BWLElBQUksRUFBRVc7RUFEQyxDQXpCWDtFQTRCRUMsSUFBSSxFQUFFO0lBQ0paLElBQUksRUFBRUM7RUFERixDQTVCUjtFQStCRVksTUFBTSxFQUFFO0lBQ05iLElBQUksRUFBRUMsTUFEQTtJQUNRO0lBQ2RhLE9BQU8sRUFBRTtFQUZILENBL0JWO0VBbUNFQyxVQUFVLEVBQUU7SUFDVmYsSUFBSSxFQUFFZ0IsSUFESTtJQUVWRixPQUFPLEVBQUVFLElBQUksQ0FBQ0M7RUFGSixDQW5DZDtFQXVDRUMsVUFBVSxFQUFFO0lBQ1ZsQixJQUFJLEVBQUVnQixJQURJO0lBQ0NHLGFBQWEsRUFBYkE7RUFERCxDQXZDZDtFQTBDRUMsVUFBVSxFQUFFO0lBQ1ZwQixJQUFJLEVBQUVnQjtFQURJLENBMUNkO0VBNkNFSyxxQkFBcUIsRUFBRTtJQUNyQnJCLElBQUksRUFBRXNCLE9BRGU7SUFFckJSLE9BQU8sRUFBRTtFQUZZLENBN0N6QjtFQWlERVMsd0JBQXdCLEVBQUU7SUFDeEJ2QixJQUFJLEVBQUVzQixPQURrQjtJQUV4QlIsT0FBTyxFQUFFO0VBRmUsQ0FqRDVCO0VBcURFVSxzQkFBc0IsRUFBRTtJQUN0QnhCLElBQUksRUFBRXlCLE1BRGdCO0lBRXRCWCxPQUFPLEVBQUU7RUFGYSxDQXJEMUI7RUF5REVZLGFBQWEsRUFBRTtJQUNiMUIsSUFBSSxFQUFFQztFQURPLENBekRqQjtFQTRERTBCLHFCQUFxQixFQUFFO0lBQ3JCM0IsSUFBSSxFQUFFc0IsT0FEZTtJQUVyQlIsT0FBTyxFQUFFO0VBRlk7QUE1RHpCLENBRG9CLEVBa0VwQjtFQUFFYyxVQUFVLEVBQUU7SUFBRUMsU0FBUyxFQUFFLFlBQWI7SUFBMkJDLFNBQVMsRUFBRTtFQUF0QztBQUFkLENBbEVvQixDQUF0QixDLENBcUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O2VBQ2VqQyxhLEVBQ2YifQ==","map":{"version":3,"names":["Organisations","Schema","organisation_id","type","String","required","unique","name","email","logo","client_id","contact_name","phone_number","address","Object","plan","status","default","created_at","Date","now","updated_at","getDbInstance","deleted_at","call_priority_routing","Boolean","isOrgOutboundCallEnabled","call_minutes_available","Number","callerTuneUrl","is_caller_tune_enable","timestamps","createdAt","updatedAt"],"sourceRoot":"/Users/ramireddycharitha/git-explore/models/mainDbSchema/","sources":["OrganisationSchema.js"],"sourcesContent":["import getDbInstance from \"../../connections/MainDb\";\nimport { Schema } from 'mongoose';\n// import { Organisations } from \".\";\n\nconst Organisations = new Schema(\n  {\n    organisation_id: {\n      type: String,\n      required: true,\n      unique: true\n    },\n    name: {\n      type: String,\n      required: true\n    },\n    email: {\n      type: String\n    },\n    logo: {\n      type: String\n    },\n    client_id: {\n      type: String\n    },\n    contact_name: {\n      type: String\n    },\n    phone_number: {\n      type: String\n    },\n    address: {\n      type: Object\n    },\n    plan: {\n      type: String\n    },\n    status: {\n      type: String, // [\"CREATED\", \"ACTIVE\", \"INACTIVE\"]\n      default: 'CREATED'\n    },\n    created_at: {\n      type: Date,\n      default: Date.now\n    },\n    updated_at: {\n      type: Date,getDbInstance\n    },\n    deleted_at: {\n      type: Date\n    },\n    call_priority_routing: {\n      type: Boolean,\n      default: false\n    },\n    isOrgOutboundCallEnabled: {\n      type: Boolean,\n      default: false\n    },\n    call_minutes_available: {\n      type: Number,\n      default: 0\n    },\n    callerTuneUrl: {\n      type: String\n    },\n    is_caller_tune_enable: {\n      type: Boolean,\n      default: false\n    }\n  },\n  { timestamps: { createdAt: 'created_at', updatedAt: 'updated_at' } }\n);\n\n// const Organisations = mongo_db.model(\n//   'Organisations',\n//   OrganisationsSchema,\n//   'Organisations'\n// );\nexport default Organisations;\n// export default Organisations = getDbInstance();"],"mappings":";;;;;;;AAAA;;AACA;;;;AACA;AAEA,MAAMA,aAAa,GAAG,IAAIC,gBAAJ,CACpB;EACEC,eAAe,EAAE;IACfC,IAAI,EAAEC,MADS;IAEfC,QAAQ,EAAE,IAFK;IAGfC,MAAM,EAAE;EAHO,CADnB;EAMEC,IAAI,EAAE;IACJJ,IAAI,EAAEC,MADF;IAEJC,QAAQ,EAAE;EAFN,CANR;EAUEG,KAAK,EAAE;IACLL,IAAI,EAAEC;EADD,CAVT;EAaEK,IAAI,EAAE;IACJN,IAAI,EAAEC;EADF,CAbR;EAgBEM,SAAS,EAAE;IACTP,IAAI,EAAEC;EADG,CAhBb;EAmBEO,YAAY,EAAE;IACZR,IAAI,EAAEC;EADM,CAnBhB;EAsBEQ,YAAY,EAAE;IACZT,IAAI,EAAEC;EADM,CAtBhB;EAyBES,OAAO,EAAE;IACPV,IAAI,EAAEW;EADC,CAzBX;EA4BEC,IAAI,EAAE;IACJZ,IAAI,EAAEC;EADF,CA5BR;EA+BEY,MAAM,EAAE;IACNb,IAAI,EAAEC,MADA;IACQ;IACda,OAAO,EAAE;EAFH,CA/BV;EAmCEC,UAAU,EAAE;IACVf,IAAI,EAAEgB,IADI;IAEVF,OAAO,EAAEE,IAAI,CAACC;EAFJ,CAnCd;EAuCEC,UAAU,EAAE;IACVlB,IAAI,EAAEgB,IADI;IACCG,aAAa,EAAbA;EADD,CAvCd;EA0CEC,UAAU,EAAE;IACVpB,IAAI,EAAEgB;EADI,CA1Cd;EA6CEK,qBAAqB,EAAE;IACrBrB,IAAI,EAAEsB,OADe;IAErBR,OAAO,EAAE;EAFY,CA7CzB;EAiDES,wBAAwB,EAAE;IACxBvB,IAAI,EAAEsB,OADkB;IAExBR,OAAO,EAAE;EAFe,CAjD5B;EAqDEU,sBAAsB,EAAE;IACtBxB,IAAI,EAAEyB,MADgB;IAEtBX,OAAO,EAAE;EAFa,CArD1B;EAyDEY,aAAa,EAAE;IACb1B,IAAI,EAAEC;EADO,CAzDjB;EA4DE0B,qBAAqB,EAAE;IACrB3B,IAAI,EAAEsB,OADe;IAErBR,OAAO,EAAE;EAFY;AA5DzB,CADoB,EAkEpB;EAAEc,UAAU,EAAE;IAAEC,SAAS,EAAE,YAAb;IAA2BC,SAAS,EAAE;EAAtC;AAAd,CAlEoB,CAAtB,C,CAqEA;AACA;AACA;AACA;AACA;;eACejC,a,EACf"}},"mtime":1653973523780},"{\"assumptions\":{},\"sourceRoot\":\"/Users/ramireddycharitha/git-explore/models/mainDbSchema/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/ramireddycharitha/git-explore\",\"filename\":\"/Users/ramireddycharitha/git-explore/models/mainDbSchema/IVRVirtualprofileSchema.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"default\",\"root\":\"/Users/ramireddycharitha/git-explore\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.17.10:default":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _MainDb = _interopRequireDefault(require(\"../../connections/MainDb\"));\n\nvar _mongoose = require(\"mongoose\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst FcmTokenSchema = new _mongoose.Schema({\n  firebase_token: String,\n  os: String,\n  // eg: iOS\n  os_version: String,\n  // eg: 13.2.2\n  device_id: String,\n  // eg: iPhone 7.1\n  device_unique_id: String,\n  // eg: FCDBD8EF-62FC-4ECB-B2F5-92C9E79AC7F9\n  session_id: String,\n  created_at: {\n    type: Date,\n    default: Date.now\n  },\n  status: {\n    type: String,\n    default: 'ACTIVE'\n  }\n});\nconst IVRVirtualProfileSchema = new _mongoose.Schema({\n  user_id: {\n    type: String,\n    required: true\n  },\n  organization_id: {\n    type: String\n  },\n  group_id: {\n    type: String\n  },\n  v_mobile_no: {\n    type: String\n  },\n  v_mobile_nos: [{\n    type: String\n  }],\n  zvr_name: {\n    type: String\n  },\n  zvr_mobile_no: {\n    type: String,\n    required: true\n  },\n  zvr_email: {\n    type: String\n  },\n  zvr_link: {\n    type: String\n  },\n  password: {\n    type: String // required: true,\n\n  },\n  encryption_key: {\n    type: String,\n    required: true\n  },\n  location: {\n    type: Object\n  },\n  address: {\n    type: String\n  },\n  landmarks: {\n    type: Array\n  },\n  instruction_text: {\n    type: String\n  },\n  lm_audio_list: {\n    type: Array,\n    default: []\n  },\n  avail_audio_list: {\n    type: Array,\n    default: []\n  },\n  mm_url: {\n    type: String\n  },\n  ref_code: {\n    type: String,\n    unique: true\n  },\n  ref_count: {\n    type: Number,\n    default: 0\n  },\n  credits: {\n    type: Number,\n    default: 0\n  },\n  refered_by: {\n    type: String\n  },\n  refered_by_code: {\n    type: String\n  },\n  random_code: {\n    type: String\n  },\n  roles: {\n    type: Array\n  },\n  client_id: {\n    type: String\n  },\n  session_id: {\n    type: String\n  },\n  session_ids: {\n    type: Array\n  },\n  status: {\n    type: String,\n    default: 'ACTIVE'\n  },\n  waitlist_category: {\n    type: String\n  },\n  statuses: {\n    type: Object\n  },\n  reg_ec_sites: {\n    type: Object,\n    default: {}\n  },\n  active: {\n    type: Boolean,\n    default: true\n  },\n  is_transitioned: {\n    type: Boolean\n  },\n  is_droppedoff: {\n    type: Boolean\n  },\n  call_filter_id: {\n    type: String\n  },\n  call_filter_off_time_id: {\n    type: String\n  },\n  inactivated_at: {\n    type: Date\n  },\n  activate_at: {\n    type: Date\n  },\n  free_trial_cancelled_at: {\n    type: Date\n  },\n  initial_activated_at: {\n    type: Date\n  },\n  call_limit: {\n    type: Number,\n    default: 6000\n  },\n  is_business_account: {\n    type: Boolean,\n    default: false\n  },\n  cc_client_ids: {\n    type: Array,\n    default: []\n  },\n  trusted_services: {\n    type: Array,\n    default: []\n  },\n  plans_stack: {\n    type: Array,\n    default: []\n  },\n  numbers_sent: {\n    type: Object\n  },\n  alloted_v_mobile_no: {\n    type: String\n  },\n  alloted_at: {\n    type: Date\n  },\n  numbers_sent_at: {\n    type: Date\n  },\n  expire_on: {\n    type: Date\n  },\n  expired_at: {\n    type: Date\n  },\n  subscriptions: {\n    type: Array\n  },\n  firebase_tokens: [FcmTokenSchema],\n  firebase_token: {\n    // Deprecated: Instead use firebase_tokens\n    type: String\n  },\n  subscription_id: {\n    type: String\n  },\n  subscription_status: {\n    type: String\n  },\n  registered_at: {\n    type: Date,\n    default: Date.now\n  },\n  created_at: {\n    type: Date,\n    default: Date.now\n  },\n  waitlist_at: {\n    type: Date\n  },\n  livelist_at: {\n    type: Date\n  },\n  updated_at: {\n    type: Date,\n    default: Date.now\n  },\n  free_trial: {\n    type: Boolean\n  },\n  free_trial_start_at: {\n    type: Date\n  },\n  free_trial_end_at: {\n    type: Date\n  },\n  free_trial_cancel_at: {\n    type: Date\n  },\n  change_to_vmn: {\n    type: String\n  },\n  sign_up_type: {\n    type: String\n  },\n  signup_ip: {\n    type: String\n  },\n  upgraded_to_pro: {\n    // will be true only of users who upgrade to pro from essential / free\n    type: Boolean,\n    default: false\n  },\n  // is_permanent_call_block_on: {\n  //   type: Boolean,\n  //   default: false,\n  // },\n  organisation: {\n    type: Object\n  },\n  is_deleted: {\n    type: Boolean,\n    default: false\n  },\n  deleted_at: {\n    type: Date\n  },\n  upgradation_in_process: {\n    type: Boolean\n  },\n  source: {\n    type: String // IAP_IOS,IAP_ANDROID...\n\n  },\n  is_manual_referral_code: {\n    type: Boolean\n  },\n  v_mobile_no_details: {\n    type: Object\n  },\n  has_locked: {\n    type: Boolean,\n    default: false\n  },\n  is_pro: {\n    type: Boolean,\n    default: false\n  },\n  is_kyc_completed: {\n    type: Boolean\n  },\n  is_kyc_mandatory: {\n    type: Boolean\n  },\n  user_type: {\n    type: String,\n    default: 'CONSUMER'\n  },\n  terminated_at: {\n    type: Date\n  },\n  do_ekyc_later: {\n    type: Boolean\n  },\n  preferences: {\n    type: Object,\n    default: {\n      onboard_cards: true\n    }\n  },\n  demo_needed: {\n    type: Date\n  },\n  is_onboard: {\n    type: Boolean,\n    default: false\n  },\n  isOutboundCallEnabled: {\n    type: Boolean,\n    default: false\n  },\n  callerTuneUrl: {\n    type: String\n  },\n  is_caller_tune_enable: {\n    type: Boolean,\n    default: false\n  }\n});\nIVRVirtualProfileSchema.index({\n  v_mobile_no: 1\n});\nIVRVirtualProfileSchema.index({\n  'organisation.organisation_id': 1\n});\nvar _default = IVRVirtualProfileSchema;\n/*\n  status:\n  1 - in progress\n  2 - complete\n  9 - disabled\n*/\n\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJGY21Ub2tlblNjaGVtYSIsIlNjaGVtYSIsImZpcmViYXNlX3Rva2VuIiwiU3RyaW5nIiwib3MiLCJvc192ZXJzaW9uIiwiZGV2aWNlX2lkIiwiZGV2aWNlX3VuaXF1ZV9pZCIsInNlc3Npb25faWQiLCJjcmVhdGVkX2F0IiwidHlwZSIsIkRhdGUiLCJkZWZhdWx0Iiwibm93Iiwic3RhdHVzIiwiSVZSVmlydHVhbFByb2ZpbGVTY2hlbWEiLCJ1c2VyX2lkIiwicmVxdWlyZWQiLCJvcmdhbml6YXRpb25faWQiLCJncm91cF9pZCIsInZfbW9iaWxlX25vIiwidl9tb2JpbGVfbm9zIiwienZyX25hbWUiLCJ6dnJfbW9iaWxlX25vIiwienZyX2VtYWlsIiwienZyX2xpbmsiLCJwYXNzd29yZCIsImVuY3J5cHRpb25fa2V5IiwibG9jYXRpb24iLCJPYmplY3QiLCJhZGRyZXNzIiwibGFuZG1hcmtzIiwiQXJyYXkiLCJpbnN0cnVjdGlvbl90ZXh0IiwibG1fYXVkaW9fbGlzdCIsImF2YWlsX2F1ZGlvX2xpc3QiLCJtbV91cmwiLCJyZWZfY29kZSIsInVuaXF1ZSIsInJlZl9jb3VudCIsIk51bWJlciIsImNyZWRpdHMiLCJyZWZlcmVkX2J5IiwicmVmZXJlZF9ieV9jb2RlIiwicmFuZG9tX2NvZGUiLCJyb2xlcyIsImNsaWVudF9pZCIsInNlc3Npb25faWRzIiwid2FpdGxpc3RfY2F0ZWdvcnkiLCJzdGF0dXNlcyIsInJlZ19lY19zaXRlcyIsImFjdGl2ZSIsIkJvb2xlYW4iLCJpc190cmFuc2l0aW9uZWQiLCJpc19kcm9wcGVkb2ZmIiwiY2FsbF9maWx0ZXJfaWQiLCJjYWxsX2ZpbHRlcl9vZmZfdGltZV9pZCIsImluYWN0aXZhdGVkX2F0IiwiYWN0aXZhdGVfYXQiLCJmcmVlX3RyaWFsX2NhbmNlbGxlZF9hdCIsImluaXRpYWxfYWN0aXZhdGVkX2F0IiwiY2FsbF9saW1pdCIsImlzX2J1c2luZXNzX2FjY291bnQiLCJjY19jbGllbnRfaWRzIiwidHJ1c3RlZF9zZXJ2aWNlcyIsInBsYW5zX3N0YWNrIiwibnVtYmVyc19zZW50IiwiYWxsb3RlZF92X21vYmlsZV9ubyIsImFsbG90ZWRfYXQiLCJudW1iZXJzX3NlbnRfYXQiLCJleHBpcmVfb24iLCJleHBpcmVkX2F0Iiwic3Vic2NyaXB0aW9ucyIsImZpcmViYXNlX3Rva2VucyIsInN1YnNjcmlwdGlvbl9pZCIsInN1YnNjcmlwdGlvbl9zdGF0dXMiLCJyZWdpc3RlcmVkX2F0Iiwid2FpdGxpc3RfYXQiLCJsaXZlbGlzdF9hdCIsInVwZGF0ZWRfYXQiLCJmcmVlX3RyaWFsIiwiZnJlZV90cmlhbF9zdGFydF9hdCIsImZyZWVfdHJpYWxfZW5kX2F0IiwiZnJlZV90cmlhbF9jYW5jZWxfYXQiLCJjaGFuZ2VfdG9fdm1uIiwic2lnbl91cF90eXBlIiwic2lnbnVwX2lwIiwidXBncmFkZWRfdG9fcHJvIiwib3JnYW5pc2F0aW9uIiwiaXNfZGVsZXRlZCIsImRlbGV0ZWRfYXQiLCJ1cGdyYWRhdGlvbl9pbl9wcm9jZXNzIiwic291cmNlIiwiaXNfbWFudWFsX3JlZmVycmFsX2NvZGUiLCJ2X21vYmlsZV9ub19kZXRhaWxzIiwiaGFzX2xvY2tlZCIsImlzX3BybyIsImlzX2t5Y19jb21wbGV0ZWQiLCJpc19reWNfbWFuZGF0b3J5IiwidXNlcl90eXBlIiwidGVybWluYXRlZF9hdCIsImRvX2VreWNfbGF0ZXIiLCJwcmVmZXJlbmNlcyIsIm9uYm9hcmRfY2FyZHMiLCJkZW1vX25lZWRlZCIsImlzX29uYm9hcmQiLCJpc091dGJvdW5kQ2FsbEVuYWJsZWQiLCJjYWxsZXJUdW5lVXJsIiwiaXNfY2FsbGVyX3R1bmVfZW5hYmxlIiwiaW5kZXgiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy9yYW1pcmVkZHljaGFyaXRoYS9naXQtZXhwbG9yZS9tb2RlbHMvbWFpbkRiU2NoZW1hLyIsInNvdXJjZXMiOlsiSVZSVmlydHVhbHByb2ZpbGVTY2hlbWEuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGdldERiSW5zdGFuY2UgZnJvbSBcIi4uLy4uL2Nvbm5lY3Rpb25zL01haW5EYlwiO1xuaW1wb3J0IHsgU2NoZW1hIH0gZnJvbSAnbW9uZ29vc2UnO1xuXG5jb25zdCBGY21Ub2tlblNjaGVtYSA9IG5ldyBTY2hlbWEoe1xuICBmaXJlYmFzZV90b2tlbjogU3RyaW5nLFxuICBvczogU3RyaW5nLCAvLyBlZzogaU9TXG4gIG9zX3ZlcnNpb246IFN0cmluZywgLy8gZWc6IDEzLjIuMlxuICBkZXZpY2VfaWQ6IFN0cmluZywgLy8gZWc6IGlQaG9uZSA3LjFcbiAgZGV2aWNlX3VuaXF1ZV9pZDogU3RyaW5nLCAvLyBlZzogRkNEQkQ4RUYtNjJGQy00RUNCLUIyRjUtOTJDOUU3OUFDN0Y5XG4gIHNlc3Npb25faWQ6IFN0cmluZyxcbiAgY3JlYXRlZF9hdDoge1xuICAgIHR5cGU6IERhdGUsXG4gICAgZGVmYXVsdDogRGF0ZS5ub3dcbiAgfSxcbiAgc3RhdHVzOiB7XG4gICAgdHlwZTogU3RyaW5nLFxuICAgIGRlZmF1bHQ6ICdBQ1RJVkUnXG4gIH1cbn0pO1xuXG5jb25zdCBJVlJWaXJ0dWFsUHJvZmlsZVNjaGVtYSA9IG5ldyBTY2hlbWEoe1xuICB1c2VyX2lkOiB7XG4gICAgdHlwZTogU3RyaW5nLFxuICAgIHJlcXVpcmVkOiB0cnVlXG4gIH0sXG4gIG9yZ2FuaXphdGlvbl9pZDoge1xuICAgIHR5cGU6IFN0cmluZ1xuICB9LFxuICBncm91cF9pZDoge1xuICAgIHR5cGU6IFN0cmluZ1xuICB9LFxuICB2X21vYmlsZV9ubzoge1xuICAgIHR5cGU6IFN0cmluZ1xuICB9LFxuICB2X21vYmlsZV9ub3M6IFt7IHR5cGU6IFN0cmluZyB9XSxcbiAgenZyX25hbWU6IHtcbiAgICB0eXBlOiBTdHJpbmdcbiAgfSxcbiAgenZyX21vYmlsZV9ubzoge1xuICAgIHR5cGU6IFN0cmluZyxcbiAgICByZXF1aXJlZDogdHJ1ZVxuICB9LFxuICB6dnJfZW1haWw6IHtcbiAgICB0eXBlOiBTdHJpbmdcbiAgfSxcbiAgenZyX2xpbms6IHtcbiAgICB0eXBlOiBTdHJpbmdcbiAgfSxcbiAgcGFzc3dvcmQ6IHtcbiAgICB0eXBlOiBTdHJpbmdcbiAgICAvLyByZXF1aXJlZDogdHJ1ZSxcbiAgfSxcbiAgZW5jcnlwdGlvbl9rZXk6IHtcbiAgICB0eXBlOiBTdHJpbmcsXG4gICAgcmVxdWlyZWQ6IHRydWVcbiAgfSxcbiAgbG9jYXRpb246IHtcbiAgICB0eXBlOiBPYmplY3RcbiAgfSxcbiAgYWRkcmVzczoge1xuICAgIHR5cGU6IFN0cmluZ1xuICB9LFxuICBsYW5kbWFya3M6IHtcbiAgICB0eXBlOiBBcnJheVxuICB9LFxuICBpbnN0cnVjdGlvbl90ZXh0OiB7XG4gICAgdHlwZTogU3RyaW5nXG4gIH0sXG4gIGxtX2F1ZGlvX2xpc3Q6IHtcbiAgICB0eXBlOiBBcnJheSxcbiAgICBkZWZhdWx0OiBbXVxuICB9LFxuICBhdmFpbF9hdWRpb19saXN0OiB7XG4gICAgdHlwZTogQXJyYXksXG4gICAgZGVmYXVsdDogW11cbiAgfSxcbiAgbW1fdXJsOiB7XG4gICAgdHlwZTogU3RyaW5nXG4gIH0sXG4gIHJlZl9jb2RlOiB7XG4gICAgdHlwZTogU3RyaW5nLFxuICAgIHVuaXF1ZTogdHJ1ZVxuICB9LFxuICByZWZfY291bnQ6IHtcbiAgICB0eXBlOiBOdW1iZXIsXG4gICAgZGVmYXVsdDogMFxuICB9LFxuICBjcmVkaXRzOiB7XG4gICAgdHlwZTogTnVtYmVyLFxuICAgIGRlZmF1bHQ6IDBcbiAgfSxcbiAgcmVmZXJlZF9ieToge1xuICAgIHR5cGU6IFN0cmluZ1xuICB9LFxuICByZWZlcmVkX2J5X2NvZGU6IHtcbiAgICB0eXBlOiBTdHJpbmdcbiAgfSxcbiAgcmFuZG9tX2NvZGU6IHtcbiAgICB0eXBlOiBTdHJpbmdcbiAgfSxcbiAgcm9sZXM6IHtcbiAgICB0eXBlOiBBcnJheVxuICB9LFxuICBjbGllbnRfaWQ6IHtcbiAgICB0eXBlOiBTdHJpbmdcbiAgfSxcbiAgc2Vzc2lvbl9pZDoge1xuICAgIHR5cGU6IFN0cmluZ1xuICB9LFxuICBzZXNzaW9uX2lkczoge1xuICAgIHR5cGU6IEFycmF5XG4gIH0sXG4gIHN0YXR1czoge1xuICAgIHR5cGU6IFN0cmluZyxcbiAgICBkZWZhdWx0OiAnQUNUSVZFJ1xuICB9LFxuICB3YWl0bGlzdF9jYXRlZ29yeToge1xuICAgIHR5cGU6IFN0cmluZ1xuICB9LFxuICBzdGF0dXNlczoge1xuICAgIHR5cGU6IE9iamVjdFxuICB9LFxuICByZWdfZWNfc2l0ZXM6IHtcbiAgICB0eXBlOiBPYmplY3QsXG4gICAgZGVmYXVsdDoge31cbiAgfSxcbiAgYWN0aXZlOiB7XG4gICAgdHlwZTogQm9vbGVhbixcbiAgICBkZWZhdWx0OiB0cnVlXG4gIH0sXG4gIGlzX3RyYW5zaXRpb25lZDoge1xuICAgIHR5cGU6IEJvb2xlYW5cbiAgfSxcbiAgaXNfZHJvcHBlZG9mZjoge1xuICAgIHR5cGU6IEJvb2xlYW5cbiAgfSxcbiAgY2FsbF9maWx0ZXJfaWQ6IHtcbiAgICB0eXBlOiBTdHJpbmdcbiAgfSxcbiAgY2FsbF9maWx0ZXJfb2ZmX3RpbWVfaWQ6IHtcbiAgICB0eXBlOiBTdHJpbmdcbiAgfSxcbiAgaW5hY3RpdmF0ZWRfYXQ6IHtcbiAgICB0eXBlOiBEYXRlXG4gIH0sXG4gIGFjdGl2YXRlX2F0OiB7XG4gICAgdHlwZTogRGF0ZVxuICB9LFxuICBmcmVlX3RyaWFsX2NhbmNlbGxlZF9hdDoge1xuICAgIHR5cGU6IERhdGVcbiAgfSxcbiAgaW5pdGlhbF9hY3RpdmF0ZWRfYXQ6IHtcbiAgICB0eXBlOiBEYXRlXG4gIH0sXG4gIGNhbGxfbGltaXQ6IHtcbiAgICB0eXBlOiBOdW1iZXIsXG4gICAgZGVmYXVsdDogNjAwMFxuICB9LFxuICBpc19idXNpbmVzc19hY2NvdW50OiB7XG4gICAgdHlwZTogQm9vbGVhbixcbiAgICBkZWZhdWx0OiBmYWxzZVxuICB9LFxuICBjY19jbGllbnRfaWRzOiB7XG4gICAgdHlwZTogQXJyYXksXG4gICAgZGVmYXVsdDogW11cbiAgfSxcbiAgdHJ1c3RlZF9zZXJ2aWNlczoge1xuICAgIHR5cGU6IEFycmF5LFxuICAgIGRlZmF1bHQ6IFtdXG4gIH0sXG4gIHBsYW5zX3N0YWNrOiB7XG4gICAgdHlwZTogQXJyYXksXG4gICAgZGVmYXVsdDogW11cbiAgfSxcbiAgbnVtYmVyc19zZW50OiB7XG4gICAgdHlwZTogT2JqZWN0XG4gIH0sXG4gIGFsbG90ZWRfdl9tb2JpbGVfbm86IHtcbiAgICB0eXBlOiBTdHJpbmdcbiAgfSxcbiAgYWxsb3RlZF9hdDoge1xuICAgIHR5cGU6IERhdGVcbiAgfSxcbiAgbnVtYmVyc19zZW50X2F0OiB7XG4gICAgdHlwZTogRGF0ZVxuICB9LFxuICBleHBpcmVfb246IHtcbiAgICB0eXBlOiBEYXRlXG4gIH0sXG4gIGV4cGlyZWRfYXQ6IHtcbiAgICB0eXBlOiBEYXRlXG4gIH0sXG4gIHN1YnNjcmlwdGlvbnM6IHtcbiAgICB0eXBlOiBBcnJheVxuICB9LFxuICBmaXJlYmFzZV90b2tlbnM6IFtGY21Ub2tlblNjaGVtYV0sXG4gIGZpcmViYXNlX3Rva2VuOiB7XG4gICAgLy8gRGVwcmVjYXRlZDogSW5zdGVhZCB1c2UgZmlyZWJhc2VfdG9rZW5zXG4gICAgdHlwZTogU3RyaW5nXG4gIH0sXG4gIHN1YnNjcmlwdGlvbl9pZDoge1xuICAgIHR5cGU6IFN0cmluZ1xuICB9LFxuICBzdWJzY3JpcHRpb25fc3RhdHVzOiB7XG4gICAgdHlwZTogU3RyaW5nXG4gIH0sXG4gIHJlZ2lzdGVyZWRfYXQ6IHtcbiAgICB0eXBlOiBEYXRlLFxuICAgIGRlZmF1bHQ6IERhdGUubm93XG4gIH0sXG4gIGNyZWF0ZWRfYXQ6IHtcbiAgICB0eXBlOiBEYXRlLFxuICAgIGRlZmF1bHQ6IERhdGUubm93XG4gIH0sXG4gIHdhaXRsaXN0X2F0OiB7XG4gICAgdHlwZTogRGF0ZVxuICB9LFxuICBsaXZlbGlzdF9hdDoge1xuICAgIHR5cGU6IERhdGVcbiAgfSxcbiAgdXBkYXRlZF9hdDoge1xuICAgIHR5cGU6IERhdGUsXG4gICAgZGVmYXVsdDogRGF0ZS5ub3dcbiAgfSxcbiAgZnJlZV90cmlhbDoge1xuICAgIHR5cGU6IEJvb2xlYW5cbiAgfSxcbiAgZnJlZV90cmlhbF9zdGFydF9hdDoge1xuICAgIHR5cGU6IERhdGVcbiAgfSxcbiAgZnJlZV90cmlhbF9lbmRfYXQ6IHtcbiAgICB0eXBlOiBEYXRlXG4gIH0sXG4gIGZyZWVfdHJpYWxfY2FuY2VsX2F0OiB7XG4gICAgdHlwZTogRGF0ZVxuICB9LFxuICBjaGFuZ2VfdG9fdm1uOiB7XG4gICAgdHlwZTogU3RyaW5nXG4gIH0sXG4gIHNpZ25fdXBfdHlwZToge1xuICAgIHR5cGU6IFN0cmluZ1xuICB9LFxuICBzaWdudXBfaXA6IHtcbiAgICB0eXBlOiBTdHJpbmdcbiAgfSxcbiAgdXBncmFkZWRfdG9fcHJvOiB7XG4gICAgLy8gd2lsbCBiZSB0cnVlIG9ubHkgb2YgdXNlcnMgd2hvIHVwZ3JhZGUgdG8gcHJvIGZyb20gZXNzZW50aWFsIC8gZnJlZVxuICAgIHR5cGU6IEJvb2xlYW4sXG4gICAgZGVmYXVsdDogZmFsc2VcbiAgfSxcbiAgLy8gaXNfcGVybWFuZW50X2NhbGxfYmxvY2tfb246IHtcbiAgLy8gICB0eXBlOiBCb29sZWFuLFxuICAvLyAgIGRlZmF1bHQ6IGZhbHNlLFxuICAvLyB9LFxuICBvcmdhbmlzYXRpb246IHtcbiAgICB0eXBlOiBPYmplY3RcbiAgfSxcbiAgaXNfZGVsZXRlZDoge1xuICAgIHR5cGU6IEJvb2xlYW4sXG4gICAgZGVmYXVsdDogZmFsc2VcbiAgfSxcbiAgZGVsZXRlZF9hdDoge1xuICAgIHR5cGU6IERhdGVcbiAgfSxcbiAgdXBncmFkYXRpb25faW5fcHJvY2Vzczoge1xuICAgIHR5cGU6IEJvb2xlYW5cbiAgfSxcbiAgc291cmNlOiB7XG4gICAgdHlwZTogU3RyaW5nIC8vIElBUF9JT1MsSUFQX0FORFJPSUQuLi5cbiAgfSxcbiAgaXNfbWFudWFsX3JlZmVycmFsX2NvZGU6IHtcbiAgICB0eXBlOiBCb29sZWFuXG4gIH0sXG4gIHZfbW9iaWxlX25vX2RldGFpbHM6IHtcbiAgICB0eXBlOiBPYmplY3RcbiAgfSxcbiAgaGFzX2xvY2tlZDoge1xuICAgIHR5cGU6IEJvb2xlYW4sXG4gICAgZGVmYXVsdDogZmFsc2VcbiAgfSxcbiAgaXNfcHJvOiB7XG4gICAgdHlwZTogQm9vbGVhbixcbiAgICBkZWZhdWx0OiBmYWxzZVxuICB9LFxuICBpc19reWNfY29tcGxldGVkOiB7XG4gICAgdHlwZTogQm9vbGVhblxuICB9LFxuICBpc19reWNfbWFuZGF0b3J5OiB7XG4gICAgdHlwZTogQm9vbGVhblxuICB9LFxuICB1c2VyX3R5cGU6IHtcbiAgICB0eXBlOiBTdHJpbmcsXG4gICAgZGVmYXVsdDogJ0NPTlNVTUVSJ1xuICB9LFxuICB0ZXJtaW5hdGVkX2F0OiB7XG4gICAgdHlwZTogRGF0ZVxuICB9LFxuICBkb19la3ljX2xhdGVyOiB7XG4gICAgdHlwZTogQm9vbGVhblxuICB9LFxuICBwcmVmZXJlbmNlczoge1xuICAgIHR5cGU6IE9iamVjdCxcbiAgICBkZWZhdWx0OiB7IG9uYm9hcmRfY2FyZHM6IHRydWUgfVxuICB9LFxuICBkZW1vX25lZWRlZDoge1xuICAgIHR5cGU6IERhdGVcbiAgfSxcbiAgaXNfb25ib2FyZDoge1xuICAgIHR5cGU6IEJvb2xlYW4sXG4gICAgZGVmYXVsdDogZmFsc2VcbiAgfSxcbiAgaXNPdXRib3VuZENhbGxFbmFibGVkOiB7XG4gICAgdHlwZTogQm9vbGVhbixcbiAgICBkZWZhdWx0OiBmYWxzZVxuICB9LFxuICBjYWxsZXJUdW5lVXJsOiB7XG4gICAgdHlwZTogU3RyaW5nXG4gIH0sXG4gIGlzX2NhbGxlcl90dW5lX2VuYWJsZToge1xuICAgIHR5cGU6IEJvb2xlYW4sXG4gICAgZGVmYXVsdDogZmFsc2VcbiAgfVxufSk7XG5cbklWUlZpcnR1YWxQcm9maWxlU2NoZW1hLmluZGV4KHsgdl9tb2JpbGVfbm86IDEgfSk7XG5JVlJWaXJ0dWFsUHJvZmlsZVNjaGVtYS5pbmRleCh7ICdvcmdhbmlzYXRpb24ub3JnYW5pc2F0aW9uX2lkJzogMSB9KTtcblxuZXhwb3J0IGRlZmF1bHQgSVZSVmlydHVhbFByb2ZpbGVTY2hlbWE7XG5cbi8qXG4gIHN0YXR1czpcbiAgMSAtIGluIHByb2dyZXNzXG4gIDIgLSBjb21wbGV0ZVxuICA5IC0gZGlzYWJsZWRcbiovXG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTs7QUFDQTs7OztBQUVBLE1BQU1BLGNBQWMsR0FBRyxJQUFJQyxnQkFBSixDQUFXO0VBQ2hDQyxjQUFjLEVBQUVDLE1BRGdCO0VBRWhDQyxFQUFFLEVBQUVELE1BRjRCO0VBRXBCO0VBQ1pFLFVBQVUsRUFBRUYsTUFIb0I7RUFHWjtFQUNwQkcsU0FBUyxFQUFFSCxNQUpxQjtFQUliO0VBQ25CSSxnQkFBZ0IsRUFBRUosTUFMYztFQUtOO0VBQzFCSyxVQUFVLEVBQUVMLE1BTm9CO0VBT2hDTSxVQUFVLEVBQUU7SUFDVkMsSUFBSSxFQUFFQyxJQURJO0lBRVZDLE9BQU8sRUFBRUQsSUFBSSxDQUFDRTtFQUZKLENBUG9CO0VBV2hDQyxNQUFNLEVBQUU7SUFDTkosSUFBSSxFQUFFUCxNQURBO0lBRU5TLE9BQU8sRUFBRTtFQUZIO0FBWHdCLENBQVgsQ0FBdkI7QUFpQkEsTUFBTUcsdUJBQXVCLEdBQUcsSUFBSWQsZ0JBQUosQ0FBVztFQUN6Q2UsT0FBTyxFQUFFO0lBQ1BOLElBQUksRUFBRVAsTUFEQztJQUVQYyxRQUFRLEVBQUU7RUFGSCxDQURnQztFQUt6Q0MsZUFBZSxFQUFFO0lBQ2ZSLElBQUksRUFBRVA7RUFEUyxDQUx3QjtFQVF6Q2dCLFFBQVEsRUFBRTtJQUNSVCxJQUFJLEVBQUVQO0VBREUsQ0FSK0I7RUFXekNpQixXQUFXLEVBQUU7SUFDWFYsSUFBSSxFQUFFUDtFQURLLENBWDRCO0VBY3pDa0IsWUFBWSxFQUFFLENBQUM7SUFBRVgsSUFBSSxFQUFFUDtFQUFSLENBQUQsQ0FkMkI7RUFlekNtQixRQUFRLEVBQUU7SUFDUlosSUFBSSxFQUFFUDtFQURFLENBZitCO0VBa0J6Q29CLGFBQWEsRUFBRTtJQUNiYixJQUFJLEVBQUVQLE1BRE87SUFFYmMsUUFBUSxFQUFFO0VBRkcsQ0FsQjBCO0VBc0J6Q08s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","map":{"version":3,"names":["FcmTokenSchema","Schema","firebase_token","String","os","os_version","device_id","device_unique_id","session_id","created_at","type","Date","default","now","status","IVRVirtualProfileSchema","user_id","required","organization_id","group_id","v_mobile_no","v_mobile_nos","zvr_name","zvr_mobile_no","zvr_email","zvr_link","password","encryption_key","location","Object","address","landmarks","Array","instruction_text","lm_audio_list","avail_audio_list","mm_url","ref_code","unique","ref_count","Number","credits","refered_by","refered_by_code","random_code","roles","client_id","session_ids","waitlist_category","statuses","reg_ec_sites","active","Boolean","is_transitioned","is_droppedoff","call_filter_id","call_filter_off_time_id","inactivated_at","activate_at","free_trial_cancelled_at","initial_activated_at","call_limit","is_business_account","cc_client_ids","trusted_services","plans_stack","numbers_sent","alloted_v_mobile_no","alloted_at","numbers_sent_at","expire_on","expired_at","subscriptions","firebase_tokens","subscription_id","subscription_status","registered_at","waitlist_at","livelist_at","updated_at","free_trial","free_trial_start_at","free_trial_end_at","free_trial_cancel_at","change_to_vmn","sign_up_type","signup_ip","upgraded_to_pro","organisation","is_deleted","deleted_at","upgradation_in_process","source","is_manual_referral_code","v_mobile_no_details","has_locked","is_pro","is_kyc_completed","is_kyc_mandatory","user_type","terminated_at","do_ekyc_later","preferences","onboard_cards","demo_needed","is_onboard","isOutboundCallEnabled","callerTuneUrl","is_caller_tune_enable","index"],"sourceRoot":"/Users/ramireddycharitha/git-explore/models/mainDbSchema/","sources":["IVRVirtualprofileSchema.js"],"sourcesContent":["import getDbInstance from \"../../connections/MainDb\";\nimport { Schema } from 'mongoose';\n\nconst FcmTokenSchema = new Schema({\n  firebase_token: String,\n  os: String, // eg: iOS\n  os_version: String, // eg: 13.2.2\n  device_id: String, // eg: iPhone 7.1\n  device_unique_id: String, // eg: FCDBD8EF-62FC-4ECB-B2F5-92C9E79AC7F9\n  session_id: String,\n  created_at: {\n    type: Date,\n    default: Date.now\n  },\n  status: {\n    type: String,\n    default: 'ACTIVE'\n  }\n});\n\nconst IVRVirtualProfileSchema = new Schema({\n  user_id: {\n    type: String,\n    required: true\n  },\n  organization_id: {\n    type: String\n  },\n  group_id: {\n    type: String\n  },\n  v_mobile_no: {\n    type: String\n  },\n  v_mobile_nos: [{ type: String }],\n  zvr_name: {\n    type: String\n  },\n  zvr_mobile_no: {\n    type: String,\n    required: true\n  },\n  zvr_email: {\n    type: String\n  },\n  zvr_link: {\n    type: String\n  },\n  password: {\n    type: String\n    // required: true,\n  },\n  encryption_key: {\n    type: String,\n    required: true\n  },\n  location: {\n    type: Object\n  },\n  address: {\n    type: String\n  },\n  landmarks: {\n    type: Array\n  },\n  instruction_text: {\n    type: String\n  },\n  lm_audio_list: {\n    type: Array,\n    default: []\n  },\n  avail_audio_list: {\n    type: Array,\n    default: []\n  },\n  mm_url: {\n    type: String\n  },\n  ref_code: {\n    type: String,\n    unique: true\n  },\n  ref_count: {\n    type: Number,\n    default: 0\n  },\n  credits: {\n    type: Number,\n    default: 0\n  },\n  refered_by: {\n    type: String\n  },\n  refered_by_code: {\n    type: String\n  },\n  random_code: {\n    type: String\n  },\n  roles: {\n    type: Array\n  },\n  client_id: {\n    type: String\n  },\n  session_id: {\n    type: String\n  },\n  session_ids: {\n    type: Array\n  },\n  status: {\n    type: String,\n    default: 'ACTIVE'\n  },\n  waitlist_category: {\n    type: String\n  },\n  statuses: {\n    type: Object\n  },\n  reg_ec_sites: {\n    type: Object,\n    default: {}\n  },\n  active: {\n    type: Boolean,\n    default: true\n  },\n  is_transitioned: {\n    type: Boolean\n  },\n  is_droppedoff: {\n    type: Boolean\n  },\n  call_filter_id: {\n    type: String\n  },\n  call_filter_off_time_id: {\n    type: String\n  },\n  inactivated_at: {\n    type: Date\n  },\n  activate_at: {\n    type: Date\n  },\n  free_trial_cancelled_at: {\n    type: Date\n  },\n  initial_activated_at: {\n    type: Date\n  },\n  call_limit: {\n    type: Number,\n    default: 6000\n  },\n  is_business_account: {\n    type: Boolean,\n    default: false\n  },\n  cc_client_ids: {\n    type: Array,\n    default: []\n  },\n  trusted_services: {\n    type: Array,\n    default: []\n  },\n  plans_stack: {\n    type: Array,\n    default: []\n  },\n  numbers_sent: {\n    type: Object\n  },\n  alloted_v_mobile_no: {\n    type: String\n  },\n  alloted_at: {\n    type: Date\n  },\n  numbers_sent_at: {\n    type: Date\n  },\n  expire_on: {\n    type: Date\n  },\n  expired_at: {\n    type: Date\n  },\n  subscriptions: {\n    type: Array\n  },\n  firebase_tokens: [FcmTokenSchema],\n  firebase_token: {\n    // Deprecated: Instead use firebase_tokens\n    type: String\n  },\n  subscription_id: {\n    type: String\n  },\n  subscription_status: {\n    type: String\n  },\n  registered_at: {\n    type: Date,\n    default: Date.now\n  },\n  created_at: {\n    type: Date,\n    default: Date.now\n  },\n  waitlist_at: {\n    type: Date\n  },\n  livelist_at: {\n    type: Date\n  },\n  updated_at: {\n    type: Date,\n    default: Date.now\n  },\n  free_trial: {\n    type: Boolean\n  },\n  free_trial_start_at: {\n    type: Date\n  },\n  free_trial_end_at: {\n    type: Date\n  },\n  free_trial_cancel_at: {\n    type: Date\n  },\n  change_to_vmn: {\n    type: String\n  },\n  sign_up_type: {\n    type: String\n  },\n  signup_ip: {\n    type: String\n  },\n  upgraded_to_pro: {\n    // will be true only of users who upgrade to pro from essential / free\n    type: Boolean,\n    default: false\n  },\n  // is_permanent_call_block_on: {\n  //   type: Boolean,\n  //   default: false,\n  // },\n  organisation: {\n    type: Object\n  },\n  is_deleted: {\n    type: Boolean,\n    default: false\n  },\n  deleted_at: {\n    type: Date\n  },\n  upgradation_in_process: {\n    type: Boolean\n  },\n  source: {\n    type: String // IAP_IOS,IAP_ANDROID...\n  },\n  is_manual_referral_code: {\n    type: Boolean\n  },\n  v_mobile_no_details: {\n    type: Object\n  },\n  has_locked: {\n    type: Boolean,\n    default: false\n  },\n  is_pro: {\n    type: Boolean,\n    default: false\n  },\n  is_kyc_completed: {\n    type: Boolean\n  },\n  is_kyc_mandatory: {\n    type: Boolean\n  },\n  user_type: {\n    type: String,\n    default: 'CONSUMER'\n  },\n  terminated_at: {\n    type: Date\n  },\n  do_ekyc_later: {\n    type: Boolean\n  },\n  preferences: {\n    type: Object,\n    default: { onboard_cards: true }\n  },\n  demo_needed: {\n    type: Date\n  },\n  is_onboard: {\n    type: Boolean,\n    default: false\n  },\n  isOutboundCallEnabled: {\n    type: Boolean,\n    default: false\n  },\n  callerTuneUrl: {\n    type: String\n  },\n  is_caller_tune_enable: {\n    type: Boolean,\n    default: false\n  }\n});\n\nIVRVirtualProfileSchema.index({ v_mobile_no: 1 });\nIVRVirtualProfileSchema.index({ 'organisation.organisation_id': 1 });\n\nexport default IVRVirtualProfileSchema;\n\n/*\n  status:\n  1 - in progress\n  2 - complete\n  9 - disabled\n*/\n"],"mappings":"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"}},"mtime":1654085554355},"{\"assumptions\":{},\"sourceRoot\":\"/Users/ramireddycharitha/git-explore/models/mainDbSchema/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/ramireddycharitha/git-explore\",\"filename\":\"/Users/ramireddycharitha/git-explore/models/mainDbSchema/BussinesscallSchema.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"default\",\"root\":\"/Users/ramireddycharitha/git-explore\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.17.10:default":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _mongoose = _interopRequireWildcard(require(\"mongoose\"));\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nconst BusinessCallsSchema = new _mongoose.Schema({\n  organisationId: {\n    type: String,\n    required: true\n  },\n  user: {\n    type: String,\n    required: true,\n    ref: 'IVRVirtualProfile'\n  },\n  destinationNumber: {\n    type: String,\n    required: true\n  },\n  initiatorNumber: {\n    type: String,\n    required: true\n  },\n  didNumber: {\n    type: String,\n    required: true\n  },\n  status: {\n    type: String\n  },\n  duration: {\n    type: Number,\n    default: 0,\n    required: true\n  },\n  isCallEnded: {\n    type: Boolean,\n    default: false,\n    required: true\n  },\n  recording: {\n    type: String,\n    default: false,\n    required: true\n  },\n  createdAt: {\n    type: Date,\n    default: Date.now\n  },\n  updatedAt: {\n    type: Date,\n    default: Date.now\n  }\n});\nvar _default = BusinessCallsSchema;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJCdXNpbmVzc0NhbGxzU2NoZW1hIiwiU2NoZW1hIiwib3JnYW5pc2F0aW9uSWQiLCJ0eXBlIiwiU3RyaW5nIiwicmVxdWlyZWQiLCJ1c2VyIiwicmVmIiwiZGVzdGluYXRpb25OdW1iZXIiLCJpbml0aWF0b3JOdW1iZXIiLCJkaWROdW1iZXIiLCJzdGF0dXMiLCJkdXJhdGlvbiIsIk51bWJlciIsImRlZmF1bHQiLCJpc0NhbGxFbmRlZCIsIkJvb2xlYW4iLCJyZWNvcmRpbmciLCJjcmVhdGVkQXQiLCJEYXRlIiwibm93IiwidXBkYXRlZEF0Il0sInNvdXJjZVJvb3QiOiIvVXNlcnMvcmFtaXJlZGR5Y2hhcml0aGEvZ2l0LWV4cGxvcmUvbW9kZWxzL21haW5EYlNjaGVtYS8iLCJzb3VyY2VzIjpbIkJ1c3NpbmVzc2NhbGxTY2hlbWEuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG1vbmdvb3NlLCB7IFNjaGVtYSB9IGZyb20gJ21vbmdvb3NlJztcblxuY29uc3QgQnVzaW5lc3NDYWxsc1NjaGVtYSA9IG5ldyBTY2hlbWEoe1xuICBvcmdhbmlzYXRpb25JZDogeyB0eXBlOiBTdHJpbmcsIHJlcXVpcmVkOiB0cnVlIH0sXG4gIHVzZXI6IHsgdHlwZTogU3RyaW5nLCByZXF1aXJlZDogdHJ1ZSwgcmVmOiAnSVZSVmlydHVhbFByb2ZpbGUnIH0sXG4gIGRlc3RpbmF0aW9uTnVtYmVyOiB7IHR5cGU6IFN0cmluZywgcmVxdWlyZWQ6IHRydWUgfSxcbiAgaW5pdGlhdG9yTnVtYmVyOiB7IHR5cGU6IFN0cmluZywgcmVxdWlyZWQ6IHRydWUgfSxcbiAgZGlkTnVtYmVyOiB7IHR5cGU6IFN0cmluZywgcmVxdWlyZWQ6IHRydWUgfSxcbiAgc3RhdHVzOiB7IHR5cGU6IFN0cmluZyB9LFxuICBkdXJhdGlvbjogeyB0eXBlOiBOdW1iZXIsIGRlZmF1bHQ6IDAsIHJlcXVpcmVkOiB0cnVlIH0sXG4gIGlzQ2FsbEVuZGVkOiB7IHR5cGU6IEJvb2xlYW4sIGRlZmF1bHQ6IGZhbHNlLCByZXF1aXJlZDogdHJ1ZSB9LFxuICByZWNvcmRpbmc6IHsgdHlwZTogU3RyaW5nLCBkZWZhdWx0OiBmYWxzZSwgcmVxdWlyZWQ6IHRydWUgfSxcbiAgY3JlYXRlZEF0OiB7IHR5cGU6IERhdGUsIGRlZmF1bHQ6IERhdGUubm93IH0sXG4gIHVwZGF0ZWRBdDogeyB0eXBlOiBEYXRlLCBkZWZhdWx0OiBEYXRlLm5vdyB9XG59KTtcblxuZXhwb3J0IGRlZmF1bHQgQnVzaW5lc3NDYWxsc1NjaGVtYTtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOzs7Ozs7QUFFQSxNQUFNQSxtQkFBbUIsR0FBRyxJQUFJQyxnQkFBSixDQUFXO0VBQ3JDQyxjQUFjLEVBQUU7SUFBRUMsSUFBSSxFQUFFQyxNQUFSO0lBQWdCQyxRQUFRLEVBQUU7RUFBMUIsQ0FEcUI7RUFFckNDLElBQUksRUFBRTtJQUFFSCxJQUFJLEVBQUVDLE1BQVI7SUFBZ0JDLFFBQVEsRUFBRSxJQUExQjtJQUFnQ0UsR0FBRyxFQUFFO0VBQXJDLENBRitCO0VBR3JDQyxpQkFBaUIsRUFBRTtJQUFFTCxJQUFJLEVBQUVDLE1BQVI7SUFBZ0JDLFFBQVEsRUFBRTtFQUExQixDQUhrQjtFQUlyQ0ksZUFBZSxFQUFFO0lBQUVOLElBQUksRUFBRUMsTUFBUjtJQUFnQkMsUUFBUSxFQUFFO0VBQTFCLENBSm9CO0VBS3JDSyxTQUFTLEVBQUU7SUFBRVAsSUFBSSxFQUFFQyxNQUFSO0lBQWdCQyxRQUFRLEVBQUU7RUFBMUIsQ0FMMEI7RUFNckNNLE1BQU0sRUFBRTtJQUFFUixJQUFJLEVBQUVDO0VBQVIsQ0FONkI7RUFPckNRLFFBQVEsRUFBRTtJQUFFVCxJQUFJLEVBQUVVLE1BQVI7SUFBZ0JDLE9BQU8sRUFBRSxDQUF6QjtJQUE0QlQsUUFBUSxFQUFFO0VBQXRDLENBUDJCO0VBUXJDVSxXQUFXLEVBQUU7SUFBRVosSUFBSSxFQUFFYSxPQUFSO0lBQWlCRixPQUFPLEVBQUUsS0FBMUI7SUFBaUNULFFBQVEsRUFBRTtFQUEzQyxDQVJ3QjtFQVNyQ1ksU0FBUyxFQUFFO0lBQUVkLElBQUksRUFBRUMsTUFBUjtJQUFnQlUsT0FBTyxFQUFFLEtBQXpCO0lBQWdDVCxRQUFRLEVBQUU7RUFBMUMsQ0FUMEI7RUFVckNhLFNBQVMsRUFBRTtJQUFFZixJQUFJLEVBQUVnQixJQUFSO0lBQWNMLE9BQU8sRUFBRUssSUFBSSxDQUFDQztFQUE1QixDQVYwQjtFQVdyQ0MsU0FBUyxFQUFFO0lBQUVsQixJQUFJLEVBQUVnQixJQUFSO0lBQWNMLE9BQU8sRUFBRUssSUFBSSxDQUFDQztFQUE1QjtBQVgwQixDQUFYLENBQTVCO2VBY2VwQixtQiJ9","map":{"version":3,"names":["BusinessCallsSchema","Schema","organisationId","type","String","required","user","ref","destinationNumber","initiatorNumber","didNumber","status","duration","Number","default","isCallEnded","Boolean","recording","createdAt","Date","now","updatedAt"],"sourceRoot":"/Users/ramireddycharitha/git-explore/models/mainDbSchema/","sources":["BussinesscallSchema.js"],"sourcesContent":["import mongoose, { Schema } from 'mongoose';\n\nconst BusinessCallsSchema = new Schema({\n  organisationId: { type: String, required: true },\n  user: { type: String, required: true, ref: 'IVRVirtualProfile' },\n  destinationNumber: { type: String, required: true },\n  initiatorNumber: { type: String, required: true },\n  didNumber: { type: String, required: true },\n  status: { type: String },\n  duration: { type: Number, default: 0, required: true },\n  isCallEnded: { type: Boolean, default: false, required: true },\n  recording: { type: String, default: false, required: true },\n  createdAt: { type: Date, default: Date.now },\n  updatedAt: { type: Date, default: Date.now }\n});\n\nexport default BusinessCallsSchema;\n"],"mappings":";;;;;;;AAAA;;;;;;AAEA,MAAMA,mBAAmB,GAAG,IAAIC,gBAAJ,CAAW;EACrCC,cAAc,EAAE;IAAEC,IAAI,EAAEC,MAAR;IAAgBC,QAAQ,EAAE;EAA1B,CADqB;EAErCC,IAAI,EAAE;IAAEH,IAAI,EAAEC,MAAR;IAAgBC,QAAQ,EAAE,IAA1B;IAAgCE,GAAG,EAAE;EAArC,CAF+B;EAGrCC,iBAAiB,EAAE;IAAEL,IAAI,EAAEC,MAAR;IAAgBC,QAAQ,EAAE;EAA1B,CAHkB;EAIrCI,eAAe,EAAE;IAAEN,IAAI,EAAEC,MAAR;IAAgBC,QAAQ,EAAE;EAA1B,CAJoB;EAKrCK,SAAS,EAAE;IAAEP,IAAI,EAAEC,MAAR;IAAgBC,QAAQ,EAAE;EAA1B,CAL0B;EAMrCM,MAAM,EAAE;IAAER,IAAI,EAAEC;EAAR,CAN6B;EAOrCQ,QAAQ,EAAE;IAAET,IAAI,EAAEU,MAAR;IAAgBC,OAAO,EAAE,CAAzB;IAA4BT,QAAQ,EAAE;EAAtC,CAP2B;EAQrCU,WAAW,EAAE;IAAEZ,IAAI,EAAEa,OAAR;IAAiBF,OAAO,EAAE,KAA1B;IAAiCT,QAAQ,EAAE;EAA3C,CARwB;EASrCY,SAAS,EAAE;IAAEd,IAAI,EAAEC,MAAR;IAAgBU,OAAO,EAAE,KAAzB;IAAgCT,QAAQ,EAAE;EAA1C,CAT0B;EAUrCa,SAAS,EAAE;IAAEf,IAAI,EAAEgB,IAAR;IAAcL,OAAO,EAAEK,IAAI,CAACC;EAA5B,CAV0B;EAWrCC,SAAS,EAAE;IAAElB,IAAI,EAAEgB,IAAR;IAAcL,OAAO,EAAEK,IAAI,CAACC;EAA5B;AAX0B,CAAX,CAA5B;eAcepB,mB"}},"mtime":1653973523780},"{\"assumptions\":{},\"sourceRoot\":\"/Users/ramireddycharitha/git-explore/models/mainDbSchema/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/ramireddycharitha/git-explore\",\"filename\":\"/Users/ramireddycharitha/git-explore/models/mainDbSchema/BussinessDIDNumbersSchema.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"default\",\"root\":\"/Users/ramireddycharitha/git-explore\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.17.10:default":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _mongoose = _interopRequireWildcard(require(\"mongoose\"));\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nconst BusinessDIDNumbersSchema = new _mongoose.Schema({\n  associatedOrganisation: {\n    type: _mongoose.Schema.Types.ObjectId,\n    ref: 'Organisations'\n  },\n  virtualNumber: {\n    type: String,\n    required: true\n  },\n  type: {\n    type: String,\n    enum: ['DID', 'VMN'],\n    required: true\n  },\n  active: {\n    type: Boolean,\n    default: true\n  },\n  createdAt: {\n    type: Date,\n    default: Date.now\n  },\n  updatedAt: {\n    type: Date,\n    default: Date.now\n  }\n}); // const BusinessDIDNumbers = mongoose.model(\n//   'BusinessDIDNumbers', BusinessDIDNumbersSchema, 'BusinessDIDNumbers'\n// );\n\nvar _default = BusinessDIDNumbersSchema;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJCdXNpbmVzc0RJRE51bWJlcnNTY2hlbWEiLCJTY2hlbWEiLCJhc3NvY2lhdGVkT3JnYW5pc2F0aW9uIiwidHlwZSIsIlR5cGVzIiwiT2JqZWN0SWQiLCJyZWYiLCJ2aXJ0dWFsTnVtYmVyIiwiU3RyaW5nIiwicmVxdWlyZWQiLCJlbnVtIiwiYWN0aXZlIiwiQm9vbGVhbiIsImRlZmF1bHQiLCJjcmVhdGVkQXQiLCJEYXRlIiwibm93IiwidXBkYXRlZEF0Il0sInNvdXJjZVJvb3QiOiIvVXNlcnMvcmFtaXJlZGR5Y2hhcml0aGEvZ2l0LWV4cGxvcmUvbW9kZWxzL21haW5EYlNjaGVtYS8iLCJzb3VyY2VzIjpbIkJ1c3NpbmVzc0RJRE51bWJlcnNTY2hlbWEuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG1vbmdvb3NlLCB7IFNjaGVtYSB9IGZyb20gJ21vbmdvb3NlJztcblxuY29uc3QgQnVzaW5lc3NESUROdW1iZXJzU2NoZW1hID0gbmV3IFNjaGVtYSh7XG4gIGFzc29jaWF0ZWRPcmdhbmlzYXRpb246IHsgdHlwZTogU2NoZW1hLlR5cGVzLk9iamVjdElkLCByZWY6ICdPcmdhbmlzYXRpb25zJyB9LFxuICB2aXJ0dWFsTnVtYmVyOiB7IHR5cGU6IFN0cmluZywgcmVxdWlyZWQ6IHRydWUgfSxcbiAgdHlwZTogeyB0eXBlOiBTdHJpbmcsIGVudW06IFsnRElEJywgJ1ZNTiddLCByZXF1aXJlZDogdHJ1ZSB9LFxuICBhY3RpdmU6IHsgdHlwZTogQm9vbGVhbiwgZGVmYXVsdDogdHJ1ZSB9LFxuICBjcmVhdGVkQXQ6IHsgdHlwZTogRGF0ZSwgZGVmYXVsdDogRGF0ZS5ub3cgfSxcbiAgdXBkYXRlZEF0OiB7IHR5cGU6IERhdGUsIGRlZmF1bHQ6IERhdGUubm93IH1cbn0pO1xuXG4vLyBjb25zdCBCdXNpbmVzc0RJRE51bWJlcnMgPSBtb25nb29zZS5tb2RlbChcbi8vICAgJ0J1c2luZXNzRElETnVtYmVycycsIEJ1c2luZXNzRElETnVtYmVyc1NjaGVtYSwgJ0J1c2luZXNzRElETnVtYmVycydcbi8vICk7XG5leHBvcnQgZGVmYXVsdCBCdXNpbmVzc0RJRE51bWJlcnNTY2hlbWE7XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTs7Ozs7O0FBRUEsTUFBTUEsd0JBQXdCLEdBQUcsSUFBSUMsZ0JBQUosQ0FBVztFQUMxQ0Msc0JBQXNCLEVBQUU7SUFBRUMsSUFBSSxFQUFFRixpQkFBT0csS0FBUCxDQUFhQyxRQUFyQjtJQUErQkMsR0FBRyxFQUFFO0VBQXBDLENBRGtCO0VBRTFDQyxhQUFhLEVBQUU7SUFBRUosSUFBSSxFQUFFSyxNQUFSO0lBQWdCQyxRQUFRLEVBQUU7RUFBMUIsQ0FGMkI7RUFHMUNOLElBQUksRUFBRTtJQUFFQSxJQUFJLEVBQUVLLE1BQVI7SUFBZ0JFLElBQUksRUFBRSxDQUFDLEtBQUQsRUFBUSxLQUFSLENBQXRCO0lBQXNDRCxRQUFRLEVBQUU7RUFBaEQsQ0FIb0M7RUFJMUNFLE1BQU0sRUFBRTtJQUFFUixJQUFJLEVBQUVTLE9BQVI7SUFBaUJDLE9BQU8sRUFBRTtFQUExQixDQUprQztFQUsxQ0MsU0FBUyxFQUFFO0lBQUVYLElBQUksRUFBRVksSUFBUjtJQUFjRixPQUFPLEVBQUVFLElBQUksQ0FBQ0M7RUFBNUIsQ0FMK0I7RUFNMUNDLFNBQVMsRUFBRTtJQUFFZCxJQUFJLEVBQUVZLElBQVI7SUFBY0YsT0FBTyxFQUFFRSxJQUFJLENBQUNDO0VBQTVCO0FBTitCLENBQVgsQ0FBakMsQyxDQVNBO0FBQ0E7QUFDQTs7ZUFDZWhCLHdCIn0=","map":{"version":3,"names":["BusinessDIDNumbersSchema","Schema","associatedOrganisation","type","Types","ObjectId","ref","virtualNumber","String","required","enum","active","Boolean","default","createdAt","Date","now","updatedAt"],"sourceRoot":"/Users/ramireddycharitha/git-explore/models/mainDbSchema/","sources":["BussinessDIDNumbersSchema.js"],"sourcesContent":["import mongoose, { Schema } from 'mongoose';\n\nconst BusinessDIDNumbersSchema = new Schema({\n  associatedOrganisation: { type: Schema.Types.ObjectId, ref: 'Organisations' },\n  virtualNumber: { type: String, required: true },\n  type: { type: String, enum: ['DID', 'VMN'], required: true },\n  active: { type: Boolean, default: true },\n  createdAt: { type: Date, default: Date.now },\n  updatedAt: { type: Date, default: Date.now }\n});\n\n// const BusinessDIDNumbers = mongoose.model(\n//   'BusinessDIDNumbers', BusinessDIDNumbersSchema, 'BusinessDIDNumbers'\n// );\nexport default BusinessDIDNumbersSchema;\n"],"mappings":";;;;;;;AAAA;;;;;;AAEA,MAAMA,wBAAwB,GAAG,IAAIC,gBAAJ,CAAW;EAC1CC,sBAAsB,EAAE;IAAEC,IAAI,EAAEF,iBAAOG,KAAP,CAAaC,QAArB;IAA+BC,GAAG,EAAE;EAApC,CADkB;EAE1CC,aAAa,EAAE;IAAEJ,IAAI,EAAEK,MAAR;IAAgBC,QAAQ,EAAE;EAA1B,CAF2B;EAG1CN,IAAI,EAAE;IAAEA,IAAI,EAAEK,MAAR;IAAgBE,IAAI,EAAE,CAAC,KAAD,EAAQ,KAAR,CAAtB;IAAsCD,QAAQ,EAAE;EAAhD,CAHoC;EAI1CE,MAAM,EAAE;IAAER,IAAI,EAAES,OAAR;IAAiBC,OAAO,EAAE;EAA1B,CAJkC;EAK1CC,SAAS,EAAE;IAAEX,IAAI,EAAEY,IAAR;IAAcF,OAAO,EAAEE,IAAI,CAACC;EAA5B,CAL+B;EAM1CC,SAAS,EAAE;IAAEd,IAAI,EAAEY,IAAR;IAAcF,OAAO,EAAEE,IAAI,CAACC;EAA5B;AAN+B,CAAX,CAAjC,C,CASA;AACA;AACA;;eACehB,wB"}},"mtime":1653973523779},"{\"assumptions\":{},\"sourceRoot\":\"/Users/ramireddycharitha/git-explore/constants/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/ramireddycharitha/git-explore\",\"filename\":\"/Users/ramireddycharitha/git-explore/constants/Credentials.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"default\",\"root\":\"/Users/ramireddycharitha/git-explore\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.17.10:default":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.SECREAT = exports.PASSWORD = exports.ALGORITHM = void 0;\nconst SECREAT = \"UxZAXfGONYXkvATj552wBQ\";\nexports.SECREAT = SECREAT;\nconst ALGORITHM = \"aes-256-ctr\";\nexports.ALGORITHM = ALGORITHM;\nconst PASSWORD = \"meTro729@wes0K5\";\nexports.PASSWORD = PASSWORD;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJTRUNSRUFUIiwiQUxHT1JJVEhNIiwiUEFTU1dPUkQiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy9yYW1pcmVkZHljaGFyaXRoYS9naXQtZXhwbG9yZS9jb25zdGFudHMvIiwic291cmNlcyI6WyJDcmVkZW50aWFscy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY29uc3QgU0VDUkVBVCA9IFwiVXhaQVhmR09OWVhrdkFUajU1MndCUVwiO1xuZXhwb3J0IGNvbnN0IEFMR09SSVRITSA9IFwiYWVzLTI1Ni1jdHJcIjtcbmV4cG9ydCBjb25zdCBQQVNTV09SRCA9IFwibWVUcm83MjlAd2VzMEs1XCI7XG4iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFPLE1BQU1BLE9BQU8sR0FBRyx3QkFBaEI7O0FBQ0EsTUFBTUMsU0FBUyxHQUFHLGFBQWxCOztBQUNBLE1BQU1DLFFBQVEsR0FBRyxpQkFBakIifQ==","map":{"version":3,"names":["SECREAT","ALGORITHM","PASSWORD"],"sourceRoot":"/Users/ramireddycharitha/git-explore/constants/","sources":["Credentials.js"],"sourcesContent":["export const SECREAT = \"UxZAXfGONYXkvATj552wBQ\";\nexport const ALGORITHM = \"aes-256-ctr\";\nexport const PASSWORD = \"meTro729@wes0K5\";\n"],"mappings":";;;;;;AAAO,MAAMA,OAAO,GAAG,wBAAhB;;AACA,MAAMC,SAAS,GAAG,aAAlB;;AACA,MAAMC,QAAQ,GAAG,iBAAjB"}},"mtime":1653643634178},"{\"assumptions\":{},\"sourceRoot\":\"/Users/ramireddycharitha/git-explore/constants/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/ramireddycharitha/git-explore\",\"filename\":\"/Users/ramireddycharitha/git-explore/constants/Keys.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"default\",\"root\":\"/Users/ramireddycharitha/git-explore\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.17.10:default":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.HEADER_SESSION_TOKEN = exports.HEADER_API_KEY = void 0;\nconst HEADER_API_KEY = \"x-metro-api-key\";\nexports.HEADER_API_KEY = HEADER_API_KEY;\nconst HEADER_SESSION_TOKEN = \"x-metro-sessiontoken\";\nexports.HEADER_SESSION_TOKEN = HEADER_SESSION_TOKEN;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJIRUFERVJfQVBJX0tFWSIsIkhFQURFUl9TRVNTSU9OX1RPS0VOIl0sInNvdXJjZVJvb3QiOiIvVXNlcnMvcmFtaXJlZGR5Y2hhcml0aGEvZ2l0LWV4cGxvcmUvY29uc3RhbnRzLyIsInNvdXJjZXMiOlsiS2V5cy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY29uc3QgSEVBREVSX0FQSV9LRVkgPSBcIngtbWV0cm8tYXBpLWtleVwiO1xuZXhwb3J0IGNvbnN0IEhFQURFUl9TRVNTSU9OX1RPS0VOID0gXCJ4LW1ldHJvLXNlc3Npb250b2tlblwiO1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBTyxNQUFNQSxjQUFjLEdBQUcsaUJBQXZCOztBQUNBLE1BQU1DLG9CQUFvQixHQUFHLHNCQUE3QiJ9","map":{"version":3,"names":["HEADER_API_KEY","HEADER_SESSION_TOKEN"],"sourceRoot":"/Users/ramireddycharitha/git-explore/constants/","sources":["Keys.js"],"sourcesContent":["export const HEADER_API_KEY = \"x-metro-api-key\";\nexport const HEADER_SESSION_TOKEN = \"x-metro-sessiontoken\";\n"],"mappings":";;;;;;AAAO,MAAMA,cAAc,GAAG,iBAAvB;;AACA,MAAMC,oBAAoB,GAAG,sBAA7B"}},"mtime":1653643634179},"{\"assumptions\":{},\"sourceRoot\":\"/Users/ramireddycharitha/git-explore/services/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/ramireddycharitha/git-explore\",\"filename\":\"/Users/ramireddycharitha/git-explore/services/UserService.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"default\",\"root\":\"/Users/ramireddycharitha/git-explore\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.17.10:default":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.updateUserDetails = exports.registerUser = exports.getUserDetails = void 0;\n\nvar ErrorUtils = _interopRequireWildcard(require(\"../errors/ErrorUtils\"));\n\nvar AbstractModels = _interopRequireWildcard(require(\"../models/AbstractModels\"));\n\nvar EncryptionService = _interopRequireWildcard(require(\"./EncryptionService\"));\n\nvar _index = require(\"../models/mainDbSchema/index\");\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nasync function getClientIdFromApiKey(apiKey) {\n  const findCondition = {\n    metro_auth_key: apiKey\n  };\n  const clientObj = await AbstractModels.mongoFindOne(_index.Clients, findCondition);\n  const clientId = clientObj._id;\n  return clientId;\n}\n\nconst registerUser = async (userDetails, clientDetails) => {\n  const {\n    mobileNo,\n    password,\n    firstName,\n    lastName\n  } = userDetails;\n  const findCondition = {\n    mobileNo\n  };\n  let userObj = await AbstractModels.mongoFindOne(_index.Users, findCondition);\n\n  if (userObj) {\n    throw ErrorUtils.DataAlreadyExists();\n  } else {\n    const bcryptedPassword = EncryptionService.generateBcryptPassword(password);\n    const clientId = await getClientIdFromApiKey(clientDetails.apiKey);\n    userObj = {\n      mobileNo,\n      firstName,\n      lastName,\n      password: bcryptedPassword,\n      clientId,\n      userType: \"user\"\n    };\n    await AbstractModels.mongoInsertOne(_index.Users, userObj);\n    delete userObj.password;\n    return userObj;\n  }\n};\n\nexports.registerUser = registerUser;\n\nconst getUserDetails = async mobileNo => {\n  const selectCondition = {\n    mobileNo\n  };\n  const projectCondition = {\n    _id: 0,\n    mobileNo: 1,\n    firstName: 1,\n    lastName: 1,\n    alternateMobileNo: 1,\n    email: 1\n  };\n  const userObj = await AbstractModels.mongoFindOne(_index.Users, selectCondition, projectCondition);\n  return userObj;\n};\n\nexports.getUserDetails = getUserDetails;\n\nconst updateUserDetails = async userDetails => {\n  const {\n    firstName,\n    lastName,\n    alternateMobileNo,\n    email,\n    mobileNo\n  } = userDetails;\n  const selectCondition = {\n    mobileNo\n  };\n  const updateCondition = {\n    $set: {\n      firstName,\n      lastName,\n      alternateMobileNo,\n      email\n    }\n  };\n  await AbstractModels.mongoUpdateOne(_index.Users, selectCondition, updateCondition);\n};\n\nexports.updateUserDetails = updateUserDetails;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJnZXRDbGllbnRJZEZyb21BcGlLZXkiLCJhcGlLZXkiLCJmaW5kQ29uZGl0aW9uIiwibWV0cm9fYXV0aF9rZXkiLCJjbGllbnRPYmoiLCJBYnN0cmFjdE1vZGVscyIsIm1vbmdvRmluZE9uZSIsIkNsaWVudHMiLCJjbGllbnRJZCIsIl9pZCIsInJlZ2lzdGVyVXNlciIsInVzZXJEZXRhaWxzIiwiY2xpZW50RGV0YWlscyIsIm1vYmlsZU5vIiwicGFzc3dvcmQiLCJmaXJzdE5hbWUiLCJsYXN0TmFtZSIsInVzZXJPYmoiLCJVc2VycyIsIkVycm9yVXRpbHMiLCJEYXRhQWxyZWFkeUV4aXN0cyIsImJjcnlwdGVkUGFzc3dvcmQiLCJFbmNyeXB0aW9uU2VydmljZSIsImdlbmVyYXRlQmNyeXB0UGFzc3dvcmQiLCJ1c2VyVHlwZSIsIm1vbmdvSW5zZXJ0T25lIiwiZ2V0VXNlckRldGFpbHMiLCJzZWxlY3RDb25kaXRpb24iLCJwcm9qZWN0Q29uZGl0aW9uIiwiYWx0ZXJuYXRlTW9iaWxlTm8iLCJlbWFpbCIsInVwZGF0ZVVzZXJEZXRhaWxzIiwidXBkYXRlQ29uZGl0aW9uIiwiJHNldCIsIm1vbmdvVXBkYXRlT25lIl0sInNvdXJjZVJvb3QiOiIvVXNlcnMvcmFtaXJlZGR5Y2hhcml0aGEvZ2l0LWV4cGxvcmUvc2VydmljZXMvIiwic291cmNlcyI6WyJVc2VyU2VydmljZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyBFcnJvclV0aWxzIGZyb20gXCIuLi9lcnJvcnMvRXJyb3JVdGlsc1wiO1xuaW1wb3J0ICogYXMgQWJzdHJhY3RNb2RlbHMgZnJvbSBcIi4uL21vZGVscy9BYnN0cmFjdE1vZGVsc1wiO1xuaW1wb3J0ICogYXMgRW5jcnlwdGlvblNlcnZpY2UgZnJvbSBcIi4vRW5jcnlwdGlvblNlcnZpY2VcIjtcblxuaW1wb3J0IHsgVXNlcnMsIENsaWVudHMgfSBmcm9tIFwiLi4vbW9kZWxzL21haW5EYlNjaGVtYS9pbmRleFwiO1xuXG5hc3luYyBmdW5jdGlvbiBnZXRDbGllbnRJZEZyb21BcGlLZXkoYXBpS2V5KSB7XG4gIGNvbnN0IGZpbmRDb25kaXRpb24gPSB7XG4gICAgbWV0cm9fYXV0aF9rZXk6IGFwaUtleSxcbiAgfTtcbiAgY29uc3QgY2xpZW50T2JqID0gYXdhaXQgQWJzdHJhY3RNb2RlbHMubW9uZ29GaW5kT25lKENsaWVudHMsIGZpbmRDb25kaXRpb24pO1xuICBjb25zdCBjbGllbnRJZCA9IGNsaWVudE9iai5faWQ7XG4gIHJldHVybiBjbGllbnRJZDtcbn1cblxuZXhwb3J0IGNvbnN0IHJlZ2lzdGVyVXNlciA9IGFzeW5jICh1c2VyRGV0YWlscywgY2xpZW50RGV0YWlscykgPT4ge1xuICBjb25zdCB7XG4gICAgbW9iaWxlTm8sIHBhc3N3b3JkLCBmaXJzdE5hbWUsIGxhc3ROYW1lLFxuICB9ID0gdXNlckRldGFpbHM7XG4gIGNvbnN0IGZpbmRDb25kaXRpb24gPSB7XG4gICAgbW9iaWxlTm8sXG4gIH07XG4gIGxldCB1c2VyT2JqID0gYXdhaXQgQWJzdHJhY3RNb2RlbHMubW9uZ29GaW5kT25lKFVzZXJzLCBmaW5kQ29uZGl0aW9uKTtcbiAgaWYgKHVzZXJPYmopIHtcbiAgICB0aHJvdyBFcnJvclV0aWxzLkRhdGFBbHJlYWR5RXhpc3RzKCk7XG4gIH0gZWxzZSB7XG4gICAgY29uc3QgYmNyeXB0ZWRQYXNzd29yZCA9IEVuY3J5cHRpb25TZXJ2aWNlLmdlbmVyYXRlQmNyeXB0UGFzc3dvcmQocGFzc3dvcmQpO1xuICAgIGNvbnN0IGNsaWVudElkID0gYXdhaXQgZ2V0Q2xpZW50SWRGcm9tQXBpS2V5KGNsaWVudERldGFpbHMuYXBpS2V5KTtcbiAgICB1c2VyT2JqID0ge1xuICAgICAgbW9iaWxlTm8sXG4gICAgICBmaXJzdE5hbWUsXG4gICAgICBsYXN0TmFtZSxcbiAgICAgIHBhc3N3b3JkOiBiY3J5cHRlZFBhc3N3b3JkLFxuICAgICAgY2xpZW50SWQsXG4gICAgICB1c2VyVHlwZTogXCJ1c2VyXCIsXG4gICAgfTtcbiAgICBhd2FpdCBBYnN0cmFjdE1vZGVscy5tb25nb0luc2VydE9uZShVc2VycywgdXNlck9iaik7XG4gICAgZGVsZXRlIHVzZXJPYmoucGFzc3dvcmQ7XG4gICAgcmV0dXJuIHVzZXJPYmo7XG4gIH1cbn07XG5cbmV4cG9ydCBjb25zdCBnZXRVc2VyRGV0YWlscyA9IGFzeW5jIChtb2JpbGVObykgPT4ge1xuICBjb25zdCBzZWxlY3RDb25kaXRpb24gPSB7XG4gICAgbW9iaWxlTm8sXG4gIH07XG4gIGNvbnN0IHByb2plY3RDb25kaXRpb24gPSB7XG4gICAgX2lkOiAwLFxuICAgIG1vYmlsZU5vOiAxLFxuICAgIGZpcnN0TmFtZTogMSxcbiAgICBsYXN0TmFtZTogMSxcbiAgICBhbHRlcm5hdGVNb2JpbGVObzogMSxcbiAgICBlbWFpbDogMSxcbiAgfTtcbiAgY29uc3QgdXNlck9iaiA9IGF3YWl0IEFic3RyYWN0TW9kZWxzLm1vbmdvRmluZE9uZShcbiAgICBVc2VycyxcbiAgICBzZWxlY3RDb25kaXRpb24sXG4gICAgcHJvamVjdENvbmRpdGlvbixcbiAgKTtcbiAgcmV0dXJuIHVzZXJPYmo7XG59O1xuXG5leHBvcnQgY29uc3QgdXBkYXRlVXNlckRldGFpbHMgPSBhc3luYyAodXNlckRldGFpbHMpID0+IHtcbiAgY29uc3Qge1xuICAgIGZpcnN0TmFtZSwgbGFzdE5hbWUsIGFsdGVybmF0ZU1vYmlsZU5vLCBlbWFpbCwgbW9iaWxlTm8sXG4gIH0gPSB1c2VyRGV0YWlscztcbiAgY29uc3Qgc2VsZWN0Q29uZGl0aW9uID0ge1xuICAgIG1vYmlsZU5vLFxuICB9O1xuICBjb25zdCB1cGRhdGVDb25kaXRpb24gPSB7XG4gICAgJHNldDoge1xuICAgICAgZmlyc3ROYW1lLFxuICAgICAgbGFzdE5hbWUsXG4gICAgICBhbHRlcm5hdGVNb2JpbGVObyxcbiAgICAgIGVtYWlsLFxuICAgIH0sXG4gIH07XG4gIGF3YWl0IEFic3RyYWN0TW9kZWxzLm1vbmdvVXBkYXRlT25lKFVzZXJzLCBzZWxlY3RDb25kaXRp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","map":{"version":3,"names":["getClientIdFromApiKey","apiKey","findCondition","metro_auth_key","clientObj","AbstractModels","mongoFindOne","Clients","clientId","_id","registerUser","userDetails","clientDetails","mobileNo","password","firstName","lastName","userObj","Users","ErrorUtils","DataAlreadyExists","bcryptedPassword","EncryptionService","generateBcryptPassword","userType","mongoInsertOne","getUserDetails","selectCondition","projectCondition","alternateMobileNo","email","updateUserDetails","updateCondition","$set","mongoUpdateOne"],"sourceRoot":"/Users/ramireddycharitha/git-explore/services/","sources":["UserService.js"],"sourcesContent":["import * as ErrorUtils from \"../errors/ErrorUtils\";\nimport * as AbstractModels from \"../models/AbstractModels\";\nimport * as EncryptionService from \"./EncryptionService\";\n\nimport { Users, Clients } from \"../models/mainDbSchema/index\";\n\nasync function getClientIdFromApiKey(apiKey) {\n  const findCondition = {\n    metro_auth_key: apiKey,\n  };\n  const clientObj = await AbstractModels.mongoFindOne(Clients, findCondition);\n  const clientId = clientObj._id;\n  return clientId;\n}\n\nexport const registerUser = async (userDetails, clientDetails) => {\n  const {\n    mobileNo, password, firstName, lastName,\n  } = userDetails;\n  const findCondition = {\n    mobileNo,\n  };\n  let userObj = await AbstractModels.mongoFindOne(Users, findCondition);\n  if (userObj) {\n    throw ErrorUtils.DataAlreadyExists();\n  } else {\n    const bcryptedPassword = EncryptionService.generateBcryptPassword(password);\n    const clientId = await getClientIdFromApiKey(clientDetails.apiKey);\n    userObj = {\n      mobileNo,\n      firstName,\n      lastName,\n      password: bcryptedPassword,\n      clientId,\n      userType: \"user\",\n    };\n    await AbstractModels.mongoInsertOne(Users, userObj);\n    delete userObj.password;\n    return userObj;\n  }\n};\n\nexport const getUserDetails = async (mobileNo) => {\n  const selectCondition = {\n    mobileNo,\n  };\n  const projectCondition = {\n    _id: 0,\n    mobileNo: 1,\n    firstName: 1,\n    lastName: 1,\n    alternateMobileNo: 1,\n    email: 1,\n  };\n  const userObj = await AbstractModels.mongoFindOne(\n    Users,\n    selectCondition,\n    projectCondition,\n  );\n  return userObj;\n};\n\nexport const updateUserDetails = async (userDetails) => {\n  const {\n    firstName, lastName, alternateMobileNo, email, mobileNo,\n  } = userDetails;\n  const selectCondition = {\n    mobileNo,\n  };\n  const updateCondition = {\n    $set: {\n      firstName,\n      lastName,\n      alternateMobileNo,\n      email,\n    },\n  };\n  await AbstractModels.mongoUpdateOne(Users, selectCondition, updateCondition);\n};\n"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;AAEA;;;;;;AAEA,eAAeA,qBAAf,CAAqCC,MAArC,EAA6C;EAC3C,MAAMC,aAAa,GAAG;IACpBC,cAAc,EAAEF;EADI,CAAtB;EAGA,MAAMG,SAAS,GAAG,MAAMC,cAAc,CAACC,YAAf,CAA4BC,cAA5B,EAAqCL,aAArC,CAAxB;EACA,MAAMM,QAAQ,GAAGJ,SAAS,CAACK,GAA3B;EACA,OAAOD,QAAP;AACD;;AAEM,MAAME,YAAY,GAAG,OAAOC,WAAP,EAAoBC,aAApB,KAAsC;EAChE,MAAM;IACJC,QADI;IACMC,QADN;IACgBC,SADhB;IAC2BC;EAD3B,IAEFL,WAFJ;EAGA,MAAMT,aAAa,GAAG;IACpBW;EADoB,CAAtB;EAGA,IAAII,OAAO,GAAG,MAAMZ,cAAc,CAACC,YAAf,CAA4BY,YAA5B,EAAmChB,aAAnC,CAApB;;EACA,IAAIe,OAAJ,EAAa;IACX,MAAME,UAAU,CAACC,iBAAX,EAAN;EACD,CAFD,MAEO;IACL,MAAMC,gBAAgB,GAAGC,iBAAiB,CAACC,sBAAlB,CAAyCT,QAAzC,CAAzB;IACA,MAAMN,QAAQ,GAAG,MAAMR,qBAAqB,CAACY,aAAa,CAACX,MAAf,CAA5C;IACAgB,OAAO,GAAG;MACRJ,QADQ;MAERE,SAFQ;MAGRC,QAHQ;MAIRF,QAAQ,EAAEO,gBAJF;MAKRb,QALQ;MAMRgB,QAAQ,EAAE;IANF,CAAV;IAQA,MAAMnB,cAAc,CAACoB,cAAf,CAA8BP,YAA9B,EAAqCD,OAArC,CAAN;IACA,OAAOA,OAAO,CAACH,QAAf;IACA,OAAOG,OAAP;EACD;AACF,CAzBM;;;;AA2BA,MAAMS,cAAc,GAAG,MAAOb,QAAP,IAAoB;EAChD,MAAMc,eAAe,GAAG;IACtBd;EADsB,CAAxB;EAGA,MAAMe,gBAAgB,GAAG;IACvBnB,GAAG,EAAE,CADkB;IAEvBI,QAAQ,EAAE,CAFa;IAGvBE,SAAS,EAAE,CAHY;IAIvBC,QAAQ,EAAE,CAJa;IAKvBa,iBAAiB,EAAE,CALI;IAMvBC,KAAK,EAAE;EANgB,CAAzB;EAQA,MAAMb,OAAO,GAAG,MAAMZ,cAAc,CAACC,YAAf,CACpBY,YADoB,EAEpBS,eAFoB,EAGpBC,gBAHoB,CAAtB;EAKA,OAAOX,OAAP;AACD,CAlBM;;;;AAoBA,MAAMc,iBAAiB,GAAG,MAAOpB,WAAP,IAAuB;EACtD,MAAM;IACJI,SADI;IACOC,QADP;IACiBa,iBADjB;IACoCC,KADpC;IAC2CjB;EAD3C,IAEFF,WAFJ;EAGA,MAAMgB,eAAe,GAAG;IACtBd;EADsB,CAAxB;EAGA,MAAMmB,eAAe,GAAG;IACtBC,IAAI,EAAE;MACJlB,SADI;MAEJC,QAFI;MAGJa,iBAHI;MAIJC;IAJI;EADgB,CAAxB;EAQA,MAAMzB,cAAc,CAAC6B,cAAf,CAA8BhB,YAA9B,EAAqCS,eAArC,EAAsDK,eAAtD,CAAN;AACD,CAhBM"}},"mtime":1653643634188},"{\"assumptions\":{},\"sourceRoot\":\"/Users/ramireddycharitha/git-explore/services/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/ramireddycharitha/git-explore\",\"filename\":\"/Users/ramireddycharitha/git-explore/services/EncryptionService.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"default\",\"root\":\"/Users/ramireddycharitha/git-explore\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.17.10:default":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.generateBcryptPassword = exports.compareBcryptPassword = void 0;\n\nvar _bcryptjs = _interopRequireDefault(require(\"bcryptjs\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst generateBcryptPassword = password => {\n  const salt = _bcryptjs.default.genSaltSync(10);\n\n  const hash = _bcryptjs.default.hashSync(password, salt);\n\n  return hash;\n};\n\nexports.generateBcryptPassword = generateBcryptPassword;\n\nconst compareBcryptPassword = (password, bcryptedPassword) => {\n  const isValid = _bcryptjs.default.compareSync(password, bcryptedPassword);\n\n  return isValid;\n};\n\nexports.compareBcryptPassword = compareBcryptPassword;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJnZW5lcmF0ZUJjcnlwdFBhc3N3b3JkIiwicGFzc3dvcmQiLCJzYWx0IiwiYmNyeXB0IiwiZ2VuU2FsdFN5bmMiLCJoYXNoIiwiaGFzaFN5bmMiLCJjb21wYXJlQmNyeXB0UGFzc3dvcmQiLCJiY3J5cHRlZFBhc3N3b3JkIiwiaXNWYWxpZCIsImNvbXBhcmVTeW5jIl0sInNvdXJjZVJvb3QiOiIvVXNlcnMvcmFtaXJlZGR5Y2hhcml0aGEvZ2l0LWV4cGxvcmUvc2VydmljZXMvIiwic291cmNlcyI6WyJFbmNyeXB0aW9uU2VydmljZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgYmNyeXB0IGZyb20gXCJiY3J5cHRqc1wiO1xuXG5leHBvcnQgY29uc3QgZ2VuZXJhdGVCY3J5cHRQYXNzd29yZCA9IChwYXNzd29yZCkgPT4ge1xuICBjb25zdCBzYWx0ID0gYmNyeXB0LmdlblNhbHRTeW5jKDEwKTtcbiAgY29uc3QgaGFzaCA9IGJjcnlwdC5oYXNoU3luYyhwYXNzd29yZCwgc2FsdCk7XG4gIHJldHVybiBoYXNoO1xufTtcblxuZXhwb3J0IGNvbnN0IGNvbXBhcmVCY3J5cHRQYXNzd29yZCA9IChwYXNzd29yZCwgYmNyeXB0ZWRQYXNzd29yZCkgPT4ge1xuICBjb25zdCBpc1ZhbGlkID0gYmNyeXB0LmNvbXBhcmVTeW5jKHBhc3N3b3JkLCBiY3J5cHRlZFBhc3N3b3JkKTtcbiAgcmV0dXJuIGlzVmFsaWQ7XG59O1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7Ozs7QUFFTyxNQUFNQSxzQkFBc0IsR0FBSUMsUUFBRCxJQUFjO0VBQ2xELE1BQU1DLElBQUksR0FBR0Msa0JBQU9DLFdBQVAsQ0FBbUIsRUFBbkIsQ0FBYjs7RUFDQSxNQUFNQyxJQUFJLEdBQUdGLGtCQUFPRyxRQUFQLENBQWdCTCxRQUFoQixFQUEwQkMsSUFBMUIsQ0FBYjs7RUFDQSxPQUFPRyxJQUFQO0FBQ0QsQ0FKTTs7OztBQU1BLE1BQU1FLHFCQUFxQixHQUFHLENBQUNOLFFBQUQsRUFBV08sZ0JBQVgsS0FBZ0M7RUFDbkUsTUFBTUMsT0FBTyxHQUFHTixrQkFBT08sV0FBUCxDQUFtQlQsUUFBbkIsRUFBNkJPLGdCQUE3QixDQUFoQjs7RUFDQSxPQUFPQyxPQUFQO0FBQ0QsQ0FITSJ9","map":{"version":3,"names":["generateBcryptPassword","password","salt","bcrypt","genSaltSync","hash","hashSync","compareBcryptPassword","bcryptedPassword","isValid","compareSync"],"sourceRoot":"/Users/ramireddycharitha/git-explore/services/","sources":["EncryptionService.js"],"sourcesContent":["import bcrypt from \"bcryptjs\";\n\nexport const generateBcryptPassword = (password) => {\n  const salt = bcrypt.genSaltSync(10);\n  const hash = bcrypt.hashSync(password, salt);\n  return hash;\n};\n\nexport const compareBcryptPassword = (password, bcryptedPassword) => {\n  const isValid = bcrypt.compareSync(password, bcryptedPassword);\n  return isValid;\n};\n"],"mappings":";;;;;;;AAAA;;;;AAEO,MAAMA,sBAAsB,GAAIC,QAAD,IAAc;EAClD,MAAMC,IAAI,GAAGC,kBAAOC,WAAP,CAAmB,EAAnB,CAAb;;EACA,MAAMC,IAAI,GAAGF,kBAAOG,QAAP,CAAgBL,QAAhB,EAA0BC,IAA1B,CAAb;;EACA,OAAOG,IAAP;AACD,CAJM;;;;AAMA,MAAME,qBAAqB,GAAG,CAACN,QAAD,EAAWO,gBAAX,KAAgC;EACnE,MAAMC,OAAO,GAAGN,kBAAOO,WAAP,CAAmBT,QAAnB,EAA6BO,gBAA7B,CAAhB;;EACA,OAAOC,OAAP;AACD,CAHM"}},"mtime":1653643634188},"{\"assumptions\":{},\"sourceRoot\":\"/Users/ramireddycharitha/git-explore/routes/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/ramireddycharitha/git-explore\",\"filename\":\"/Users/ramireddycharitha/git-explore/routes/Outboundcall.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"default\",\"root\":\"/Users/ramireddycharitha/git-explore\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.17.10:default":{"value":{"code":"\"use strict\";\n\nvar _express = require(\"express\");\n\nvar _common = _interopRequireDefault(require(\"../commons/util/common\"));\n\nvar outboundcallController = _interopRequireWildcard(require(\"../controllers/OutboundcallController\"));\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst router = (0, _express.Router)();\nrouter.post(\"/init/:param\", (0, _common.default)(outboundcallController.callInit));\nrouter.get(\"/external/call/handle/:param\", (0, _common.default)(outboundcallController.handleCall));\nrouter.get(\"/numbers/list/:param\", (0, _common.default)(outboundcallController.didNumberList));\nrouter.put(\"/user/status/:param\", (0, _common.default)(outboundcallController.changeOutboundCallStatus));\nrouter.get(\"/call-log/list/:param\", (0, _common.default)(outboundcallController.callLogList));\nrouter.put(\"/user/status/:param\", (0, _common.default)(outboundcallController.changeOutboundCallStatus));\nmodule.exports = router;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJyb3V0ZXIiLCJwb3N0Iiwib3V0Ym91bmRjYWxsQ29udHJvbGxlciIsImNhbGxJbml0IiwiZ2V0IiwiaGFuZGxlQ2FsbCIsImRpZE51bWJlckxpc3QiLCJwdXQiLCJjaGFuZ2VPdXRib3VuZENhbGxTdGF0dXMiLCJjYWxsTG9nTGlzdCIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy9yYW1pcmVkZHljaGFyaXRoYS9naXQtZXhwbG9yZS9yb3V0ZXMvIiwic291cmNlcyI6WyJPdXRib3VuZGNhbGwuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUm91dGVyIH0gZnJvbSBcImV4cHJlc3NcIjtcbmltcG9ydCAgd2l0aEFzeW5jQ29udHJvbGxlciAgZnJvbSBcIi4uL2NvbW1vbnMvdXRpbC9jb21tb25cIjtcbmltcG9ydCAqIGFzIG91dGJvdW5kY2FsbENvbnRyb2xsZXIgZnJvbSBcIi4uL2NvbnRyb2xsZXJzL091dGJvdW5kY2FsbENvbnRyb2xsZXJcIjtcblxuY29uc3Qgcm91dGVyID0gUm91dGVyKCk7XG5yb3V0ZXIucG9zdChcIi9pbml0LzpwYXJhbVwiLCB3aXRoQXN5bmNDb250cm9sbGVyKG91dGJvdW5kY2FsbENvbnRyb2xsZXIuY2FsbEluaXQpKTtcbnJvdXRlci5nZXQoXCIvZXh0ZXJuYWwvY2FsbC9oYW5kbGUvOnBhcmFtXCIsIHdpdGhBc3luY0NvbnRyb2xsZXIob3V0Ym91bmRjYWxsQ29udHJvbGxlci5oYW5kbGVDYWxsKSk7XG5yb3V0ZXIuZ2V0KFwiL251bWJlcnMvbGlzdC86cGFyYW1cIiwgd2l0aEFzeW5jQ29udHJvbGxlcihvdXRib3VuZGNhbGxDb250cm9sbGVyLmRpZE51bWJlckxpc3QpKTtcbnJvdXRlci5wdXQoXCIvdXNlci9zdGF0dXMvOnBhcmFtXCIsIHdpdGhBc3luY0NvbnRyb2xsZXIob3V0Ym91bmRjYWxsQ29udHJvbGxlci5jaGFuZ2VPdXRib3VuZENhbGxTdGF0dXMpKVxucm91dGVyLmdldChcIi9jYWxsLWxvZy9saXN0LzpwYXJhbVwiLHdpdGhBc3luY0NvbnRyb2xsZXIob3V0Ym91bmRjYWxsQ29udHJvbGxlci5jYWxsTG9nTGlzdCkpO1xucm91dGVyLnB1dChcIi91c2VyL3N0YXR1cy86cGFyYW1cIiwgd2l0aEFzeW5jQ29udHJvbGxlcihvdXRib3VuZGNhbGxDb250cm9sbGVyLmNoYW5nZU91dGJvdW5kQ2FsbFN0YXR1cykpXG5cbm1vZHVsZS5leHBvcnRzID0gcm91dGVyOyJdLCJtYXBwaW5ncyI6Ijs7QUFBQTs7QUFDQTs7QUFDQTs7Ozs7Ozs7QUFFQSxNQUFNQSxNQUFNLEdBQUcsc0JBQWY7QUFDQUEsTUFBTSxDQUFDQyxJQUFQLENBQVksY0FBWixFQUE0QixxQkFBb0JDLHNCQUFzQixDQUFDQyxRQUEzQyxDQUE1QjtBQUNBSCxNQUFNLENBQUNJLEdBQVAsQ0FBVyw4QkFBWCxFQUEyQyxxQkFBb0JGLHNCQUFzQixDQUFDRyxVQUEzQyxDQUEzQztBQUNBTCxNQUFNLENBQUNJLEdBQVAsQ0FBVyxzQkFBWCxFQUFtQyxxQkFBb0JGLHNCQUFzQixDQUFDSSxhQUEzQyxDQUFuQztBQUNBTixNQUFNLENBQUNPLEdBQVAsQ0FBVyxxQkFBWCxFQUFrQyxxQkFBb0JMLHNCQUFzQixDQUFDTSx3QkFBM0MsQ0FBbEM7QUFDQVIsTUFBTSxDQUFDSSxHQUFQLENBQVcsdUJBQVgsRUFBbUMscUJBQW9CRixzQkFBc0IsQ0FBQ08sV0FBM0MsQ0FBbkM7QUFDQVQsTUFBTSxDQUFDTyxHQUFQLENBQVcscUJBQVgsRUFBa0MscUJBQW9CTCxzQkFBc0IsQ0FBQ00sd0JBQTNDLENBQWxDO0FBRUFFLE1BQU0sQ0FBQ0MsT0FBUCxHQUFpQlgsTUFBakIifQ==","map":{"version":3,"names":["router","post","outboundcallController","callInit","get","handleCall","didNumberList","put","changeOutboundCallStatus","callLogList","module","exports"],"sourceRoot":"/Users/ramireddycharitha/git-explore/routes/","sources":["Outboundcall.js"],"sourcesContent":["import { Router } from \"express\";\nimport  withAsyncController  from \"../commons/util/common\";\nimport * as outboundcallController from \"../controllers/OutboundcallController\";\n\nconst router = Router();\nrouter.post(\"/init/:param\", withAsyncController(outboundcallController.callInit));\nrouter.get(\"/external/call/handle/:param\", withAsyncController(outboundcallController.handleCall));\nrouter.get(\"/numbers/list/:param\", withAsyncController(outboundcallController.didNumberList));\nrouter.put(\"/user/status/:param\", withAsyncController(outboundcallController.changeOutboundCallStatus))\nrouter.get(\"/call-log/list/:param\",withAsyncController(outboundcallController.callLogList));\nrouter.put(\"/user/status/:param\", withAsyncController(outboundcallController.changeOutboundCallStatus))\n\nmodule.exports = router;"],"mappings":";;AAAA;;AACA;;AACA;;;;;;;;AAEA,MAAMA,MAAM,GAAG,sBAAf;AACAA,MAAM,CAACC,IAAP,CAAY,cAAZ,EAA4B,qBAAoBC,sBAAsB,CAACC,QAA3C,CAA5B;AACAH,MAAM,CAACI,GAAP,CAAW,8BAAX,EAA2C,qBAAoBF,sBAAsB,CAACG,UAA3C,CAA3C;AACAL,MAAM,CAACI,GAAP,CAAW,sBAAX,EAAmC,qBAAoBF,sBAAsB,CAACI,aAA3C,CAAnC;AACAN,MAAM,CAACO,GAAP,CAAW,qBAAX,EAAkC,qBAAoBL,sBAAsB,CAACM,wBAA3C,CAAlC;AACAR,MAAM,CAACI,GAAP,CAAW,uBAAX,EAAmC,qBAAoBF,sBAAsB,CAACO,WAA3C,CAAnC;AACAT,MAAM,CAACO,GAAP,CAAW,qBAAX,EAAkC,qBAAoBL,sBAAsB,CAACM,wBAA3C,CAAlC;AAEAE,MAAM,CAACC,OAAP,GAAiBX,MAAjB"}},"mtime":1653994113646},"{\"assumptions\":{},\"sourceRoot\":\"/Users/ramireddycharitha/git-explore/commons/util/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/ramireddycharitha/git-explore\",\"filename\":\"/Users/ramireddycharitha/git-explore/commons/util/common.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"default\",\"root\":\"/Users/ramireddycharitha/git-explore\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.17.10:default":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nconst withAsyncController = handler => (req, res, next) => handler(req, res, next).catch(next);\n\nvar _default = withAsyncController;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJ3aXRoQXN5bmNDb250cm9sbGVyIiwiaGFuZGxlciIsInJlcSIsInJlcyIsIm5leHQiLCJjYXRjaCJdLCJzb3VyY2VSb290IjoiL1VzZXJzL3JhbWlyZWRkeWNoYXJpdGhhL2dpdC1leHBsb3JlL2NvbW1vbnMvdXRpbC8iLCJzb3VyY2VzIjpbImNvbW1vbi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCB3aXRoQXN5bmNDb250cm9sbGVyID0gKGhhbmRsZXIpID0+IChyZXEsIHJlcywgbmV4dCkgPT4gaGFuZGxlcihyZXEsIHJlcywgbmV4dCkuY2F0Y2gobmV4dCk7XG5cbmV4cG9ydCBkZWZhdWx0ICB3aXRoQXN5bmNDb250cm9sbGVyIDtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBLE1BQU1BLG1CQUFtQixHQUFJQyxPQUFELElBQWEsQ0FBQ0MsR0FBRCxFQUFNQyxHQUFOLEVBQVdDLElBQVgsS0FBb0JILE9BQU8sQ0FBQ0MsR0FBRCxFQUFNQyxHQUFOLEVBQVdDLElBQVgsQ0FBUCxDQUF3QkMsS0FBeEIsQ0FBOEJELElBQTlCLENBQTdEOztlQUVnQkosbUIifQ==","map":{"version":3,"names":["withAsyncController","handler","req","res","next","catch"],"sourceRoot":"/Users/ramireddycharitha/git-explore/commons/util/","sources":["common.js"],"sourcesContent":["const withAsyncController = (handler) => (req, res, next) => handler(req, res, next).catch(next);\n\nexport default  withAsyncController ;\n"],"mappings":";;;;;;;AAAA,MAAMA,mBAAmB,GAAIC,OAAD,IAAa,CAACC,GAAD,EAAMC,GAAN,EAAWC,IAAX,KAAoBH,OAAO,CAACC,GAAD,EAAMC,GAAN,EAAWC,IAAX,CAAP,CAAwBC,KAAxB,CAA8BD,IAA9B,CAA7D;;eAEgBJ,mB"}},"mtime":1653973516979},"{\"assumptions\":{},\"sourceRoot\":\"/Users/ramireddycharitha/git-explore/controllers/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/ramireddycharitha/git-explore\",\"filename\":\"/Users/ramireddycharitha/git-explore/controllers/OutboundcallController.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"default\",\"root\":\"/Users/ramireddycharitha/git-explore\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.17.10:default":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.callInit = callInit;\nexports.callLogList = callLogList;\nexports.changeOutboundCallStatus = changeOutboundCallStatus;\nexports.didNumberList = didNumberList;\nexports.handleCall = handleCall;\n\nvar outboundCallService = _interopRequireWildcard(require(\"../services/OutboundcallService\"));\n\nvar Auth = _interopRequireWildcard(require(\"../middlewares/Auth\"));\n\nvar _Keys = require(\"../constants/Keys\");\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\n//import { Console } from \"winston/lib/winston/transports\";\nasync function callInit(req, res, next) {\n  const {\n    param\n  } = req.params;\n  const organisationId = param;\n  const {\n    didId,\n    number\n  } = req.body;\n  log(\"info\", {\n    organisationId,\n    didId,\n    number\n  });\n  const sessionObj = await Auth.getSessionObj(req);\n  const userId = sessionObj.user_id;\n  await outboundCallService.initCall(organisationId, {\n    didId,\n    userId,\n    number\n  });\n  res.data = {};\n  log(\"info\", res.data);\n  next();\n}\n\nasync function didNumberList(req, res, next) {\n  const {\n    param\n  } = req.params;\n  const organisationId = param;\n  const {\n    pageNo,\n    pageSize\n  } = req.query;\n  const list = await outboundCallService.didNumberList(organisationId, {\n    pageNo,\n    pageSize\n  });\n  res.data = list;\n  log(\"info\", res.data);\n  next();\n}\n\nasync function handleCall(req, res) {\n  const {\n    param\n  } = req.params;\n  const callId = param;\n  const data = req.query; // console.log(\"CHECKING QUERY IN HANDLE CALL\\n\\n\\n\\n\\n\\n\"+JSON.stringify(data));\n\n  log(\"info\", {\n    callId,\n    data\n  });\n  const response = await outboundCallService.handleCall({\n    callId\n  }, data); // console.log(\"CHECKING RESPONSE IN HANDLE CALL\\n\\n\\n\\n\\n\"+response);\n\n  log(\"info\", {\n    response\n  });\n  res.send(response);\n}\n\nasync function callLogList(req, res, next) {\n  const {\n    param\n  } = req.params;\n  const organisationId = param;\n  const {\n    pageNo,\n    pageSize,\n    search_key,\n    q\n  } = req.query;\n  const sessionObj = await Auth.getSessionObj(req);\n  const opts = {\n    role: sessionObj.users_business_portal_role,\n    userId: sessionObj.user_id\n  }; //  console.log(\"++++++++++++++++++opts\"+JSON.stringify(opts));\n\n  const list = await outboundCallService.callLogList(organisationId, {\n    page: pageNo,\n    page_size: pageSize,\n    search_key,\n    q\n  }, opts); // console.log(\"++++++++++++++++list\"+list);\n\n  res.data = list; // logToJSON('info', res.data);\n\n  next();\n}\n\nasync function changeOutboundCallStatus(req, res, next) {\n  const {\n    param\n  } = req.params;\n  const organisation_id = param;\n  const data = req.body;\n  const sessionObj = await Auth.getSessionObj(req);\n  const opts = {\n    orgId: organisation_id,\n    role: sessionObj.users_business_portal_role,\n    userId: sessionObj.user_id\n  }; //console.log(\"++++++++++++++ the opts are \"+JSON.stringify(opts))\n\n  log('info', {\n    organisation_id,\n    data,\n    opts\n  });\n  const response = await outboundCallService.changeOutboundCallStatus(opts, data);\n  res.data = response;\n  log('info', res.data);\n  next();\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjYWxsSW5pdCIsInJlcSIsInJlcyIsIm5leHQiLCJwYXJhbSIsInBhcmFtcyIsIm9yZ2FuaXNhdGlvbklkIiwiZGlkSWQiLCJudW1iZXIiLCJib2R5IiwibG9nIiwic2Vzc2lvbk9iaiIsIkF1dGgiLCJnZXRTZXNzaW9uT2JqIiwidXNlcklkIiwidXNlcl9pZCIsIm91dGJvdW5kQ2FsbFNlcnZpY2UiLCJpbml0Q2FsbCIsImRhdGEiLCJkaWROdW1iZXJMaXN0IiwicGFnZU5vIiwicGFnZVNpemUiLCJxdWVyeSIsImxpc3QiLCJoYW5kbGVDYWxsIiwiY2FsbElkIiwicmVzcG9uc2UiLCJzZW5kIiwiY2FsbExvZ0xpc3QiLCJzZWFyY2hfa2V5IiwicSIsIm9wdHMiLCJyb2xlIiwidXNlcnNfYnVzaW5lc3NfcG9ydGFsX3JvbGUiLCJwYWdlIiwicGFnZV9zaXplIiwiY2hhbmdlT3V0Ym91bmRDYWxsU3RhdHVzIiwib3JnYW5pc2F0aW9uX2lkIiwib3JnSWQiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy9yYW1pcmVkZHljaGFyaXRoYS9naXQtZXhwbG9yZS9jb250cm9sbGVycy8iLCJzb3VyY2VzIjpbIk91dGJvdW5kY2FsbENvbnRyb2xsZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgb3V0Ym91bmRDYWxsU2VydmljZSBmcm9tIFwiLi4vc2VydmljZXMvT3V0Ym91bmRjYWxsU2VydmljZVwiO1xuaW1wb3J0ICogYXMgQXV0aCBmcm9tIFwiLi4vbWlkZGxld2FyZXMvQXV0aFwiO1xuaW1wb3J0IHsgSEVBREVSX1NFU1NJT05fVE9LRU4gfSBmcm9tIFwiLi4vY29uc3RhbnRzL0tleXNcIjtcbi8vaW1wb3J0IHsgQ29uc29sZSB9IGZyb20gXCJ3aW5zdG9uL2xpYi93aW5zdG9uL3RyYW5zcG9ydHNcIjtcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNhbGxJbml0KHJlcSwgcmVzLCBuZXh0KSB7XG4gIGNvbnN0IHsgcGFyYW0gfSA9IHJlcS5wYXJhbXM7XG4gIGNvbnN0IG9yZ2FuaXNhdGlvbklkPXBhcmFtO1xuICBjb25zdCB7IGRpZElkLCBudW1iZXIgfSA9IHJlcS5ib2R5O1xuICBsb2coXCJpbmZvXCIsIHsgb3JnYW5pc2F0aW9uSWQsIGRpZElkLCBudW1iZXIgfSk7XG4gIGNvbnN0IHNlc3Npb25PYmogPSBhd2FpdCBBdXRoLmdldFNlc3Npb25PYmoocmVxKTtcbiAgY29uc3QgdXNlcklkID0gc2Vzc2lvbk9iai51c2VyX2lkO1xuICBhd2FpdCBvdXRib3VuZENhbGxTZXJ2aWNlLmluaXRDYWxsKG9yZ2FuaXNhdGlvbklkLCB7XG4gICAgZGlkSWQsXG4gICAgdXNlcklkLFxuICAgIG51bWJlcixcbiAgfSk7XG4gIHJlcy5kYXRhID0ge307XG4gIGxvZyhcImluZm9cIiwgcmVzLmRhdGEpO1xuICBuZXh0KCk7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkaWROdW1iZXJMaXN0KHJlcSwgcmVzLCBuZXh0KSB7XG4gIGNvbnN0IHsgcGFyYW0gfSA9IHJlcS5wYXJhbXM7XG4gIGNvbnN0IG9yZ2FuaXNhdGlvbklkPXBhcmFtXG4gIGNvbnN0IHsgcGFnZU5vLCBwYWdlU2l6ZSB9ID0gcmVxLnF1ZXJ5O1xuICBjb25zdCBsaXN0ID0gYXdhaXQgb3V0Ym91bmRDYWxsU2VydmljZS5kaWROdW1iZXJMaXN0KG9yZ2FuaXNhdGlvbklkLCB7XG4gICAgcGFnZU5vLCBwYWdlU2l6ZSxcbiAgfSk7XG4gIHJlcy5kYXRhID0gbGlzdDtcbiAgbG9nKFwiaW5mb1wiLCByZXMuZGF0YSk7XG4gIG5leHQoKTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGhhbmRsZUNhbGwgKHJlcSwgcmVzKSB7XG4gIGNvbnN0IHsgcGFyYW0gfSA9IHJlcS5wYXJhbXM7XG4gIGNvbnN0IGNhbGxJZCA9IHBhcmFtO1xuICBjb25zdCBkYXRhID0gcmVxLnF1ZXJ5O1xuICAvLyBjb25zb2xlLmxvZyhcIkNIRUNLSU5HIFFVRVJZIElOIEhBTkRMRSBDQUxMXFxuXFxuXFxuXFxuXFxuXFxuXCIrSlNPTi5zdHJpbmdpZnkoZGF0YSkpO1xuICBsb2coXCJpbmZvXCIsIHsgY2FsbElkLCBkYXRhIH0pO1xuICBjb25zdCByZXNwb25zZSA9IGF3YWl0IG91dGJvdW5kQ2FsbFNlcnZpY2UuaGFuZGxlQ2FsbCh7IGNhbGxJZCB9LCBkYXRhKTtcbiAgLy8gY29uc29sZS5sb2coXCJDSEVDS0lORyBSRVNQT05TRSBJTiBIQU5ETEUgQ0FMTFxcblxcblxcblxcblxcblwiK3Jlc3BvbnNlKTtcbiAgbG9nKFwiaW5mb1wiLCB7IHJlc3BvbnNlIH0pO1xuICByZXMuc2VuZChyZXNwb25zZSk7XG59XG5cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNhbGxMb2dMaXN0IChyZXEsIHJlcywgbmV4dCkge1xuICBjb25zdCB7IHBhcmFtIH0gPSByZXEucGFyYW1zO1xuICBjb25zdCBvcmdhbmlzYXRpb25JZD1wYXJhbTtcbiAgY29uc3QgeyBwYWdlTm8sIHBhZ2VTaXplLCBzZWFyY2hfa2V5LCBxIH0gPSByZXEucXVlcnk7XG4gIGNvbnN0IHNlc3Npb25PYmogPSBhd2FpdCBBdXRoLmdldFNlc3Npb25PYmoocmVxKTtcbiAgY29uc3Qgb3B0cyA9IHtcbiAgICByb2xlOiBzZXNzaW9uT2JqLnVzZXJzX2J1c2luZXNzX3BvcnRhbF9yb2xlLFxuICAgIHVzZXJJZDogc2Vzc2lvbk9iai51c2VyX2lkXG4gIH07XG4vLyAgY29uc29sZS5sb2coXCIrKysrKysrKysrKysrKysrKytvcHRzXCIrSlNPTi5zdHJpbmdpZnkob3B0cykpO1xuICBjb25zdCBsaXN0ID0gYXdhaXQgb3V0Ym91bmRDYWxsU2VydmljZS5jYWxsTG9nTGlzdChvcmdhbmlzYXRpb25JZCwge1xuICAgIHBhZ2U6IHBhZ2VObywgcGFnZV9zaXplOiBwYWdlU2l6ZSwgc2VhcmNoX2tleSwgcVxuICB9LCBvcHRzKTtcbiAvLyBjb25zb2xlLmxvZyhcIisrKysrKysrKysrKysrKytsaXN0XCIrbGlzdCk7XG4gIHJlcy5kYXRhID0gbGlzdDtcbiAgLy8gbG9nVG9KU09OKCdpbmZvJywgcmVzLmRhdGEpO1xuICBuZXh0KCk7XG59XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY2hhbmdlT3V0Ym91bmRDYWxsU3RhdHVzIChyZXEsIHJlcywgbmV4dCkge1xuICBjb25zdCB7IHBhcmFtIH0gPSByZXEucGFyYW1zO1xuICBjb25zdCBvcmdhbmlzYXRpb25faWQgPSBwYXJhbTtcbiAgY29uc3QgZGF0YSA9IHJlcS5ib2R5O1xuICBjb25zdCBzZXNzaW9uT2JqID0gYXdhaXQgQXV0aC5nZXRTZXNzaW9uT2JqKHJlcSk7XG4gIGNvbnN0IG9wdHMgPSB7XG4gICAgb3JnSWQ6IG9yZ2FuaXNhdGlvbl9pZCxcbiAgICByb2xlOiBzZXNzaW9uT2JqLnVzZXJzX2J1c2luZXNzX3BvcnRhbF9yb2xlLFxuICAgIHVzZXJJZDogc2Vzc2lvbk9iai51c2VyX2lkXG4gIH07XG4gIC8vY29uc29sZS5sb2coXCIrKysrKysrKysrKysrKyB0aGUgb3B0cyBhcmUgXCIrSlNPTi5zdHJpbmdpZnkob3B0cykpXG4gIGxvZygnaW5mbycsIHsgb3JnYW5pc2F0aW9uX2lkLCBkYXRhLCBvcHRzIH0pO1xuICBjb25zdCByZXNwb25zZSA9IGF3YWl0IG91dGJvdW5kQ2FsbFNlcnZpY2UuY2hhbmdlT3V0Ym91bmRDYWxsU3RhdHVzKG9wdHMsIGRhdGEpO1xuICByZXMuZGF0YSA9IHJlc3BvbnNlO1xuICBsb2coJ2luZm8nLCByZXMuZGF0YSk7XG4gIG5leHQoKTtcbn1cblxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFBOztBQUNBOztBQUNBOzs7Ozs7QUFDQTtBQUVPLGVBQWVBLFFBQWYsQ0FBd0JDLEdBQXhCLEVBQTZCQyxHQUE3QixFQUFrQ0MsSUFBbEMsRUFBd0M7RUFDN0MsTUFBTTtJQUFFQztFQUFGLElBQVlILEdBQUcsQ0FBQ0ksTUFBdEI7RUFDQSxNQUFNQyxjQUFjLEdBQUNGLEtBQXJCO0VBQ0EsTUFBTTtJQUFFRyxLQUFGO0lBQVNDO0VBQVQsSUFBb0JQLEdBQUcs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","map":{"version":3,"names":["callInit","req","res","next","param","params","organisationId","didId","number","body","log","sessionObj","Auth","getSessionObj","userId","user_id","outboundCallService","initCall","data","didNumberList","pageNo","pageSize","query","list","handleCall","callId","response","send","callLogList","search_key","q","opts","role","users_business_portal_role","page","page_size","changeOutboundCallStatus","organisation_id","orgId"],"sourceRoot":"/Users/ramireddycharitha/git-explore/controllers/","sources":["OutboundcallController.js"],"sourcesContent":["import * as outboundCallService from \"../services/OutboundcallService\";\nimport * as Auth from \"../middlewares/Auth\";\nimport { HEADER_SESSION_TOKEN } from \"../constants/Keys\";\n//import { Console } from \"winston/lib/winston/transports\";\n\nexport async function callInit(req, res, next) {\n  const { param } = req.params;\n  const organisationId=param;\n  const { didId, number } = req.body;\n  log(\"info\", { organisationId, didId, number });\n  const sessionObj = await Auth.getSessionObj(req);\n  const userId = sessionObj.user_id;\n  await outboundCallService.initCall(organisationId, {\n    didId,\n    userId,\n    number,\n  });\n  res.data = {};\n  log(\"info\", res.data);\n  next();\n}\n\nexport async function didNumberList(req, res, next) {\n  const { param } = req.params;\n  const organisationId=param\n  const { pageNo, pageSize } = req.query;\n  const list = await outboundCallService.didNumberList(organisationId, {\n    pageNo, pageSize,\n  });\n  res.data = list;\n  log(\"info\", res.data);\n  next();\n}\n\nexport async function handleCall (req, res) {\n  const { param } = req.params;\n  const callId = param;\n  const data = req.query;\n  // console.log(\"CHECKING QUERY IN HANDLE CALL\\n\\n\\n\\n\\n\\n\"+JSON.stringify(data));\n  log(\"info\", { callId, data });\n  const response = await outboundCallService.handleCall({ callId }, data);\n  // console.log(\"CHECKING RESPONSE IN HANDLE CALL\\n\\n\\n\\n\\n\"+response);\n  log(\"info\", { response });\n  res.send(response);\n}\n\n\nexport async function callLogList (req, res, next) {\n  const { param } = req.params;\n  const organisationId=param;\n  const { pageNo, pageSize, search_key, q } = req.query;\n  const sessionObj = await Auth.getSessionObj(req);\n  const opts = {\n    role: sessionObj.users_business_portal_role,\n    userId: sessionObj.user_id\n  };\n//  console.log(\"++++++++++++++++++opts\"+JSON.stringify(opts));\n  const list = await outboundCallService.callLogList(organisationId, {\n    page: pageNo, page_size: pageSize, search_key, q\n  }, opts);\n // console.log(\"++++++++++++++++list\"+list);\n  res.data = list;\n  // logToJSON('info', res.data);\n  next();\n}\nexport async function changeOutboundCallStatus (req, res, next) {\n  const { param } = req.params;\n  const organisation_id = param;\n  const data = req.body;\n  const sessionObj = await Auth.getSessionObj(req);\n  const opts = {\n    orgId: organisation_id,\n    role: sessionObj.users_business_portal_role,\n    userId: sessionObj.user_id\n  };\n  //console.log(\"++++++++++++++ the opts are \"+JSON.stringify(opts))\n  log('info', { organisation_id, data, opts });\n  const response = await outboundCallService.changeOutboundCallStatus(opts, data);\n  res.data = response;\n  log('info', res.data);\n  next();\n}\n\n"],"mappings":"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"}},"mtime":1654155654612},"{\"assumptions\":{},\"sourceRoot\":\"/Users/ramireddycharitha/git-explore/services/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/ramireddycharitha/git-explore\",\"filename\":\"/Users/ramireddycharitha/git-explore/services/OutboundcallService.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"default\",\"root\":\"/Users/ramireddycharitha/git-explore\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.17.10:default":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.callLogList = callLogList;\nexports.changeOutboundCallStatus = changeOutboundCallStatus;\nexports.didNumberList = didNumberList;\nexports.handleCall = handleCall;\nexports.initCall = initCall;\n\nvar kookooService = _interopRequireWildcard(require(\"./KookooService\"));\n\nvar ErrorUtil = _interopRequireWildcard(require(\"../errors/ErrorUtils\"));\n\nvar _mongodb = require(\"mongodb\");\n\nvar ErrorType = _interopRequireWildcard(require(\"../constants/ErrorConstants\"));\n\nvar AbstractModels = _interopRequireWildcard(require(\"../models/AbstractModels\"));\n\nvar callEventHandlers = _interopRequireWildcard(require(\"./callEventService\"));\n\nvar _index = require(\"../models/mainDbSchema/index\");\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\n/* eslint-disable no-undef */\nasync function initCall(orgId, {\n  didId,\n  number,\n  userId\n}) {\n  log(\"info\", {\n    orgId,\n    didId,\n    number,\n    userId\n  });\n  const org = await AbstractModels.mongoFindOne(_index.Organisations, {\n    organisation_id: orgId\n  });\n  if (!org) throw ErrorUtil.organisaitonNotExists();\n  const didNumber = await AbstractModels.mongoFindOne(_index.BusinessDIDNumbers, {\n    _id: (0, _mongodb.ObjectId)(didId),\n    associatedOrganisation: org._id\n  });\n  if (!didNumber) throw ErrorUtil.businessDidNumberNotFound();\n  const profile = await AbstractModels.mongoFindOne(_index.IVRVirtualProfile, {\n    user_id: userId\n  });\n  if (!profile) throw ErrorUtil.UserNotFoundError();\n  const zvrMobileNo = profile.zvr_mobile_no.toString().slice(-10);\n  const destinationNumber = number.toString().slice(-10);\n\n  if (zvrMobileNo === destinationNumber) {\n    throw ErrorUtil.UnableCallSameNo();\n  }\n\n  const call = await AbstractModels.mongoInsertOne(_index.BusinessCalls, {\n    user: profile._id,\n    organisationId: orgId,\n    didNumber: didNumber.virtualNumber,\n    destinationNumber: number,\n    initiatorNumber: profile.zvr_mobile_no,\n    time: new Date().toISOString()\n  });\n  return await kookooService.initCall(call);\n}\n\nasync function didNumberList(orgId, query) {\n  const skip = Number(query.pageNo || 0) * Number(query.pageSize || 20);\n  const limit = skip + Number(query.pageSize);\n  const org = await AbstractModels.mongoFindOne(_index.Organisations, {\n    organisation_id: orgId\n  });\n  if (!org) throw ErrorUtil.organisaitonNotExists();\n  const dbQuery = {\n    associatedOrganisation: org._id\n  };\n  const total = await _index.BusinessDIDNumbers.count(dbQuery);\n  const items = await _index.BusinessDIDNumbers.find(dbQuery).skip(skip).limit(limit).exec();\n  const out = {\n    items,\n    metadata: {\n      total,\n      query\n    }\n  };\n  return out;\n}\n\nasync function handleCall({\n  callId\n}, data) {\n  log('info', {\n    callId,\n    data\n  }); // console.log(ObjectId(callId));\n\n  const call = await AbstractModels.mongoFindOne(_index.BusinessCalls, {\n    _id: (0, _mongodb.ObjectId)(callId)\n  });\n  if (!call) throw ErrorUtil.businessDidNumberNotFound();\n  const handler = callEventHandlers[data.event];\n  if (!handler) throw ErrorUtil.createErrorMsg(ErrorType.BUSINESS_OUTBOUND_CALL_EVENT_HANDLER_NOT_FOUND);\n  return handler(call, data);\n}\n\nasync function callLogList(orgId, query, {\n  userId,\n  role\n} = {}) {\n  const skip = (Number(query.page || 0) - 1) * Number(query.page_size || 20);\n  const limit = Number(query.page_size || 20);\n  const dbQuery = {\n    organisationId: orgId,\n    isCallEnded: true\n  };\n\n  if (userId && role === 'USER') {\n    const profile = await AbstractModels.mongoFindOne(_index.IVRVirtualProfile, {\n      user_id: userId\n    });\n    if (!profile) throw ErrorUtil.UserNotFoundError();\n    dbQuery.user = profile._id;\n  }\n\n  if (query.search_key && query.q) {\n    switch (query.search_key) {\n      case 'status':\n        dbQuery[query.search_key] = query.q;\n        break;\n\n      default:\n        dbQuery[query.search_key] = new RegExp(`.*${query.q}.*`);\n        break;\n    }\n  }\n\n  const total = await _index.BusinessCalls.count(dbQuery);\n  const items = await _index.BusinessCalls.find(dbQuery).populate('user', '_id zvr_name zvr_mobile_no').sort({\n    createdAt: -1\n  }).skip(skip).limit(limit).exec();\n  const out = {\n    items,\n    metadata: {\n      total,\n      query\n    }\n  }; // logToJSON('info', out);\n\n  return out;\n}\n\nasync function changeOutboundCallStatus({\n  orgId\n}, {\n  userId,\n  isOutboundCallEnabled\n}) {\n  const org = await AbstractModels.mongoFindOne(_index.Organisations, {\n    organisation_id: orgId\n  });\n  if (!org) throw ErrorUtil.organisaitonNotExists();\n  const profileQuery = {\n    'organisation.organisation_id': orgId,\n    user_id: userId\n  }; // console.log(\"=========== the profiile query is \"+JSON.stringify(profileQuery))\n\n  const profile = await AbstractModels.mongoFindOne(_index.IVRVirtualProfile, profileQuery);\n  if (!profile) throw ErrorUtil.UserNotFoundError();\n  await AbstractModels.mongoFindOneAndUpdate(_index.IVRVirtualProfile, profileQuery, {\n    isOutboundCallEnabled\n  });\n  return {};\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJpbml0Q2FsbCIsIm9yZ0lkIiwiZGlkSWQiLCJudW1iZXIiLCJ1c2VySWQiLCJsb2ciLCJvcmciLCJBYnN0cmFjdE1vZGVscyIsIm1vbmdvRmluZE9uZSIsIk9yZ2FuaXNhdGlvbnMiLCJvcmdhbmlzYXRpb25faWQiLCJFcnJvclV0aWwiLCJvcmdhbmlzYWl0b25Ob3RFeGlzdHMiLCJkaWROdW1iZXIiLCJCdXNpbmVzc0RJRE51bWJlcnMiLCJfaWQiLCJhc3NvY2lhdGVkT3JnYW5pc2F0aW9uIiwiYnVzaW5lc3NEaWROdW1iZXJOb3RGb3VuZCIsInByb2ZpbGUiLCJJVlJWaXJ0dWFsUHJvZmlsZSIsInVzZXJfaWQiLCJVc2VyTm90Rm91bmRFcnJvciIsInp2ck1vYmlsZU5vIiwienZyX21vYmlsZV9ubyIsInRvU3RyaW5nIiwic2xpY2UiLCJkZXN0aW5hdGlvbk51bWJlciIsIlVuYWJsZUNhbGxTYW1lTm8iLCJjYWxsIiwibW9uZ29JbnNlcnRPbmUiLCJCdXNpbmVzc0NhbGxzIiwidXNlciIsIm9yZ2FuaXNhdGlvbklkIiwidmlydHVhbE51bWJlciIsImluaXRpYXRvck51bWJlciIsInRpbWUiLCJEYXRlIiwidG9JU09TdHJpbmciLCJrb29rb29TZXJ2aWNlIiwiZGlkTnVtYmVyTGlzdCIsInF1ZXJ5Iiwic2tpcCIsIk51bWJlciIsInBhZ2VObyIsInBhZ2VTaXplIiwibGltaXQiLCJkYlF1ZXJ5IiwidG90YWwiLCJjb3VudCIsIml0ZW1zIiwiZmluZCIsImV4ZWMiLCJvdXQiLCJtZXRhZGF0YSIsImhhbmRsZUNhbGwiLCJjYWxsSWQiLCJkYXRhIiwiaGFuZGxlciIsImNhbGxFdmVudEhhbmRsZXJzIiwiZXZlbnQiLCJjcmVhdGVFcnJvck1zZyIsIkVycm9yVHlwZSIsIkJVU0lORVNTX09VVEJPVU5EX0NBTExfRVZFTlRfSEFORExFUl9OT1RfRk9VTkQiLCJjYWxsTG9nTGlzdCIsInJvbGUiLCJwYWdlIiwicGFnZV9zaXplIiwiaXNDYWxsRW5kZWQiLCJzZWFyY2hfa2V5IiwicSIsIlJlZ0V4cCIsInBvcHVsYXRlIiwic29ydCIsImNyZWF0ZWRBdCIsImNoYW5nZU91dGJvdW5kQ2FsbFN0YXR1cyIsImlzT3V0Ym91bmRDYWxsRW5hYmxlZCIsInByb2ZpbGVRdWVyeSIsIm1vbmdvRmluZE9uZUFuZFVwZGF0ZSJdLCJzb3VyY2VSb290IjoiL1VzZXJzL3JhbWlyZWRkeWNoYXJpdGhhL2dpdC1leHBsb3JlL3NlcnZpY2VzLyIsInNvdXJjZXMiOlsiT3V0Ym91bmRjYWxsU2VydmljZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiBlc2xpbnQtZGlzYWJsZSBuby11bmRlZiAqL1xuaW1wb3J0ICogYXMga29va29vU2VydmljZSBmcm9tIFwiLi9Lb29rb29TZXJ2aWNlXCI7XG5pbXBvcnQgKiBhcyBFcnJvclV0aWwgZnJvbSBcIi4uL2Vycm9ycy9FcnJvclV0aWxzXCI7XG5pbXBvcnQgeyBPYmplY3RJZCB9IGZyb20gJ21vbmdvZGInO1xuaW1wb3J0ICogYXMgRXJyb3JUeXBlIGZyb20gXCIuLi9jb25zdGFudHMvRXJyb3JDb25zdGFudHNcIjtcbmltcG9ydCAqIGFzIEFic3RyYWN0TW9kZWxzIGZyb20gXCIuLi9tb2RlbHMvQWJzdHJhY3RNb2RlbHNcIjtcbmltcG9ydCAqIGFzIGNhbGxFdmVudEhhbmRsZXJzIGZyb20gXCIuL2NhbGxFdmVudFNlcnZpY2VcIjtcbmltcG9ydCB7IE9yZ2FuaXNhdGlvbnMsIElWUlZpcnR1YWxQcm9maWxlLCBCdXNpbmVzc0RJRE51bWJlcnMgLCBCdXNpbmVzc0NhbGxzfSBmcm9tIFwiLi4vbW9kZWxzL21haW5EYlNjaGVtYS9pbmRleFwiO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gaW5pdENhbGwob3JnSWQsIHsgZGlkSWQsIG51bWJlciwgdXNlcklkIH0pIHtcbiAgbG9nKFwiaW5mb1wiLCB7XG4gICAgb3JnSWQsIGRpZElkLCBudW1iZXIsIHVzZXJJZCxcbiAgfSk7XG4gIGNvbnN0IG9yZyA9IGF3YWl0IEFic3RyYWN0TW9kZWxzLm1vbmdvRmluZE9uZShPcmdhbmlzYXRpb25zLCB7IG9yZ2FuaXNhdGlvbl9pZDogb3JnSWQgfSk7XG4gIGlmICghb3JnKSB0aHJvdyBFcnJvclV0aWwub3JnYW5pc2FpdG9uTm90RXhpc3RzKClcbiAgY29uc3QgZGlkTnVtYmVyID0gYXdhaXQgQWJzdHJhY3RNb2RlbHMubW9uZ29GaW5kT25lKEJ1c2luZXNzRElETnVtYmVycywge1xuICAgIF9pZDogT2JqZWN0SWQoZGlkSWQpLFxuICAgIGFzc29jaWF0ZWRPcmdhbmlzYXRpb246IG9yZy5faWQsXG4gIH0pO1xuICBpZiAoIWRpZE51bWJlcikgdGhyb3cgRXJyb3JVdGlsLmJ1c2luZXNzRGlkTnVtYmVyTm90Rm91bmQoKTtcbiAgY29uc3QgcHJvZmlsZSA9IGF3YWl0IEFic3RyYWN0TW9kZWxzLm1vbmdvRmluZE9uZShJVlJWaXJ0dWFsUHJvZmlsZSwge1xuICAgIHVzZXJfaWQ6IHVzZXJJZCxcbiAgfSk7XG4gIGlmICghcHJvZmlsZSkgdGhyb3cgRXJyb3JVdGlsLlVzZXJOb3RGb3VuZEVycm9yKCk7XG4gIGNvbnN0IHp2ck1vYmlsZU5vID0gcHJvZmlsZS56dnJfbW9iaWxlX25vLnRvU3RyaW5nKCkuc2xpY2UoLTEwKTtcbiAgY29uc3QgZGVzdGluYXRpb25OdW1iZXIgPSBudW1iZXIudG9TdHJpbmcoKS5zbGljZSgtMTApO1xuXG4gIGlmICh6dnJNb2JpbGVObyA9PT0gZGVzdGluYXRpb25OdW1iZXIpIHtcbiAgICB0aHJvdyBFcnJvclV0aWwuVW5hYmxlQ2FsbFNhbWVObygpO1xuICB9XG4gIGNvbnN0IGNhbGwgPSBhd2FpdCBBYnN0cmFjdE1vZGVscy5tb25nb0luc2VydE9uZShCdXNpbmVzc0NhbGxzLCB7XG4gICAgdXNlcjogcHJvZmlsZS5faWQsXG4gICAgb3JnYW5pc2F0aW9uSWQ6IG9yZ0lkLFxuICAgIGRpZE51bWJlcjogZGlkTnVtYmVyLnZpcnR1YWxOdW1iZXIsXG4gICAgZGVzdGluYXRpb25OdW1iZXI6IG51bWJlcixcbiAgICBpbml0aWF0b3JOdW1iZXI6IHByb2ZpbGUuenZyX21vYmlsZV9ubyxcbiAgICB0aW1lOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gIH0pO1xuICByZXR1cm4gYXdhaXQga29va29vU2VydmljZS5pbml0Q2FsbChjYWxsKTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGRpZE51bWJlckxpc3Qob3JnSWQsIHF1ZXJ5KSB7XG4gIGNvbnN0IHNraXAgPSBOdW1iZXIocXVlcnkucGFnZU5vIHx8IDApICogTnVtYmVyKHF1ZXJ5LnBhZ2VTaXplIHx8IDIwKTtcbiAgY29uc3QgbGltaXQgPSBza2lwICsgTnVtYmVyKHF1ZXJ5LnBhZ2VTaXplKTtcbiAgY29uc3Qgb3JnID0gYXdhaXQgQWJzdHJhY3RNb2RlbHMubW9uZ29GaW5kT25lKE9yZ2FuaXNhdGlvbnMsIHsgb3JnYW5pc2F0aW9uX2lkOiBvcmdJZCB9KTtcbiAgaWYgKCFvcmcpIHRocm93IEVycm9yVXRpbC5vcmdhbmlzYWl0b25Ob3RFeGlzdHMoKTtcbiAgY29uc3QgZGJRdWVyeSA9IHsgYXNzb2NpYXRlZE9yZ2FuaXNhdGlvbjogb3JnLl9pZCB9O1xuICBjb25zdCB0b3RhbCA9IGF3YWl0IEJ1c2luZXNzRElETnVtYmVycy5jb3VudChkYlF1ZXJ5KTtcbiAgY29uc3QgaXRlbXMgPSBhd2FpdCBCdXNpbmVzc0RJRE51bWJlcnMuZmluZChkYlF1ZXJ5KVxuICAgIC5za2lwKHNraXApXG4gICAgLmxpbWl0KGxpbWl0KVxuICAgIC5leGVjKCk7XG4gIGNvbnN0IG91dCA9IHtcbiAgICBpdGVtcyxcbiAgICBtZXRhZGF0YToge1xuICAgICAgdG90YWwsXG4gICAgICBxdWVyeSxcbiAgICB9LFxuICB9O1xuICByZXR1cm4gb3V0O1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gaGFuZGxlQ2FsbCAoeyBjYWxsSWQgfSwgZGF0YSkge1xuICBsb2coJ2luZm8nLCB7IGNhbGxJZCwgZGF0YSB9KTtcbiAvLyBjb25zb2xlLmxvZyhPYmplY3RJZChjYWxsSWQpKTtcbiAgY29uc3QgY2FsbCA9IGF3YWl0IEFic3RyYWN0TW9kZWxzLm1vbmdvRmluZE9uZShCdXNpbmVzc0NhbGxzLCB7IF9pZDogT2JqZWN0SWQoY2FsbElkKSB9KTtcbiAgaWYgKCFjYWxsKSB0aHJvdyBFcnJvclV0aWwuYnVzaW5lc3NEaWROdW1iZXJOb3RGb3VuZCgpO1xuXG4gIGNvbnN0IGhhbmRsZXIgPSBjYWxsRXZlbnRIYW5kbGVyc1tkYXRhLmV2ZW50XTtcblxuICBpZiAoIWhhbmRsZXIpIHRocm93IEVycm9yVXRpbC5jcmVhdGVFcnJvck1zZyhFcnJvclR5cGUuQlVTSU5FU1NfT1VUQk9VTkRfQ0FMTF9FVkVOVF9IQU5ETEVSX05PVF9GT1VORCk7XG4gIHJldHVybiBoYW5kbGVyKGNhbGwsIGRhdGEpO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY2FsbExvZ0xpc3QgKG9yZ0lkLCBxdWVyeSwgeyB1c2VySWQsIHJvbGUgfSA9IHt9KSB7XG4gIGNvbnN0IHNraXAgPSAoTnVtYmVyKHF1ZXJ5LnBhZ2UgfHwgMCkgLTEpICogTnVtYmVyKHF1ZXJ5LnBhZ2Vfc2l6ZSB8fCAyMCk7XG4gIGNvbnN0IGxpbWl0ID0gTnVtYmVyKHF1ZXJ5LnBhZ2Vfc2l6ZSB8fCAyMCk7XG4gIGNvbnN0IGRiUXVlcnkgPSB7IG9yZ2FuaXNhdGlvbklkOiBvcmdJZCwgaXNDYWxsRW5kZWQ6IHRydWUgfTtcblxuICBpZiAodXNlcklkICYmIHJvbGUgPT09ICdVU0VSJykge1xuICAgIGNvbnN0IHByb2ZpbGUgPSBhd2FpdCBBYnN0cmFjdE1vZGVscy5tb25nb0ZpbmRPbmUoSVZSVmlydHVhbFByb2ZpbGUsIHsgdXNlcl9pZDogdXNlcklkIH0pO1xuICAgIGlmICghcHJvZmlsZSkgdGhyb3cgRXJyb3JVdGlsLlVzZXJOb3RGb3VuZEVycm9yKCk7XG4gICAgZGJRdWVyeS51c2VyID0gcHJvZmlsZS5faWQ7XG4gIH1cblxuICBpZiAocXVlcnkuc2VhcmNoX2tleSAmJiBxdWVyeS5xKSB7XG4gICAgc3dpdGNoIChxdWVyeS5zZWFyY2hfa2V5KSB7XG4gICAgICBjYXNlICdzdGF0dXMnOlxuICAgICAgICBkYlF1ZXJ5W3F1ZXJ5LnNlYXJjaF9rZXldID0gcXVlcnkucTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICBkYlF1ZXJ5W3F1ZXJ5LnNlYXJjaF9rZXldID0gbmV3IFJlZ0V4cChgLioke3F1ZXJ5LnF9LipgKTtcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgY29uc3QgdG90YWwgPSBhd2FpdCBCdXNpbmVzc0NhbGxzLmNvdW50KGRiUXVlcnkpO1xuICBjb25zdCBpdGVtcyA9IGF3YWl0IEJ1c2luZXNzQ2FsbHMuZmluZChkYlF1ZXJ5KVxuICAgIC5wb3B1bGF0ZSgndXNlcicsICdfaWQgenZyX25hbWUgenZyX21vYmlsZV9ubycpXG4gICAgLnNvcnQoeyBjcmVhdGVkQXQ6IC0xIH0pXG4gICAgLnNraXAoc2tpcClcbiAgICAubGltaXQobGltaXQpXG4gICAgLmV4ZWMoKTtcbiAgY29uc3Qgb3V0ID0ge1xuICAgIGl0ZW1zLFxuICAgIG1ldGFkYXRhOiB7XG4gICAgICB0b3RhbCxcbiAgICAgIHF1ZXJ5XG4gICAgfVxuICB9O1xuICAvLyBsb2dUb0pTT04oJ2luZm8nLCBvdXQpO1xuICByZXR1cm4gb3V0O1xufVxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNoYW5nZU91dGJvdW5kQ2FsbFN0YXR1cyAoeyBvcmdJZCB9LCB7IHVzZXJJZCwgaXNPdXRib3VuZENhbGxFbmFibGVkIH0pIHtcbiAgY29uc3Qgb3JnID0gYXdhaXQgQWJzdHJhY3RNb2RlbHMubW9uZ29GaW5kT25lKE9yZ2FuaXNhdGlvbnMsIHsgb3JnYW5pc2F0aW9uX2lkOiBvcmdJZCB9KTtcbiAgaWYgKCFvcmcpIHRocm93IEVycm9yVXRpbC5vcmdhbmlzYWl0b25Ob3RFeGlzdHMoKTtcbiAgY29uc3QgcHJvZmlsZVF1ZXJ5ID0geyAnb3JnYW5pc2F0aW9uLm9yZ2FuaXNhdGlvbl9pZCc6IG9yZ0lkLCB1c2VyX2lkOiB1c2VySWQgfTtcbiAgLy8gY29uc29sZS5sb2coXCI9PT09PT09PT09PSB0aGUgcHJvZmlpbGUgcXVlcnkgaXMgXCIrSlNPTi5zdHJpbmdpZnkocHJvZmlsZVF1ZXJ5KSlcbiAgY29uc3QgcHJvZmlsZSA9IGF3YWl0IEFic3RyYWN0TW9kZWxzLm1vbmdvRmluZE9uZShJVlJWaXJ0dWFsUHJvZmlsZSwgcHJvZmlsZVF1ZXJ5KTtcbiAgaWYgKCFwcm9maWxlKSB0aHJvdyBFcnJvclV0aWwuVXNlck5vdEZvdW5kRXJyb3IoKTtcbiAgYXdhaXQgQWJzdHJhY3RNb2RlbHMubW9uZ29GaW5kT25lQW5kVXBkYXRlKElWUlZpcnR1YWxQcm9maWxlLCBwcm9maWxlUXVlcnksIHtcbiAgICBpc091dGJvdW5kQ2FsbEVuYWJsZWRcbiAgfSk7XG4gIHJldHVybiB7fTtcbn0iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7Ozs7OztBQVBBO0FBU08sZUFBZUEsUUFBZixDQUF3QkMsS0FBeEIsRUFBK0I7RUFBRUMsS0FBRjtFQUFTQyxNQUFUO0VBQWlCQztBQUFqQixDQUEvQixFQUEwRDtFQUMvREMsR0FBRyxDQUFDLE1BQUQsRUFBUztJQUNWSixLQURVO0lBQ0hDLEtBREc7SUFDSUMsTUFESjtJQUNZQztFQURaLENBQVQsQ0FBSDtFQUdBLE1BQU1FLEdBQUcsR0FBRyxNQUFNQyxjQUFjLENBQUNDLFlBQWYsQ0FBNEJDLG9CQUE1QixFQUEyQztJQUFFQyxlQUFlLEVBQUVUO0VBQW5CLENBQTNDLENBQWxCO0VBQ0EsSUFBSSxDQUFDSyxHQUFMLEVBQVUsTUFBTUssU0FBUyxDQUFDQyxxQkFBVixFQUFOO0VBQ1YsTUFBTUMsU0FBUyxHQUFHLE1BQU1OLGNBQWMsQ0FBQ0MsWUFBZixDQUE0Qk0seUJBQTVCLEVBQWdEO0lBQ3RFQyxHQUFHLEVBQUUsdUJBQVNiLEtBQVQsQ0FEaUU7SUFFdEVjLHNCQUFzQixFQUFFVixHQUFHLENB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","map":{"version":3,"names":["initCall","orgId","didId","number","userId","log","org","AbstractModels","mongoFindOne","Organisations","organisation_id","ErrorUtil","organisaitonNotExists","didNumber","BusinessDIDNumbers","_id","associatedOrganisation","businessDidNumberNotFound","profile","IVRVirtualProfile","user_id","UserNotFoundError","zvrMobileNo","zvr_mobile_no","toString","slice","destinationNumber","UnableCallSameNo","call","mongoInsertOne","BusinessCalls","user","organisationId","virtualNumber","initiatorNumber","time","Date","toISOString","kookooService","didNumberList","query","skip","Number","pageNo","pageSize","limit","dbQuery","total","count","items","find","exec","out","metadata","handleCall","callId","data","handler","callEventHandlers","event","createErrorMsg","ErrorType","BUSINESS_OUTBOUND_CALL_EVENT_HANDLER_NOT_FOUND","callLogList","role","page","page_size","isCallEnded","search_key","q","RegExp","populate","sort","createdAt","changeOutboundCallStatus","isOutboundCallEnabled","profileQuery","mongoFindOneAndUpdate"],"sourceRoot":"/Users/ramireddycharitha/git-explore/services/","sources":["OutboundcallService.js"],"sourcesContent":["/* eslint-disable no-undef */\nimport * as kookooService from \"./KookooService\";\nimport * as ErrorUtil from \"../errors/ErrorUtils\";\nimport { ObjectId } from 'mongodb';\nimport * as ErrorType from \"../constants/ErrorConstants\";\nimport * as AbstractModels from \"../models/AbstractModels\";\nimport * as callEventHandlers from \"./callEventService\";\nimport { Organisations, IVRVirtualProfile, BusinessDIDNumbers , BusinessCalls} from \"../models/mainDbSchema/index\";\n\nexport async function initCall(orgId, { didId, number, userId }) {\n  log(\"info\", {\n    orgId, didId, number, userId,\n  });\n  const org = await AbstractModels.mongoFindOne(Organisations, { organisation_id: orgId });\n  if (!org) throw ErrorUtil.organisaitonNotExists()\n  const didNumber = await AbstractModels.mongoFindOne(BusinessDIDNumbers, {\n    _id: ObjectId(didId),\n    associatedOrganisation: org._id,\n  });\n  if (!didNumber) throw ErrorUtil.businessDidNumberNotFound();\n  const profile = await AbstractModels.mongoFindOne(IVRVirtualProfile, {\n    user_id: userId,\n  });\n  if (!profile) throw ErrorUtil.UserNotFoundError();\n  const zvrMobileNo = profile.zvr_mobile_no.toString().slice(-10);\n  const destinationNumber = number.toString().slice(-10);\n\n  if (zvrMobileNo === destinationNumber) {\n    throw ErrorUtil.UnableCallSameNo();\n  }\n  const call = await AbstractModels.mongoInsertOne(BusinessCalls, {\n    user: profile._id,\n    organisationId: orgId,\n    didNumber: didNumber.virtualNumber,\n    destinationNumber: number,\n    initiatorNumber: profile.zvr_mobile_no,\n    time: new Date().toISOString(),\n  });\n  return await kookooService.initCall(call);\n}\n\nexport async function didNumberList(orgId, query) {\n  const skip = Number(query.pageNo || 0) * Number(query.pageSize || 20);\n  const limit = skip + Number(query.pageSize);\n  const org = await AbstractModels.mongoFindOne(Organisations, { organisation_id: orgId });\n  if (!org) throw ErrorUtil.organisaitonNotExists();\n  const dbQuery = { associatedOrganisation: org._id };\n  const total = await BusinessDIDNumbers.count(dbQuery);\n  const items = await BusinessDIDNumbers.find(dbQuery)\n    .skip(skip)\n    .limit(limit)\n    .exec();\n  const out = {\n    items,\n    metadata: {\n      total,\n      query,\n    },\n  };\n  return out;\n}\n\nexport async function handleCall ({ callId }, data) {\n  log('info', { callId, data });\n // console.log(ObjectId(callId));\n  const call = await AbstractModels.mongoFindOne(BusinessCalls, { _id: ObjectId(callId) });\n  if (!call) throw ErrorUtil.businessDidNumberNotFound();\n\n  const handler = callEventHandlers[data.event];\n\n  if (!handler) throw ErrorUtil.createErrorMsg(ErrorType.BUSINESS_OUTBOUND_CALL_EVENT_HANDLER_NOT_FOUND);\n  return handler(call, data);\n}\n\nexport async function callLogList (orgId, query, { userId, role } = {}) {\n  const skip = (Number(query.page || 0) -1) * Number(query.page_size || 20);\n  const limit = Number(query.page_size || 20);\n  const dbQuery = { organisationId: orgId, isCallEnded: true };\n\n  if (userId && role === 'USER') {\n    const profile = await AbstractModels.mongoFindOne(IVRVirtualProfile, { user_id: userId });\n    if (!profile) throw ErrorUtil.UserNotFoundError();\n    dbQuery.user = profile._id;\n  }\n\n  if (query.search_key && query.q) {\n    switch (query.search_key) {\n      case 'status':\n        dbQuery[query.search_key] = query.q;\n        break;\n      default:\n        dbQuery[query.search_key] = new RegExp(`.*${query.q}.*`);\n        break;\n    }\n  }\n\n  const total = await BusinessCalls.count(dbQuery);\n  const items = await BusinessCalls.find(dbQuery)\n    .populate('user', '_id zvr_name zvr_mobile_no')\n    .sort({ createdAt: -1 })\n    .skip(skip)\n    .limit(limit)\n    .exec();\n  const out = {\n    items,\n    metadata: {\n      total,\n      query\n    }\n  };\n  // logToJSON('info', out);\n  return out;\n}\nexport async function changeOutboundCallStatus ({ orgId }, { userId, isOutboundCallEnabled }) {\n  const org = await AbstractModels.mongoFindOne(Organisations, { organisation_id: orgId });\n  if (!org) throw ErrorUtil.organisaitonNotExists();\n  const profileQuery = { 'organisation.organisation_id': orgId, user_id: userId };\n  // console.log(\"=========== the profiile query is \"+JSON.stringify(profileQuery))\n  const profile = await AbstractModels.mongoFindOne(IVRVirtualProfile, profileQuery);\n  if (!profile) throw ErrorUtil.UserNotFoundError();\n  await AbstractModels.mongoFindOneAndUpdate(IVRVirtualProfile, profileQuery, {\n    isOutboundCallEnabled\n  });\n  return {};\n}"],"mappings":"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"}},"mtime":1654155693791},"{\"assumptions\":{},\"sourceRoot\":\"/Users/ramireddycharitha/git-explore/services/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/ramireddycharitha/git-explore\",\"filename\":\"/Users/ramireddycharitha/git-explore/services/KookooService.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"default\",\"root\":\"/Users/ramireddycharitha/git-explore\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.17.10:default":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.hangupResponse = hangupResponse;\nexports.initCall = initCall;\nexports.outgoingCallResponse = outgoingCallResponse;\n\nvar _index = _interopRequireDefault(require(\"../config/index\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/* eslint-disable import/no-unresolved */\nasync function initCall({\n  _id,\n  didNumber,\n  initiatorNumber\n}) {\n  log(\"info\", {\n    _id,\n    didNumber,\n    initiatorNumber\n  }); // eslint-disable-next-line global-require\n\n  const axios = require(\"axios\");\n\n  const apiKey = \"KK232c980690c3cd35bc9ce18db9477d8b\";\n  const applicationUrl = new URL(_index.default.application_url); // console.log(\"+++++++++++++++++++ the applicaiton url is \"+applicationUrl.origin)\n\n  const url = `${applicationUrl.origin}/v1/organisation/outbound-call/external/call/handle/${_id}`;\n  log(\"info\", url); // console.log('URL FOR KOOKOO\\n\\n\\n\\n\\n'+url);\n\n  const API_URL = new URL(\"http://kookoo.in/outbound/outbound.php\");\n  API_URL.searchParams.set(\"api_key\", apiKey);\n  API_URL.searchParams.set(\"phone_no\", initiatorNumber);\n  API_URL.searchParams.set(\"caller_id\", didNumber);\n  API_URL.searchParams.set(\"outbound_version\", \"2\");\n  API_URL.searchParams.set(\"url\", url);\n  log(\"info\", \"end\");\n  return axios.default.get(API_URL.href);\n}\n\nasync function outgoingCallResponse({\n  destinationNumber\n}) {\n  log('info', 'start');\n  const out = '<?xml version=\"1.0\" encoding=\"UTF-8\"?>' + '<response>' + `<dial record=\"true\" limittime=\"1000\" timeout=\"30\" moh=\"ring\" >${destinationNumber}</dial>` + '</response>';\n  log('info', out);\n  return out;\n}\n\nasync function hangupResponse() {\n  log('info', 'start');\n  const out = '<?xml version=\"1.0\" encoding=\"UTF-8\"?>' + '<response>' + '<hangup></hangup>' + '</response>';\n  log('info', out);\n  return out;\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJpbml0Q2FsbCIsIl9pZCIsImRpZE51bWJlciIsImluaXRpYXRvck51bWJlciIsImxvZyIsImF4aW9zIiwicmVxdWlyZSIsImFwaUtleSIsImFwcGxpY2F0aW9uVXJsIiwiVVJMIiwiY29uZmlnIiwiYXBwbGljYXRpb25fdXJsIiwidXJsIiwib3JpZ2luIiwiQVBJX1VSTCIsInNlYXJjaFBhcmFtcyIsInNldCIsImRlZmF1bHQiLCJnZXQiLCJocmVmIiwib3V0Z29pbmdDYWxsUmVzcG9uc2UiLCJkZXN0aW5hdGlvbk51bWJlciIsIm91dCIsImhhbmd1cFJlc3BvbnNlIl0sInNvdXJjZVJvb3QiOiIvVXNlcnMvcmFtaXJlZGR5Y2hhcml0aGEvZ2l0LWV4cGxvcmUvc2VydmljZXMvIiwic291cmNlcyI6WyJLb29rb29TZXJ2aWNlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIGVzbGludC1kaXNhYmxlIGltcG9ydC9uby11bnJlc29sdmVkICovXG5pbXBvcnQgY29uZmlnIGZyb20gXCIuLi9jb25maWcvaW5kZXhcIjtcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGluaXRDYWxsKHsgX2lkLCBkaWROdW1iZXIsIGluaXRpYXRvck51bWJlciB9KSB7XG4gIGxvZyhcImluZm9cIiwgeyBfaWQsIGRpZE51bWJlciwgaW5pdGlhdG9yTnVtYmVyIH0pO1xuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZ2xvYmFsLXJlcXVpcmVcbiAgY29uc3QgYXhpb3MgPSByZXF1aXJlKFwiYXhpb3NcIik7XG4gIGNvbnN0IGFwaUtleSA9IFwiS0syMzJjOTgwNjkwYzNjZDM1YmM5Y2UxOGRiOTQ3N2Q4YlwiO1xuICBjb25zdCBhcHBsaWNhdGlvblVybCA9IG5ldyBVUkwoY29uZmlnLmFwcGxpY2F0aW9uX3VybCk7XG4gIC8vIGNvbnNvbGUubG9nKFwiKysrKysrKysrKysrKysrKysrKyB0aGUgYXBwbGljYWl0b24gdXJsIGlzIFwiK2FwcGxpY2F0aW9uVXJsLm9yaWdpbilcbiAgY29uc3QgdXJsID0gYCR7YXBwbGljYXRpb25Vcmwub3JpZ2lufS92MS9vcmdhbmlzYXRpb24vb3V0Ym91bmQtY2FsbC9leHRlcm5hbC9jYWxsL2hhbmRsZS8ke19pZH1gO1xuICBsb2coXCJpbmZvXCIsIHVybCk7XG4gIC8vIGNvbnNvbGUubG9nKCdVUkwgRk9SIEtPT0tPT1xcblxcblxcblxcblxcbicrdXJsKTtcbiAgY29uc3QgQVBJX1VSTCA9IG5ldyBVUkwoXCJodHRwOi8va29va29vLmluL291dGJvdW5kL291dGJvdW5kLnBocFwiKTtcbiAgQVBJX1VSTC5zZWFyY2hQYXJhbXMuc2V0KFwiYXBpX2tleVwiLCBhcGlLZXkpO1xuICBBUElfVVJMLnNlYXJjaFBhcmFtcy5zZXQoXCJwaG9uZV9ub1wiLCBpbml0aWF0b3JOdW1iZXIpO1xuICBBUElfVVJMLnNlYXJjaFBhcmFtcy5zZXQoXCJjYWxsZXJfaWRcIiwgZGlkTnVtYmVyKTtcbiAgQVBJX1VSTC5zZWFyY2hQYXJhbXMuc2V0KFwib3V0Ym91bmRfdmVyc2lvblwiLCBcIjJcIik7XG4gIEFQSV9VUkwuc2VhcmNoUGFyYW1zLnNldChcInVybFwiLCB1cmwpO1xuXG4gIGxvZyhcImluZm9cIiwgXCJlbmRcIik7XG4gIHJldHVybiBheGlvcy5kZWZhdWx0LmdldChBUElfVVJMLmhyZWYpO1xufVxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIG91dGdvaW5nQ2FsbFJlc3BvbnNlICh7IGRlc3RpbmF0aW9uTnVtYmVyIH0pIHtcbiAgbG9nKCdpbmZvJywgJ3N0YXJ0Jyk7XG4gIGNvbnN0IG91dCA9ICc8P3htbCB2ZXJzaW9uPVwiMS4wXCIgZW5jb2Rpbmc9XCJVVEYtOFwiPz4nICtcbiAgICAnPHJlc3BvbnNlPicgK1xuICAgIGA8ZGlhbCByZWNvcmQ9XCJ0cnVlXCIgbGltaXR0aW1lPVwiMTAwMFwiIHRpbWVvdXQ9XCIzMFwiIG1vaD1cInJpbmdcIiA+JHtkZXN0aW5hdGlvbk51bWJlcn08L2RpYWw+YCArXG4gICAgJzwvcmVzcG9uc2U+JztcbiAgbG9nKCdpbmZvJywgb3V0KTtcbiAgcmV0dXJuIG91dDtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGhhbmd1cFJlc3BvbnNlICgpIHtcbiAgbG9nKCdpbmZvJywgJ3N0YXJ0Jyk7XG4gIGNvbnN0IG91dCA9ICc8P3htbCB2ZXJzaW9uPVwiMS4wXCIgZW5jb2Rpbmc9XCJVVEYtOFwiPz4nICtcbiAgICAnPHJlc3BvbnNlPicgK1xuICAgICc8aGFuZ3VwPjwvaGFuZ3VwPicgK1xuICAgICc8L3Jlc3BvbnNlPic7XG4gIGxvZygnaW5mbycsIG91dCk7XG4gIHJldHVybiBvdXQ7XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUNBOzs7O0FBREE7QUFHTyxlQUFlQSxRQUFmLENBQXdCO0VBQUVDLEdBQUY7RUFBT0MsU0FBUDtFQUFrQkM7QUFBbEIsQ0FBeEIsRUFBNkQ7RUFDbEVDLEdBQUcsQ0FBQyxNQUFELEVBQVM7SUFBRUgsR0FBRjtJQUFPQyxTQUFQO0lBQWtCQztFQUFsQixDQUFULENBQUgsQ0FEa0UsQ0FFbEU7O0VBQ0EsTUFBTUUsS0FBSyxHQUFHQyxPQUFPLENBQUMsT0FBRCxDQUFyQjs7RUFDQSxNQUFNQyxNQUFNLEdBQUcsb0NBQWY7RUFDQSxNQUFNQyxjQUFjLEdBQUcsSUFBSUMsR0FBSixDQUFRQyxlQUFPQyxlQUFmLENBQXZCLENBTGtFLENBTWxFOztFQUNBLE1BQU1DLEdBQUcsR0FBSSxHQUFFSixjQUFjLENBQUNLLE1BQU8sdURBQXNEWixHQUFJLEVBQS9GO0VBQ0FHLEdBQUcsQ0FBQyxNQUFELEVBQVNRLEdBQVQsQ0FBSCxDQVJrRSxDQVNsRTs7RUFDQSxNQUFNRSxPQUFPLEdBQUcsSUFBSUwsR0FBSixDQUFRLHdDQUFSLENBQWhCO0VBQ0FLLE9BQU8sQ0FBQ0MsWUFBUixDQUFxQkMsR0FBckIsQ0FBeUIsU0FBekIsRUFBb0NULE1BQXBDO0VBQ0FPLE9BQU8sQ0FBQ0MsWUFBUixDQUFxQkMsR0FBckIsQ0FBeUIsVUFBekIsRUFBcUNiLGVBQXJDO0VBQ0FXLE9BQU8sQ0FBQ0MsWUFBUixDQUFxQkMsR0FBckIsQ0FBeUIsV0FBekIsRUFBc0NkLFNBQXRDO0VBQ0FZLE9BQU8sQ0FBQ0MsWUFBUixDQUFxQkMsR0FBckIsQ0FBeUIsa0JBQXpCLEVBQTZDLEdBQTdDO0VBQ0FGLE9BQU8sQ0FBQ0MsWUFBUixDQUFxQkMsR0FBckIsQ0FBeUIsS0FBekIsRUFBZ0NKLEdBQWhDO0VBRUFSLEdBQUcsQ0FBQyxNQUFELEVBQVMsS0FBVCxDQUFIO0VBQ0EsT0FBT0MsS0FBSyxDQUFDWSxPQUFOLENBQWNDLEdBQWQsQ0FBa0JKLE9BQU8sQ0FBQ0ssSUFBMUIsQ0FBUDtBQUNEOztBQUNNLGVBQWVDLG9CQUFmLENBQXFDO0VBQUVDO0FBQUYsQ0FBckMsRUFBNEQ7RUFDakVqQixHQUFHLENBQUMsTUFBRCxFQUFTLE9BQVQsQ0FBSDtFQUNBLE1BQU1rQixHQUFHLEdBQUcsMkNBQ1YsWUFEVSxHQUVULGlFQUFnRUQsaUJBQWtCLFNBRnpFLEdBR1YsYUFIRjtFQUlBakIsR0FBRyxDQUFDLE1BQUQsRUFBU2tCLEdBQVQsQ0FBSDtFQUNBLE9BQU9BLEdBQVA7QUFDRDs7QUFFTSxlQUFlQyxjQUFmLEdBQWlDO0VBQ3RDbkIsR0FBRyxDQUFDLE1BQUQsRUFBUyxPQUFULENBQUg7RUFDQSxNQUFNa0IsR0FBRyxHQUFHLDJDQUNWLFlBRFUsR0FFVixtQkFGVSxHQUdWLGFBSEY7RUFJQWxCLEdBQUcsQ0FBQyxNQUFELEVBQVNrQixHQUFULENBQUg7RUFDQSxPQUFPQSxHQUFQO0FBQ0QifQ==","map":{"version":3,"names":["initCall","_id","didNumber","initiatorNumber","log","axios","require","apiKey","applicationUrl","URL","config","application_url","url","origin","API_URL","searchParams","set","default","get","href","outgoingCallResponse","destinationNumber","out","hangupResponse"],"sourceRoot":"/Users/ramireddycharitha/git-explore/services/","sources":["KookooService.js"],"sourcesContent":["/* eslint-disable import/no-unresolved */\nimport config from \"../config/index\";\n\nexport async function initCall({ _id, didNumber, initiatorNumber }) {\n  log(\"info\", { _id, didNumber, initiatorNumber });\n  // eslint-disable-next-line global-require\n  const axios = require(\"axios\");\n  const apiKey = \"KK232c980690c3cd35bc9ce18db9477d8b\";\n  const applicationUrl = new URL(config.application_url);\n  // console.log(\"+++++++++++++++++++ the applicaiton url is \"+applicationUrl.origin)\n  const url = `${applicationUrl.origin}/v1/organisation/outbound-call/external/call/handle/${_id}`;\n  log(\"info\", url);\n  // console.log('URL FOR KOOKOO\\n\\n\\n\\n\\n'+url);\n  const API_URL = new URL(\"http://kookoo.in/outbound/outbound.php\");\n  API_URL.searchParams.set(\"api_key\", apiKey);\n  API_URL.searchParams.set(\"phone_no\", initiatorNumber);\n  API_URL.searchParams.set(\"caller_id\", didNumber);\n  API_URL.searchParams.set(\"outbound_version\", \"2\");\n  API_URL.searchParams.set(\"url\", url);\n\n  log(\"info\", \"end\");\n  return axios.default.get(API_URL.href);\n}\nexport async function outgoingCallResponse ({ destinationNumber }) {\n  log('info', 'start');\n  const out = '<?xml version=\"1.0\" encoding=\"UTF-8\"?>' +\n    '<response>' +\n    `<dial record=\"true\" limittime=\"1000\" timeout=\"30\" moh=\"ring\" >${destinationNumber}</dial>` +\n    '</response>';\n  log('info', out);\n  return out;\n}\n\nexport async function hangupResponse () {\n  log('info', 'start');\n  const out = '<?xml version=\"1.0\" encoding=\"UTF-8\"?>' +\n    '<response>' +\n    '<hangup></hangup>' +\n    '</response>';\n  log('info', out);\n  return out;\n}\n"],"mappings":";;;;;;;;;AACA;;;;AADA;AAGO,eAAeA,QAAf,CAAwB;EAAEC,GAAF;EAAOC,SAAP;EAAkBC;AAAlB,CAAxB,EAA6D;EAClEC,GAAG,CAAC,MAAD,EAAS;IAAEH,GAAF;IAAOC,SAAP;IAAkBC;EAAlB,CAAT,CAAH,CADkE,CAElE;;EACA,MAAME,KAAK,GAAGC,OAAO,CAAC,OAAD,CAArB;;EACA,MAAMC,MAAM,GAAG,oCAAf;EACA,MAAMC,cAAc,GAAG,IAAIC,GAAJ,CAAQC,eAAOC,eAAf,CAAvB,CALkE,CAMlE;;EACA,MAAMC,GAAG,GAAI,GAAEJ,cAAc,CAACK,MAAO,uDAAsDZ,GAAI,EAA/F;EACAG,GAAG,CAAC,MAAD,EAASQ,GAAT,CAAH,CARkE,CASlE;;EACA,MAAME,OAAO,GAAG,IAAIL,GAAJ,CAAQ,wCAAR,CAAhB;EACAK,OAAO,CAACC,YAAR,CAAqBC,GAArB,CAAyB,SAAzB,EAAoCT,MAApC;EACAO,OAAO,CAACC,YAAR,CAAqBC,GAArB,CAAyB,UAAzB,EAAqCb,eAArC;EACAW,OAAO,CAACC,YAAR,CAAqBC,GAArB,CAAyB,WAAzB,EAAsCd,SAAtC;EACAY,OAAO,CAACC,YAAR,CAAqBC,GAArB,CAAyB,kBAAzB,EAA6C,GAA7C;EACAF,OAAO,CAACC,YAAR,CAAqBC,GAArB,CAAyB,KAAzB,EAAgCJ,GAAhC;EAEAR,GAAG,CAAC,MAAD,EAAS,KAAT,CAAH;EACA,OAAOC,KAAK,CAACY,OAAN,CAAcC,GAAd,CAAkBJ,OAAO,CAACK,IAA1B,CAAP;AACD;;AACM,eAAeC,oBAAf,CAAqC;EAAEC;AAAF,CAArC,EAA4D;EACjEjB,GAAG,CAAC,MAAD,EAAS,OAAT,CAAH;EACA,MAAMkB,GAAG,GAAG,2CACV,YADU,GAET,iEAAgED,iBAAkB,SAFzE,GAGV,aAHF;EAIAjB,GAAG,CAAC,MAAD,EAASkB,GAAT,CAAH;EACA,OAAOA,GAAP;AACD;;AAEM,eAAeC,cAAf,GAAiC;EACtCnB,GAAG,CAAC,MAAD,EAAS,OAAT,CAAH;EACA,MAAMkB,GAAG,GAAG,2CACV,YADU,GAEV,mBAFU,GAGV,aAHF;EAIAlB,GAAG,CAAC,MAAD,EAASkB,GAAT,CAAH;EACA,OAAOA,GAAP;AACD"}},"mtime":1654155751043},"{\"assumptions\":{},\"sourceRoot\":\"/Users/ramireddycharitha/git-explore/services/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/ramireddycharitha/git-explore\",\"filename\":\"/Users/ramireddycharitha/git-explore/services/callEventService.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"default\",\"root\":\"/Users/ramireddycharitha/git-explore\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.17.10:default":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Dial = Dial;\nexports.Disconnect = Disconnect;\nexports.Hangup = Hangup;\nexports.NewCall = NewCall;\n\nvar mongoose = _interopRequireWildcard(require(\"mongoose\"));\n\nvar AbstractModels = _interopRequireWildcard(require(\"../models/AbstractModels\"));\n\nvar kookooService = _interopRequireWildcard(require(\"./KookooService\"));\n\nvar _mongodb = require(\"mongodb\");\n\nvar _index = require(\"../models/mainDbSchema/index\");\n\nvar _DeductCallMinutesService = require(\"./DeductCallMinutesService\");\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\n/* eslint no-import-assign: 0 */\nmongoose.Promise = global.Promise; // ignore: no-import-assign\n\nasync function NewCall(call, data) {\n  // logToJSON('info', { call, data });\n  // console.log('NEWCAll \\n' + call, data);\n  await AbstractModels.mongoFindOneAndUpdate(_index.BusinessCalls, {\n    _id: (0, _mongodb.ObjectId)(call._id)\n  }, {\n    status: data.status,\n    time: new Date().toISOString()\n  }); // const remainingBalance = await get_remaining_call_minutes(call.organisationId);\n  // if (remainingBalance < 0)\n\n  const outgoingCallResponse = kookooService.outgoingCallResponse({\n    destinationNumber: call.destinationNumber\n  }); // console.log('outgoingCallResponse \\n \\n \\n' + outgoingCallResponse);\n\n  return outgoingCallResponse;\n}\n\nasync function Dial(call, data) {\n  const duration = data.callduration; // console.log('CALL HANDLE DIAL DURATION\\n\\n\\n\\n\\n\\n\\n'+ duration);\n\n  await AbstractModels.mongoFindOneAndUpdate(_index.BusinessCalls, {\n    _id: call._id\n  }, {\n    duration,\n    status: data.status,\n    recording: data.data,\n    isCallEnded: true\n  });\n  await (0, _DeductCallMinutesService.adjust_organisation_call_minutes)(call.organisationId, duration);\n  const kookooHangupResponse = kookooService.hangupResponse();\n  log('info', kookooHangupResponse);\n  return kookooHangupResponse;\n}\n\nasync function Hangup(call, data) {\n  log('info', {\n    call,\n    data\n  });\n  const duration = data.callduration; // console.log('CALL HANDLE HANGUP DURATION \\n\\n\\n\\n\\n'+ duration);\n\n  await AbstractModels.mongoFindOneAndUpdate(_index.BusinessCalls, {\n    _id: call._id\n  }, {\n    duration,\n    status: data.status,\n    isCallEnded: true,\n    recording: data.data\n  });\n  await (0, _DeductCallMinutesService.adjust_organisation_call_minutes)(call.organisationId, duration);\n  log('info', 'end');\n  return '';\n}\n\nasync function Disconnect(call, data) {\n  log('info', {\n    call,\n    data\n  }); // console.log('CALL HANDLE DISCONNECT \\n\\n\\n\\n\\n'+ data);\n  // return await AbstractModels.mongoFindOneAndUpdate(BusinessCalls, { _id: call._id }, {\n  //   status: data.status,\n  //   duration: data.callduration,\n  //   isCallEnded: true,\n  // });\n\n  log('info', 'end');\n  return '';\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJtb25nb29zZSIsIlByb21pc2UiLCJnbG9iYWwiLCJOZXdDYWxsIiwiY2FsbCIsImRhdGEiLCJBYnN0cmFjdE1vZGVscyIsIm1vbmdvRmluZE9uZUFuZFVwZGF0ZSIsIkJ1c2luZXNzQ2FsbHMiLCJfaWQiLCJzdGF0dXMiLCJ0aW1lIiwiRGF0ZSIsInRvSVNPU3RyaW5nIiwib3V0Z29pbmdDYWxsUmVzcG9uc2UiLCJrb29rb29TZXJ2aWNlIiwiZGVzdGluYXRpb25OdW1iZXIiLCJEaWFsIiwiZHVyYXRpb24iLCJjYWxsZHVyYXRpb24iLCJyZWNvcmRpbmciLCJpc0NhbGxFbmRlZCIsIm9yZ2FuaXNhdGlvbklkIiwia29va29vSGFuZ3VwUmVzcG9uc2UiLCJoYW5ndXBSZXNwb25zZSIsImxvZyIsIkhhbmd1cCIsIkRpc2Nvbm5lY3QiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy9yYW1pcmVkZHljaGFyaXRoYS9naXQtZXhwbG9yZS9zZXJ2aWNlcy8iLCJzb3VyY2VzIjpbImNhbGxFdmVudFNlcnZpY2UuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyogZXNsaW50IG5vLWltcG9ydC1hc3NpZ246IDAgKi9cbmltcG9ydCAqIGFzIG1vbmdvb3NlIGZyb20gJ21vbmdvb3NlJztcbmltcG9ydCAqIGFzIEFic3RyYWN0TW9kZWxzIGZyb20gXCIuLi9tb2RlbHMvQWJzdHJhY3RNb2RlbHNcIjtcbmltcG9ydCAqIGFzIGtvb2tvb1NlcnZpY2UgZnJvbSBcIi4vS29va29vU2VydmljZVwiO1xuaW1wb3J0IHsgT2JqZWN0SWQgfSBmcm9tICdtb25nb2RiJztcbmltcG9ydCB7QnVzaW5lc3NDYWxsc30gZnJvbSBcIi4uL21vZGVscy9tYWluRGJTY2hlbWEvaW5kZXhcIjtcbmltcG9ydCB7IGFkanVzdF9vcmdhbmlzYXRpb25fY2FsbF9taW51dGVzIH0gZnJvbSBcIi4vRGVkdWN0Q2FsbE1pbnV0ZXNTZXJ2aWNlXCI7XG5cbm1vbmdvb3NlLlByb21pc2UgPSBnbG9iYWwuUHJvbWlzZTsgLy8gaWdub3JlOiBuby1pbXBvcnQtYXNzaWduXG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBOZXdDYWxsIChjYWxsLCBkYXRhKSB7XG4gIC8vIGxvZ1RvSlNPTignaW5mbycsIHsgY2FsbCwgZGF0YSB9KTtcbiAgLy8gY29uc29sZS5sb2coJ05FV0NBbGwgXFxuJyArIGNhbGwsIGRhdGEpO1xuICBhd2FpdCBBYnN0cmFjdE1vZGVscy5tb25nb0ZpbmRPbmVBbmRVcGRhdGUoQnVzaW5lc3NDYWxscywgeyBfaWQ6T2JqZWN0SWQoY2FsbC5faWQpIH0sIHtcbiAgICBzdGF0dXM6IGRhdGEuc3RhdHVzLFxuICAgIHRpbWU6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICB9KTtcblxuICAvLyBjb25zdCByZW1haW5pbmdCYWxhbmNlID0gYXdhaXQgZ2V0X3JlbWFpbmluZ19jYWxsX21pbnV0ZXMoY2FsbC5vcmdhbmlzYXRpb25JZCk7XG4gIC8vIGlmIChyZW1haW5pbmdCYWxhbmNlIDwgMClcblxuICBjb25zdCBvdXRnb2luZ0NhbGxSZXNwb25zZSA9IGtvb2tvb1NlcnZpY2Uub3V0Z29pbmdDYWxsUmVzcG9uc2UoeyBkZXN0aW5hdGlvbk51bWJlcjogY2FsbC5kZXN0aW5hdGlvbk51bWJlciB9KTtcbiAgLy8gY29uc29sZS5sb2coJ291dGdvaW5nQ2FsbFJlc3BvbnNlIFxcbiBcXG4gXFxuJyArIG91dGdvaW5nQ2FsbFJlc3BvbnNlKTtcbiAgcmV0dXJuIG91dGdvaW5nQ2FsbFJlc3BvbnNlO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gRGlhbCAoY2FsbCwgZGF0YSkge1xuICBjb25zdCBkdXJhdGlvbiA9IGRhdGEuY2FsbGR1cmF0aW9uO1xuICAvLyBjb25zb2xlLmxvZygnQ0FMTCBIQU5ETEUgRElBTCBEVVJBVElPTlxcblxcblxcblxcblxcblxcblxcbicrIGR1cmF0aW9uKTtcbiAgYXdhaXQgQWJzdHJhY3RNb2RlbHMubW9uZ29GaW5kT25lQW5kVXBkYXRlKEJ1c2luZXNzQ2FsbHMsIHsgX2lkOiBjYWxsLl9pZCB9LCB7XG4gICAgZHVyYXRpb24sXG4gICAgc3RhdHVzOiBkYXRhLnN0YXR1cyxcbiAgICByZWNvcmRpbmc6IGRhdGEuZGF0YSxcbiAgICBpc0NhbGxFbmRlZDogdHJ1ZVxuICB9KTtcblxuICBhd2FpdCBhZGp1c3Rfb3JnYW5pc2F0aW9uX2NhbGxfbWludXRlcyhjYWxsLm9yZ2FuaXNhdGlvbklkLCBkdXJhdGlvbik7XG5cbiAgY29uc3Qga29va29vSGFuZ3VwUmVzcG9uc2UgPSBrb29rb29TZXJ2aWNlLmhhbmd1cFJlc3BvbnNlKCk7XG4gIGxvZygnaW5mbycsIGtvb2tvb0hhbmd1cFJlc3BvbnNlKTtcbiAgcmV0dXJuIGtvb2tvb0hhbmd1cFJlc3BvbnNlO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gSGFuZ3VwIChjYWxsLCBkYXRhKSB7XG4gIGxvZygnaW5mbycsIHsgY2FsbCwgZGF0YSB9KTtcbiAgY29uc3QgZHVyYXRpb24gPSBkYXRhLmNhbGxkdXJhdGlvbjtcbiAgLy8gY29uc29sZS5sb2coJ0NBTEwgSEFORExFIEhBTkdVUCBEVVJBVElPTiBcXG5cXG5cXG5cXG5cXG4nKyBkdXJhdGlvbik7XG4gIGF3YWl0IEFic3RyYWN0TW9kZWxzLm1vbmdvRmluZE9uZUFuZFVwZGF0ZShCdXNpbmVzc0NhbGxzLCB7IF9pZDogY2FsbC5faWQgfSwge1xuICAgIGR1cmF0aW9uLFxuICAgIHN0YXR1czogZGF0YS5zdGF0dXMsXG4gICAgaXNDYWxsRW5kZWQ6IHRydWUsXG4gICAgcmVjb3JkaW5nOiBkYXRhLmRhdGFcbiAgfSk7XG5cbiAgYXdhaXQgYWRqdXN0X29yZ2FuaXNhdGlvbl9jYWxsX21pbnV0ZXMoY2FsbC5vcmdhbmlzYXRpb25JZCwgZHVyYXRpb24pO1xuXG4gIGxvZygnaW5mbycsICdlbmQnKTtcbiAgcmV0dXJuICcnO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gRGlzY29ubmVjdCAoY2FsbCwgZGF0YSkge1xuICBsb2coJ2luZm8nLCB7IGNhbGwsIGRhdGEgfSk7XG4gIC8vIGNvbnNvbGUubG9nKCdDQUxMIEhBTkRMRSBESVNDT05ORUNUIFxcblxcblxcblxcblxcbicrIGRhdGEpO1xuICAvLyByZXR1cm4gYXdhaXQgQWJzdHJhY3RNb2RlbHMubW9uZ29GaW5kT25lQW5kVXBkYXRlKEJ1c2luZXNzQ2FsbHMsIHsgX2lkOiBjYWxsLl9pZCB9LCB7XG4gIC8vICAgc3RhdHVzOiBkYXRhLnN0YXR1cyxcbiAgLy8gICBkdXJhdGlvbjogZGF0YS5jYWxsZHVyYXRpb24sXG4gIC8vICAgaXNDYWxsRW5kZWQ6IHRydWUsXG4gIC8vIH0pO1xuXG4gIGxvZygnaW5mbycsICdlbmQnKTtcbiAgcmV0dXJuICcnO1xufVxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7Ozs7OztBQU5BO0FBUUFBLFFBQVEsQ0FBQ0MsT0FBVCxHQUFtQkMsTUFBTSxDQUFDRCxPQUExQixDLENBQW1DOztBQUU1QixlQUFlRSxPQUFmLENBQXdCQyxJQUF4QixFQUE4QkMsSUFBOUIsRUFBb0M7RUFDekM7RUFDQTtFQUNBLE1BQU1DLGNBQWMsQ0FBQ0MscUJBQWYsQ0FBcUNDLG9CQUFyQyxFQUFvRDtJQUFFQyxHQUFHLEVBQUMsdUJBQVNMLElBQUksQ0FBQ0ssR0FBZDtFQUFOLENBQXBELEVBQWdGO0lBQ3BGQyxNQUFNLEVBQUVMLElBQUksQ0FBQ0ssTUFEdUU7SUFFcEZDLElBQUksRUFBRSxJQUFJQyxJQUFKLEdBQVdDLFdBQVg7RUFGOEUsQ0FBaEYsQ0FBTixDQUh5QyxDQVF6QztFQUNBOztFQUVBLE1BQU1DLG9CQUFvQixHQUFHQyxhQUFhLENBQUNELG9CQUFkLENBQW1DO0lBQUVFLGlCQUFpQixFQUFFWixJQUFJLENBQUNZO0VBQTFCLENBQW5DLENBQTdCLENBWHlDLENBWXpDOztFQUNBLE9BQU9GLG9CQUFQO0FBQ0Q7O0FBRU0sZUFBZUcsSUFBZixDQUFxQmIsSUFBckIsRUFBMkJDLElBQTNCLEVBQWlDO0VBQ3RDLE1BQU1hLFFBQVEsR0FBR2IsSUFBSSxDQUFDYyxZQUF0QixDQURzQyxDQUV0Qzs7RUFDQSxNQUFNYixjQUFjLENBQUNDLHFCQUFmLENBQXFDQyxvQkFBckMsRUFBb0Q7SUFBRUMsR0FBRyxFQUFFTCxJQUFJLENBQUNLO0VBQVosQ0FBcEQsRUFBdUU7SUFDM0VTLFFBRDJFO0lBRTNFUixNQUFNLEVBQUVMLElBQUksQ0FBQ0ssTUFGOEQ7SUFHM0VVLFNBQVMsRUFBRWYsSUFBSSxDQUFDQSxJQUgyRDtJQUkzRWdCLFdBQVcsRUFBRTtFQUo4RCxDQUF2RSxDQUFOO0VBT0EsTUFBTSxnRUFBaUNqQixJQUFJLENBQUNrQixjQUF0QyxFQUFzREosUUFBdEQsQ0FBTjtFQUVBLE1BQU1LLG9CQUFvQixHQUFHUixhQUFhLENBQUNTLGNBQWQsRUFBN0I7RUFDQUMsR0FBRyxDQUFDLE1BQUQsRUFBU0Ysb0JBQVQsQ0FBSDtFQUNBLE9BQU9BLG9CQUFQO0FBQ0Q7O0FBRU0sZUFBZUcsTUFBZixDQUF1QnRCLElBQXZCLEVBQTZCQyxJQUE3QixFQUFtQztFQUN4Q29CLEdBQUcsQ0FBQyxNQUFELEVBQVM7SUFBRXJCLElBQUY7SUFBUUM7RUFBUixDQUFULENBQUg7RUFDQSxNQUFNYSxRQUFRLEdBQUdiLElBQUksQ0FBQ2MsWUFBdEIsQ0FGd0MsQ0FHeEM7O0VBQ0EsTUFBTWIsY0FBYyxDQUFDQyxxQkFBZixDQUFxQ0Msb0JBQXJDLEVBQW9EO0lBQUVDLEdBQUcsRUFBRUwsSUFBSSxDQUFDSztFQUFaLENBQXBELEVBQXVFO0lBQzNFUyxRQUQyRTtJQUUzRVIsTUFBTSxFQUFFTCxJQUFJLENBQUNLLE1BRjhEO0lBRzNFVyxXQUFXLEVBQUUsSUFIOEQ7SUFJM0VELFNBQVMsRUFBRWYsSUFBSSxDQUFDQTtFQUoyRCxDQUF2RSxDQUFOO0VBT0EsTUFBTSxnRUFBaUNELElBQUksQ0FBQ2tCLGNBQXRDLEVBQXNESixRQUF0RCxDQUFOO0VBRUFPLEdBQUcsQ0FBQyxNQUFELEVBQVMsS0FBVCxDQUFIO0VBQ0EsT0FBTyxFQUFQO0FBQ0Q7O0FBRU0sZUFBZUUsVUFBZixDQUEyQnZCLElBQTNCLEVBQWlDQyxJQUFqQyxFQUF1QztFQUM1Q29CLEdBQUcsQ0FBQyxNQUFELEVBQVM7SUFBRXJCLElBQUY7SUFBUUM7RUFBUixDQUFULENBQUgsQ0FENEMsQ0FFNUM7RUFDQTtFQUNBO0VBQ0E7RUFDQTtFQUNBOztFQUVBb0IsR0FBRyxDQUFDLE1BQUQsRUFBUyxLQUFULENBQUg7RUFDQSxPQUFPLEVBQVA7QUFDRCJ9","map":{"version":3,"names":["mongoose","Promise","global","NewCall","call","data","AbstractModels","mongoFindOneAndUpdate","BusinessCalls","_id","status","time","Date","toISOString","outgoingCallResponse","kookooService","destinationNumber","Dial","duration","callduration","recording","isCallEnded","organisationId","kookooHangupResponse","hangupResponse","log","Hangup","Disconnect"],"sourceRoot":"/Users/ramireddycharitha/git-explore/services/","sources":["callEventService.js"],"sourcesContent":["/* eslint no-import-assign: 0 */\nimport * as mongoose from 'mongoose';\nimport * as AbstractModels from \"../models/AbstractModels\";\nimport * as kookooService from \"./KookooService\";\nimport { ObjectId } from 'mongodb';\nimport {BusinessCalls} from \"../models/mainDbSchema/index\";\nimport { adjust_organisation_call_minutes } from \"./DeductCallMinutesService\";\n\nmongoose.Promise = global.Promise; // ignore: no-import-assign\n\nexport async function NewCall (call, data) {\n  // logToJSON('info', { call, data });\n  // console.log('NEWCAll \\n' + call, data);\n  await AbstractModels.mongoFindOneAndUpdate(BusinessCalls, { _id:ObjectId(call._id) }, {\n    status: data.status,\n    time: new Date().toISOString()\n  });\n\n  // const remainingBalance = await get_remaining_call_minutes(call.organisationId);\n  // if (remainingBalance < 0)\n\n  const outgoingCallResponse = kookooService.outgoingCallResponse({ destinationNumber: call.destinationNumber });\n  // console.log('outgoingCallResponse \\n \\n \\n' + outgoingCallResponse);\n  return outgoingCallResponse;\n}\n\nexport async function Dial (call, data) {\n  const duration = data.callduration;\n  // console.log('CALL HANDLE DIAL DURATION\\n\\n\\n\\n\\n\\n\\n'+ duration);\n  await AbstractModels.mongoFindOneAndUpdate(BusinessCalls, { _id: call._id }, {\n    duration,\n    status: data.status,\n    recording: data.data,\n    isCallEnded: true\n  });\n\n  await adjust_organisation_call_minutes(call.organisationId, duration);\n\n  const kookooHangupResponse = kookooService.hangupResponse();\n  log('info', kookooHangupResponse);\n  return kookooHangupResponse;\n}\n\nexport async function Hangup (call, data) {\n  log('info', { call, data });\n  const duration = data.callduration;\n  // console.log('CALL HANDLE HANGUP DURATION \\n\\n\\n\\n\\n'+ duration);\n  await AbstractModels.mongoFindOneAndUpdate(BusinessCalls, { _id: call._id }, {\n    duration,\n    status: data.status,\n    isCallEnded: true,\n    recording: data.data\n  });\n\n  await adjust_organisation_call_minutes(call.organisationId, duration);\n\n  log('info', 'end');\n  return '';\n}\n\nexport async function Disconnect (call, data) {\n  log('info', { call, data });\n  // console.log('CALL HANDLE DISCONNECT \\n\\n\\n\\n\\n'+ data);\n  // return await AbstractModels.mongoFindOneAndUpdate(BusinessCalls, { _id: call._id }, {\n  //   status: data.status,\n  //   duration: data.callduration,\n  //   isCallEnded: true,\n  // });\n\n  log('info', 'end');\n  return '';\n}\n"],"mappings":";;;;;;;;;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;;;;;AANA;AAQAA,QAAQ,CAACC,OAAT,GAAmBC,MAAM,CAACD,OAA1B,C,CAAmC;;AAE5B,eAAeE,OAAf,CAAwBC,IAAxB,EAA8BC,IAA9B,EAAoC;EACzC;EACA;EACA,MAAMC,cAAc,CAACC,qBAAf,CAAqCC,oBAArC,EAAoD;IAAEC,GAAG,EAAC,uBAASL,IAAI,CAACK,GAAd;EAAN,CAApD,EAAgF;IACpFC,MAAM,EAAEL,IAAI,CAACK,MADuE;IAEpFC,IAAI,EAAE,IAAIC,IAAJ,GAAWC,WAAX;EAF8E,CAAhF,CAAN,CAHyC,CAQzC;EACA;;EAEA,MAAMC,oBAAoB,GAAGC,aAAa,CAACD,oBAAd,CAAmC;IAAEE,iBAAiB,EAAEZ,IAAI,CAACY;EAA1B,CAAnC,CAA7B,CAXyC,CAYzC;;EACA,OAAOF,oBAAP;AACD;;AAEM,eAAeG,IAAf,CAAqBb,IAArB,EAA2BC,IAA3B,EAAiC;EACtC,MAAMa,QAAQ,GAAGb,IAAI,CAACc,YAAtB,CADsC,CAEtC;;EACA,MAAMb,cAAc,CAACC,qBAAf,CAAqCC,oBAArC,EAAoD;IAAEC,GAAG,EAAEL,IAAI,CAACK;EAAZ,CAApD,EAAuE;IAC3ES,QAD2E;IAE3ER,MAAM,EAAEL,IAAI,CAACK,MAF8D;IAG3EU,SAAS,EAAEf,IAAI,CAACA,IAH2D;IAI3EgB,WAAW,EAAE;EAJ8D,CAAvE,CAAN;EAOA,MAAM,gEAAiCjB,IAAI,CAACkB,cAAtC,EAAsDJ,QAAtD,CAAN;EAEA,MAAMK,oBAAoB,GAAGR,aAAa,CAACS,cAAd,EAA7B;EACAC,GAAG,CAAC,MAAD,EAASF,oBAAT,CAAH;EACA,OAAOA,oBAAP;AACD;;AAEM,eAAeG,MAAf,CAAuBtB,IAAvB,EAA6BC,IAA7B,EAAmC;EACxCoB,GAAG,CAAC,MAAD,EAAS;IAAErB,IAAF;IAAQC;EAAR,CAAT,CAAH;EACA,MAAMa,QAAQ,GAAGb,IAAI,CAACc,YAAtB,CAFwC,CAGxC;;EACA,MAAMb,cAAc,CAACC,qBAAf,CAAqCC,oBAArC,EAAoD;IAAEC,GAAG,EAAEL,IAAI,CAACK;EAAZ,CAApD,EAAuE;IAC3ES,QAD2E;IAE3ER,MAAM,EAAEL,IAAI,CAACK,MAF8D;IAG3EW,WAAW,EAAE,IAH8D;IAI3ED,SAAS,EAAEf,IAAI,CAACA;EAJ2D,CAAvE,CAAN;EAOA,MAAM,gEAAiCD,IAAI,CAACkB,cAAtC,EAAsDJ,QAAtD,CAAN;EAEAO,GAAG,CAAC,MAAD,EAAS,KAAT,CAAH;EACA,OAAO,EAAP;AACD;;AAEM,eAAeE,UAAf,CAA2BvB,IAA3B,EAAiCC,IAAjC,EAAuC;EAC5CoB,GAAG,CAAC,MAAD,EAAS;IAAErB,IAAF;IAAQC;EAAR,CAAT,CAAH,CAD4C,CAE5C;EACA;EACA;EACA;EACA;EACA;;EAEAoB,GAAG,CAAC,MAAD,EAAS,KAAT,CAAH;EACA,OAAO,EAAP;AACD"}},"mtime":1654155484821},"{\"assumptions\":{},\"sourceRoot\":\"/Users/ramireddycharitha/git-explore/services/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/ramireddycharitha/git-explore\",\"filename\":\"/Users/ramireddycharitha/git-explore/services/DeductCallMinutesService.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"default\",\"root\":\"/Users/ramireddycharitha/git-explore\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.17.10:default":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.get_remaining_call_minutes = exports.adjust_organisation_call_minutes = void 0;\n\nvar AbstractModels = _interopRequireWildcard(require(\"../models/AbstractModels\"));\n\nvar _index = require(\"../models/mainDbSchema/index\");\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nconst get_remaining_call_minutes = async organisation_id => {\n  log(\"info\", {\n    organisation_id\n  });\n  const organisation = await AbstractModels.mongoFindOne(_index.Organisations, {\n    organisation_id: organisation_id\n  });\n  const out = parseInt((organisation.call_minutes_available || 0).toString() || \"0\");\n  log(\"info\", out);\n  console.log('GET REMAINING CALLMINUTES OUT RESPONSE\\n\\n\\n\\n\\n' + out);\n  return out;\n};\n\nexports.get_remaining_call_minutes = get_remaining_call_minutes;\n\nconst adjust_organisation_call_minutes = async (organisation_id, call_duration) => {\n  console.log('ADJUST ORGANISATION CALL MINUTES\\n\\n\\n\\n\\n ', {\n    organisation_id,\n    call_duration\n  });\n  await AbstractModels.mongoUpdateOne(_index.Organisations, {\n    organisation_id\n  }, {\n    $inc: {\n      call_minutes_available: -1 * call_duration\n    }\n  });\n};\n\nexports.adjust_organisation_call_minutes = adjust_organisation_call_minutes;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJnZXRfcmVtYWluaW5nX2NhbGxfbWludXRlcyIsIm9yZ2FuaXNhdGlvbl9pZCIsImxvZyIsIm9yZ2FuaXNhdGlvbiIsIkFic3RyYWN0TW9kZWxzIiwibW9uZ29GaW5kT25lIiwiT3JnYW5pc2F0aW9ucyIsIm91dCIsInBhcnNlSW50IiwiY2FsbF9taW51dGVzX2F2YWlsYWJsZSIsInRvU3RyaW5nIiwiY29uc29sZSIsImFkanVzdF9vcmdhbmlzYXRpb25fY2FsbF9taW51dGVzIiwiY2FsbF9kdXJhdGlvbiIsIm1vbmdvVXBkYXRlT25lIiwiJGluYyJdLCJzb3VyY2VSb290IjoiL1VzZXJzL3JhbWlyZWRkeWNoYXJpdGhhL2dpdC1leHBsb3JlL3NlcnZpY2VzLyIsInNvdXJjZXMiOlsiRGVkdWN0Q2FsbE1pbnV0ZXNTZXJ2aWNlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIEFic3RyYWN0TW9kZWxzIGZyb20gXCIuLi9tb2RlbHMvQWJzdHJhY3RNb2RlbHNcIjtcbmltcG9ydCB7T3JnYW5pc2F0aW9uc30gZnJvbSBcIi4uL21vZGVscy9tYWluRGJTY2hlbWEvaW5kZXhcIjtcblxuZXhwb3J0IGNvbnN0IGdldF9yZW1haW5pbmdfY2FsbF9taW51dGVzID0gYXN5bmMgKG9yZ2FuaXNhdGlvbl9pZCkgPT4ge1xuICBsb2coXCJpbmZvXCIsIHsgb3JnYW5pc2F0aW9uX2lkIH0pO1xuICBjb25zdCBvcmdhbmlzYXRpb24gPSBhd2FpdCBBYnN0cmFjdE1vZGVscy5tb25nb0ZpbmRPbmUoXG4gICAgT3JnYW5pc2F0aW9ucyxcbiAgICB7IG9yZ2FuaXNhdGlvbl9pZDogb3JnYW5pc2F0aW9uX2lkIH1cbiAgKTtcbiAgY29uc3Qgb3V0ID0gcGFyc2VJbnQoKG9yZ2FuaXNhdGlvbi5jYWxsX21pbnV0ZXNfYXZhaWxhYmxlIHx8IDApLnRvU3RyaW5nKCkgfHwgXCIwXCIpO1xuICBsb2coXCJpbmZvXCIsIG91dCk7XG4gIGNvbnNvbGUubG9nKCdHRVQgUkVNQUlOSU5HIENBTExNSU5VVEVTIE9VVCBSRVNQT05TRVxcblxcblxcblxcblxcbicrb3V0KTtcbiAgcmV0dXJuIG91dDtcbn07XG5cbmV4cG9ydCBjb25zdCBhZGp1c3Rfb3JnYW5pc2F0aW9uX2NhbGxfbWludXRlcyA9IGFzeW5jIChvcmdhbmlzYXRpb25faWQsIGNhbGxfZHVyYXRpb24pID0+IHtcbiAgY29uc29sZS5sb2coJ0FESlVTVCBPUkdBTklTQVRJT04gQ0FMTCBNSU5VVEVTXFxuXFxuXFxuXFxuXFxuICcsIHsgb3JnYW5pc2F0aW9uX2lkLCBjYWxsX2R1cmF0aW9uIH0pO1xuICBhd2FpdCBBYnN0cmFjdE1vZGVscy5tb25nb1VwZGF0ZU9uZShcbiAgICBPcmdhbmlzYXRpb25zLFxuICAgIHsgb3JnYW5pc2F0aW9uX2lkIH0sXG4gICAgeyAkaW5jOiB7IGNhbGxfbWludXRlc19hdmFpbGFibGU6IC0xICogY2FsbF9kdXJhdGlvbiB9IH1cbiAgKTtcbn07XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTs7QUFDQTs7Ozs7O0FBRU8sTUFBTUEsMEJBQTBCLEdBQUcsTUFBT0MsZUFBUCxJQUEyQjtFQUNuRUMsR0FBRyxDQUFDLE1BQUQsRUFBUztJQUFFRDtFQUFGLENBQVQsQ0FBSDtFQUNBLE1BQU1FLFlBQVksR0FBRyxNQUFNQyxjQUFjLENBQUNDLFlBQWYsQ0FDekJDLG9CQUR5QixFQUV6QjtJQUFFTCxlQUFlLEVBQUVBO0VBQW5CLENBRnlCLENBQTNCO0VBSUEsTUFBTU0sR0FBRyxHQUFHQyxRQUFRLENBQUMsQ0FBQ0wsWUFBWSxDQUFDTSxzQkFBYixJQUF1QyxDQUF4QyxFQUEyQ0MsUUFBM0MsTUFBeUQsR0FBMUQsQ0FBcEI7RUFDQVIsR0FBRyxDQUFDLE1BQUQsRUFBU0ssR0FBVCxDQUFIO0VBQ0FJLE9BQU8sQ0FBQ1QsR0FBUixDQUFZLHFEQUFtREssR0FBL0Q7RUFDQSxPQUFPQSxHQUFQO0FBQ0QsQ0FWTTs7OztBQVlBLE1BQU1LLGdDQUFnQyxHQUFHLE9BQU9YLGVBQVAsRUFBd0JZLGFBQXhCLEtBQTBDO0VBQ3hGRixPQUFPLENBQUNULEdBQVIsQ0FBWSw2Q0FBWixFQUEyRDtJQUFFRCxlQUFGO0lBQW1CWTtFQUFuQixDQUEzRDtFQUNBLE1BQU1ULGNBQWMsQ0FBQ1UsY0FBZixDQUNKUixvQkFESSxFQUVKO0lBQUVMO0VBQUYsQ0FGSSxFQUdKO0lBQUVjLElBQUksRUFBRTtNQUFFTixzQkFBc0IsRUFBRSxDQUFDLENBQUQsR0FBS0k7SUFBL0I7RUFBUixDQUhJLENBQU47QUFLRCxDQVBNIn0=","map":{"version":3,"names":["get_remaining_call_minutes","organisation_id","log","organisation","AbstractModels","mongoFindOne","Organisations","out","parseInt","call_minutes_available","toString","console","adjust_organisation_call_minutes","call_duration","mongoUpdateOne","$inc"],"sourceRoot":"/Users/ramireddycharitha/git-explore/services/","sources":["DeductCallMinutesService.js"],"sourcesContent":["import * as AbstractModels from \"../models/AbstractModels\";\nimport {Organisations} from \"../models/mainDbSchema/index\";\n\nexport const get_remaining_call_minutes = async (organisation_id) => {\n  log(\"info\", { organisation_id });\n  const organisation = await AbstractModels.mongoFindOne(\n    Organisations,\n    { organisation_id: organisation_id }\n  );\n  const out = parseInt((organisation.call_minutes_available || 0).toString() || \"0\");\n  log(\"info\", out);\n  console.log('GET REMAINING CALLMINUTES OUT RESPONSE\\n\\n\\n\\n\\n'+out);\n  return out;\n};\n\nexport const adjust_organisation_call_minutes = async (organisation_id, call_duration) => {\n  console.log('ADJUST ORGANISATION CALL MINUTES\\n\\n\\n\\n\\n ', { organisation_id, call_duration });\n  await AbstractModels.mongoUpdateOne(\n    Organisations,\n    { organisation_id },\n    { $inc: { call_minutes_available: -1 * call_duration } }\n  );\n};\n"],"mappings":";;;;;;;AAAA;;AACA;;;;;;AAEO,MAAMA,0BAA0B,GAAG,MAAOC,eAAP,IAA2B;EACnEC,GAAG,CAAC,MAAD,EAAS;IAAED;EAAF,CAAT,CAAH;EACA,MAAME,YAAY,GAAG,MAAMC,cAAc,CAACC,YAAf,CACzBC,oBADyB,EAEzB;IAAEL,eAAe,EAAEA;EAAnB,CAFyB,CAA3B;EAIA,MAAMM,GAAG,GAAGC,QAAQ,CAAC,CAACL,YAAY,CAACM,sBAAb,IAAuC,CAAxC,EAA2CC,QAA3C,MAAyD,GAA1D,CAApB;EACAR,GAAG,CAAC,MAAD,EAASK,GAAT,CAAH;EACAI,OAAO,CAACT,GAAR,CAAY,qDAAmDK,GAA/D;EACA,OAAOA,GAAP;AACD,CAVM;;;;AAYA,MAAMK,gCAAgC,GAAG,OAAOX,eAAP,EAAwBY,aAAxB,KAA0C;EACxFF,OAAO,CAACT,GAAR,CAAY,6CAAZ,EAA2D;IAAED,eAAF;IAAmBY;EAAnB,CAA3D;EACA,MAAMT,cAAc,CAACU,cAAf,CACJR,oBADI,EAEJ;IAAEL;EAAF,CAFI,EAGJ;IAAEc,IAAI,EAAE;MAAEN,sBAAsB,EAAE,CAAC,CAAD,GAAKI;IAA/B;EAAR,CAHI,CAAN;AAKD,CAPM"}},"mtime":1654154234068}}