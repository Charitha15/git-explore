{"{\"assumptions\":{},\"sourceRoot\":\"/Users/ramireddycharitha/microservices/sample-micro-service/utils/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/ramireddycharitha/microservices/sample-micro-service\",\"filename\":\"/Users/ramireddycharitha/microservices/sample-micro-service/utils/WinstonLogger.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"default\",\"root\":\"/Users/ramireddycharitha/microservices/sample-micro-service\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.17.10:default":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = WinstonLogger;\nexports.init = init;\n\nvar _path = _interopRequireDefault(require(\"path\"));\n\nvar _os = _interopRequireDefault(require(\"os\"));\n\nvar _winston = _interopRequireDefault(require(\"winston\"));\n\nvar _jsonpathPlus = require(\"jsonpath-plus\");\n\nvar Constants = _interopRequireWildcard(require(\"../constants/Constants\"));\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nrequire(\"winston-daily-rotate-file\");\n\nconst lodash = require(\"lodash\");\n\nconst httpContext = require(\"express-http-context\");\n\nconst fs = require(\"fs\");\n\nconst {\n  format\n} = _winston.default;\nconst {\n  combine,\n  timestamp,\n  json\n} = format;\nconst SENSITIVE_DATA_MAPPINGS = {\n  \"$.request.body\": [\"password\"],\n  \"$.response.messages[:]\": [\"message\"]\n};\nconst MASK = \"XXXXXX\";\nlet loggerReference; // Parse unhandled exceptions, convert message to json object\n\nconst parseUnhandledExceptions = format(info => {\n  const input = { ...info\n  };\n\n  if (info.exception) {\n    input.message = {\n      error: info\n    };\n  }\n\n  return input;\n}); // https://github.com/winstonjs/winston#logging-levels\n// https://www.npmjs.com/package/winston-daily-rotate-file\n\nfunction WinstonLogger() {\n  const logDir = `${_os.default.homedir()}/${process.env.name}-logs/`;\n\n  if (!fs.existsSync(logDir)) {\n    fs.mkdirSync(logDir);\n  }\n\n  const logger = _winston.default.createLogger({\n    defaultMeta: {\n      service: process.env.name\n    },\n    level: \"info\",\n    format: combine(parseUnhandledExceptions(), timestamp(), json()),\n    exitOnError: false,\n    transports: [new _winston.default.transports.DailyRotateFile({\n      filename: \"all\",\n      extension: \".log\",\n      dirname: logDir,\n      maxSize: \"50m\",\n      maxFiles: \"10\",\n      handleExceptions: true,\n      handleRejections: true\n    })]\n  }); // for local write to console\n\n\n  if (process.env.NODE_ENV === \"default\") {\n    const console = new _winston.default.transports.Console({\n      handleExceptions: true,\n      handleRejections: true,\n      exitOnError: false\n    });\n    logger.add(console); // Add console transport\n  }\n\n  return logger;\n}\n\nfunction getInstanceOfLogger() {\n  if (!loggerReference) {\n    loggerReference = new WinstonLogger();\n  }\n\n  return loggerReference;\n}\n\nfunction init() {\n  loggerReference = new WinstonLogger();\n}\n\nconst replaceMask = payload => {\n  const input = { ...payload\n  };\n  Object.keys(SENSITIVE_DATA_MAPPINGS).forEach(jsonPath => {\n    if (Array.isArray(SENSITIVE_DATA_MAPPINGS[jsonPath])) {\n      SENSITIVE_DATA_MAPPINGS[jsonPath].forEach((v, k) => {\n        if (input[SENSITIVE_DATA_MAPPINGS[jsonPath][k]]) {\n          input[SENSITIVE_DATA_MAPPINGS[jsonPath][k]] = MASK;\n        }\n      });\n    }\n  });\n  return input;\n};\n\nconst maskSensitiveData = info => {\n  Object.keys(SENSITIVE_DATA_MAPPINGS).forEach(jsonPath => {\n    (0, _jsonpathPlus.JSONPath)({\n      path: jsonPath,\n      json: info,\n      callback: replaceMask\n    });\n  });\n  return info;\n}; // https://v8.dev/docs/stack-trace-api\n\n\nfunction doosraTrace() {\n  const orig = Error.prepareStackTrace;\n\n  Error.prepareStackTrace = (_, stack) => stack;\n\n  const err = new Error();\n  Error.captureStackTrace(err, log);\n  const {\n    stack\n  } = err;\n  Error.prepareStackTrace = orig;\n\n  const filename = _path.default.basename(stack[0].getFileName());\n\n  const functionName = stack[0] ? stack[0].getFunctionName() : \"\";\n  return {\n    filename,\n    functionName\n  };\n}\n\nfunction jsonStringifyLog(log) {\n  const tempLog = lodash.cloneDeep(log);\n\n  try {\n    tempLog.message = JSON.stringify(tempLog.message);\n    tempLog.request = JSON.stringify(tempLog.request);\n    tempLog.response = JSON.stringify(tempLog.response);\n  } catch (error) {\n    console.error(\"error\", {\n      error\n    });\n  }\n\n  return tempLog;\n}\n/**\n *\n * @param {*} level\n * @param {*} message\n * message, request, response values are json strings\n */\n\n\nglobal.log = function (level, message) {\n  const logLevel = level || \"info\";\n  const {\n    filename,\n    functionName\n  } = doosraTrace();\n  let log = {\n    correlationId: httpContext.get(Constants.LOGGER_CORRELATIONID) || \"\",\n    filename,\n    functionName,\n    ipAddress: httpContext.get(Constants.LOGGER_USER_IP_ADDRESS) || \"\",\n    message,\n    request: httpContext.get(Constants.LOGGER_REQUEST_PAYLOAD) || {},\n    response: httpContext.get(Constants.LOGGER_RESPONSE_PAYLOAD) || {},\n    responseTime: httpContext.get(Constants.LOGGER_RESPONSE_TIME),\n    route: httpContext.get(Constants.LOGGER_API_ROUTE) || \"\",\n    userDetails: httpContext.get(Constants.LOGGER_USER_DETAILS) || {}\n  };\n  log = maskSensitiveData(log);\n  const logger = getInstanceOfLogger(); // message, request, response are json stringified\n\n  logger.log(logLevel, jsonStringifyLog(log));\n};\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJyZXF1aXJlIiwibG9kYXNoIiwiaHR0cENvbnRleHQiLCJmcyIsImZvcm1hdCIsIndpbnN0b24iLCJjb21iaW5lIiwidGltZXN0YW1wIiwianNvbiIsIlNFTlNJVElWRV9EQVRBX01BUFBJTkdTIiwiTUFTSyIsImxvZ2dlclJlZmVyZW5jZSIsInBhcnNlVW5oYW5kbGVkRXhjZXB0aW9ucyIsImluZm8iLCJpbnB1dCIsImV4Y2VwdGlvbiIsIm1lc3NhZ2UiLCJlcnJvciIsIldpbnN0b25Mb2dnZXIiLCJsb2dEaXIiLCJvcyIsImhvbWVkaXIiLCJwcm9jZXNzIiwiZW52IiwibmFtZSIsImV4aXN0c1N5bmMiLCJta2RpclN5bmMiLCJsb2dnZXIiLCJjcmVhdGVMb2dnZXIiLCJkZWZhdWx0TWV0YSIsInNlcnZpY2UiLCJsZXZlbCIsImV4aXRPbkVycm9yIiwidHJhbnNwb3J0cyIsIkRhaWx5Um90YXRlRmlsZSIsImZpbGVuYW1lIiwiZXh0ZW5zaW9uIiwiZGlybmFtZSIsIm1heFNpemUiLCJtYXhGaWxlcyIsImhhbmRsZUV4Y2VwdGlvbnMiLCJoYW5kbGVSZWplY3Rpb25zIiwiTk9ERV9FTlYiLCJjb25zb2xlIiwiQ29uc29sZSIsImFkZCIsImdldEluc3RhbmNlT2ZMb2dnZXIiLCJpbml0IiwicmVwbGFjZU1hc2siLCJwYXlsb2FkIiwiT2JqZWN0Iiwia2V5cyIsImZvckVhY2giLCJqc29uUGF0aCIsIkFycmF5IiwiaXNBcnJheSIsInYiLCJrIiwibWFza1NlbnNpdGl2ZURhdGEiLCJwYXRoIiwiY2FsbGJhY2siLCJkb29zcmFUcmFjZSIsIm9yaWciLCJFcnJvciIsInByZXBhcmVTdGFja1RyYWNlIiwiXyIsInN0YWNrIiwiZXJyIiwiY2FwdHVyZVN0YWNrVHJhY2UiLCJsb2ciLCJiYXNlbmFtZSIsImdldEZpbGVOYW1lIiwiZnVuY3Rpb25OYW1lIiwiZ2V0RnVuY3Rpb25OYW1lIiwianNvblN0cmluZ2lmeUxvZyIsInRlbXBMb2ciLCJjbG9uZURlZXAiLCJKU09OIiwic3RyaW5naWZ5IiwicmVxdWVzdCIsInJlc3BvbnNlIiwiZ2xvYmFsIiwibG9nTGV2ZWwiLCJjb3JyZWxhdGlvbklkIiwiZ2V0IiwiQ29uc3RhbnRzIiwiTE9HR0VSX0NPUlJFTEFUSU9OSUQiLCJpcEFkZHJlc3MiLCJMT0dHRVJfVVNFUl9JUF9BRERSRVNTIiwiTE9HR0VSX1JFUVVFU1RfUEFZTE9BRCIsIkxPR0dFUl9SRVNQT05TRV9QQVlMT0FEIiwicmVzcG9uc2VUaW1lIiwiTE9HR0VSX1JFU1BPTlNFX1RJTUUiLCJyb3V0ZSIsIkxPR0dFUl9BUElfUk9VVEUiLCJ1c2VyRGV0YWlscyIsIkxPR0dFUl9VU0VSX0RFVEFJTFMiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy9yYW1pcmVkZHljaGFyaXRoYS9taWNyb3NlcnZpY2VzL3NhbXBsZS1taWNyby1zZXJ2aWNlL3V0aWxzLyIsInNvdXJjZXMiOlsiV2luc3RvbkxvZ2dlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgcGF0aCBmcm9tIFwicGF0aFwiO1xuaW1wb3J0IG9zIGZyb20gXCJvc1wiO1xuaW1wb3J0IHdpbnN0b24gZnJvbSBcIndpbnN0b25cIjtcbmltcG9ydCB7IEpTT05QYXRoIH0gZnJvbSBcImpzb25wYXRoLXBsdXNcIjtcbmltcG9ydCAqIGFzIENvbnN0YW50cyBmcm9tIFwiLi4vY29uc3RhbnRzL0NvbnN0YW50c1wiO1xuXG5yZXF1aXJlKFwid2luc3Rvbi1kYWlseS1yb3RhdGUtZmlsZVwiKTtcbmNvbnN0IGxvZGFzaCA9IHJlcXVpcmUoXCJsb2Rhc2hcIik7XG5jb25zdCBodHRwQ29udGV4dCA9IHJlcXVpcmUoXCJleHByZXNzLWh0dHAtY29udGV4dFwiKTtcbmNvbnN0IGZzID0gcmVxdWlyZShcImZzXCIpO1xuXG5jb25zdCB7IGZvcm1hdCB9ID0gd2luc3RvbjtcbmNvbnN0IHsgY29tYmluZSwgdGltZXN0YW1wLCBqc29uIH0gPSBmb3JtYXQ7XG5jb25zdCBTRU5TSVRJVkVfREFUQV9NQVBQSU5HUyA9IHtcbiAgXCIkLnJlcXVlc3QuYm9keVwiOiBbXCJwYXNzd29yZFwiXSxcbiAgXCIkLnJlc3BvbnNlLm1lc3NhZ2VzWzpdXCI6IFtcIm1lc3NhZ2VcIl0sXG59O1xuY29uc3QgTUFTSyA9IFwiWFhYWFhYXCI7XG5sZXQgbG9nZ2VyUmVmZXJlbmNlO1xuXG4vLyBQYXJzZSB1bmhhbmRsZWQgZXhjZXB0aW9ucywgY29udmVydCBtZXNzYWdlIHRvIGpzb24gb2JqZWN0XG5jb25zdCBwYXJzZVVuaGFuZGxlZEV4Y2VwdGlvbnMgPSBmb3JtYXQoKGluZm8pID0+IHtcbiAgY29uc3QgaW5wdXQgPSB7IC4uLmluZm8gfTtcbiAgaWYgKGluZm8uZXhjZXB0aW9uKSB7XG4gICAgaW5wdXQubWVzc2FnZSA9IHsgZXJyb3I6IGluZm8gfTtcbiAgfVxuICByZXR1cm4gaW5wdXQ7XG59KTtcblxuLy8gaHR0cHM6Ly9naXRodWIuY29tL3dpbnN0b25qcy93aW5zdG9uI2xvZ2dpbmctbGV2ZWxzXG4vLyBodHRwczovL3d3dy5ucG1qcy5jb20vcGFja2FnZS93aW5zdG9uLWRhaWx5LXJvdGF0ZS1maWxlXG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIFdpbnN0b25Mb2dnZXIoKSB7XG4gIGNvbnN0IGxvZ0RpciA9IGAke29zLmhvbWVkaXIoKX0vJHtwcm9jZXNzLmVudi5uYW1lfS1sb2dzL2A7XG4gIGlmICghZnMuZXhpc3RzU3luYyhsb2dEaXIpKSB7XG4gICAgZnMubWtkaXJTeW5jKGxvZ0Rpcik7XG4gIH1cbiAgY29uc3QgbG9nZ2VyID0gd2luc3Rvbi5jcmVhdGVMb2dnZXIoe1xuICAgIGRlZmF1bHRNZXRhOiB7XG4gICAgICBzZXJ2aWNlOiBwcm9jZXNzLmVudi5uYW1lLFxuICAgIH0sXG4gICAgbGV2ZWw6IFwiaW5mb1wiLFxuICAgIGZvcm1hdDogY29tYmluZShcbiAgICAgIHBhcnNlVW5oYW5kbGVkRXhjZXB0aW9ucygpLFxuICAgICAgdGltZXN0YW1wKCksXG4gICAgICBqc29uKCksXG4gICAgKSxcbiAgICBleGl0T25FcnJvcjogZmFsc2UsXG4gICAgdHJhbnNwb3J0czogW1xuICAgICAgbmV3IHdpbnN0b24udHJhbnNwb3J0cy5EYWlseVJvdGF0ZUZpbGUoe1xuICAgICAgICBmaWxlbmFtZTogXCJhbGxcIixcbiAgICAgICAgZXh0ZW5zaW9uOiBcIi5sb2dcIixcbiAgICAgICAgZGlybmFtZTogbG9nRGlyLFxuICAgICAgICBtYXhTaXplOiBcIjUwbVwiLFxuICAgICAgICBtYXhGaWxlczogXCIxMFwiLFxuICAgICAgICBoYW5kbGVFeGNlcHRpb25zOiB0cnVlLFxuICAgICAgICBoYW5kbGVSZWplY3Rpb25zOiB0cnVlLFxuICAgICAgfSksXG4gICAgXSxcbiAgfSk7XG4gIC8vIGZvciBsb2NhbCB3cml0ZSB0byBjb25zb2xlXG4gIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gXCJkZWZhdWx0XCIpIHtcbiAgICBjb25zdCBjb25zb2xlID0gbmV3IHdpbnN0b24udHJhbnNwb3J0cy5Db25zb2xlKHtcbiAgICAgIGhhbmRsZUV4Y2VwdGlvbnM6IHRydWUsXG4gICAgICBoYW5kbGVSZWplY3Rpb25zOiB0cnVlLFxuICAgICAgZXhpdE9uRXJyb3I6IGZhbHNlLFxuICAgIH0pO1xuICAgIGxvZ2dlci5hZGQoY29uc29sZSk7IC8vIEFkZCBjb25zb2xlIHRyYW5zcG9ydFxuICB9XG4gIHJldHVybiBsb2dnZXI7XG59XG5cbmZ1bmN0aW9uIGdldEluc3RhbmNlT2ZMb2dnZXIoKSB7XG4gIGlmICghbG9nZ2VyUmVmZXJlbmNlKSB7XG4gICAgbG9nZ2VyUmVmZXJlbmNlID0gbmV3IFdpbnN0b25Mb2dnZXIoKTtcbiAgfVxuICByZXR1cm4gbG9nZ2VyUmVmZXJlbmNlO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaW5pdCgpIHtcbiAgbG9nZ2VyUmVmZXJlbmNlID0gbmV3IFdpbnN0b25Mb2dnZXIoKTtcbn1cblxuY29uc3QgcmVwbGFjZU1hc2sgPSAocGF5bG9hZCkgPT4ge1xuICBjb25zdCBpbnB1dCA9IHsgLi4ucGF5bG9hZCB9O1xuICBPYmplY3Qua2V5cyhTRU5TSVRJVkVfREFUQV9NQVBQSU5HUykuZm9yRWFjaCgoanNvblBhdGgpID0+IHtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShTRU5TSVRJVkVfREFUQV9NQVBQSU5HU1tqc29uUGF0aF0pKSB7XG4gICAgICBTRU5TSVRJVkVfREFUQV9NQVBQSU5HU1tqc29uUGF0aF0uZm9yRWFjaCgodiwgaykgPT4ge1xuICAgICAgICBpZiAoaW5wdXRbU0VOU0lUSVZFX0RBVEFfTUFQUElOR1NbanNvblBhdGhdW2tdXSkge1xuICAgICAgICAgIGlucHV0W1NFTlNJVElWRV9EQVRBX01BUFBJTkdTW2pzb25QYXRoXVtrXV0gPSBNQVNLO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH0pO1xuICByZXR1cm4gaW5wdXQ7XG59O1xuXG5jb25zdCBtYXNrU2Vuc2l0aXZlRGF0YSA9IChpbmZvKSA9PiB7XG4gIE9iamVjdC5rZXlzKFNFTlNJVElWRV9EQVRBX01BUFBJTkdTKS5mb3JFYWNoKChqc29uUGF0aCkgPT4ge1xuICAgIEpTT05QYXRoKHtcbiAgICAgIHBhdGg6IGpzb25QYXRoLFxuICAgICAganNvbjogaW5mbyxcbiAgICAgIGNhbGxiYWNrOiByZXBsYWNlTWFzayxcbiAgICB9KTtcbiAgfSk7XG4gIHJldHVybiBpbmZvO1xufTtcblxuLy8gaHR0cHM6Ly92OC5kZXYvZG9jcy9zdGFjay10cmFjZS1hcGlcbmZ1bmN0aW9uIGRvb3NyYVRyYWNlKCkge1xuICBjb25zdCBvcmlnID0gRXJyb3IucHJlcGFyZVN0YWNrVHJhY2U7XG4gIEVycm9yLnByZXBhcmVTdGFja1RyYWNlID0gKF8sIHN0YWNrKSA9PiBzdGFjaztcbiAgY29uc3QgZXJyID0gbmV3IEVycm9yKCk7XG4gIEVycm9yLmNhcHR1cmVTdGFja1RyYWNlKGVyciwgbG9nKTtcbiAgY29uc3QgeyBzdGFjayB9ID0gZXJyO1xuICBFcnJvci5wcmVwYXJlU3RhY2tUcmFjZSA9IG9yaWc7XG4gIGNvbnN0IGZpbGVuYW1lID0gcGF0aC5iYXNlbmFtZShzdGFja1swXS5nZXRGaWxlTmFtZSgpKTtcbiAgY29uc3QgZnVuY3Rpb25OYW1lID0gc3RhY2tbMF0gPyBzdGFja1swXS5nZXRGdW5jdGlvbk5hbWUoKSA6IFwiXCI7XG4gIHJldHVybiB7IGZpbGVuYW1lLCBmdW5jdGlvbk5hbWUgfTtcbn1cblxuZnVuY3Rpb24ganNvblN0cmluZ2lmeUxvZyhsb2cpIHtcbiAgY29uc3QgdGVtcExvZyA9IGxvZGFzaC5jbG9uZURlZXAobG9nKTtcbiAgdHJ5IHtcbiAgICB0ZW1wTG9nLm1lc3NhZ2UgPSBKU09OLnN0cmluZ2lmeSh0ZW1wTG9nLm1lc3NhZ2UpO1xuICAgIHRlbXBMb2cucmVxdWVzdCA9IEpTT04uc3RyaW5naWZ5KHRlbXBMb2cucmVxdWVzdCk7XG4gICAgdGVtcExvZy5yZXNwb25zZSA9IEpTT04uc3RyaW5naWZ5KHRlbXBMb2cucmVzcG9uc2UpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJlcnJvclwiLCB7IGVycm9yIH0pO1xuICB9XG4gIHJldHVybiB0ZW1wTG9nO1xufVxuLyoqXG4gKlxuICogQHBhcmFtIHsqfSBsZXZlbFxuICogQHBhcmFtIHsqfSBtZXNzYWdlXG4gKiBtZXNzYWdlLCByZXF1ZXN0LCByZXNwb25zZSB2YWx1ZXMgYXJlIGpzb24gc3RyaW5nc1xuICovXG5nbG9iYWwubG9nID0gZnVuY3Rpb24gKGxldmVsLCBtZXNzYWdlKSB7XG4gIGNvbnN0IGxvZ0xldmVsID0gbGV2ZWwgfHwgXCJpbmZvXCI7XG4gIGNvbnN0IHsgZmlsZW5hbWUsIGZ1bmN0aW9uTmFtZSB9ID0gZG9vc3JhVHJhY2UoKTtcbiAgbGV0IGxvZyA9IHtcbiAgICBjb3JyZWxhdGlvbklkOiBodHRwQ29udGV4dC5nZXQoQ29uc3RhbnRzLkxPR0dFUl9DT1JSRUxBVElPTklEKSB8fCBcIlwiLFxuICAgIGZpbGVuYW1lLFxuICAgIGZ1bmN0aW9uTmFtZSxcbiAgICBpcEFkZHJlc3M6IGh0dHBDb250ZXh0LmdldChDb25zdGFudHMuTE9HR0VSX1VTRVJfSVBfQUREUkVTUykgfHwgXCJcIixcbiAgICBtZXNzYWdlLFxuICAgIHJlcXVlc3Q6IGh0dHBDb250ZXh0LmdldChDb25zdGFudHMuTE9HR0VSX1JFUVVFU1RfUEFZTE9BRCkgfHwge30sXG4gICAgcmVzcG9uc2U6IGh0dHBDb250ZXh0LmdldChDb25zdGFudHMuTE9HR0VSX1JFU1BPTlNFX1BBWUxPQUQpIHx8IHt9LFxuICAgIHJlc3BvbnNlVGltZTogaHR0cENvbnRleHQuZ2V0KENvbnN0YW50cy5MT0dHRVJfUkVTUE9OU0VfVElNRSksXG4gICAgcm91dGU6IGh0dHBDb250ZXh0LmdldChDb25zdGFudHMuTE9HR0VSX0FQSV9ST1VURSkgfHwgXCJcIixcbiAgICB1c2VyRGV0YWlsczogaHR0cENvbnRleHQuZ2V0KENvbnN0YW50cy5MT0dHRVJfVVNFUl9ERVRBSUxTKSB8fCB7fSxcbiAgfTtcbiAgbG9nID0gbWFza1NlbnNpdGl2ZURhdGEobG9nKTtcbiAgY29uc3QgbG9nZ2VyID0gZ2V0SW5zdGFuY2VPZkxvZ2dlcigpO1xuICAvLyBtZXNzYWdlLCByZXF1ZXN0LCByZXNwb25zZSBhcmUganNvbiBzdHJpbmdpZmllZFxuICBsb2dnZXIubG9nKGxvZ0xldmVsLCBqc29uU3RyaW5naWZ5TG9nKGxvZykpO1xufTtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7Ozs7Ozs7QUFFQUEsT0FBTyxDQUFDLDJCQUFELENBQVA7O0FBQ0EsTUFBTUMsTUFBTSxHQUFHRCxPQUFPLENBQUMsUUFBRCxDQUF0Qjs7QUFDQSxNQUFNRSxXQUFXLEdBQUdGLE9BQU8sQ0FBQyxzQkFBRCxDQUEzQjs7QUFDQSxNQUFNRyxFQUFFLEdBQUdILE9BQU8sQ0FBQyxJQUFELENBQWxCOztBQUVBLE1BQU07RUFBRUk7QUFBRixJQUFhQyxnQkFBbkI7QUFDQSxNQUFNO0VBQUVDLE9BQUY7RUFBV0MsU0FBWDtFQUFzQkM7QUFBdEIs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","map":{"version":3,"names":["require","lodash","httpContext","fs","format","winston","combine","timestamp","json","SENSITIVE_DATA_MAPPINGS","MASK","loggerReference","parseUnhandledExceptions","info","input","exception","message","error","WinstonLogger","logDir","os","homedir","process","env","name","existsSync","mkdirSync","logger","createLogger","defaultMeta","service","level","exitOnError","transports","DailyRotateFile","filename","extension","dirname","maxSize","maxFiles","handleExceptions","handleRejections","NODE_ENV","console","Console","add","getInstanceOfLogger","init","replaceMask","payload","Object","keys","forEach","jsonPath","Array","isArray","v","k","maskSensitiveData","path","callback","doosraTrace","orig","Error","prepareStackTrace","_","stack","err","captureStackTrace","log","basename","getFileName","functionName","getFunctionName","jsonStringifyLog","tempLog","cloneDeep","JSON","stringify","request","response","global","logLevel","correlationId","get","Constants","LOGGER_CORRELATIONID","ipAddress","LOGGER_USER_IP_ADDRESS","LOGGER_REQUEST_PAYLOAD","LOGGER_RESPONSE_PAYLOAD","responseTime","LOGGER_RESPONSE_TIME","route","LOGGER_API_ROUTE","userDetails","LOGGER_USER_DETAILS"],"sourceRoot":"/Users/ramireddycharitha/microservices/sample-micro-service/utils/","sources":["WinstonLogger.js"],"sourcesContent":["import path from \"path\";\nimport os from \"os\";\nimport winston from \"winston\";\nimport { JSONPath } from \"jsonpath-plus\";\nimport * as Constants from \"../constants/Constants\";\n\nrequire(\"winston-daily-rotate-file\");\nconst lodash = require(\"lodash\");\nconst httpContext = require(\"express-http-context\");\nconst fs = require(\"fs\");\n\nconst { format } = winston;\nconst { combine, timestamp, json } = format;\nconst SENSITIVE_DATA_MAPPINGS = {\n  \"$.request.body\": [\"password\"],\n  \"$.response.messages[:]\": [\"message\"],\n};\nconst MASK = \"XXXXXX\";\nlet loggerReference;\n\n// Parse unhandled exceptions, convert message to json object\nconst parseUnhandledExceptions = format((info) => {\n  const input = { ...info };\n  if (info.exception) {\n    input.message = { error: info };\n  }\n  return input;\n});\n\n// https://github.com/winstonjs/winston#logging-levels\n// https://www.npmjs.com/package/winston-daily-rotate-file\n\nexport default function WinstonLogger() {\n  const logDir = `${os.homedir()}/${process.env.name}-logs/`;\n  if (!fs.existsSync(logDir)) {\n    fs.mkdirSync(logDir);\n  }\n  const logger = winston.createLogger({\n    defaultMeta: {\n      service: process.env.name,\n    },\n    level: \"info\",\n    format: combine(\n      parseUnhandledExceptions(),\n      timestamp(),\n      json(),\n    ),\n    exitOnError: false,\n    transports: [\n      new winston.transports.DailyRotateFile({\n        filename: \"all\",\n        extension: \".log\",\n        dirname: logDir,\n        maxSize: \"50m\",\n        maxFiles: \"10\",\n        handleExceptions: true,\n        handleRejections: true,\n      }),\n    ],\n  });\n  // for local write to console\n  if (process.env.NODE_ENV === \"default\") {\n    const console = new winston.transports.Console({\n      handleExceptions: true,\n      handleRejections: true,\n      exitOnError: false,\n    });\n    logger.add(console); // Add console transport\n  }\n  return logger;\n}\n\nfunction getInstanceOfLogger() {\n  if (!loggerReference) {\n    loggerReference = new WinstonLogger();\n  }\n  return loggerReference;\n}\n\nexport function init() {\n  loggerReference = new WinstonLogger();\n}\n\nconst replaceMask = (payload) => {\n  const input = { ...payload };\n  Object.keys(SENSITIVE_DATA_MAPPINGS).forEach((jsonPath) => {\n    if (Array.isArray(SENSITIVE_DATA_MAPPINGS[jsonPath])) {\n      SENSITIVE_DATA_MAPPINGS[jsonPath].forEach((v, k) => {\n        if (input[SENSITIVE_DATA_MAPPINGS[jsonPath][k]]) {\n          input[SENSITIVE_DATA_MAPPINGS[jsonPath][k]] = MASK;\n        }\n      });\n    }\n  });\n  return input;\n};\n\nconst maskSensitiveData = (info) => {\n  Object.keys(SENSITIVE_DATA_MAPPINGS).forEach((jsonPath) => {\n    JSONPath({\n      path: jsonPath,\n      json: info,\n      callback: replaceMask,\n    });\n  });\n  return info;\n};\n\n// https://v8.dev/docs/stack-trace-api\nfunction doosraTrace() {\n  const orig = Error.prepareStackTrace;\n  Error.prepareStackTrace = (_, stack) => stack;\n  const err = new Error();\n  Error.captureStackTrace(err, log);\n  const { stack } = err;\n  Error.prepareStackTrace = orig;\n  const filename = path.basename(stack[0].getFileName());\n  const functionName = stack[0] ? stack[0].getFunctionName() : \"\";\n  return { filename, functionName };\n}\n\nfunction jsonStringifyLog(log) {\n  const tempLog = lodash.cloneDeep(log);\n  try {\n    tempLog.message = JSON.stringify(tempLog.message);\n    tempLog.request = JSON.stringify(tempLog.request);\n    tempLog.response = JSON.stringify(tempLog.response);\n  } catch (error) {\n    console.error(\"error\", { error });\n  }\n  return tempLog;\n}\n/**\n *\n * @param {*} level\n * @param {*} message\n * message, request, response values are json strings\n */\nglobal.log = function (level, message) {\n  const logLevel = level || \"info\";\n  const { filename, functionName } = doosraTrace();\n  let log = {\n    correlationId: httpContext.get(Constants.LOGGER_CORRELATIONID) || \"\",\n    filename,\n    functionName,\n    ipAddress: httpContext.get(Constants.LOGGER_USER_IP_ADDRESS) || \"\",\n    message,\n    request: httpContext.get(Constants.LOGGER_REQUEST_PAYLOAD) || {},\n    response: httpContext.get(Constants.LOGGER_RESPONSE_PAYLOAD) || {},\n    responseTime: httpContext.get(Constants.LOGGER_RESPONSE_TIME),\n    route: httpContext.get(Constants.LOGGER_API_ROUTE) || \"\",\n    userDetails: httpContext.get(Constants.LOGGER_USER_DETAILS) || {},\n  };\n  log = maskSensitiveData(log);\n  const logger = getInstanceOfLogger();\n  // message, request, response are json stringified\n  logger.log(logLevel, jsonStringifyLog(log));\n};\n"],"mappings":"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"}},"mtime":1653643634192},"{\"assumptions\":{},\"sourceRoot\":\"/Users/ramireddycharitha/microservices/sample-micro-service/constants/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/ramireddycharitha/microservices/sample-micro-service\",\"filename\":\"/Users/ramireddycharitha/microservices/sample-micro-service/constants/Constants.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"default\",\"root\":\"/Users/ramireddycharitha/microservices/sample-micro-service\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.17.10:default":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.LOGGER_USER_IP_ADDRESS = exports.LOGGER_USER_DETAILS = exports.LOGGER_URL_REDIRECTION_OBJ = exports.LOGGER_RESPONSE_TIME = exports.LOGGER_RESPONSE_PAYLOAD = exports.LOGGER_REQUEST_START_TIME = exports.LOGGER_REQUEST_PAYLOAD = exports.LOGGER_CORRELATIONID = exports.LOGGER_API_ROUTE = void 0;\nconst LOGGER_USER_DETAILS = \"loggerUserDetails\";\nexports.LOGGER_USER_DETAILS = LOGGER_USER_DETAILS;\nconst LOGGER_REQUEST_PAYLOAD = \"loggerRequestPayload\";\nexports.LOGGER_REQUEST_PAYLOAD = LOGGER_REQUEST_PAYLOAD;\nconst LOGGER_RESPONSE_PAYLOAD = \"loggerResponsePayload\";\nexports.LOGGER_RESPONSE_PAYLOAD = LOGGER_RESPONSE_PAYLOAD;\nconst LOGGER_REQUEST_START_TIME = \"loggerRequestStartTime\";\nexports.LOGGER_REQUEST_START_TIME = LOGGER_REQUEST_START_TIME;\nconst LOGGER_API_ROUTE = \"loggerRoute\";\nexports.LOGGER_API_ROUTE = LOGGER_API_ROUTE;\nconst LOGGER_USER_IP_ADDRESS = \"loggerUserIpAddress\";\nexports.LOGGER_USER_IP_ADDRESS = LOGGER_USER_IP_ADDRESS;\nconst LOGGER_CORRELATIONID = \"loggerCorrelationId\";\nexports.LOGGER_CORRELATIONID = LOGGER_CORRELATIONID;\nconst LOGGER_RESPONSE_TIME = \"loggerResponseTime\";\nexports.LOGGER_RESPONSE_TIME = LOGGER_RESPONSE_TIME;\nconst LOGGER_URL_REDIRECTION_OBJ = \"loggerUrlRedirectionObj\";\nexports.LOGGER_URL_REDIRECTION_OBJ = LOGGER_URL_REDIRECTION_OBJ;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJMT0dHRVJfVVNFUl9ERVRBSUxTIiwiTE9HR0VSX1JFUVVFU1RfUEFZTE9BRCIsIkxPR0dFUl9SRVNQT05TRV9QQVlMT0FEIiwiTE9HR0VSX1JFUVVFU1RfU1RBUlRfVElNRSIsIkxPR0dFUl9BUElfUk9VVEUiLCJMT0dHRVJfVVNFUl9JUF9BRERSRVNTIiwiTE9HR0VSX0NPUlJFTEFUSU9OSUQiLCJMT0dHRVJfUkVTUE9OU0VfVElNRSIsIkxPR0dFUl9VUkxfUkVESVJFQ1RJT05fT0JKIl0sInNvdXJjZVJvb3QiOiIvVXNlcnMvcmFtaXJlZGR5Y2hhcml0aGEvbWljcm9zZXJ2aWNlcy9zYW1wbGUtbWljcm8tc2VydmljZS9jb25zdGFudHMvIiwic291cmNlcyI6WyJDb25zdGFudHMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNvbnN0IExPR0dFUl9VU0VSX0RFVEFJTFMgPSBcImxvZ2dlclVzZXJEZXRhaWxzXCI7XG5leHBvcnQgY29uc3QgTE9HR0VSX1JFUVVFU1RfUEFZTE9BRCA9IFwibG9nZ2VyUmVxdWVzdFBheWxvYWRcIjtcbmV4cG9ydCBjb25zdCBMT0dHRVJfUkVTUE9OU0VfUEFZTE9BRCA9IFwibG9nZ2VyUmVzcG9uc2VQYXlsb2FkXCI7XG5leHBvcnQgY29uc3QgTE9HR0VSX1JFUVVFU1RfU1RBUlRfVElNRSA9IFwibG9nZ2VyUmVxdWVzdFN0YXJ0VGltZVwiO1xuZXhwb3J0IGNvbnN0IExPR0dFUl9BUElfUk9VVEUgPSBcImxvZ2dlclJvdXRlXCI7XG5leHBvcnQgY29uc3QgTE9HR0VSX1VTRVJfSVBfQUREUkVTUyA9IFwibG9nZ2VyVXNlcklwQWRkcmVzc1wiO1xuZXhwb3J0IGNvbnN0IExPR0dFUl9DT1JSRUxBVElPTklEID0gXCJsb2dnZXJDb3JyZWxhdGlvbklkXCI7XG5leHBvcnQgY29uc3QgTE9HR0VSX1JFU1BPTlNFX1RJTUUgPSBcImxvZ2dlclJlc3BvbnNlVGltZVwiO1xuZXhwb3J0IGNvbnN0IExPR0dFUl9VUkxfUkVESVJFQ1RJT05fT0JKID0gXCJsb2dnZXJVcmxSZWRpcmVjdGlvbk9ialwiO1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBTyxNQUFNQSxtQkFBbUIsR0FBRyxtQkFBNUI7O0FBQ0EsTUFBTUMsc0JBQXNCLEdBQUcsc0JBQS9COztBQUNBLE1BQU1DLHVCQUF1QixHQUFHLHVCQUFoQzs7QUFDQSxNQUFNQyx5QkFBeUIsR0FBRyx3QkFBbEM7O0FBQ0EsTUFBTUMsZ0JBQWdCLEdBQUcsYUFBekI7O0FBQ0EsTUFBTUMsc0JBQXNCLEdBQUcscUJBQS9COztBQUNBLE1BQU1DLG9CQUFvQixHQUFHLHFCQUE3Qjs7QUFDQSxNQUFNQyxvQkFBb0IsR0FBRyxvQkFBN0I7O0FBQ0EsTUFBTUMsMEJBQTBCLEdBQUcseUJBQW5DIn0=","map":{"version":3,"names":["LOGGER_USER_DETAILS","LOGGER_REQUEST_PAYLOAD","LOGGER_RESPONSE_PAYLOAD","LOGGER_REQUEST_START_TIME","LOGGER_API_ROUTE","LOGGER_USER_IP_ADDRESS","LOGGER_CORRELATIONID","LOGGER_RESPONSE_TIME","LOGGER_URL_REDIRECTION_OBJ"],"sourceRoot":"/Users/ramireddycharitha/microservices/sample-micro-service/constants/","sources":["Constants.js"],"sourcesContent":["export const LOGGER_USER_DETAILS = \"loggerUserDetails\";\nexport const LOGGER_REQUEST_PAYLOAD = \"loggerRequestPayload\";\nexport const LOGGER_RESPONSE_PAYLOAD = \"loggerResponsePayload\";\nexport const LOGGER_REQUEST_START_TIME = \"loggerRequestStartTime\";\nexport const LOGGER_API_ROUTE = \"loggerRoute\";\nexport const LOGGER_USER_IP_ADDRESS = \"loggerUserIpAddress\";\nexport const LOGGER_CORRELATIONID = \"loggerCorrelationId\";\nexport const LOGGER_RESPONSE_TIME = \"loggerResponseTime\";\nexport const LOGGER_URL_REDIRECTION_OBJ = \"loggerUrlRedirectionObj\";\n"],"mappings":";;;;;;AAAO,MAAMA,mBAAmB,GAAG,mBAA5B;;AACA,MAAMC,sBAAsB,GAAG,sBAA/B;;AACA,MAAMC,uBAAuB,GAAG,uBAAhC;;AACA,MAAMC,yBAAyB,GAAG,wBAAlC;;AACA,MAAMC,gBAAgB,GAAG,aAAzB;;AACA,MAAMC,sBAAsB,GAAG,qBAA/B;;AACA,MAAMC,oBAAoB,GAAG,qBAA7B;;AACA,MAAMC,oBAAoB,GAAG,oBAA7B;;AACA,MAAMC,0BAA0B,GAAG,yBAAnC"}},"mtime":1653643634178},"{\"assumptions\":{},\"sourceRoot\":\"/Users/ramireddycharitha/microservices/sample-micro-service/connections/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/ramireddycharitha/microservices/sample-micro-service\",\"filename\":\"/Users/ramireddycharitha/microservices/sample-micro-service/connections/MainDb.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"default\",\"root\":\"/Users/ramireddycharitha/microservices/sample-micro-service\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.17.10:default":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getDbInstance = getDbInstance;\nexports.init = init;\n\nvar _mongoose = _interopRequireDefault(require(\"mongoose\"));\n\nvar _index = _interopRequireDefault(require(\"../config/index\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/* eslint-disable import/no-import-module-exports */\nlet conn;\n\nfunction init() {\n  const RECONNECT_TIME = 5000;\n  const CONN_URL = _index.default.mainDbconfig.connString;\n\n  if (conn) {\n    return conn;\n  }\n\n  _mongoose.default.set(\"debug\", (collectionName, methodName, ...methodArgs) => {\n    // use custom function to log collection methods + arguments\n    log(\"info\", `Mongoose: ${collectionName}.${methodName}(${methodArgs.join(\", \")})`);\n  });\n\n  log(\"info\", `CONN_URL to connect to main database ${CONN_URL}`);\n  conn = _mongoose.default.createConnection(CONN_URL); //  Mongoose Connection Events\n\n  conn.on(\"error\", error => {\n    log(\"error\", {\n      error\n    });\n  });\n  conn.once(\"open\", () => {\n    log(\"info\", {\n      dBConnectionStatus: \"open\"\n    });\n  });\n  conn.on(\"connected\", () => {\n    log(\"info\", {\n      dBConnectionStatus: \"connected\"\n    });\n  });\n  conn.on(\"connecting\", () => {\n    log(\"info\", {\n      dBConnectionStatus: \"connecting\"\n    });\n  });\n  conn.on(\"reconnected\", () => {\n    log(\"info\", {\n      dBConnectionStatus: \"reconnected\"\n    });\n  });\n  conn.on(\"disconnected\", () => {\n    log(\"error\", {\n      dBConnectionStatus: `disconnected Reconnecting in ${RECONNECT_TIME / 1000}s...`\n    }); // https://github.com/automattic/mongoose/issues/5169#issuecomment-314983113\n\n    setTimeout(() => {\n      conn.openUri(CONN_URL).catch(() => {});\n    }, RECONNECT_TIME);\n  });\n  return conn;\n}\n\nfunction getDbInstance() {\n  return conn;\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb25uIiwiaW5pdCIsIlJFQ09OTkVDVF9USU1FIiwiQ09OTl9VUkwiLCJjb25maWciLCJtYWluRGJjb25maWciLCJjb25uU3RyaW5nIiwibW9uZ29vc2UiLCJzZXQiLCJjb2xsZWN0aW9uTmFtZSIsIm1ldGhvZE5hbWUiLCJtZXRob2RBcmdzIiwibG9nIiwiam9pbiIsImNyZWF0ZUNvbm5lY3Rpb24iLCJvbiIsImVycm9yIiwib25jZSIsImRCQ29ubmVjdGlvblN0YXR1cyIsInNldFRpbWVvdXQiLCJvcGVuVXJpIiwiY2F0Y2giLCJnZXREYkluc3RhbmNlIl0sInNvdXJjZVJvb3QiOiIvVXNlcnMvcmFtaXJlZGR5Y2hhcml0aGEvbWljcm9zZXJ2aWNlcy9zYW1wbGUtbWljcm8tc2VydmljZS9jb25uZWN0aW9ucy8iLCJzb3VyY2VzIjpbIk1haW5EYi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiBlc2xpbnQtZGlzYWJsZSBpbXBvcnQvbm8taW1wb3J0LW1vZHVsZS1leHBvcnRzICovXG5cbmltcG9ydCBtb25nb29zZSBmcm9tIFwibW9uZ29vc2VcIjtcbmltcG9ydCBjb25maWcgZnJvbSBcIi4uL2NvbmZpZy9pbmRleFwiO1xuXG5sZXQgY29ubjtcblxuZXhwb3J0IGZ1bmN0aW9uIGluaXQoKSB7XG4gIGNvbnN0IFJFQ09OTkVDVF9USU1FID0gNTAwMDtcbiAgY29uc3QgQ09OTl9VUkwgPSBjb25maWcubWFpbkRiY29uZmlnLmNvbm5TdHJpbmc7XG5cbiAgaWYgKGNvbm4pIHtcbiAgICByZXR1cm4gY29ubjtcbiAgfVxuXG4gIG1vbmdvb3NlLnNldChcImRlYnVnXCIsIChjb2xsZWN0aW9uTmFtZSwgbWV0aG9kTmFtZSwgLi4ubWV0aG9kQXJncykgPT4ge1xuICAgIC8vIHVzZSBjdXN0b20gZnVuY3Rpb24gdG8gbG9nIGNvbGxlY3Rpb24gbWV0aG9kcyArIGFyZ3VtZW50c1xuICAgIGxvZyhcImluZm9cIiwgYE1vbmdvb3NlOiAke2NvbGxlY3Rpb25OYW1lfS4ke21ldGhvZE5hbWV9KCR7bWV0aG9kQXJncy5qb2luKFwiLCBcIil9KWApO1xuICB9KTtcblxuICBsb2coXCJpbmZvXCIsIGBDT05OX1VSTCB0byBjb25uZWN0IHRvIG1haW4gZGF0YWJhc2UgJHtDT05OX1VSTH1gKTtcbiAgY29ubiA9IG1vbmdvb3NlLmNyZWF0ZUNvbm5lY3Rpb24oQ09OTl9VUkwpO1xuXG4gIC8vICBNb25nb29zZSBDb25uZWN0aW9uIEV2ZW50c1xuICBjb25uLm9uKFwiZXJyb3JcIiwgKGVycm9yKSA9PiB7XG4gICAgbG9nKFwiZXJyb3JcIiwgeyBlcnJvciB9KTtcbiAgfSk7XG5cbiAgY29ubi5vbmNlKFwib3BlblwiLCAoKSA9PiB7XG4gICAgbG9nKFwiaW5mb1wiLCB7IGRCQ29ubmVjdGlvblN0YXR1czogXCJvcGVuXCIgfSk7XG4gIH0pO1xuXG4gIGNvbm4ub24oXCJjb25uZWN0ZWRcIiwgKCkgPT4ge1xuICAgIGxvZyhcImluZm9cIiwgeyBkQkNvbm5lY3Rpb25TdGF0dXM6IFwiY29ubmVjdGVkXCIgfSk7XG4gIH0pO1xuXG4gIGNvbm4ub24oXCJjb25uZWN0aW5nXCIsICgpID0+IHtcbiAgICBsb2coXCJpbmZvXCIsIHsgZEJDb25uZWN0aW9uU3RhdHVzOiBcImNvbm5lY3RpbmdcIiB9KTtcbiAgfSk7XG5cbiAgY29ubi5vbihcInJlY29ubmVjdGVkXCIsICgpID0+IHtcbiAgICBsb2coXCJpbmZvXCIsIHsgZEJDb25uZWN0aW9uU3RhdHVzOiBcInJlY29ubmVjdGVkXCIgfSk7XG4gIH0pO1xuXG4gIGNvbm4ub24oXCJkaXNjb25uZWN0ZWRcIiwgKCkgPT4ge1xuICAgIGxvZyhcImVycm9yXCIsIHsgZEJDb25uZWN0aW9uU3RhdHVzOiBgZGlzY29ubmVjdGVkIFJlY29ubmVjdGluZyBpbiAke1JFQ09OTkVDVF9USU1FIC8gMTAwMH1zLi4uYCB9KTtcbiAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vYXV0b21hdHRpYy9tb25nb29zZS9pc3N1ZXMvNTE2OSNpc3N1ZWNvbW1lbnQtMzE0OTgzMTEzXG4gICAgc2V0VGltZW91dCgoKSA9PiB7IGNvbm4ub3BlblVyaShDT05OX1VSTCkuY2F0Y2goKCkgPT4geyB9KTsgfSwgUkVDT05ORUNUX1RJTUUpO1xuICB9KTtcblxuICByZXR1cm4gY29ubjtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldERiSW5zdGFuY2UoKSB7XG4gIHJldHVybiBjb25uO1xufVxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUVBOztBQUNBOzs7O0FBSEE7QUFLQSxJQUFJQSxJQUFKOztBQUVPLFNBQVNDLElBQVQsR0FBZ0I7RUFDckIsTUFBTUMsY0FBYyxHQUFHLElBQXZCO0VBQ0EsTUFBTUMsUUFBUSxHQUFHQyxlQUFPQyxZQUFQLENBQW9CQyxVQUFyQzs7RUFFQSxJQUFJTixJQUFKLEVBQVU7SUFDUixPQUFPQSxJQUFQO0VBQ0Q7O0VBRURPLGtCQUFTQyxHQUFULENBQWEsT0FBYixFQUFzQixDQUFDQyxjQUFELEVBQWlCQyxVQUFqQixFQUE2QixHQUFHQyxVQUFoQyxLQUErQztJQUNuRTtJQUNBQyxHQUFHLENBQUMsTUFBRCxFQUFVLGFBQVlILGNBQWUsSUFBR0MsVUFBVyxJQUFHQyxVQUFVLENBQUNFLElBQVgsQ0FBZ0IsSUFBaEIsQ0FBc0IsR0FBNUUsQ0FBSDtFQUNELENBSEQ7O0VBS0FELEdBQUcsQ0FBQyxNQUFELEVBQVUsd0NBQXVDVCxRQUFTLEVBQTFELENBQUg7RUFDQUgsSUFBSSxHQUFHTyxrQkFBU08sZ0JBQVQsQ0FBMEJYLFFBQTFCLENBQVAsQ0FkcUIsQ0FnQnJCOztFQUNBSCxJQUFJLENBQUNlLEVBQUwsQ0FBUSxPQUFSLEVBQWtCQyxLQUFELElBQVc7SUFDMUJKLEdBQUcsQ0FBQyxPQUFELEVBQVU7TUFBRUk7SUFBRixDQUFWLENBQUg7RUFDRCxDQUZEO0VBSUFoQixJQUFJLENBQUNpQixJQUFMLENBQVUsTUFBVixFQUFrQixNQUFNO0lBQ3RCTCxHQUFHLENBQUMsTUFBRCxFQUFTO01BQUVNLGtCQUFrQixFQUFFO0lBQXRCLENBQVQsQ0FBSDtFQUNELENBRkQ7RUFJQWxCLElBQUksQ0FBQ2UsRUFBTCxDQUFRLFdBQVIsRUFBcUIsTUFBTTtJQUN6QkgsR0FBRyxDQUFDLE1BQUQsRUFBUztNQUFFTSxrQkFBa0IsRUFBRTtJQUF0QixDQUFULENBQUg7RUFDRCxDQUZEO0VBSUFsQixJQUFJLENBQUNlLEVBQUwsQ0FBUSxZQUFSLEVBQXNCLE1BQU07SUFDMUJILEdBQUcsQ0FBQyxNQUFELEVBQVM7TUFBRU0sa0JBQWtCLEVBQUU7SUFBdEIsQ0FBVCxDQUFIO0VBQ0QsQ0FGRDtFQUlBbEIsSUFBSSxDQUFDZSxFQUFMLENBQVEsYUFBUixFQUF1QixNQUFNO0lBQzNCSCxHQUFHLENBQUMsTUFBRCxFQUFTO01BQUVNLGtCQUFrQixFQUFFO0lBQXRCLENBQVQsQ0FBSDtFQUNELENBRkQ7RUFJQWxCLElBQUksQ0FBQ2UsRUFBTCxDQUFRLGNBQVIsRUFBd0IsTUFBTTtJQUM1QkgsR0FBRyxDQUFDLE9BQUQsRUFBVTtNQUFFTSxrQkFBa0IsRUFBRyxnQ0FBK0JoQixjQUFjLEdBQUcsSUFBSztJQUE1RSxDQUFWLENBQUgsQ0FENEIsQ0FFNUI7O0lBQ0FpQixVQUFVLENBQUMsTUFBTTtNQUFFbkIsSUFBSSxDQUFDb0IsT0FBTCxDQUFhakIsUUFBYixFQUF1QmtCLEtBQXZCLENBQTZCLE1BQU0sQ0FBRyxDQUF0QztJQUEwQyxDQUFuRCxFQUFxRG5CLGNBQXJELENBQVY7RUFDRCxDQUpEO0VBTUEsT0FBT0YsSUFBUDtBQUNEOztBQUVNLFNBQVNzQixhQUFULEdBQXlCO0VBQzlCLE9BQU90QixJQUFQO0FBQ0QifQ==","map":{"version":3,"names":["conn","init","RECONNECT_TIME","CONN_URL","config","mainDbconfig","connString","mongoose","set","collectionName","methodName","methodArgs","log","join","createConnection","on","error","once","dBConnectionStatus","setTimeout","openUri","catch","getDbInstance"],"sourceRoot":"/Users/ramireddycharitha/microservices/sample-micro-service/connections/","sources":["MainDb.js"],"sourcesContent":["/* eslint-disable import/no-import-module-exports */\n\nimport mongoose from \"mongoose\";\nimport config from \"../config/index\";\n\nlet conn;\n\nexport function init() {\n  const RECONNECT_TIME = 5000;\n  const CONN_URL = config.mainDbconfig.connString;\n\n  if (conn) {\n    return conn;\n  }\n\n  mongoose.set(\"debug\", (collectionName, methodName, ...methodArgs) => {\n    // use custom function to log collection methods + arguments\n    log(\"info\", `Mongoose: ${collectionName}.${methodName}(${methodArgs.join(\", \")})`);\n  });\n\n  log(\"info\", `CONN_URL to connect to main database ${CONN_URL}`);\n  conn = mongoose.createConnection(CONN_URL);\n\n  //  Mongoose Connection Events\n  conn.on(\"error\", (error) => {\n    log(\"error\", { error });\n  });\n\n  conn.once(\"open\", () => {\n    log(\"info\", { dBConnectionStatus: \"open\" });\n  });\n\n  conn.on(\"connected\", () => {\n    log(\"info\", { dBConnectionStatus: \"connected\" });\n  });\n\n  conn.on(\"connecting\", () => {\n    log(\"info\", { dBConnectionStatus: \"connecting\" });\n  });\n\n  conn.on(\"reconnected\", () => {\n    log(\"info\", { dBConnectionStatus: \"reconnected\" });\n  });\n\n  conn.on(\"disconnected\", () => {\n    log(\"error\", { dBConnectionStatus: `disconnected Reconnecting in ${RECONNECT_TIME / 1000}s...` });\n    // https://github.com/automattic/mongoose/issues/5169#issuecomment-314983113\n    setTimeout(() => { conn.openUri(CONN_URL).catch(() => { }); }, RECONNECT_TIME);\n  });\n\n  return conn;\n}\n\nexport function getDbInstance() {\n  return conn;\n}\n"],"mappings":";;;;;;;;AAEA;;AACA;;;;AAHA;AAKA,IAAIA,IAAJ;;AAEO,SAASC,IAAT,GAAgB;EACrB,MAAMC,cAAc,GAAG,IAAvB;EACA,MAAMC,QAAQ,GAAGC,eAAOC,YAAP,CAAoBC,UAArC;;EAEA,IAAIN,IAAJ,EAAU;IACR,OAAOA,IAAP;EACD;;EAEDO,kBAASC,GAAT,CAAa,OAAb,EAAsB,CAACC,cAAD,EAAiBC,UAAjB,EAA6B,GAAGC,UAAhC,KAA+C;IACnE;IACAC,GAAG,CAAC,MAAD,EAAU,aAAYH,cAAe,IAAGC,UAAW,IAAGC,UAAU,CAACE,IAAX,CAAgB,IAAhB,CAAsB,GAA5E,CAAH;EACD,CAHD;;EAKAD,GAAG,CAAC,MAAD,EAAU,wCAAuCT,QAAS,EAA1D,CAAH;EACAH,IAAI,GAAGO,kBAASO,gBAAT,CAA0BX,QAA1B,CAAP,CAdqB,CAgBrB;;EACAH,IAAI,CAACe,EAAL,CAAQ,OAAR,EAAkBC,KAAD,IAAW;IAC1BJ,GAAG,CAAC,OAAD,EAAU;MAAEI;IAAF,CAAV,CAAH;EACD,CAFD;EAIAhB,IAAI,CAACiB,IAAL,CAAU,MAAV,EAAkB,MAAM;IACtBL,GAAG,CAAC,MAAD,EAAS;MAAEM,kBAAkB,EAAE;IAAtB,CAAT,CAAH;EACD,CAFD;EAIAlB,IAAI,CAACe,EAAL,CAAQ,WAAR,EAAqB,MAAM;IACzBH,GAAG,CAAC,MAAD,EAAS;MAAEM,kBAAkB,EAAE;IAAtB,CAAT,CAAH;EACD,CAFD;EAIAlB,IAAI,CAACe,EAAL,CAAQ,YAAR,EAAsB,MAAM;IAC1BH,GAAG,CAAC,MAAD,EAAS;MAAEM,kBAAkB,EAAE;IAAtB,CAAT,CAAH;EACD,CAFD;EAIAlB,IAAI,CAACe,EAAL,CAAQ,aAAR,EAAuB,MAAM;IAC3BH,GAAG,CAAC,MAAD,EAAS;MAAEM,kBAAkB,EAAE;IAAtB,CAAT,CAAH;EACD,CAFD;EAIAlB,IAAI,CAACe,EAAL,CAAQ,cAAR,EAAwB,MAAM;IAC5BH,GAAG,CAAC,OAAD,EAAU;MAAEM,kBAAkB,EAAG,gCAA+BhB,cAAc,GAAG,IAAK;IAA5E,CAAV,CAAH,CAD4B,CAE5B;;IACAiB,UAAU,CAAC,MAAM;MAAEnB,IAAI,CAACoB,OAAL,CAAajB,QAAb,EAAuBkB,KAAvB,CAA6B,MAAM,CAAG,CAAtC;IAA0C,CAAnD,EAAqDnB,cAArD,CAAV;EACD,CAJD;EAMA,OAAOF,IAAP;AACD;;AAEM,SAASsB,aAAT,GAAyB;EAC9B,OAAOtB,IAAP;AACD"}},"mtime":1653643634177},"{\"assumptions\":{},\"sourceRoot\":\"/Users/ramireddycharitha/microservices/sample-micro-service/config/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/ramireddycharitha/microservices/sample-micro-service\",\"filename\":\"/Users/ramireddycharitha/microservices/sample-micro-service/config/index.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"default\",\"root\":\"/Users/ramireddycharitha/microservices/sample-micro-service\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.17.10:default":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _default2 = _interopRequireDefault(require(\"./default\"));\n\nvar _dev = _interopRequireDefault(require(\"./dev\"));\n\nvar _prod = _interopRequireDefault(require(\"./prod\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst config = () => {\n  // process.env.NODE_ENV = \"default\";\n  switch (process.env.NODE_ENV) {\n    case \"default\":\n      return _default2.default;\n\n    case \"dev\":\n      return _dev.default;\n\n    case \"production\":\n      return _prod.default;\n\n    default:\n      throw new Error(\"Config variables not set\");\n  }\n};\n\nvar _default = config();\n\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb25maWciLCJwcm9jZXNzIiwiZW52IiwiTk9ERV9FTlYiLCJsb2NhbENvbmZpZyIsImRldkNvbmZpZyIsInByb2RDb25maWciLCJFcnJvciJdLCJzb3VyY2VSb290IjoiL1VzZXJzL3JhbWlyZWRkeWNoYXJpdGhhL21pY3Jvc2VydmljZXMvc2FtcGxlLW1pY3JvLXNlcnZpY2UvY29uZmlnLyIsInNvdXJjZXMiOlsiaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGxvY2FsQ29uZmlnIGZyb20gXCIuL2RlZmF1bHRcIjtcbmltcG9ydCBkZXZDb25maWcgZnJvbSBcIi4vZGV2XCI7XG5pbXBvcnQgcHJvZENvbmZpZyBmcm9tIFwiLi9wcm9kXCI7XG5cbmNvbnN0IGNvbmZpZyA9ICgpID0+IHtcbiAgLy8gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPSBcImRlZmF1bHRcIjtcbiAgc3dpdGNoIChwcm9jZXNzLmVudi5OT0RFX0VOVikge1xuICAgIGNhc2UgXCJkZWZhdWx0XCI6XG4gICAgICByZXR1cm4gbG9jYWxDb25maWc7XG4gICAgY2FzZSBcImRldlwiOlxuICAgICAgcmV0dXJuIGRldkNvbmZpZztcbiAgICBjYXNlIFwicHJvZHVjdGlvblwiOlxuICAgICAgcmV0dXJuIHByb2RDb25maWc7XG4gICAgZGVmYXVsdDpcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkNvbmZpZyB2YXJpYWJsZXMgbm90IHNldFwiKTtcbiAgfVxufTtcbmV4cG9ydCBkZWZhdWx0IGNvbmZpZygpO1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7O0FBQ0E7O0FBQ0E7Ozs7QUFFQSxNQUFNQSxNQUFNLEdBQUcsTUFBTTtFQUNuQjtFQUNBLFFBQVFDLE9BQU8sQ0FBQ0MsR0FBUixDQUFZQyxRQUFwQjtJQUNFLEtBQUssU0FBTDtNQUNFLE9BQU9DLGlCQUFQOztJQUNGLEtBQUssS0FBTDtNQUNFLE9BQU9DLFlBQVA7O0lBQ0YsS0FBSyxZQUFMO01BQ0UsT0FBT0MsYUFBUDs7SUFDRjtNQUNFLE1BQU0sSUFBSUMsS0FBSixDQUFVLDBCQUFWLENBQU47RUFSSjtBQVVELENBWkQ7O2VBYWVQLE1BQU0sRSJ9","map":{"version":3,"names":["config","process","env","NODE_ENV","localConfig","devConfig","prodConfig","Error"],"sourceRoot":"/Users/ramireddycharitha/microservices/sample-micro-service/config/","sources":["index.js"],"sourcesContent":["import localConfig from \"./default\";\nimport devConfig from \"./dev\";\nimport prodConfig from \"./prod\";\n\nconst config = () => {\n  // process.env.NODE_ENV = \"default\";\n  switch (process.env.NODE_ENV) {\n    case \"default\":\n      return localConfig;\n    case \"dev\":\n      return devConfig;\n    case \"production\":\n      return prodConfig;\n    default:\n      throw new Error(\"Config variables not set\");\n  }\n};\nexport default config();\n"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;;;AAEA,MAAMA,MAAM,GAAG,MAAM;EACnB;EACA,QAAQC,OAAO,CAACC,GAAR,CAAYC,QAApB;IACE,KAAK,SAAL;MACE,OAAOC,iBAAP;;IACF,KAAK,KAAL;MACE,OAAOC,YAAP;;IACF,KAAK,YAAL;MACE,OAAOC,aAAP;;IACF;MACE,MAAM,IAAIC,KAAJ,CAAU,0BAAV,CAAN;EARJ;AAUD,CAZD;;eAaeP,MAAM,E"}},"mtime":1653643634176},"{\"assumptions\":{},\"sourceRoot\":\"/Users/ramireddycharitha/microservices/sample-micro-service/config/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/ramireddycharitha/microservices/sample-micro-service\",\"filename\":\"/Users/ramireddycharitha/microservices/sample-micro-service/config/default.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"default\",\"root\":\"/Users/ramireddycharitha/microservices/sample-micro-service\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.17.10:default":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _default = {\n  mainDbconfig: {\n    connString: \"mongodb://localhost:27017/lc_metro_db\"\n  },\n  analyticsDbConfig: {\n    connString: \"mongodb://localhost:27017/analyticsdb\"\n  },\n  redisConfig: {\n    connString: \"redis://localhost:6379\"\n  },\n  sentry_dsn: process.env.SENTRY_DSN\n};\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJtYWluRGJjb25maWciLCJjb25uU3RyaW5nIiwiYW5hbHl0aWNzRGJDb25maWciLCJyZWRpc0NvbmZpZyIsInNlbnRyeV9kc24iLCJwcm9jZXNzIiwiZW52IiwiU0VOVFJZX0RTTiJdLCJzb3VyY2VSb290IjoiL1VzZXJzL3JhbWlyZWRkeWNoYXJpdGhhL21pY3Jvc2VydmljZXMvc2FtcGxlLW1pY3JvLXNlcnZpY2UvY29uZmlnLyIsInNvdXJjZXMiOlsiZGVmYXVsdC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCB7XG4gIG1haW5EYmNvbmZpZzoge1xuICAgIGNvbm5TdHJpbmc6IFwibW9uZ29kYjovL2xvY2FsaG9zdDoyNzAxNy9sY19tZXRyb19kYlwiLFxuICB9LFxuICBhbmFseXRpY3NEYkNvbmZpZzoge1xuICAgIGNvbm5TdHJpbmc6IFwibW9uZ29kYjovL2xvY2FsaG9zdDoyNzAxNy9hbmFseXRpY3NkYlwiLFxuICB9LFxuICByZWRpc0NvbmZpZzoge1xuICAgIGNvbm5TdHJpbmc6IFwicmVkaXM6Ly9sb2NhbGhvc3Q6NjM3OVwiLFxuICB9LFxuICBzZW50cnlfZHNuOiBwcm9jZXNzLmVudi5TRU5UUllfRFNOLFxufTtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7O2VBQWU7RUFDYkEsWUFBWSxFQUFFO0lBQ1pDLFVBQVUsRUFBRTtFQURBLENBREQ7RUFJYkMsaUJBQWlCLEVBQUU7SUFDakJELFVBQVUsRUFBRTtFQURLLENBSk47RUFPYkUsV0FBVyxFQUFFO0lBQ1hGLFVBQVUsRUFBRTtFQURELENBUEE7RUFVYkcsVUFBVSxFQUFFQyxPQUFPLENBQUNDLEdBQVIsQ0FBWUM7QUFWWCxDIn0=","map":{"version":3,"names":["mainDbconfig","connString","analyticsDbConfig","redisConfig","sentry_dsn","process","env","SENTRY_DSN"],"sourceRoot":"/Users/ramireddycharitha/microservices/sample-micro-service/config/","sources":["default.js"],"sourcesContent":["export default {\n  mainDbconfig: {\n    connString: \"mongodb://localhost:27017/lc_metro_db\",\n  },\n  analyticsDbConfig: {\n    connString: \"mongodb://localhost:27017/analyticsdb\",\n  },\n  redisConfig: {\n    connString: \"redis://localhost:6379\",\n  },\n  sentry_dsn: process.env.SENTRY_DSN,\n};\n"],"mappings":";;;;;;eAAe;EACbA,YAAY,EAAE;IACZC,UAAU,EAAE;EADA,CADD;EAIbC,iBAAiB,EAAE;IACjBD,UAAU,EAAE;EADK,CAJN;EAObE,WAAW,EAAE;IACXF,UAAU,EAAE;EADD,CAPA;EAUbG,UAAU,EAAEC,OAAO,CAACC,GAAR,CAAYC;AAVX,C"}},"mtime":1653643634174},"{\"assumptions\":{},\"sourceRoot\":\"/Users/ramireddycharitha/microservices/sample-micro-service/config/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/ramireddycharitha/microservices/sample-micro-service\",\"filename\":\"/Users/ramireddycharitha/microservices/sample-micro-service/config/dev.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"default\",\"root\":\"/Users/ramireddycharitha/microservices/sample-micro-service\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.17.10:default":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nrequire(\"dotenv/config\");\n\nvar _default = {\n  mainDbconfig: {\n    connString: process.env.MAIN_DB_CONN_STRING // Change all required config to env variables\n\n  },\n  analyticsDbConfig: {\n    connString: process.env.ANALYTICS_DB_CONN_STRING\n  },\n  redisConfig: {\n    connString: \"redis://localhost:6379\"\n  },\n  sentry_dsn: process.env.SENTRY_DSN\n};\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJtYWluRGJjb25maWciLCJjb25uU3RyaW5nIiwicHJvY2VzcyIsImVudiIsIk1BSU5fREJfQ09OTl9TVFJJTkciLCJhbmFseXRpY3NEYkNvbmZpZyIsIkFOQUxZVElDU19EQl9DT05OX1NUUklORyIsInJlZGlzQ29uZmlnIiwic2VudHJ5X2RzbiIsIlNFTlRSWV9EU04iXSwic291cmNlUm9vdCI6Ii9Vc2Vycy9yYW1pcmVkZHljaGFyaXRoYS9taWNyb3NlcnZpY2VzL3NhbXBsZS1taWNyby1zZXJ2aWNlL2NvbmZpZy8iLCJzb3VyY2VzIjpbImRldi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgXCJkb3RlbnYvY29uZmlnXCI7XG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgbWFpbkRiY29uZmlnOiB7XG4gICAgY29ublN0cmluZzogcHJvY2Vzcy5lbnYuTUFJTl9EQl9DT05OX1NUUklORywgLy8gQ2hhbmdlIGFsbCByZXF1aXJlZCBjb25maWcgdG8gZW52IHZhcmlhYmxlc1xuICB9LFxuICBhbmFseXRpY3NEYkNvbmZpZzoge1xuICAgIGNvbm5TdHJpbmc6IHByb2Nlc3MuZW52LkFOQUxZVElDU19EQl9DT05OX1NUUklORyxcbiAgfSxcbiAgcmVkaXNDb25maWc6IHtcbiAgICBjb25uU3RyaW5nOiBcInJlZGlzOi8vbG9jYWxob3N0OjYzNzlcIixcbiAgfSxcbiAgc2VudHJ5X2RzbjogcHJvY2Vzcy5lbnYuU0VOVFJZX0RTTixcbn07XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTs7ZUFFZTtFQUNiQSxZQUFZLEVBQUU7SUFDWkMsVUFBVSxFQUFFQyxPQUFPLENBQUNDLEdBQVIsQ0FBWUMsbUJBRFosQ0FDaUM7O0VBRGpDLENBREQ7RUFJYkMsaUJBQWlCLEVBQUU7SUFDakJKLFVBQVUsRUFBRUMsT0FBTyxDQUFDQyxHQUFSLENBQVlHO0VBRFAsQ0FKTjtFQU9iQyxXQUFXLEVBQUU7SUFDWE4sVUFBVSxFQUFFO0VBREQsQ0FQQTtFQVViTyxVQUFVLEVBQUVOLE9BQU8sQ0FBQ0MsR0FBUixDQUFZTTtBQVZYLEMifQ==","map":{"version":3,"names":["mainDbconfig","connString","process","env","MAIN_DB_CONN_STRING","analyticsDbConfig","ANALYTICS_DB_CONN_STRING","redisConfig","sentry_dsn","SENTRY_DSN"],"sourceRoot":"/Users/ramireddycharitha/microservices/sample-micro-service/config/","sources":["dev.js"],"sourcesContent":["import \"dotenv/config\";\n\nexport default {\n  mainDbconfig: {\n    connString: process.env.MAIN_DB_CONN_STRING, // Change all required config to env variables\n  },\n  analyticsDbConfig: {\n    connString: process.env.ANALYTICS_DB_CONN_STRING,\n  },\n  redisConfig: {\n    connString: \"redis://localhost:6379\",\n  },\n  sentry_dsn: process.env.SENTRY_DSN,\n};\n"],"mappings":";;;;;;;AAAA;;eAEe;EACbA,YAAY,EAAE;IACZC,UAAU,EAAEC,OAAO,CAACC,GAAR,CAAYC,mBADZ,CACiC;;EADjC,CADD;EAIbC,iBAAiB,EAAE;IACjBJ,UAAU,EAAEC,OAAO,CAACC,GAAR,CAAYG;EADP,CAJN;EAObC,WAAW,EAAE;IACXN,UAAU,EAAE;EADD,CAPA;EAUbO,UAAU,EAAEN,OAAO,CAACC,GAAR,CAAYM;AAVX,C"}},"mtime":1653643634175},"{\"assumptions\":{},\"sourceRoot\":\"/Users/ramireddycharitha/microservices/sample-micro-service/config/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/ramireddycharitha/microservices/sample-micro-service\",\"filename\":\"/Users/ramireddycharitha/microservices/sample-micro-service/config/prod.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"default\",\"root\":\"/Users/ramireddycharitha/microservices/sample-micro-service\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.17.10:default":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nrequire(\"dotenv/config\");\n\nvar _default = {\n  mainDbconfig: {\n    connString: process.env.MAIN_DB_CONN_STRING // Change all required config to env variables\n\n  },\n  analyticsDbConfig: {\n    connString: process.env.ANALYTICS_DB_CONN_STRING\n  },\n  redisConfig: {\n    connString: \"redis://localhost:6379\"\n  },\n  sentry_dsn: process.env.SENTRY_DSN\n};\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJtYWluRGJjb25maWciLCJjb25uU3RyaW5nIiwicHJvY2VzcyIsImVudiIsIk1BSU5fREJfQ09OTl9TVFJJTkciLCJhbmFseXRpY3NEYkNvbmZpZyIsIkFOQUxZVElDU19EQl9DT05OX1NUUklORyIsInJlZGlzQ29uZmlnIiwic2VudHJ5X2RzbiIsIlNFTlRSWV9EU04iXSwic291cmNlUm9vdCI6Ii9Vc2Vycy9yYW1pcmVkZHljaGFyaXRoYS9taWNyb3NlcnZpY2VzL3NhbXBsZS1taWNyby1zZXJ2aWNlL2NvbmZpZy8iLCJzb3VyY2VzIjpbInByb2QuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFwiZG90ZW52L2NvbmZpZ1wiO1xuXG5leHBvcnQgZGVmYXVsdCB7XG4gIG1haW5EYmNvbmZpZzoge1xuICAgIGNvbm5TdHJpbmc6IHByb2Nlc3MuZW52Lk1BSU5fREJfQ09OTl9TVFJJTkcsIC8vIENoYW5nZSBhbGwgcmVxdWlyZWQgY29uZmlnIHRvIGVudiB2YXJpYWJsZXNcbiAgfSxcbiAgYW5hbHl0aWNzRGJDb25maWc6IHtcbiAgICBjb25uU3RyaW5nOiBwcm9jZXNzLmVudi5BTkFMWVRJQ1NfREJfQ09OTl9TVFJJTkcsXG4gIH0sXG4gIHJlZGlzQ29uZmlnOiB7XG4gICAgY29ublN0cmluZzogXCJyZWRpczovL2xvY2FsaG9zdDo2Mzc5XCIsXG4gIH0sXG4gIHNlbnRyeV9kc246IHByb2Nlc3MuZW52LlNFTlRSWV9EU04sXG59O1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7O2VBRWU7RUFDYkEsWUFBWSxFQUFFO0lBQ1pDLFVBQVUsRUFBRUMsT0FBTyxDQUFDQyxHQUFSLENBQVlDLG1CQURaLENBQ2lDOztFQURqQyxDQUREO0VBSWJDLGlCQUFpQixFQUFFO0lBQ2pCSixVQUFVLEVBQUVDLE9BQU8sQ0FBQ0MsR0FBUixDQUFZRztFQURQLENBSk47RUFPYkMsV0FBVyxFQUFFO0lBQ1hOLFVBQVUsRUFBRTtFQURELENBUEE7RUFVYk8sVUFBVSxFQUFFTixPQUFPLENBQUNDLEdBQVIsQ0FBWU07QUFWWCxDIn0=","map":{"version":3,"names":["mainDbconfig","connString","process","env","MAIN_DB_CONN_STRING","analyticsDbConfig","ANALYTICS_DB_CONN_STRING","redisConfig","sentry_dsn","SENTRY_DSN"],"sourceRoot":"/Users/ramireddycharitha/microservices/sample-micro-service/config/","sources":["prod.js"],"sourcesContent":["import \"dotenv/config\";\n\nexport default {\n  mainDbconfig: {\n    connString: process.env.MAIN_DB_CONN_STRING, // Change all required config to env variables\n  },\n  analyticsDbConfig: {\n    connString: process.env.ANALYTICS_DB_CONN_STRING,\n  },\n  redisConfig: {\n    connString: \"redis://localhost:6379\",\n  },\n  sentry_dsn: process.env.SENTRY_DSN,\n};\n"],"mappings":";;;;;;;AAAA;;eAEe;EACbA,YAAY,EAAE;IACZC,UAAU,EAAEC,OAAO,CAACC,GAAR,CAAYC,mBADZ,CACiC;;EADjC,CADD;EAIbC,iBAAiB,EAAE;IACjBJ,UAAU,EAAEC,OAAO,CAACC,GAAR,CAAYG;EADP,CAJN;EAObC,WAAW,EAAE;IACXN,UAAU,EAAE;EADD,CAPA;EAUbO,UAAU,EAAEN,OAAO,CAACC,GAAR,CAAYM;AAVX,C"}},"mtime":1653643634176},"{\"assumptions\":{},\"sourceRoot\":\"/Users/ramireddycharitha/microservices/sample-micro-service/connections/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/ramireddycharitha/microservices/sample-micro-service\",\"filename\":\"/Users/ramireddycharitha/microservices/sample-micro-service/connections/AnalyticsDb.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"default\",\"root\":\"/Users/ramireddycharitha/microservices/sample-micro-service\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.17.10:default":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getDbInstance = getDbInstance;\nexports.init = init;\n\nvar _mongoose = _interopRequireDefault(require(\"mongoose\"));\n\nvar _index = _interopRequireDefault(require(\"../config/index\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/* eslint-disable import/no-import-module-exports */\nlet conn;\n\nfunction init() {\n  const RECONNECT_TIME = 5000;\n  const CONN_URL = _index.default.analyticsDbConfig.connString;\n\n  if (conn) {\n    return conn;\n  }\n\n  log(\"info\", `CONN_URL to connect to analytics database ${CONN_URL}`);\n  conn = _mongoose.default.createConnection(CONN_URL); //  Mongoose Connection Events\n\n  conn.on(\"error\", error => {\n    log(\"error\", {\n      error\n    });\n  });\n  conn.once(\"open\", () => {\n    log(\"info\", {\n      dBConnectionStatus: \"open\"\n    });\n  });\n  conn.on(\"connected\", () => {\n    log(\"info\", {\n      dBConnectionStatus: \"connected\"\n    });\n  });\n  conn.on(\"connecting\", () => {\n    log(\"info\", {\n      dBConnectionStatus: \"connecting\"\n    });\n  });\n  conn.on(\"reconnected\", () => {\n    log(\"info\", {\n      dBConnectionStatus: \"reconnected\"\n    });\n  });\n  conn.on(\"disconnected\", () => {\n    log(\"error\", {\n      dBConnectionStatus: `disconnected Reconnecting in ${RECONNECT_TIME / 1000}s...`\n    }); // https://github.com/automattic/mongoose/issues/5169#issuecomment-314983113\n\n    setTimeout(() => {\n      conn.openUri(CONN_URL).catch(() => {});\n    }, RECONNECT_TIME);\n  });\n  return conn;\n}\n\nfunction getDbInstance() {\n  return conn;\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb25uIiwiaW5pdCIsIlJFQ09OTkVDVF9USU1FIiwiQ09OTl9VUkwiLCJjb25maWciLCJhbmFseXRpY3NEYkNvbmZpZyIsImNvbm5TdHJpbmciLCJsb2ciLCJtb25nb29zZSIsImNyZWF0ZUNvbm5lY3Rpb24iLCJvbiIsImVycm9yIiwib25jZSIsImRCQ29ubmVjdGlvblN0YXR1cyIsInNldFRpbWVvdXQiLCJvcGVuVXJpIiwiY2F0Y2giLCJnZXREYkluc3RhbmNlIl0sInNvdXJjZVJvb3QiOiIvVXNlcnMvcmFtaXJlZGR5Y2hhcml0aGEvbWljcm9zZXJ2aWNlcy9zYW1wbGUtbWljcm8tc2VydmljZS9jb25uZWN0aW9ucy8iLCJzb3VyY2VzIjpbIkFuYWx5dGljc0RiLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIGVzbGludC1kaXNhYmxlIGltcG9ydC9uby1pbXBvcnQtbW9kdWxlLWV4cG9ydHMgKi9cblxuaW1wb3J0IG1vbmdvb3NlIGZyb20gXCJtb25nb29zZVwiO1xuaW1wb3J0IGNvbmZpZyBmcm9tIFwiLi4vY29uZmlnL2luZGV4XCI7XG5cbmxldCBjb25uO1xuXG5leHBvcnQgZnVuY3Rpb24gaW5pdCgpIHtcbiAgY29uc3QgUkVDT05ORUNUX1RJTUUgPSA1MDAwO1xuICBjb25zdCBDT05OX1VSTCA9IGNvbmZpZy5hbmFseXRpY3NEYkNvbmZpZy5jb25uU3RyaW5nO1xuXG4gIGlmIChjb25uKSB7XG4gICAgcmV0dXJuIGNvbm47XG4gIH1cblxuICBsb2coXCJpbmZvXCIsIGBDT05OX1VSTCB0byBjb25uZWN0IHRvIGFuYWx5dGljcyBkYXRhYmFzZSAke0NPTk5fVVJMfWApO1xuICBjb25uID0gbW9uZ29vc2UuY3JlYXRlQ29ubmVjdGlvbihDT05OX1VSTCk7XG5cbiAgLy8gIE1vbmdvb3NlIENvbm5lY3Rpb24gRXZlbnRzXG4gIGNvbm4ub24oXCJlcnJvclwiLCAoZXJyb3IpID0+IHtcbiAgICBsb2coXCJlcnJvclwiLCB7IGVycm9yIH0pO1xuICB9KTtcblxuICBjb25uLm9uY2UoXCJvcGVuXCIsICgpID0+IHtcbiAgICBsb2coXCJpbmZvXCIsIHsgZEJDb25uZWN0aW9uU3RhdHVzOiBcIm9wZW5cIiB9KTtcbiAgfSk7XG5cbiAgY29ubi5vbihcImNvbm5lY3RlZFwiLCAoKSA9PiB7XG4gICAgbG9nKFwiaW5mb1wiLCB7IGRCQ29ubmVjdGlvblN0YXR1czogXCJjb25uZWN0ZWRcIiB9KTtcbiAgfSk7XG5cbiAgY29ubi5vbihcImNvbm5lY3RpbmdcIiwgKCkgPT4ge1xuICAgIGxvZyhcImluZm9cIiwgeyBkQkNvbm5lY3Rpb25TdGF0dXM6IFwiY29ubmVjdGluZ1wiIH0pO1xuICB9KTtcblxuICBjb25uLm9uKFwicmVjb25uZWN0ZWRcIiwgKCkgPT4ge1xuICAgIGxvZyhcImluZm9cIiwgeyBkQkNvbm5lY3Rpb25TdGF0dXM6IFwicmVjb25uZWN0ZWRcIiB9KTtcbiAgfSk7XG5cbiAgY29ubi5vbihcImRpc2Nvbm5lY3RlZFwiLCAoKSA9PiB7XG4gICAgbG9nKFwiZXJyb3JcIiwgeyBkQkNvbm5lY3Rpb25TdGF0dXM6IGBkaXNjb25uZWN0ZWQgUmVjb25uZWN0aW5nIGluICR7UkVDT05ORUNUX1RJTUUgLyAxMDAwfXMuLi5gIH0pO1xuICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9hdXRvbWF0dGljL21vbmdvb3NlL2lzc3Vlcy81MTY5I2lzc3VlY29tbWVudC0zMTQ5ODMxMTNcbiAgICBzZXRUaW1lb3V0KCgpID0+IHsgY29ubi5vcGVuVXJpKENPTk5fVVJMKS5jYXRjaCgoKSA9PiB7IH0pOyB9LCBSRUNPTk5FQ1RfVElNRSk7XG4gIH0pO1xuXG4gIHJldHVybiBjb25uO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0RGJJbnN0YW5jZSgpIHtcbiAgcmV0dXJuIGNvbm47XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBRUE7O0FBQ0E7Ozs7QUFIQTtBQUtBLElBQUlBLElBQUo7O0FBRU8sU0FBU0MsSUFBVCxHQUFnQjtFQUNyQixNQUFNQyxjQUFjLEdBQUcsSUFBdkI7RUFDQSxNQUFNQyxRQUFRLEdBQUdDLGVBQU9DLGlCQUFQLENBQXlCQyxVQUExQzs7RUFFQSxJQUFJTixJQUFKLEVBQVU7SUFDUixPQUFPQSxJQUFQO0VBQ0Q7O0VBRURPLEdBQUcsQ0FBQyxNQUFELEVBQVUsNkNBQTRDSixRQUFTLEVBQS9ELENBQUg7RUFDQUgsSUFBSSxHQUFHUSxrQkFBU0MsZ0JBQVQsQ0FBMEJOLFFBQTFCLENBQVAsQ0FUcUIsQ0FXckI7O0VBQ0FILElBQUksQ0FBQ1UsRUFBTCxDQUFRLE9BQVIsRUFBa0JDLEtBQUQsSUFBVztJQUMxQkosR0FBRyxDQUFDLE9BQUQsRUFBVTtNQUFFSTtJQUFGLENBQVYsQ0FBSDtFQUNELENBRkQ7RUFJQVgsSUFBSSxDQUFDWSxJQUFMLENBQVUsTUFBVixFQUFrQixNQUFNO0lBQ3RCTCxHQUFHLENBQUMsTUFBRCxFQUFTO01BQUVNLGtCQUFrQixFQUFFO0lBQXRCLENBQVQsQ0FBSDtFQUNELENBRkQ7RUFJQWIsSUFBSSxDQUFDVSxFQUFMLENBQVEsV0FBUixFQUFxQixNQUFNO0lBQ3pCSCxHQUFHLENBQUMsTUFBRCxFQUFTO01BQUVNLGtCQUFrQixFQUFFO0lBQXRCLENBQVQsQ0FBSDtFQUNELENBRkQ7RUFJQWIsSUFBSSxDQUFDVSxFQUFMLENBQVEsWUFBUixFQUFzQixNQUFNO0lBQzFCSCxHQUFHLENBQUMsTUFBRCxFQUFTO01BQUVNLGtCQUFrQixFQUFFO0lBQXRCLENBQVQsQ0FBSDtFQUNELENBRkQ7RUFJQWIsSUFBSSxDQUFDVSxFQUFMLENBQVEsYUFBUixFQUF1QixNQUFNO0lBQzNCSCxHQUFHLENBQUMsTUFBRCxFQUFTO01BQUVNLGtCQUFrQixFQUFFO0lBQXRCLENBQVQsQ0FBSDtFQUNELENBRkQ7RUFJQWIsSUFBSSxDQUFDVSxFQUFMLENBQVEsY0FBUixFQUF3QixNQUFNO0lBQzVCSCxHQUFHLENBQUMsT0FBRCxFQUFVO01BQUVNLGtCQUFrQixFQUFHLGdDQUErQlgsY0FBYyxHQUFHLElBQUs7SUFBNUUsQ0FBVixDQUFILENBRDRCLENBRTVCOztJQUNBWSxVQUFVLENBQUMsTUFBTTtNQUFFZCxJQUFJLENBQUNlLE9BQUwsQ0FBYVosUUFBYixFQUF1QmEsS0FBdkIsQ0FBNkIsTUFBTSxDQUFHLENBQXRDO0lBQTBDLENBQW5ELEVBQXFEZCxjQUFyRCxDQUFWO0VBQ0QsQ0FKRDtFQU1BLE9BQU9GLElBQVA7QUFDRDs7QUFFTSxTQUFTaUIsYUFBVCxHQUF5QjtFQUM5QixPQUFPakIsSUFBUDtBQUNEIn0=","map":{"version":3,"names":["conn","init","RECONNECT_TIME","CONN_URL","config","analyticsDbConfig","connString","log","mongoose","createConnection","on","error","once","dBConnectionStatus","setTimeout","openUri","catch","getDbInstance"],"sourceRoot":"/Users/ramireddycharitha/microservices/sample-micro-service/connections/","sources":["AnalyticsDb.js"],"sourcesContent":["/* eslint-disable import/no-import-module-exports */\n\nimport mongoose from \"mongoose\";\nimport config from \"../config/index\";\n\nlet conn;\n\nexport function init() {\n  const RECONNECT_TIME = 5000;\n  const CONN_URL = config.analyticsDbConfig.connString;\n\n  if (conn) {\n    return conn;\n  }\n\n  log(\"info\", `CONN_URL to connect to analytics database ${CONN_URL}`);\n  conn = mongoose.createConnection(CONN_URL);\n\n  //  Mongoose Connection Events\n  conn.on(\"error\", (error) => {\n    log(\"error\", { error });\n  });\n\n  conn.once(\"open\", () => {\n    log(\"info\", { dBConnectionStatus: \"open\" });\n  });\n\n  conn.on(\"connected\", () => {\n    log(\"info\", { dBConnectionStatus: \"connected\" });\n  });\n\n  conn.on(\"connecting\", () => {\n    log(\"info\", { dBConnectionStatus: \"connecting\" });\n  });\n\n  conn.on(\"reconnected\", () => {\n    log(\"info\", { dBConnectionStatus: \"reconnected\" });\n  });\n\n  conn.on(\"disconnected\", () => {\n    log(\"error\", { dBConnectionStatus: `disconnected Reconnecting in ${RECONNECT_TIME / 1000}s...` });\n    // https://github.com/automattic/mongoose/issues/5169#issuecomment-314983113\n    setTimeout(() => { conn.openUri(CONN_URL).catch(() => { }); }, RECONNECT_TIME);\n  });\n\n  return conn;\n}\n\nexport function getDbInstance() {\n  return conn;\n}\n"],"mappings":";;;;;;;;AAEA;;AACA;;;;AAHA;AAKA,IAAIA,IAAJ;;AAEO,SAASC,IAAT,GAAgB;EACrB,MAAMC,cAAc,GAAG,IAAvB;EACA,MAAMC,QAAQ,GAAGC,eAAOC,iBAAP,CAAyBC,UAA1C;;EAEA,IAAIN,IAAJ,EAAU;IACR,OAAOA,IAAP;EACD;;EAEDO,GAAG,CAAC,MAAD,EAAU,6CAA4CJ,QAAS,EAA/D,CAAH;EACAH,IAAI,GAAGQ,kBAASC,gBAAT,CAA0BN,QAA1B,CAAP,CATqB,CAWrB;;EACAH,IAAI,CAACU,EAAL,CAAQ,OAAR,EAAkBC,KAAD,IAAW;IAC1BJ,GAAG,CAAC,OAAD,EAAU;MAAEI;IAAF,CAAV,CAAH;EACD,CAFD;EAIAX,IAAI,CAACY,IAAL,CAAU,MAAV,EAAkB,MAAM;IACtBL,GAAG,CAAC,MAAD,EAAS;MAAEM,kBAAkB,EAAE;IAAtB,CAAT,CAAH;EACD,CAFD;EAIAb,IAAI,CAACU,EAAL,CAAQ,WAAR,EAAqB,MAAM;IACzBH,GAAG,CAAC,MAAD,EAAS;MAAEM,kBAAkB,EAAE;IAAtB,CAAT,CAAH;EACD,CAFD;EAIAb,IAAI,CAACU,EAAL,CAAQ,YAAR,EAAsB,MAAM;IAC1BH,GAAG,CAAC,MAAD,EAAS;MAAEM,kBAAkB,EAAE;IAAtB,CAAT,CAAH;EACD,CAFD;EAIAb,IAAI,CAACU,EAAL,CAAQ,aAAR,EAAuB,MAAM;IAC3BH,GAAG,CAAC,MAAD,EAAS;MAAEM,kBAAkB,EAAE;IAAtB,CAAT,CAAH;EACD,CAFD;EAIAb,IAAI,CAACU,EAAL,CAAQ,cAAR,EAAwB,MAAM;IAC5BH,GAAG,CAAC,OAAD,EAAU;MAAEM,kBAAkB,EAAG,gCAA+BX,cAAc,GAAG,IAAK;IAA5E,CAAV,CAAH,CAD4B,CAE5B;;IACAY,UAAU,CAAC,MAAM;MAAEd,IAAI,CAACe,OAAL,CAAaZ,QAAb,EAAuBa,KAAvB,CAA6B,MAAM,CAAG,CAAtC;IAA0C,CAAnD,EAAqDd,cAArD,CAAV;EACD,CAJD;EAMA,OAAOF,IAAP;AACD;;AAEM,SAASiB,aAAT,GAAyB;EAC9B,OAAOjB,IAAP;AACD"}},"mtime":1653643634176},"{\"assumptions\":{},\"sourceRoot\":\"/Users/ramireddycharitha/microservices/sample-micro-service/connections/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/ramireddycharitha/microservices/sample-micro-service\",\"filename\":\"/Users/ramireddycharitha/microservices/sample-micro-service/connections/RedisClient.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"default\",\"root\":\"/Users/ramireddycharitha/microservices/sample-micro-service\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.17.10:default":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.RedisClient = void 0;\nexports.getDbInstance = getDbInstance;\nexports.init = init;\n\nvar _redis = require(\"redis\");\n\nvar _index = _interopRequireDefault(require(\"../config/index\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// eslint-disable-next-line import/no-mutable-exports\nlet RedisClient;\nexports.RedisClient = RedisClient;\n\nfunction init() {\n  const CONN_URL = _index.default.redisConfig.connString;\n\n  if (RedisClient) {\n    return RedisClient;\n  }\n\n  log(\"info\", `CONN_URL to connect to redis ${CONN_URL}`);\n  exports.RedisClient = RedisClient = (0, _redis.createClient)({\n    url: CONN_URL\n  }); //  Redis Connection Events\n\n  RedisClient.on(\"connect\", () => log(\"info\", {\n    redisConnection: \"connect\"\n  }));\n  RedisClient.on(\"ready\", () => log(\"info\", {\n    redisConnection: \"ready\"\n  }));\n  RedisClient.on(\"reconnecting\", () => log(\"info\", {\n    redisConnection: \"reconnecting\"\n  }));\n  RedisClient.on(\"end\", () => log(\"info\", {\n    redisConnection: \"disconnected\"\n  }));\n  RedisClient.on(\"error\", error => log(\"info\", {\n    error\n  }));\n\n  try {\n    RedisClient.connect();\n  } catch (error) {\n    log(\"error\", {\n      error\n    });\n  }\n\n  return RedisClient;\n}\n\nfunction getDbInstance() {\n  return RedisClient;\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJSZWRpc0NsaWVudCIsImluaXQiLCJDT05OX1VSTCIsImNvbmZpZyIsInJlZGlzQ29uZmlnIiwiY29ublN0cmluZyIsImxvZyIsInVybCIsIm9uIiwicmVkaXNDb25uZWN0aW9uIiwiZXJyb3IiLCJjb25uZWN0IiwiZ2V0RGJJbnN0YW5jZSJdLCJzb3VyY2VSb290IjoiL1VzZXJzL3JhbWlyZWRkeWNoYXJpdGhhL21pY3Jvc2VydmljZXMvc2FtcGxlLW1pY3JvLXNlcnZpY2UvY29ubmVjdGlvbnMvIiwic291cmNlcyI6WyJSZWRpc0NsaWVudC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjcmVhdGVDbGllbnQgfSBmcm9tIFwicmVkaXNcIjtcbmltcG9ydCBjb25maWcgZnJvbSBcIi4uL2NvbmZpZy9pbmRleFwiO1xuXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgaW1wb3J0L25vLW11dGFibGUtZXhwb3J0c1xuZXhwb3J0IGxldCBSZWRpc0NsaWVudDtcblxuZXhwb3J0IGZ1bmN0aW9uIGluaXQoKSB7XG4gIGNvbnN0IENPTk5fVVJMID0gY29uZmlnLnJlZGlzQ29uZmlnLmNvbm5TdHJpbmc7XG5cbiAgaWYgKFJlZGlzQ2xpZW50KSB7XG4gICAgcmV0dXJuIFJlZGlzQ2xpZW50O1xuICB9XG5cbiAgbG9nKFwiaW5mb1wiLCBgQ09OTl9VUkwgdG8gY29ubmVjdCB0byByZWRpcyAke0NPTk5fVVJMfWApO1xuXG4gIFJlZGlzQ2xpZW50ID0gY3JlYXRlQ2xpZW50KHtcbiAgICB1cmw6IENPTk5fVVJMLFxuICB9KTtcblxuICAvLyAgUmVkaXMgQ29ubmVjdGlvbiBFdmVudHNcbiAgUmVkaXNDbGllbnQub24oXCJjb25uZWN0XCIsICgpID0+IGxvZyhcImluZm9cIiwgeyByZWRpc0Nvbm5lY3Rpb246IFwiY29ubmVjdFwiIH0pKTtcbiAgUmVkaXNDbGllbnQub24oXCJyZWFkeVwiLCAoKSA9PiBsb2coXCJpbmZvXCIsIHsgcmVkaXNDb25uZWN0aW9uOiBcInJlYWR5XCIgfSkpO1xuICBSZWRpc0NsaWVudC5vbihcInJlY29ubmVjdGluZ1wiLCAoKSA9PiBsb2coXCJpbmZvXCIsIHsgcmVkaXNDb25uZWN0aW9uOiBcInJlY29ubmVjdGluZ1wiIH0pKTtcbiAgUmVkaXNDbGllbnQub24oXCJlbmRcIiwgKCkgPT4gbG9nKFwiaW5mb1wiLCB7IHJlZGlzQ29ubmVjdGlvbjogXCJkaXNjb25uZWN0ZWRcIiB9KSk7XG4gIFJlZGlzQ2xpZW50Lm9uKFwiZXJyb3JcIiwgKGVycm9yKSA9PiBsb2coXCJpbmZvXCIsIHsgZXJyb3IgfSkpO1xuICB0cnkge1xuICAgIFJlZGlzQ2xpZW50LmNvbm5lY3QoKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBsb2coXCJlcnJvclwiLCB7IGVycm9yIH0pO1xuICB9XG5cbiAgcmV0dXJuIFJlZGlzQ2xpZW50O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0RGJJbnN0YW5jZSgpIHtcbiAgcmV0dXJuIFJlZGlzQ2xpZW50O1xufVxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBQTs7QUFDQTs7OztBQUVBO0FBQ08sSUFBSUEsV0FBSjs7O0FBRUEsU0FBU0MsSUFBVCxHQUFnQjtFQUNyQixNQUFNQyxRQUFRLEdBQUdDLGVBQU9DLFdBQVAsQ0FBbUJDLFVBQXBDOztFQUVBLElBQUlMLFdBQUosRUFBaUI7SUFDZixPQUFPQSxXQUFQO0VBQ0Q7O0VBRURNLEdBQUcsQ0FBQyxNQUFELEVBQVUsZ0NBQStCSixRQUFTLEVBQWxELENBQUg7RUFFQSxzQkFBQUYsV0FBVyxHQUFHLHlCQUFhO0lBQ3pCTyxHQUFHLEVBQUVMO0VBRG9CLENBQWIsQ0FBZCxDQVRxQixDQWFyQjs7RUFDQUYsV0FBVyxDQUFDUSxFQUFaLENBQWUsU0FBZixFQUEwQixNQUFNRixHQUFHLENBQUMsTUFBRCxFQUFTO0lBQUVHLGVBQWUsRUFBRTtFQUFuQixDQUFULENBQW5DO0VBQ0FULFdBQVcsQ0FBQ1EsRUFBWixDQUFlLE9BQWYsRUFBd0IsTUFBTUYsR0FBRyxDQUFDLE1BQUQsRUFBUztJQUFFRyxlQUFlLEVBQUU7RUFBbkIsQ0FBVCxDQUFqQztFQUNBVCxXQUFXLENBQUNRLEVBQVosQ0FBZSxjQUFmLEVBQStCLE1BQU1GLEdBQUcsQ0FBQyxNQUFELEVBQVM7SUFBRUcsZUFBZSxFQUFFO0VBQW5CLENBQVQsQ0FBeEM7RUFDQVQsV0FBVyxDQUFDUSxFQUFaLENBQWUsS0FBZixFQUFzQixNQUFNRixHQUFHLENBQUMsTUFBRCxFQUFTO0lBQUVHLGVBQWUsRUFBRTtFQUFuQixDQUFULENBQS9CO0VBQ0FULFdBQVcsQ0FBQ1EsRUFBWixDQUFlLE9BQWYsRUFBeUJFLEtBQUQsSUFBV0osR0FBRyxDQUFDLE1BQUQsRUFBUztJQUFFSTtFQUFGLENBQVQsQ0FBdEM7O0VBQ0EsSUFBSTtJQUNGVixXQUFXLENBQUNXLE9BQVo7RUFDRCxDQUZELENBRUUsT0FBT0QsS0FBUCxFQUFjO0lBQ2RKLEdBQUcsQ0FBQyxPQUFELEVBQVU7TUFBRUk7SUFBRixDQUFWLENBQUg7RUFDRDs7RUFFRCxPQUFPVixXQUFQO0FBQ0Q7O0FBRU0sU0FBU1ksYUFBVCxHQUF5QjtFQUM5QixPQUFPWixXQUFQO0FBQ0QifQ==","map":{"version":3,"names":["RedisClient","init","CONN_URL","config","redisConfig","connString","log","url","on","redisConnection","error","connect","getDbInstance"],"sourceRoot":"/Users/ramireddycharitha/microservices/sample-micro-service/connections/","sources":["RedisClient.js"],"sourcesContent":["import { createClient } from \"redis\";\nimport config from \"../config/index\";\n\n// eslint-disable-next-line import/no-mutable-exports\nexport let RedisClient;\n\nexport function init() {\n  const CONN_URL = config.redisConfig.connString;\n\n  if (RedisClient) {\n    return RedisClient;\n  }\n\n  log(\"info\", `CONN_URL to connect to redis ${CONN_URL}`);\n\n  RedisClient = createClient({\n    url: CONN_URL,\n  });\n\n  //  Redis Connection Events\n  RedisClient.on(\"connect\", () => log(\"info\", { redisConnection: \"connect\" }));\n  RedisClient.on(\"ready\", () => log(\"info\", { redisConnection: \"ready\" }));\n  RedisClient.on(\"reconnecting\", () => log(\"info\", { redisConnection: \"reconnecting\" }));\n  RedisClient.on(\"end\", () => log(\"info\", { redisConnection: \"disconnected\" }));\n  RedisClient.on(\"error\", (error) => log(\"info\", { error }));\n  try {\n    RedisClient.connect();\n  } catch (error) {\n    log(\"error\", { error });\n  }\n\n  return RedisClient;\n}\n\nexport function getDbInstance() {\n  return RedisClient;\n}\n"],"mappings":";;;;;;;;;AAAA;;AACA;;;;AAEA;AACO,IAAIA,WAAJ;;;AAEA,SAASC,IAAT,GAAgB;EACrB,MAAMC,QAAQ,GAAGC,eAAOC,WAAP,CAAmBC,UAApC;;EAEA,IAAIL,WAAJ,EAAiB;IACf,OAAOA,WAAP;EACD;;EAEDM,GAAG,CAAC,MAAD,EAAU,gCAA+BJ,QAAS,EAAlD,CAAH;EAEA,sBAAAF,WAAW,GAAG,yBAAa;IACzBO,GAAG,EAAEL;EADoB,CAAb,CAAd,CATqB,CAarB;;EACAF,WAAW,CAACQ,EAAZ,CAAe,SAAf,EAA0B,MAAMF,GAAG,CAAC,MAAD,EAAS;IAAEG,eAAe,EAAE;EAAnB,CAAT,CAAnC;EACAT,WAAW,CAACQ,EAAZ,CAAe,OAAf,EAAwB,MAAMF,GAAG,CAAC,MAAD,EAAS;IAAEG,eAAe,EAAE;EAAnB,CAAT,CAAjC;EACAT,WAAW,CAACQ,EAAZ,CAAe,cAAf,EAA+B,MAAMF,GAAG,CAAC,MAAD,EAAS;IAAEG,eAAe,EAAE;EAAnB,CAAT,CAAxC;EACAT,WAAW,CAACQ,EAAZ,CAAe,KAAf,EAAsB,MAAMF,GAAG,CAAC,MAAD,EAAS;IAAEG,eAAe,EAAE;EAAnB,CAAT,CAA/B;EACAT,WAAW,CAACQ,EAAZ,CAAe,OAAf,EAAyBE,KAAD,IAAWJ,GAAG,CAAC,MAAD,EAAS;IAAEI;EAAF,CAAT,CAAtC;;EACA,IAAI;IACFV,WAAW,CAACW,OAAZ;EACD,CAFD,CAEE,OAAOD,KAAP,EAAc;IACdJ,GAAG,CAAC,OAAD,EAAU;MAAEI;IAAF,CAAV,CAAH;EACD;;EAED,OAAOV,WAAP;AACD;;AAEM,SAASY,aAAT,GAAyB;EAC9B,OAAOZ,WAAP;AACD"}},"mtime":1653643634177},"{\"assumptions\":{},\"sourceRoot\":\"/Users/ramireddycharitha/microservices/sample-micro-service/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/ramireddycharitha/microservices/sample-micro-service\",\"filename\":\"/Users/ramireddycharitha/microservices/sample-micro-service/app.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"default\",\"root\":\"/Users/ramireddycharitha/microservices/sample-micro-service\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.17.10:default":{"value":{"code":"\"use strict\";\n\nvar _express = _interopRequireDefault(require(\"express\"));\n\nvar Sentry = _interopRequireWildcard(require(\"@sentry/node\"));\n\nvar _cors = _interopRequireDefault(require(\"cors\"));\n\nvar _bodyParser = _interopRequireDefault(require(\"body-parser\"));\n\nrequire(\"express-async-errors\");\n\nvar _User = _interopRequireDefault(require(\"./routes/User\"));\n\nvar _Health = _interopRequireDefault(require(\"./routes/Health\"));\n\nvar _index = _interopRequireDefault(require(\"./config/index\"));\n\nvar _RequestLogger = _interopRequireDefault(require(\"./middlewares/RequestLogger\"));\n\nvar _Auth = require(\"./middlewares/Auth\");\n\nvar _ResponseLogger = require(\"./middlewares/ResponseLogger\");\n\nvar _SchemaValidator = require(\"./middlewares/SchemaValidator\");\n\nvar HttpContextMiddleware = _interopRequireWildcard(require(\"./middlewares/HttpContextMiddleware\"));\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/* eslint-disable import/no-import-module-exports */\n// Module Imports\n// Default Imports\n// Named Imports\nconst httpContext = require(\"express-http-context\");\n\nconst app = (0, _express.default)(); // init sentry\n\nSentry.init({\n  dsn: _index.default.sentry_dsn,\n  environment: process.env.NODE_ENV,\n  // name is set in ecosystem config file\n  serverName: process.env.name,\n  // ignore middleware errors\n  ignoreErrors: [/^Non-Error exception captured$/]\n});\napp.use(_bodyParser.default.json());\napp.use((0, _cors.default)()); // init httpcontext\n\napp.use(httpContext.middleware); // set http context\n\napp.use(HttpContextMiddleware.setHttpContextMetrics);\napp.use(HttpContextMiddleware.setHttpContextUserDetails);\napp.use(HttpContextMiddleware.setHttpContextRequestPayload);\napp.use(\"*\", [_RequestLogger.default, _Auth.checks, _SchemaValidator.validate]);\napp.use(\"/v1/health\", _Health.default);\napp.use(\"/v1/user\", _User.default); // The error handler must be before any other error middleware and after all controllers\n\napp.use(Sentry.Handlers.errorHandler()); // attach response payload\n\napp.use(HttpContextMiddleware.setHttpContextResponsePayload); // attach response payload on error\n\napp.use(HttpContextMiddleware.setHttpContextErrorResponsePayload);\napp.use(\"*\", [_ResponseLogger.resSuccessLog, _ResponseLogger.resErrorLog]);\nmodule.exports = app;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJodHRwQ29udGV4dCIsInJlcXVpcmUiLCJhcHAiLCJTZW50cnkiLCJpbml0IiwiZHNuIiwiY29uZmlnIiwic2VudHJ5X2RzbiIsImVudmlyb25tZW50IiwicHJvY2VzcyIsImVudiIsIk5PREVfRU5WIiwic2VydmVyTmFtZSIsIm5hbWUiLCJpZ25vcmVFcnJvcnMiLCJ1c2UiLCJib2R5UGFyc2VyIiwianNvbiIsIm1pZGRsZXdhcmUiLCJIdHRwQ29udGV4dE1pZGRsZXdhcmUiLCJzZXRIdHRwQ29udGV4dE1ldHJpY3MiLCJzZXRIdHRwQ29udGV4dFVzZXJEZXRhaWxzIiwic2V0SHR0cENvbnRleHRSZXF1ZXN0UGF5bG9hZCIsInJlcUxvZyIsImNoZWNrcyIsInZhbGlkYXRlIiwiaGVhbHRoIiwidXNlciIsIkhhbmRsZXJzIiwiZXJyb3JIYW5kbGVyIiwic2V0SHR0cENvbnRleHRSZXNwb25zZVBheWxvYWQiLCJzZXRIdHRwQ29udGV4dEVycm9yUmVzcG9uc2VQYXlsb2FkIiwicmVzU3VjY2Vzc0xvZyIsInJlc0Vycm9yTG9nIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiL1VzZXJzL3JhbWlyZWRkeWNoYXJpdGhhL21pY3Jvc2VydmljZXMvc2FtcGxlLW1pY3JvLXNlcnZpY2UvIiwic291cmNlcyI6WyJhcHAuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyogZXNsaW50LWRpc2FibGUgaW1wb3J0L25vLWltcG9ydC1tb2R1bGUtZXhwb3J0cyAqL1xuLy8gTW9kdWxlIEltcG9ydHNcbmltcG9ydCBleHByZXNzIGZyb20gXCJleHByZXNzXCI7XG5pbXBvcnQgKiBhcyBTZW50cnkgZnJvbSBcIkBzZW50cnkvbm9kZVwiO1xuaW1wb3J0IGNvcnMgZnJvbSBcImNvcnNcIjtcbmltcG9ydCBib2R5UGFyc2VyIGZyb20gXCJib2R5LXBhcnNlclwiO1xuaW1wb3J0IFwiZXhwcmVzcy1hc3luYy1lcnJvcnNcIjtcblxuLy8gRGVmYXVsdCBJbXBvcnRzXG5pbXBvcnQgdXNlciBmcm9tIFwiLi9yb3V0ZXMvVXNlclwiO1xuaW1wb3J0IGhlYWx0aCBmcm9tIFwiLi9yb3V0ZXMvSGVhbHRoXCI7XG5pbXBvcnQgY29uZmlnIGZyb20gXCIuL2NvbmZpZy9pbmRleFwiO1xuXG5pbXBvcnQgcmVxTG9nIGZyb20gXCIuL21pZGRsZXdhcmVzL1JlcXVlc3RMb2dnZXJcIjtcblxuLy8gTmFtZWQgSW1wb3J0c1xuaW1wb3J0IHsgY2hlY2tzIH0gZnJvbSBcIi4vbWlkZGxld2FyZXMvQXV0aFwiO1xuaW1wb3J0IHsgcmVzU3VjY2Vzc0xvZywgcmVzRXJyb3JMb2cgfSBmcm9tIFwiLi9taWRkbGV3YXJlcy9SZXNwb25zZUxvZ2dlclwiO1xuaW1wb3J0IHsgdmFsaWRhdGUgfSBmcm9tIFwiLi9taWRkbGV3YXJlcy9TY2hlbWFWYWxpZGF0b3JcIjtcbmltcG9ydCAqIGFzIEh0dHBDb250ZXh0TWlkZGxld2FyZSBmcm9tIFwiLi9taWRkbGV3YXJlcy9IdHRwQ29udGV4dE1pZGRsZXdhcmVcIjtcblxuY29uc3QgaHR0cENvbnRleHQgPSByZXF1aXJlKFwiZXhwcmVzcy1odHRwLWNvbnRleHRcIik7XG5cbmNvbnN0IGFwcCA9IGV4cHJlc3MoKTtcblxuLy8gaW5pdCBzZW50cnlcblNlbnRyeS5pbml0KHtcbiAgZHNuOiBjb25maWcuc2VudHJ5X2RzbixcbiAgZW52aXJvbm1lbnQ6IHByb2Nlc3MuZW52Lk5PREVfRU5WLFxuICAvLyBuYW1lIGlzIHNldCBpbiBlY29zeXN0ZW0gY29uZmlnIGZpbGVcbiAgc2VydmVyTmFtZTogcHJvY2Vzcy5lbnYubmFtZSxcbiAgLy8gaWdub3JlIG1pZGRsZXdhcmUgZXJyb3JzXG4gIGlnbm9yZUVycm9yczogWy9eTm9uLUVycm9yIGV4Y2VwdGlvbiBjYXB0dXJlZCQvXSxcbn0pO1xuYXBwLnVzZShib2R5UGFyc2VyLmpzb24oKSk7XG5hcHAudXNlKGNvcnMoKSk7XG4vLyBpbml0IGh0dHBjb250ZXh0XG5hcHAudXNlKGh0dHBDb250ZXh0Lm1pZGRsZXdhcmUpO1xuXG4vLyBzZXQgaHR0cCBjb250ZXh0XG5hcHAudXNlKEh0dHBDb250ZXh0TWlkZGxld2FyZS5zZXRIdHRwQ29udGV4dE1ldHJpY3MpO1xuYXBwLnVzZShIdHRwQ29udGV4dE1pZGRsZXdhcmUuc2V0SHR0cENvbnRleHRVc2VyRGV0YWlscyk7XG5hcHAudXNlKEh0dHBDb250ZXh0TWlkZGxld2FyZS5zZXRIdHRwQ29udGV4dFJlcXVlc3RQYXlsb2FkKTtcblxuYXBwLnVzZShcIipcIiwgW3JlcUxvZywgY2hlY2tzLCB2YWxpZGF0ZV0pO1xuYXBwLnVzZShcIi92MS9oZWFsdGhcIiwgaGVhbHRoKTtcbmFwcC51c2UoXCIvdjEvdXNlclwiLCB1c2VyKTtcblxuLy8gVGhlIGVycm9yIGhhbmRsZXIgbXVzdCBiZSBiZWZvcmUgYW55IG90aGVyIGVycm9yIG1pZGRsZXdhcmUgYW5kIGFmdGVyIGFsbCBjb250cm9sbGVyc1xuYXBwLnVzZShTZW50cnkuSGFuZGxlcnMuZXJyb3JIYW5kbGVyKCkpO1xuXG4vLyBhdHRhY2ggcmVzcG9uc2UgcGF5bG9hZFxuYXBwLnVzZShIdHRwQ29udGV4dE1pZGRsZXdhcmUuc2V0SHR0cENvbnRleHRSZXNwb25zZVBheWxvYWQpO1xuXG4vLyBhdHRhY2ggcmVzcG9uc2UgcGF5bG9hZCBvbiBlcnJvclxuYXBwLnVzZShIdHRwQ29udGV4dE1pZGRsZXdhcmUuc2V0SHR0cENvbnRleHRFcnJvclJlc3BvbnNlUGF5bG9hZCk7XG5cbmFwcC51c2UoXCIqXCIsIFtyZXNTdWNjZXNzTG9nLCByZXNFcnJvckxvZ10pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGFwcDtcbiJdLCJtYXBwaW5ncyI6Ijs7QUFFQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFHQTs7QUFDQTs7QUFDQTs7QUFFQTs7QUFHQTs7QUFDQTs7QUFDQTs7QUFDQTs7Ozs7Ozs7QUFuQkE7QUFDQTtBQU9BO0FBT0E7QUFNQSxNQUFNQSxXQUFXLEdBQUdDLE9BQU8sQ0FBQyxzQkFBRCxDQUEzQjs7QUFFQSxNQUFNQyxHQUFHLEdBQUcsdUJBQVosQyxDQUVBOztBQUNBQyxNQUFNLENBQUNDLElBQVAsQ0FBWTtFQUNWQyxHQUFHLEVBQUVDLGVBQU9DLFVBREY7RUFFVkMsV0FBVyxFQUFFQyxPQUFPLENBQUNDLEdBQVIsQ0FBWUMsUUFGZjtFQUdWO0VBQ0FDLFVBQVUsRUFBRUgsT0FBTyxDQUFDQyxHQUFSLENBQVlHLElBSmQ7RUFLVjtFQUNBQyxZQUFZLEVBQUUsQ0FBQyxnQ0FBRDtBQU5KLENBQVo7QUFRQVosR0FBRyxDQUFDYSxHQUFKLENBQVFDLG9CQUFXQyxJQUFYLEVBQVI7QUFDQWYsR0FBRyxDQUFDYSxHQUFKLENBQVEsb0JBQVIsRSxDQUNBOztBQUNBYixHQUFHLENBQUNhLEdBQUosQ0FBUWYsV0FBVyxDQUFDa0IsVUFBcEIsRSxDQUVBOztBQUNBaEIsR0FBRyxDQUFDYSxHQUFKLENBQVFJLHFCQUFxQixDQUFDQyxxQkFBOUI7QUFDQWxCLEdBQUcsQ0FBQ2EsR0FBSixDQUFRSSxxQkFBcUIsQ0FBQ0UseUJBQTlCO0FBQ0FuQixHQUFHLENBQUNhLEdBQUosQ0FBUUkscUJBQXFCLENBQUNHLDRCQUE5QjtBQUVBcEIsR0FBRyxDQUFDYSxHQUFKLENBQVEsR0FBUixFQUFhLENBQUNRLHNCQUFELEVBQVNDLFlBQVQsRUFBaUJDLHlCQUFqQixDQUFiO0FBQ0F2QixHQUFHLENBQUNhLEdBQUosQ0FBUSxZQUFSLEVBQXNCVyxlQUF0QjtBQUNBeEIsR0FBRyxDQUFDYSxHQUFKLENBQVEsVUFBUixFQUFvQlksYUFBcEIsRSxDQUVBOztBQUNBekIsR0FBRyxDQUFDYSxHQUFKLENBQVFaLE1BQU0sQ0FBQ3lCLFFBQVAsQ0FBZ0JDLFlBQWhCLEVBQVIsRSxDQUVBOztBQUNBM0IsR0FBRyxDQUFDYSxHQUFKLENBQVFJLHFCQUFxQixDQUFDVyw2QkFBOUIsRSxDQUVBOztBQUNBNUIsR0FBRyxDQUFDYSxHQUFKLENBQVFJLHFCQUFxQixDQUFDWSxrQ0FBOUI7QUFFQTdCLEdBQUcsQ0FBQ2EsR0FBSixDQUFRLEdBQVIsRUFBYSxDQUFDaUIsNkJBQUQsRUFBZ0JDLDJCQUFoQixDQUFiO0FBRUFDLE1BQU0sQ0FBQ0MsT0FBUCxHQUFpQmpDLEdBQWpCIn0=","map":{"version":3,"names":["httpContext","require","app","Sentry","init","dsn","config","sentry_dsn","environment","process","env","NODE_ENV","serverName","name","ignoreErrors","use","bodyParser","json","middleware","HttpContextMiddleware","setHttpContextMetrics","setHttpContextUserDetails","setHttpContextRequestPayload","reqLog","checks","validate","health","user","Handlers","errorHandler","setHttpContextResponsePayload","setHttpContextErrorResponsePayload","resSuccessLog","resErrorLog","module","exports"],"sourceRoot":"/Users/ramireddycharitha/microservices/sample-micro-service/","sources":["app.js"],"sourcesContent":["/* eslint-disable import/no-import-module-exports */\n// Module Imports\nimport express from \"express\";\nimport * as Sentry from \"@sentry/node\";\nimport cors from \"cors\";\nimport bodyParser from \"body-parser\";\nimport \"express-async-errors\";\n\n// Default Imports\nimport user from \"./routes/User\";\nimport health from \"./routes/Health\";\nimport config from \"./config/index\";\n\nimport reqLog from \"./middlewares/RequestLogger\";\n\n// Named Imports\nimport { checks } from \"./middlewares/Auth\";\nimport { resSuccessLog, resErrorLog } from \"./middlewares/ResponseLogger\";\nimport { validate } from \"./middlewares/SchemaValidator\";\nimport * as HttpContextMiddleware from \"./middlewares/HttpContextMiddleware\";\n\nconst httpContext = require(\"express-http-context\");\n\nconst app = express();\n\n// init sentry\nSentry.init({\n  dsn: config.sentry_dsn,\n  environment: process.env.NODE_ENV,\n  // name is set in ecosystem config file\n  serverName: process.env.name,\n  // ignore middleware errors\n  ignoreErrors: [/^Non-Error exception captured$/],\n});\napp.use(bodyParser.json());\napp.use(cors());\n// init httpcontext\napp.use(httpContext.middleware);\n\n// set http context\napp.use(HttpContextMiddleware.setHttpContextMetrics);\napp.use(HttpContextMiddleware.setHttpContextUserDetails);\napp.use(HttpContextMiddleware.setHttpContextRequestPayload);\n\napp.use(\"*\", [reqLog, checks, validate]);\napp.use(\"/v1/health\", health);\napp.use(\"/v1/user\", user);\n\n// The error handler must be before any other error middleware and after all controllers\napp.use(Sentry.Handlers.errorHandler());\n\n// attach response payload\napp.use(HttpContextMiddleware.setHttpContextResponsePayload);\n\n// attach response payload on error\napp.use(HttpContextMiddleware.setHttpContextErrorResponsePayload);\n\napp.use(\"*\", [resSuccessLog, resErrorLog]);\n\nmodule.exports = app;\n"],"mappings":";;AAEA;;AACA;;AACA;;AACA;;AACA;;AAGA;;AACA;;AACA;;AAEA;;AAGA;;AACA;;AACA;;AACA;;;;;;;;AAnBA;AACA;AAOA;AAOA;AAMA,MAAMA,WAAW,GAAGC,OAAO,CAAC,sBAAD,CAA3B;;AAEA,MAAMC,GAAG,GAAG,uBAAZ,C,CAEA;;AACAC,MAAM,CAACC,IAAP,CAAY;EACVC,GAAG,EAAEC,eAAOC,UADF;EAEVC,WAAW,EAAEC,OAAO,CAACC,GAAR,CAAYC,QAFf;EAGV;EACAC,UAAU,EAAEH,OAAO,CAACC,GAAR,CAAYG,IAJd;EAKV;EACAC,YAAY,EAAE,CAAC,gCAAD;AANJ,CAAZ;AAQAZ,GAAG,CAACa,GAAJ,CAAQC,oBAAWC,IAAX,EAAR;AACAf,GAAG,CAACa,GAAJ,CAAQ,oBAAR,E,CACA;;AACAb,GAAG,CAACa,GAAJ,CAAQf,WAAW,CAACkB,UAApB,E,CAEA;;AACAhB,GAAG,CAACa,GAAJ,CAAQI,qBAAqB,CAACC,qBAA9B;AACAlB,GAAG,CAACa,GAAJ,CAAQI,qBAAqB,CAACE,yBAA9B;AACAnB,GAAG,CAACa,GAAJ,CAAQI,qBAAqB,CAACG,4BAA9B;AAEApB,GAAG,CAACa,GAAJ,CAAQ,GAAR,EAAa,CAACQ,sBAAD,EAASC,YAAT,EAAiBC,yBAAjB,CAAb;AACAvB,GAAG,CAACa,GAAJ,CAAQ,YAAR,EAAsBW,eAAtB;AACAxB,GAAG,CAACa,GAAJ,CAAQ,UAAR,EAAoBY,aAApB,E,CAEA;;AACAzB,GAAG,CAACa,GAAJ,CAAQZ,MAAM,CAACyB,QAAP,CAAgBC,YAAhB,EAAR,E,CAEA;;AACA3B,GAAG,CAACa,GAAJ,CAAQI,qBAAqB,CAACW,6BAA9B,E,CAEA;;AACA5B,GAAG,CAACa,GAAJ,CAAQI,qBAAqB,CAACY,kCAA9B;AAEA7B,GAAG,CAACa,GAAJ,CAAQ,GAAR,EAAa,CAACiB,6BAAD,EAAgBC,2BAAhB,CAAb;AAEAC,MAAM,CAACC,OAAP,GAAiBjC,GAAjB"}},"mtime":1653643634173},"{\"assumptions\":{},\"sourceRoot\":\"/Users/ramireddycharitha/microservices/sample-micro-service/routes/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/ramireddycharitha/microservices/sample-micro-service\",\"filename\":\"/Users/ramireddycharitha/microservices/sample-micro-service/routes/User.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"default\",\"root\":\"/Users/ramireddycharitha/microservices/sample-micro-service\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.17.10:default":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _express = require(\"express\");\n\nvar UserController = _interopRequireWildcard(require(\"../controllers/UserController\"));\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nconst router = (0, _express.Router)();\nrouter.post(\"/register\", UserController.register);\nrouter.get(\"/user-details\", UserController.getUserDetails);\nrouter.put(\"/user-details\", UserController.updateUserDetails);\nvar _default = router;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJyb3V0ZXIiLCJwb3N0IiwiVXNlckNvbnRyb2xsZXIiLCJyZWdpc3RlciIsImdldCIsImdldFVzZXJEZXRhaWxzIiwicHV0IiwidXBkYXRlVXNlckRldGFpbHMiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy9yYW1pcmVkZHljaGFyaXRoYS9taWNyb3NlcnZpY2VzL3NhbXBsZS1taWNyby1zZXJ2aWNlL3JvdXRlcy8iLCJzb3VyY2VzIjpbIlVzZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUm91dGVyIH0gZnJvbSBcImV4cHJlc3NcIjtcbmltcG9ydCAqIGFzIFVzZXJDb250cm9sbGVyIGZyb20gXCIuLi9jb250cm9sbGVycy9Vc2VyQ29udHJvbGxlclwiO1xuXG5jb25zdCByb3V0ZXIgPSBSb3V0ZXIoKTtcblxucm91dGVyLnBvc3QoXCIvcmVnaXN0ZXJcIiwgVXNlckNvbnRyb2xsZXIucmVnaXN0ZXIpO1xucm91dGVyLmdldChcIi91c2VyLWRldGFpbHNcIiwgVXNlckNvbnRyb2xsZXIuZ2V0VXNlckRldGFpbHMpO1xucm91dGVyLnB1dChcIi91c2VyLWRldGFpbHNcIiwgVXNlckNvbnRyb2xsZXIudXBkYXRlVXNlckRldGFpbHMpO1xuXG5leHBvcnQgZGVmYXVsdCByb3V0ZXI7XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTs7QUFDQTs7Ozs7O0FBRUEsTUFBTUEsTUFBTSxHQUFHLHNCQUFmO0FBRUFBLE1BQU0sQ0FBQ0MsSUFBUCxDQUFZLFdBQVosRUFBeUJDLGNBQWMsQ0FBQ0MsUUFBeEM7QUFDQUgsTUFBTSxDQUFDSSxHQUFQLENBQVcsZUFBWCxFQUE0QkYsY0FBYyxDQUFDRyxjQUEzQztBQUNBTCxNQUFNLENBQUNNLEdBQVAsQ0FBVyxlQUFYLEVBQTRCSixjQUFjLENBQUNLLGlCQUEzQztlQUVlUCxNIn0=","map":{"version":3,"names":["router","post","UserController","register","get","getUserDetails","put","updateUserDetails"],"sourceRoot":"/Users/ramireddycharitha/microservices/sample-micro-service/routes/","sources":["User.js"],"sourcesContent":["import { Router } from \"express\";\nimport * as UserController from \"../controllers/UserController\";\n\nconst router = Router();\n\nrouter.post(\"/register\", UserController.register);\nrouter.get(\"/user-details\", UserController.getUserDetails);\nrouter.put(\"/user-details\", UserController.updateUserDetails);\n\nexport default router;\n"],"mappings":";;;;;;;AAAA;;AACA;;;;;;AAEA,MAAMA,MAAM,GAAG,sBAAf;AAEAA,MAAM,CAACC,IAAP,CAAY,WAAZ,EAAyBC,cAAc,CAACC,QAAxC;AACAH,MAAM,CAACI,GAAP,CAAW,eAAX,EAA4BF,cAAc,CAACG,cAA3C;AACAL,MAAM,CAACM,GAAP,CAAW,eAAX,EAA4BJ,cAAc,CAACK,iBAA3C;eAEeP,M"}},"mtime":1653643634187},"{\"assumptions\":{},\"sourceRoot\":\"/Users/ramireddycharitha/microservices/sample-micro-service/controllers/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/ramireddycharitha/microservices/sample-micro-service\",\"filename\":\"/Users/ramireddycharitha/microservices/sample-micro-service/controllers/UserController.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"default\",\"root\":\"/Users/ramireddycharitha/microservices/sample-micro-service\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.17.10:default":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.updateUserDetails = exports.register = exports.getUserDetails = void 0;\n\nvar Auth = _interopRequireWildcard(require(\"../middlewares/Auth\"));\n\nvar UserService = _interopRequireWildcard(require(\"../services/UserService\"));\n\nvar _Keys = require(\"../constants/Keys\");\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nconst register = async (req, res, next) => {\n  const {\n    mobileNo,\n    password,\n    firstName,\n    lastName\n  } = req.body;\n  const userDetails = {\n    mobileNo,\n    password,\n    firstName,\n    lastName\n  };\n  const clientDetails = {\n    apiKey: req.header(_Keys.HEADER_API_KEY)\n  };\n  const userObj = await UserService.registerUser(userDetails, clientDetails);\n  req.session = Auth.createSessionObj(userObj);\n  res.data = {\n    userDetails: userObj,\n    sessiontoken: req.session\n  };\n  next();\n};\n\nexports.register = register;\n\nconst getUserDetails = async (req, res, next) => {\n  const sessionObj = await Auth.getSessionObj(req);\n  const {\n    mobileNo\n  } = sessionObj;\n  const userObj = await UserService.getUserDetails(mobileNo);\n  res.data = userObj;\n  next();\n};\n\nexports.getUserDetails = getUserDetails;\n\nconst updateUserDetails = async (req, res, next) => {\n  const {\n    firstName,\n    lastName,\n    alternateMobileNo,\n    email\n  } = req.body;\n  const sessionObj = await Auth.getSessionObj(req);\n  const {\n    mobileNo\n  } = sessionObj;\n  const userDetails = {\n    firstName,\n    lastName,\n    alternateMobileNo,\n    email,\n    mobileNo\n  };\n  await UserService.updateUserDetails(userDetails);\n  res.data = { ...userDetails\n  };\n  next();\n};\n\nexports.updateUserDetails = updateUserDetails;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJyZWdpc3RlciIsInJlcSIsInJlcyIsIm5leHQiLCJtb2JpbGVObyIsInBhc3N3b3JkIiwiZmlyc3ROYW1lIiwibGFzdE5hbWUiLCJib2R5IiwidXNlckRldGFpbHMiLCJjbGllbnREZXRhaWxzIiwiYXBpS2V5IiwiaGVhZGVyIiwiSEVBREVSX0FQSV9LRVkiLCJ1c2VyT2JqIiwiVXNlclNlcnZpY2UiLCJyZWdpc3RlclVzZXIiLCJzZXNzaW9uIiwiQXV0aCIsImNyZWF0ZVNlc3Npb25PYmoiLCJkYXRhIiwic2Vzc2lvbnRva2VuIiwiZ2V0VXNlckRldGFpbHMiLCJzZXNzaW9uT2JqIiwiZ2V0U2Vzc2lvbk9iaiIsInVwZGF0ZVVzZXJEZXRhaWxzIiwiYWx0ZXJuYXRlTW9iaWxlTm8iLCJlbWFpbCJdLCJzb3VyY2VSb290IjoiL1VzZXJzL3JhbWlyZWRkeWNoYXJpdGhhL21pY3Jvc2VydmljZXMvc2FtcGxlLW1pY3JvLXNlcnZpY2UvY29udHJvbGxlcnMvIiwic291cmNlcyI6WyJVc2VyQ29udHJvbGxlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyBBdXRoIGZyb20gXCIuLi9taWRkbGV3YXJlcy9BdXRoXCI7XG5pbXBvcnQgKiBhcyBVc2VyU2VydmljZSBmcm9tIFwiLi4vc2VydmljZXMvVXNlclNlcnZpY2VcIjtcbmltcG9ydCB7XG4gIEhFQURFUl9BUElfS0VZLFxufSBmcm9tIFwiLi4vY29uc3RhbnRzL0tleXNcIjtcblxuZXhwb3J0IGNvbnN0IHJlZ2lzdGVyID0gYXN5bmMgKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gIGNvbnN0IHtcbiAgICBtb2JpbGVObywgcGFzc3dvcmQsIGZpcnN0TmFtZSwgbGFzdE5hbWUsXG4gIH0gPSByZXEuYm9keTtcbiAgY29uc3QgdXNlckRldGFpbHMgPSB7XG4gICAgbW9iaWxlTm8sXG4gICAgcGFzc3dvcmQsXG4gICAgZmlyc3ROYW1lLFxuICAgIGxhc3ROYW1lLFxuICB9O1xuICBjb25zdCBjbGllbnREZXRhaWxzID0ge1xuICAgIGFwaUtleTogcmVxLmhlYWRlcihIRUFERVJfQVBJX0tFWSksXG4gIH07XG4gIGNvbnN0IHVzZXJPYmogPSBhd2FpdCBVc2VyU2VydmljZS5yZWdpc3RlclVzZXIodXNlckRldGFpbHMsIGNsaWVudERldGFpbHMpO1xuICByZXEuc2Vzc2lvbiA9IEF1dGguY3JlYXRlU2Vzc2lvbk9iaih1c2VyT2JqKTtcbiAgcmVzLmRhdGEgPSB7XG4gICAgdXNlckRldGFpbHM6IHVzZXJPYmosXG4gICAgc2Vzc2lvbnRva2VuOiByZXEuc2Vzc2lvbixcbiAgfTtcbiAgbmV4dCgpO1xufTtcblxuZXhwb3J0IGNvbnN0IGdldFVzZXJEZXRhaWxzID0gYXN5bmMgKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gIGNvbnN0IHNlc3Npb25PYmogPSBhd2FpdCBBdXRoLmdldFNlc3Npb25PYmoocmVxKTtcbiAgY29uc3QgeyBtb2JpbGVObyB9ID0gc2Vzc2lvbk9iajtcbiAgY29uc3QgdXNlck9iaiA9IGF3YWl0IFVzZXJTZXJ2aWNlLmdldFVzZXJEZXRhaWxzKG1vYmlsZU5vKTtcbiAgcmVzLmRhdGEgPSB1c2VyT2JqO1xuICBuZXh0KCk7XG59O1xuXG5leHBvcnQgY29uc3QgdXBkYXRlVXNlckRldGFpbHMgPSBhc3luYyAocmVxLCByZXMsIG5leHQpID0+IHtcbiAgY29uc3Qge1xuICAgIGZpcnN0TmFtZSwgbGFzdE5hbWUsIGFsdGVybmF0ZU1vYmlsZU5vLCBlbWFpbCxcbiAgfSA9IHJlcS5ib2R5O1xuICBjb25zdCBzZXNzaW9uT2JqID0gYXdhaXQgQXV0aC5nZXRTZXNzaW9uT2JqKHJlcSk7XG4gIGNvbnN0IHsgbW9iaWxlTm8gfSA9IHNlc3Npb25PYmo7XG4gIGNvbnN0IHVzZXJEZXRhaWxzID0ge1xuICAgIGZpcnN0TmFtZSxcbiAgICBsYXN0TmFtZSxcbiAgICBhbHRlcm5hdGVNb2JpbGVObyxcbiAgICBlbWFpbCxcbiAgICBtb2JpbGVObyxcbiAgfTtcbiAgYXdhaXQgVXNlclNlcnZpY2UudXBkYXRlVXNlckRldGFpbHModXNlckRldGFpbHMpO1xuICByZXMuZGF0YSA9IHtcbiAgICAuLi51c2VyRGV0YWlscyxcbiAgfTtcbiAgbmV4dCgpO1xufTtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOztBQUNBOztBQUNBOzs7Ozs7QUFJTyxNQUFNQSxRQUFRLEdBQUcsT0FBT0MsR0FBUCxFQUFZQyxHQUFaLEVBQWlCQyxJQUFqQixLQUEwQjtFQUNoRCxNQUFNO0lBQ0pDLFFBREk7SUFDTUMsUUFETjtJQUNnQkMsU0FEaEI7SUFDMkJDO0VBRDNCLElBRUZOLEdBQUcsQ0FBQ08sSUFGUjtFQUdBLE1BQU1DLFdBQVcsR0FBRztJQUNsQkwsUUFEa0I7SUFFbEJDLFFBRmtCO0lBR2xCQyxTQUhrQjtJQUlsQkM7RUFKa0IsQ0FBcEI7RUFNQSxNQUFNRyxhQUFhLEdBQUc7SUFDcEJDLE1BQU0sRUFBRVYsR0FBRyxDQUFDVyxNQUFKLENBQVdDLG9CQUFYO0VBRFksQ0FBdEI7RUFHQSxNQUFNQyxPQUFPLEdBQUcsTUFBTUMsV0FBVyxDQUFDQyxZQUFaLENBQXlCUCxXQUF6QixFQUFzQ0MsYUFBdEMsQ0FBdEI7RUFDQVQsR0FBRyxDQUFDZ0IsT0FBSixHQUFjQyxJQUFJLENBQUNDLGdCQUFMLENBQXNCTCxPQUF0QixDQUFkO0VBQ0FaLEdBQUcsQ0FBQ2tCLElBQUosR0FBVztJQUNUWCxXQUFXLEVBQUVLLE9BREo7SUFFVE8sWUFBWSxFQUFFcEIsR0FBRyxDQUFDZ0I7RUFGVCxDQUFYO0VBSUFkLElBQUk7QUFDTCxDQXBCTTs7OztBQXNCQSxNQUFNbUIsY0FBYyxHQUFHLE9BQU9yQixHQUFQLEVBQVlDLEdBQVosRUFBaUJDLElBQWpCLEtBQTBCO0VBQ3RELE1BQU1vQixVQUFVLEdBQUcsTUFBTUwsSUFBSSxDQUFDTSxhQUFMLENBQW1CdkIsR0FBbkIsQ0FBekI7RUFDQSxNQUFNO0lBQUVHO0VBQUYsSUFBZW1CLFVBQXJCO0VBQ0EsTUFBTVQsT0FBTyxHQUFHLE1BQU1DLFdBQVcsQ0FBQ08sY0FBWixDQUEyQmxCLFFBQTNCLENBQXRCO0VBQ0FGLEdBQUcsQ0FBQ2tCLElBQUosR0FBV04sT0FBWDtFQUNBWCxJQUFJO0FBQ0wsQ0FOTTs7OztBQVFBLE1BQU1zQixpQkFBaUIsR0FBRyxPQUFPeEIsR0FBUCxFQUFZQyxHQUFaLEVBQWlCQyxJQUFqQixLQUEwQjtFQUN6RCxNQUFNO0lBQ0pHLFNBREk7SUFDT0MsUUFEUDtJQUNpQm1CLGlCQURqQjtJQUNvQ0M7RUFEcEMsSUFFRjFCLEdBQUcsQ0FBQ08sSUFGUjtFQUdBLE1BQU1lLFVBQVUsR0FBRyxNQUFNTCxJQUFJLENBQUNNLGFBQUwsQ0FBbUJ2QixHQUFuQixDQUF6QjtFQUNBLE1BQU07SUFBRUc7RUFBRixJQUFlbUIsVUFBckI7RUFDQSxNQUFNZCxXQUFXLEdBQUc7SUFDbEJILFNBRGtCO0lBRWxCQyxRQUZrQjtJQUdsQm1CLGlCQUhrQjtJQUlsQkMsS0FKa0I7SUFLbEJ2QjtFQUxrQixDQUFwQjtFQU9BLE1BQU1XLFdBQVcsQ0FBQ1UsaUJBQVosQ0FBOEJoQixXQUE5QixDQUFOO0VBQ0FQLEdBQUcsQ0FBQ2tCLElBQUosR0FBVyxFQUNULEdBQUdYO0VBRE0sQ0FBWDtFQUdBTixJQUFJO0FBQ0wsQ0FsQk0ifQ==","map":{"version":3,"names":["register","req","res","next","mobileNo","password","firstName","lastName","body","userDetails","clientDetails","apiKey","header","HEADER_API_KEY","userObj","UserService","registerUser","session","Auth","createSessionObj","data","sessiontoken","getUserDetails","sessionObj","getSessionObj","updateUserDetails","alternateMobileNo","email"],"sourceRoot":"/Users/ramireddycharitha/microservices/sample-micro-service/controllers/","sources":["UserController.js"],"sourcesContent":["import * as Auth from \"../middlewares/Auth\";\nimport * as UserService from \"../services/UserService\";\nimport {\n  HEADER_API_KEY,\n} from \"../constants/Keys\";\n\nexport const register = async (req, res, next) => {\n  const {\n    mobileNo, password, firstName, lastName,\n  } = req.body;\n  const userDetails = {\n    mobileNo,\n    password,\n    firstName,\n    lastName,\n  };\n  const clientDetails = {\n    apiKey: req.header(HEADER_API_KEY),\n  };\n  const userObj = await UserService.registerUser(userDetails, clientDetails);\n  req.session = Auth.createSessionObj(userObj);\n  res.data = {\n    userDetails: userObj,\n    sessiontoken: req.session,\n  };\n  next();\n};\n\nexport const getUserDetails = async (req, res, next) => {\n  const sessionObj = await Auth.getSessionObj(req);\n  const { mobileNo } = sessionObj;\n  const userObj = await UserService.getUserDetails(mobileNo);\n  res.data = userObj;\n  next();\n};\n\nexport const updateUserDetails = async (req, res, next) => {\n  const {\n    firstName, lastName, alternateMobileNo, email,\n  } = req.body;\n  const sessionObj = await Auth.getSessionObj(req);\n  const { mobileNo } = sessionObj;\n  const userDetails = {\n    firstName,\n    lastName,\n    alternateMobileNo,\n    email,\n    mobileNo,\n  };\n  await UserService.updateUserDetails(userDetails);\n  res.data = {\n    ...userDetails,\n  };\n  next();\n};\n"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;;;;;AAIO,MAAMA,QAAQ,GAAG,OAAOC,GAAP,EAAYC,GAAZ,EAAiBC,IAAjB,KAA0B;EAChD,MAAM;IACJC,QADI;IACMC,QADN;IACgBC,SADhB;IAC2BC;EAD3B,IAEFN,GAAG,CAACO,IAFR;EAGA,MAAMC,WAAW,GAAG;IAClBL,QADkB;IAElBC,QAFkB;IAGlBC,SAHkB;IAIlBC;EAJkB,CAApB;EAMA,MAAMG,aAAa,GAAG;IACpBC,MAAM,EAAEV,GAAG,CAACW,MAAJ,CAAWC,oBAAX;EADY,CAAtB;EAGA,MAAMC,OAAO,GAAG,MAAMC,WAAW,CAACC,YAAZ,CAAyBP,WAAzB,EAAsCC,aAAtC,CAAtB;EACAT,GAAG,CAACgB,OAAJ,GAAcC,IAAI,CAACC,gBAAL,CAAsBL,OAAtB,CAAd;EACAZ,GAAG,CAACkB,IAAJ,GAAW;IACTX,WAAW,EAAEK,OADJ;IAETO,YAAY,EAAEpB,GAAG,CAACgB;EAFT,CAAX;EAIAd,IAAI;AACL,CApBM;;;;AAsBA,MAAMmB,cAAc,GAAG,OAAOrB,GAAP,EAAYC,GAAZ,EAAiBC,IAAjB,KAA0B;EACtD,MAAMoB,UAAU,GAAG,MAAML,IAAI,CAACM,aAAL,CAAmBvB,GAAnB,CAAzB;EACA,MAAM;IAAEG;EAAF,IAAemB,UAArB;EACA,MAAMT,OAAO,GAAG,MAAMC,WAAW,CAACO,cAAZ,CAA2BlB,QAA3B,CAAtB;EACAF,GAAG,CAACkB,IAAJ,GAAWN,OAAX;EACAX,IAAI;AACL,CANM;;;;AAQA,MAAMsB,iBAAiB,GAAG,OAAOxB,GAAP,EAAYC,GAAZ,EAAiBC,IAAjB,KAA0B;EACzD,MAAM;IACJG,SADI;IACOC,QADP;IACiBmB,iBADjB;IACoCC;EADpC,IAEF1B,GAAG,CAACO,IAFR;EAGA,MAAMe,UAAU,GAAG,MAAML,IAAI,CAACM,aAAL,CAAmBvB,GAAnB,CAAzB;EACA,MAAM;IAAEG;EAAF,IAAemB,UAArB;EACA,MAAMd,WAAW,GAAG;IAClBH,SADkB;IAElBC,QAFkB;IAGlBmB,iBAHkB;IAIlBC,KAJkB;IAKlBvB;EALkB,CAApB;EAOA,MAAMW,WAAW,CAACU,iBAAZ,CAA8BhB,WAA9B,CAAN;EACAP,GAAG,CAACkB,IAAJ,GAAW,EACT,GAAGX;EADM,CAAX;EAGAN,IAAI;AACL,CAlBM"}},"mtime":1653643634180},"{\"assumptions\":{},\"sourceRoot\":\"/Users/ramireddycharitha/microservices/sample-micro-service/middlewares/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/ramireddycharitha/microservices/sample-micro-service\",\"filename\":\"/Users/ramireddycharitha/microservices/sample-micro-service/middlewares/Auth.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"default\",\"root\":\"/Users/ramireddycharitha/microservices/sample-micro-service\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.17.10:default":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.setMetrics = exports.getSessionObj = exports.createSessionObj = exports.checks = void 0;\n\nvar _path = _interopRequireDefault(require(\"path\"));\n\nvar _jsonwebtoken = _interopRequireDefault(require(\"jsonwebtoken\"));\n\nvar _fs = _interopRequireDefault(require(\"fs\"));\n\nvar _crypto = _interopRequireDefault(require(\"crypto\"));\n\nvar Constants = _interopRequireWildcard(require(\"../constants/Constants\"));\n\nvar ErrorUtils = _interopRequireWildcard(require(\"../errors/ErrorUtils\"));\n\nvar AbstractModels = _interopRequireWildcard(require(\"../models/AbstractModels\"));\n\nvar _index = require(\"../models/mainDbSchema/index\");\n\nvar _RedisClient = require(\"../connections/RedisClient\");\n\nvar _Credentials = require(\"../constants/Credentials\");\n\nvar _Keys = require(\"../constants/Keys\");\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst httpContext = require(\"express-http-context\"); // Static data can be read using require or fs\n\n\nlet newSessionRoutes = _fs.default.readFileSync(_path.default.resolve(__dirname, \"NewSessionRoutes.json\"), \"utf8\");\n\nnewSessionRoutes = JSON.parse(newSessionRoutes);\n\nlet authenticatedRoutes = _fs.default.readFileSync(_path.default.resolve(__dirname, \"./AuthenticatedRoutes.json\"), \"utf8\");\n\nauthenticatedRoutes = JSON.parse(authenticatedRoutes);\n\nconst uuid = require(\"uuid\");\n\nconst healthCheckRoutes = require(\"./HealthCheckRoutes.json\");\n\nconst noAPIKeyRoutes = require(\"./NoClientIdRoutes.json\");\n\nconst noSessionRoutes = require(\"./NoSessionRoutes.json\");\n\nconst routeMaps = [newSessionRoutes, authenticatedRoutes, noSessionRoutes, noAPIKeyRoutes, healthCheckRoutes];\n\nconst getRouteCategory = routeMapsIndex => {\n  let routeCategory = \"others\";\n\n  if (routeMapsIndex === 0) {\n    routeCategory = \"newSessionRoutes\";\n  } else if (routeMapsIndex === 1) {\n    routeCategory = \"authenticatedRoutes\";\n  } else if (routeMapsIndex === 2) {\n    routeCategory = \"noSessionRoutes\";\n  } else if (routeMapsIndex === 3) {\n    routeCategory = \"noAPIKeyRoutes\";\n  } else if (routeMapsIndex === 4) {\n    routeCategory = \"healthCheckRoutes\";\n  }\n\n  return routeCategory;\n};\n\nconst checkApiKeyValidity = async req => {\n  const apiKey = req.header(_Keys.HEADER_API_KEY);\n  const selectCondition = {\n    metro_auth_key: apiKey\n  };\n  const projectCondition = {\n    metro_auth_key: 1,\n    _id: 0\n  };\n  const isValidAPIKey = await AbstractModels.mongoFindOne(_index.Clients, selectCondition, projectCondition);\n  return isValidAPIKey;\n};\n\nconst getRedisSession = async sessionId => {\n  try {\n    // @hotfix: For backward compatibility preprending \"sess:\" to sessionId\n    const redisSession = await _RedisClient.RedisClient.get(`sess:${sessionId}`);\n    return redisSession;\n  } catch (error) {\n    log(\"error\", {\n      error\n    });\n    throw ErrorUtils.redisConnectionError();\n  }\n};\n\nconst decrypt = text => {\n  let resultChiper = \"\"; // eslint-disable-next-line\n\n  const decipher = _crypto.default.createDecipher(_Credentials.ALGORITHM, _Credentials.PASSWORD);\n\n  resultChiper = decipher.update(text, \"hex\", \"utf8\");\n  resultChiper += decipher.final(\"utf8\");\n  return resultChiper;\n};\n\nconst getSessionObj = async req => {\n  const sessiontoken = req.header(_Keys.HEADER_SESSION_TOKEN);\n  if (!sessiontoken) throw ErrorUtils.InvalidSessionToken(); // const session = jwt.verify(sessiontoken, SECREAT);\n\n  const sessionId = decrypt(sessiontoken);\n  let session = await getRedisSession(sessionId);\n  log(\"info\", {\n    session,\n    sessionId,\n    sessiontoken\n  });\n\n  if (!session) {\n    throw ErrorUtils.InvalidSessionToken();\n  }\n\n  try {\n    session = JSON.parse(session);\n  } catch (error) {\n    throw ErrorUtils.InvalidSessionToken();\n  }\n\n  return session;\n};\n\nexports.getSessionObj = getSessionObj;\n\nconst getRouteObj = (originalUrl, httpMethod) => {\n  let routeObj = {};\n  const normalizedURL = originalUrl.toLowerCase().split(\"?\")[0];\n  const index = normalizedURL.lastIndexOf(\"/\");\n  const baseURL = normalizedURL.substring(0, index);\n  let isRouteObjFound = false;\n\n  for (let i = 0; i < routeMaps.length; i++) {\n    const routeMap = routeMaps[i];\n\n    if (routeMap && routeMap[httpMethod]) {\n      if (routeMap[httpMethod][normalizedURL]) {\n        routeObj = routeMap[httpMethod][normalizedURL];\n        isRouteObjFound = true;\n      } else if (routeMap[httpMethod][`${baseURL}/:param`] && index !== normalizedURL.length - 1) {\n        routeObj = routeMap[httpMethod][`${baseURL}/:param`];\n        isRouteObjFound = true;\n      }\n\n      if (isRouteObjFound) {\n        routeObj.httpMethod = httpMethod;\n        routeObj.baseURL = baseURL;\n        routeObj.normalizedURL = normalizedURL;\n        routeObj.routeCategory = getRouteCategory(i);\n        break;\n      }\n    }\n  } // If route is not found from RoutesMap it shoud be treated as others\n\n\n  if (!isRouteObjFound) {\n    routeObj.httpMethod = httpMethod;\n    routeObj.baseURL = baseURL;\n    routeObj.normalizedURL = normalizedURL;\n    routeObj.routeCategory = \"others\";\n  }\n\n  return routeObj;\n}; // @hotfix: For backward compatibility\n// Business & consumer user roles are stored in different keys in session\n// Possible values for users_business_portal_role are \"admin\" & \"user\"\n\n\nasync function getUserRoles(req) {\n  const session = await getSessionObj(req);\n  const {\n    users_business_portal_role: userRoles\n  } = session;\n  return [].concat(userRoles).map(value => value.toUpperCase());\n}\n\nconst checkAutorization = async req => {\n  let isAuthorizedToAccessRoute = false;\n  const userRoles = await getUserRoles(req);\n  const routeAutorizedRoles = req.routeObj?.roles || [];\n\n  if (routeAutorizedRoles?.filter(value => userRoles.includes(value.toUpperCase()))?.length > 0) {\n    isAuthorizedToAccessRoute = true;\n  }\n\n  return isAuthorizedToAccessRoute;\n};\n\nconst checkBlockListedUser = async () => {\n  // @hotfix: Rewrite this logic according to service need\n  const isBlockedUser = false;\n  return isBlockedUser; // let isBlockedUser = false;\n  // const session = await getSessionObj(req);\n  // const { mobileNo } = session;\n  // const selectCondition = {\n  //   mobileNo,\n  //   isBlockedUser: true,\n  // };\n  // const projectCondition = {\n  //   mobileNo: 1,\n  //   _id: 0,\n  // };\n  // const userObj = await AbstractModels.mongoFindOne(\n  //   Users,\n  //   selectCondition,\n  //   projectCondition,\n  // );\n  // if (userObj) {\n  //   isBlockedUser = true;\n  // }\n  // return isBlockedUser;\n};\n\nconst createSessionObj = data => {\n  const session = _jsonwebtoken.default.sign(data, _Credentials.SECREAT, {\n    expiresIn: 60 * 60 * 24 * 30\n  }); // default is in sec\n\n\n  return session;\n};\n/*\n1.newSessionRoutes\n2.authenticatedRoutes(api key check,sessoin token check,Authorize check,blocklist users check)\n3.noSessionRoutes(api key check)\n4.noAPIKeyRoutes\n5.healthCheckRoutes(Dont' store Audits)\n6.others\n\nFor each req store req, res audits\n*/\n\n\nexports.createSessionObj = createSessionObj;\n\nconst checks = async (req, res, next) => {\n  const {\n    routeCategory\n  } = req.routeObj;\n\n  if (routeCategory === \"others\") {\n    const error = ErrorUtils.InvalidRequest();\n    next(error);\n  } else if (routeCategory === \"healthCheckRoutes\") {\n    next();\n  } else if (routeCategory === \"noAPIKeyRoutes\") {\n    next();\n  } else if (routeCategory === \"noSessionRoutes\" || routeCategory === \"newSessionRoutes\") {\n    const isValidAPIKey = await checkApiKeyValidity(req);\n\n    if (!isValidAPIKey) {\n      const error = ErrorUtils.InvalidAPIKey();\n      next(error);\n    } else {\n      next();\n    }\n  } else if (routeCategory === \"authenticatedRoutes\") {\n    // 1.api key check 2.session token check 3.autorization check 4.blocklisted user check\n    const isValidAPIKey = await checkApiKeyValidity(req);\n    const session = await getSessionObj(req);\n\n    if (!session) {\n      const error = ErrorUtils.InvalidSessionToken();\n      next(error);\n    } else {\n      const isAuthorizedToAccessRoute = await checkAutorization(req);\n      const isBlockListeduser = await checkBlockListedUser();\n\n      if (!isValidAPIKey) {\n        const error = ErrorUtils.InvalidAPIKey();\n        next(error);\n      } else if (isBlockListeduser) {\n        const error = ErrorUtils.BlockListedUser();\n        next(error);\n      } else if (!isAuthorizedToAccessRoute) {\n        const error = ErrorUtils.InvalidAuthorization();\n        next(error);\n      } else {\n        req.sesssion = session;\n        next();\n      }\n    }\n  }\n};\n\nexports.checks = checks;\n\nconst setMetrics = (req, res) => {\n  const {\n    originalUrl\n  } = req;\n  const httpMethod = req.method;\n  const routeObj = getRouteObj(originalUrl, httpMethod);\n  routeObj.startTime = new Date().getTime();\n  let correlationId = req.get(Constants.LOGGER_CORRELATIONID);\n\n  if (!correlationId) {\n    // generate and set uuid v4 version\n    correlationId = uuid.v4();\n    httpContext.set(Constants.LOGGER_CORRELATIONID, correlationId); // inject correlationId in headers\n\n    req.headers.correlationId = httpContext.get(Constants.LOGGER_CORRELATIONID);\n    res.set(\"CorrelationId\", httpContext.get(Constants.LOGGER_CORRELATIONID));\n  }\n\n  return routeObj;\n};\n\nexports.setMetrics = setMetrics;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJodHRwQ29udGV4dCIsInJlcXVpcmUiLCJuZXdTZXNzaW9uUm91dGVzIiwiZnMiLCJyZWFkRmlsZVN5bmMiLCJwYXRoIiwicmVzb2x2ZSIsIl9fZGlybmFtZSIsIkpTT04iLCJwYXJzZSIsImF1dGhlbnRpY2F0ZWRSb3V0ZXMiLCJ1dWlkIiwiaGVhbHRoQ2hlY2tSb3V0ZXMiLCJub0FQSUtleVJvdXRlcyIsIm5vU2Vzc2lvblJvdXRlcyIsInJvdXRlTWFwcyIsImdldFJvdXRlQ2F0ZWdvcnkiLCJyb3V0ZU1hcHNJbmRleCIsInJvdXRlQ2F0ZWdvcnkiLCJjaGVja0FwaUtleVZhbGlkaXR5IiwicmVxIiwiYXBpS2V5IiwiaGVhZGVyIiwiSEVBREVSX0FQSV9LRVkiLCJzZWxlY3RDb25kaXRpb24iLCJtZXRyb19hdXRoX2tleSIsInByb2plY3RDb25kaXRpb24iLCJfaWQiLCJpc1ZhbGlkQVBJS2V5IiwiQWJzdHJhY3RNb2RlbHMiLCJtb25nb0ZpbmRPbmUiLCJDbGllbnRzIiwiZ2V0UmVkaXNTZXNzaW9uIiwic2Vzc2lvbklkIiwicmVkaXNTZXNzaW9uIiwiUmVkaXNDbGllbnQiLCJnZXQiLCJlcnJvciIsImxvZyIsIkVycm9yVXRpbHMiLCJyZWRpc0Nvbm5lY3Rpb25FcnJvciIsImRlY3J5cHQiLCJ0ZXh0IiwicmVzdWx0Q2hpcGVyIiwiZGVjaXBoZXIiLCJjcnlwdG8iLCJjcmVhdGVEZWNpcGhlciIsIkFMR09SSVRITSIsIlBBU1NXT1JEIiwidXBkYXRlIiwiZmluYWwiLCJnZXRTZXNzaW9uT2JqIiwic2Vzc2lvbnRva2VuIiwiSEVBREVSX1NFU1NJT05fVE9LRU4iLCJJbnZhbGlkU2Vzc2lvblRva2VuIiwic2Vzc2lvbiIsImdldFJvdXRlT2JqIiwib3JpZ2luYWxVcmwiLCJodHRwTWV0aG9kIiwicm91dGVPYmoiLCJub3JtYWxpemVkVVJMIiwidG9Mb3dlckNhc2UiLCJzcGxpdCIsImluZGV4IiwibGFzdEluZGV4T2YiLCJiYXNlVVJMIiwic3Vic3RyaW5nIiwiaXNSb3V0ZU9iakZvdW5kIiwiaSIsImxlbmd0aCIsInJvdXRlTWFwIiwiZ2V0VXNlclJvbGVzIiwidXNlcnNfYnVzaW5lc3NfcG9ydGFsX3JvbGUiLCJ1c2VyUm9sZXMiLCJjb25jYXQiLCJtYXAiLCJ2YWx1ZSIsInRvVXBwZXJDYXNlIiwiY2hlY2tBdXRvcml6YXRpb24iLCJpc0F1dGhvcml6ZWRUb0FjY2Vzc1JvdXRlIiwicm91dGVBdXRvcml6ZWRSb2xlcyIsInJvbGVzIiwiZmlsdGVyIiwiaW5jbHVkZXMiLCJjaGVja0Jsb2NrTGlzdGVkVXNlciIsImlzQmxvY2tlZFVzZXIiLCJjcmVhdGVTZXNzaW9uT2JqIiwiZGF0YSIsImp3dCIsInNpZ24iLCJTRUNSRUFUIiwiZXhwaXJlc0luIiwiY2hlY2tzIiwicmVzIiwibmV4dCIsIkludmFsaWRSZXF1ZXN0IiwiSW52YWxpZEFQSUtleSIsImlzQmxvY2tMaXN0ZWR1c2VyIiwiQmxvY2tMaXN0ZWRVc2VyIiwiSW52YWxpZEF1dGhvcml6YXRpb24iLCJzZXNzc2lvbiIsInNldE1ldHJpY3MiLCJtZXRob2QiLCJzdGFydFRpbWUiLCJEYXRlIiwiZ2V0VGltZSIsImNvcnJlbGF0aW9uSWQiLCJDb25zdGFudHMiLCJMT0dHRVJfQ09SUkVMQVRJT05JRCIsInY0Iiwic2V0IiwiaGVhZGVycyJdLCJzb3VyY2VSb290IjoiL1VzZXJzL3JhbWlyZWRkeWNoYXJpdGhhL21pY3Jvc2VydmljZXMvc2FtcGxlLW1pY3JvLXNlcnZpY2UvbWlkZGxld2FyZXMvIiwic291cmNlcyI6WyJBdXRoLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBwYXRoIGZyb20gXCJwYXRoXCI7XG5pbXBvcnQgand0IGZyb20gXCJqc29ud2VidG9rZW5cIjtcbmltcG9ydCBmcyBmcm9tIFwiZnNcIjtcbmltcG9ydCBjcnlwdG8gZnJvbSBcImNyeXB0b1wiO1xuaW1wb3J0ICogYXMgQ29uc3RhbnRzIGZyb20gXCIuLi9jb25zdGFudHMvQ29uc3RhbnRzXCI7XG5cbmltcG9ydCAqIGFzIEVycm9yVXRpbHMgZnJvbSBcIi4uL2Vycm9ycy9FcnJvclV0aWxzXCI7XG5pbXBvcnQgKiBhcyBBYnN0cmFjdE1vZGVscyBmcm9tIFwiLi4vbW9kZWxzL0Fic3RyYWN0TW9kZWxzXCI7XG5pbXBvcnQgeyBDbGllbnRzIH0gZnJvbSBcIi4uL21vZGVscy9tYWluRGJTY2hlbWEvaW5kZXhcIjtcblxuaW1wb3J0IHsgUmVkaXNDbGllbnQgfSBmcm9tIFwiLi4vY29ubmVjdGlvbnMvUmVkaXNDbGllbnRcIjtcblxuaW1wb3J0IHtcbiAgU0VDUkVBVCwgQUxHT1JJVEhNLCBQQVNTV09SRCxcbn0gZnJvbSBcIi4uL2NvbnN0YW50cy9DcmVkZW50aWFsc1wiO1xuXG5pbXBvcnQge1xuICBIRUFERVJfQVBJX0tFWSwgSEVBREVSX1NFU1NJT05fVE9LRU4sXG59IGZyb20gXCIuLi9jb25zdGFudHMvS2V5c1wiO1xuXG5jb25zdCBodHRwQ29udGV4dCA9IHJlcXVpcmUoXCJleHByZXNzLWh0dHAtY29udGV4dFwiKTtcblxuLy8gU3RhdGljIGRhdGEgY2FuIGJlIHJlYWQgdXNpbmcgcmVxdWlyZSBvciBmc1xubGV0IG5ld1Nlc3Npb25Sb3V0ZXMgPSBmcy5yZWFkRmlsZVN5bmMoXG4gIHBhdGgucmVzb2x2ZShfX2Rpcm5hbWUsIFwiTmV3U2Vzc2lvblJvdXRlcy5qc29uXCIpLFxuICBcInV0ZjhcIixcbik7XG5uZXdTZXNzaW9uUm91dGVzID0gSlNPTi5wYXJzZShuZXdTZXNzaW9uUm91dGVzKTtcblxubGV0IGF1dGhlbnRpY2F0ZWRSb3V0ZXMgPSBmcy5yZWFkRmlsZVN5bmMoXG4gIHBhdGgucmVzb2x2ZShfX2Rpcm5hbWUsIFwiLi9BdXRoZW50aWNhdGVkUm91dGVzLmpzb25cIiksXG4gIFwidXRmOFwiLFxuKTtcbmF1dGhlbnRpY2F0ZWRSb3V0ZXMgPSBKU09OLnBhcnNlKGF1dGhlbnRpY2F0ZWRSb3V0ZXMpO1xuXG5jb25zdCB1dWlkID0gcmVxdWlyZShcInV1aWRcIik7XG5jb25zdCBoZWFsdGhDaGVja1JvdXRlcyA9IHJlcXVpcmUoXCIuL0hlYWx0aENoZWNrUm91dGVzLmpzb25cIik7XG5jb25zdCBub0FQSUtleVJvdXRlcyA9IHJlcXVpcmUoXCIuL05vQ2xpZW50SWRSb3V0ZXMuanNvblwiKTtcbmNvbnN0IG5vU2Vzc2lvblJvdXRlcyA9IHJlcXVpcmUoXCIuL05vU2Vzc2lvblJvdXRlcy5qc29uXCIpO1xuXG5jb25zdCByb3V0ZU1hcHMgPSBbXG4gIG5ld1Nlc3Npb25Sb3V0ZXMsXG4gIGF1dGhlbnRpY2F0ZWRSb3V0ZXMsXG4gIG5vU2Vzc2lvblJvdXRlcyxcbiAgbm9BUElLZXlSb3V0ZXMsXG4gIGhlYWx0aENoZWNrUm91dGVzLFxuXTtcblxuY29uc3QgZ2V0Um91dGVDYXRlZ29yeSA9IChyb3V0ZU1hcHNJbmRleCkgPT4ge1xuICBsZXQgcm91dGVDYXRlZ29yeSA9IFwib3RoZXJzXCI7XG4gIGlmIChyb3V0ZU1hcHNJbmRleCA9PT0gMCkge1xuICAgIHJvdXRlQ2F0ZWdvcnkgPSBcIm5ld1Nlc3Npb25Sb3V0ZXNcIjtcbiAgfSBlbHNlIGlmIChyb3V0ZU1hcHNJbmRleCA9PT0gMSkge1xuICAgIHJvdXRlQ2F0ZWdvcnkgPSBcImF1dGhlbnRpY2F0ZWRSb3V0ZXNcIjtcbiAgfSBlbHNlIGlmIChyb3V0ZU1hcHNJbmRleCA9PT0gMikge1xuICAgIHJvdXRlQ2F0ZWdvcnkgPSBcIm5vU2Vzc2lvblJvdXRlc1wiO1xuICB9IGVsc2UgaWYgKHJvdXRlTWFwc0luZGV4ID09PSAzKSB7XG4gICAgcm91dGVDYXRlZ29yeSA9IFwibm9BUElLZXlSb3V0ZXNcIjtcbiAgfSBlbHNlIGlmIChyb3V0ZU1hcHNJbmRleCA9PT0gNCkge1xuICAgIHJvdXRlQ2F0ZWdvcnkgPSBcImhlYWx0aENoZWNrUm91dGVzXCI7XG4gIH1cbiAgcmV0dXJuIHJvdXRlQ2F0ZWdvcnk7XG59O1xuXG5jb25zdCBjaGVja0FwaUtleVZhbGlkaXR5ID0gYXN5bmMgKHJlcSkgPT4ge1xuICBjb25zdCBhcGlLZXkgPSByZXEuaGVhZGVyKEhFQURFUl9BUElfS0VZKTtcbiAgY29uc3Qgc2VsZWN0Q29uZGl0aW9uID0ge1xuICAgIG1ldHJvX2F1dGhfa2V5OiBhcGlLZXksXG4gIH07XG4gIGNvbnN0IHByb2plY3RDb25kaXRpb24gPSB7XG4gICAgbWV0cm9fYXV0aF9rZXk6IDEsXG4gICAgX2lkOiAwLFxuICB9O1xuICBjb25zdCBpc1ZhbGlkQVBJS2V5ID0gYXdhaXQgQWJzdHJhY3RNb2RlbHMubW9uZ29GaW5kT25lKFxuICAgIENsaWVudHMsXG4gICAgc2VsZWN0Q29uZGl0aW9uLFxuICAgIHByb2plY3RDb25kaXRpb24sXG4gICk7XG4gIHJldHVybiBpc1ZhbGlkQVBJS2V5O1xufTtcblxuY29uc3QgZ2V0UmVkaXNTZXNzaW9uID0gYXN5bmMgKHNlc3Npb25JZCkgPT4ge1xuICB0cnkge1xuICAgIC8vIEBob3RmaXg6IEZvciBiYWNrd2FyZCBjb21wYXRpYmlsaXR5IHByZXByZW5kaW5nIFwic2VzczpcIiB0byBzZXNzaW9uSWRcbiAgICBjb25zdCByZWRpc1Nlc3Npb24gPSBhd2FpdCBSZWRpc0NsaWVudC5nZXQoYHNlc3M6JHtzZXNzaW9uSWR9YCk7XG4gICAgcmV0dXJuIHJlZGlzU2Vzc2lvbjtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBsb2coXCJlcnJvclwiLCB7IGVycm9yIH0pO1xuICAgIHRocm93IEVycm9yVXRpbHMucmVkaXNDb25uZWN0aW9uRXJyb3IoKTtcbiAgfVxufTtcblxuY29uc3QgZGVjcnlwdCA9ICh0ZXh0KSA9PiB7XG4gIGxldCByZXN1bHRDaGlwZXIgPSBcIlwiO1xuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmVcbiAgY29uc3QgZGVjaXBoZXIgPSBjcnlwdG8uY3JlYXRlRGVjaXBoZXIoQUxHT1JJVEhNLCBQQVNTV09SRCk7XG4gIHJlc3VsdENoaXBlciA9IGRlY2lwaGVyLnVwZGF0ZSh0ZXh0LCBcImhleFwiLCBcInV0ZjhcIik7XG4gIHJlc3VsdENoaXBlciArPSBkZWNpcGhlci5maW5hbChcInV0ZjhcIik7XG4gIHJldHVybiByZXN1bHRDaGlwZXI7XG59O1xuXG5leHBvcnQgY29uc3QgZ2V0U2Vzc2lvbk9iaiA9IGFzeW5jIChyZXEpID0+IHtcbiAgY29uc3Qgc2Vzc2lvbnRva2VuID0gcmVxLmhlYWRlcihIRUFERVJfU0VTU0lPTl9UT0tFTik7XG4gIGlmICghc2Vzc2lvbnRva2VuKSB0aHJvdyBFcnJvclV0aWxzLkludmFsaWRTZXNzaW9uVG9rZW4oKTtcbiAgLy8gY29uc3Qgc2Vzc2lvbiA9IGp3dC52ZXJpZnkoc2Vzc2lvbnRva2VuLCBTRUNSRUFUKTtcblxuICBjb25zdCBzZXNzaW9uSWQgPSBkZWNyeXB0KHNlc3Npb250b2tlbik7XG4gIGxldCBzZXNzaW9uID0gYXdhaXQgZ2V0UmVkaXNTZXNzaW9uKHNlc3Npb25JZCk7XG4gIGxvZyhcImluZm9cIiwgeyBzZXNzaW9uLCBzZXNzaW9uSWQsIHNlc3Npb250b2tlbiB9KTtcblxuICBpZiAoIXNlc3Npb24pIHtcbiAgICB0aHJvdyBFcnJvclV0aWxzLkludmFsaWRTZXNzaW9uVG9rZW4oKTtcbiAgfVxuICB0cnkge1xuICAgIHNlc3Npb24gPSBKU09OLnBhcnNlKHNlc3Npb24pO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHRocm93IEVycm9yVXRpbHMuSW52YWxpZFNlc3Npb25Ub2tlbigpO1xuICB9XG4gIHJldHVybiBzZXNzaW9uO1xufTtcbmNvbnN0IGdldFJvdXRlT2JqID0gKG9yaWdpbmFsVXJsLCBodHRwTWV0aG9kKSA9PiB7XG4gIGxldCByb3V0ZU9iaiA9IHt9O1xuICBjb25zdCBub3JtYWxpemVkVVJMID0gb3JpZ2luYWxVcmwudG9Mb3dlckNhc2UoKS5zcGxpdChcIj9cIilbMF07XG4gIGNvbnN0IGluZGV4ID0gbm9ybWFsaXplZFVSTC5sYXN0SW5kZXhPZihcIi9cIik7XG4gIGNvbnN0IGJhc2VVUkwgPSBub3JtYWxpemVkVVJMLnN1YnN0cmluZygwLCBpbmRleCk7XG4gIGxldCBpc1JvdXRlT2JqRm91bmQgPSBmYWxzZTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCByb3V0ZU1hcHMubGVuZ3RoOyBpKyspIHtcbiAgICBjb25zdCByb3V0ZU1hcCA9IHJvdXRlTWFwc1tpXTtcbiAgICBpZiAocm91dGVNYXAgJiYgcm91dGVNYXBbaHR0cE1ldGhvZF0pIHtcbiAgICAgIGlmIChyb3V0ZU1hcFtodHRwTWV0aG9kXVtub3JtYWxpemVkVVJMXSkge1xuICAgICAgICByb3V0ZU9iaiA9IHJvdXRlTWFwW2h0dHBNZXRob2RdW25vcm1hbGl6ZWRVUkxdO1xuICAgICAgICBpc1JvdXRlT2JqRm91bmQgPSB0cnVlO1xuICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgcm91dGVNYXBbaHR0cE1ldGhvZF1bYCR7YmFzZVVSTH0vOnBhcmFtYF1cbiAgICAgICAgJiYgaW5kZXggIT09IG5vcm1hbGl6ZWRVUkwubGVuZ3RoIC0gMVxuICAgICAgKSB7XG4gICAgICAgIHJvdXRlT2JqID0gcm91dGVNYXBbaHR0cE1ldGhvZF1bYCR7YmFzZVVSTH0vOnBhcmFtYF07XG4gICAgICAgIGlzUm91dGVPYmpGb3VuZCA9IHRydWU7XG4gICAgICB9XG4gICAgICBpZiAoaXNSb3V0ZU9iakZvdW5kKSB7XG4gICAgICAgIHJvdXRlT2JqLmh0dHBNZXRob2QgPSBodHRwTWV0aG9kO1xuICAgICAgICByb3V0ZU9iai5iYXNlVVJMID0gYmFzZVVSTDtcbiAgICAgICAgcm91dGVPYmoubm9ybWFsaXplZFVSTCA9IG5vcm1hbGl6ZWRVUkw7XG4gICAgICAgIHJvdXRlT2JqLnJvdXRlQ2F0ZWdvcnkgPSBnZXRSb3V0ZUNhdGVnb3J5KGkpO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgLy8gSWYgcm91dGUgaXMgbm90IGZvdW5kIGZyb20gUm91dGVzTWFwIGl0IHNob3VkIGJlIHRyZWF0ZWQgYXMgb3RoZXJzXG4gIGlmICghaXNSb3V0ZU9iakZvdW5kKSB7XG4gICAgcm91dGVPYmouaHR0cE1ldGhvZCA9IGh0dHBNZXRob2Q7XG4gICAgcm91dGVPYmouYmFzZVVSTCA9IGJhc2VVUkw7XG4gICAgcm91dGVPYmoubm9ybWFsaXplZFVSTCA9IG5vcm1hbGl6ZWRVUkw7XG4gICAgcm91dGVPYmoucm91dGVDYXRlZ29yeSA9IFwib3RoZXJzXCI7XG4gIH1cbiAgcmV0dXJuIHJvdXRlT2JqO1xufTtcblxuLy8gQGhvdGZpeDogRm9yIGJhY2t3YXJkIGNvbXBhdGliaWxpdHlcbi8vIEJ1c2luZXNzICYgY29uc3VtZXIgdXNlciByb2xlcyBhcmUgc3RvcmVkIGluIGRpZmZlcmVudCBrZXlzIGluIHNlc3Npb25cbi8vIFBvc3NpYmxlIHZhbHVlcyBmb3IgdXNlcnNfYnVzaW5lc3NfcG9ydGFsX3JvbGUgYXJlIFwiYWRtaW5cIiAmIFwidXNlclwiXG5hc3luYyBmdW5jdGlvbiBnZXRVc2VyUm9sZXMocmVxKSB7XG4gIGNvbnN0IHNlc3Npb24gPSBhd2FpdCBnZXRTZXNzaW9uT2JqKHJlcSk7XG4gIGNvbnN0IHsgdXNlcnNfYnVzaW5lc3NfcG9ydGFsX3JvbGU6IHVzZXJSb2xlcyB9ID0gc2Vzc2lvbjtcbiAgcmV0dXJuIFtdLmNvbmNhdCh1c2VyUm9sZXMpLm1hcCgodmFsdWUpID0+IHZhbHVlLnRvVXBwZXJDYXNlKCkpO1xufVxuXG5jb25zdCBjaGVja0F1dG9yaXphdGlvbiA9IGFzeW5jIChyZXEpID0+IHtcbiAgbGV0IGlzQXV0aG9yaXplZFRvQWNjZXNzUm91dGUgPSBmYWxzZTtcbiAgY29uc3QgdXNlclJvbGVzID0gYXdhaXQgZ2V0VXNlclJvbGVzKHJlcSk7XG4gIGNvbnN0IHJvdXRlQXV0b3JpemVkUm9sZXMgPSByZXEucm91dGVPYmo/LnJvbGVzIHx8IFtdO1xuICBpZiAocm91dGVBdXRvcml6ZWRSb2xlcz8uZmlsdGVyKCh2YWx1ZSkgPT4gdXNlclJvbGVzLmluY2x1ZGVzKHZhbHVlLnRvVXBwZXJDYXNlKCkpKT8ubGVuZ3RoID4gMCkge1xuICAgIGlzQXV0aG9yaXplZFRvQWNjZXNzUm91dGUgPSB0cnVlO1xuICB9XG4gIHJldHVybiBpc0F1dGhvcml6ZWRUb0FjY2Vzc1JvdXRlO1xufTtcblxuY29uc3QgY2hlY2tCbG9ja0xpc3RlZFVzZXIgPSBhc3luYyAoKSA9PiB7XG4gIC8vIEBob3RmaXg6IFJld3JpdGUgdGhpcyBsb2dpYyBhY2NvcmRpbmcgdG8gc2VydmljZSBuZWVkXG4gIGNvbnN0IGlzQmxvY2tlZFVzZXIgPSBmYWxzZTtcbiAgcmV0dXJuIGlzQmxvY2tlZFVzZXI7XG4gIC8vIGxldCBpc0Jsb2NrZWRVc2VyID0gZmFsc2U7XG4gIC8vIGNvbnN0IHNlc3Npb24gPSBhd2FpdCBnZXRTZXNzaW9uT2JqKHJlcSk7XG4gIC8vIGNvbnN0IHsgbW9iaWxlTm8gfSA9IHNlc3Npb247XG4gIC8vIGNvbnN0IHNlbGVjdENvbmRpdGlvbiA9IHtcbiAgLy8gICBtb2JpbGVObyxcbiAgLy8gICBpc0Jsb2NrZWRVc2VyOiB0cnVlLFxuICAvLyB9O1xuICAvLyBjb25zdCBwcm9qZWN0Q29uZGl0aW9uID0ge1xuICAvLyAgIG1vYmlsZU5vOiAxLFxuICAvLyAgIF9pZDogMCxcbiAgLy8gfTtcbiAgLy8gY29uc3QgdXNlck9iaiA9IGF3YWl0IEFic3RyYWN0TW9kZWxzLm1vbmdvRmluZE9uZShcbiAgLy8gICBVc2VycyxcbiAgLy8gICBzZWxlY3RDb25kaXRpb24sXG4gIC8vICAgcHJvamVjdENvbmRpdGlvbixcbiAgLy8gKTtcbiAgLy8gaWYgKHVzZXJPYmopIHtcbiAgLy8gICBpc0Jsb2NrZWRVc2VyID0gdHJ1ZTtcbiAgLy8gfVxuICAvLyByZXR1cm4gaXNCbG9ja2VkVXNlcjtcbn07XG5cbmV4cG9ydCBjb25zdCBjcmVhdGVTZXNzaW9uT2JqID0gKGRhdGEpID0+IHtcbiAgY29uc3Qgc2Vzc2lvbiA9IGp3dC5zaWduKGRhdGEsIFNFQ1JFQVQsIHsgZXhwaXJlc0luOiA2MCAqIDYwICogMjQgKiAzMCB9KTsgLy8gZGVmYXVsdCBpcyBpbiBzZWNcbiAgcmV0dXJuIHNlc3Npb247XG59O1xuXG4vKlxuMS5uZXdTZXNzaW9uUm91dGVzXG4yLmF1dGhlbnRpY2F0ZWRSb3V0ZXMoYXBpIGtleSBjaGVjayxzZXNzb2luIHRva2VuIGNoZWNrLEF1dGhvcml6ZSBjaGVjayxibG9ja2xpc3QgdXNlcnMgY2hlY2spXG4zLm5vU2Vzc2lvblJvdXRlcyhhcGkga2V5IGNoZWNrKVxuNC5ub0FQSUtleVJvdXRlc1xuNS5oZWFsdGhDaGVja1JvdXRlcyhEb250JyBzdG9yZSBBdWRpdHMpXG42Lm90aGVyc1xuXG5Gb3IgZWFjaCByZXEgc3RvcmUgcmVxLCByZXMgYXVkaXRzXG4qL1xuXG5leHBvcnQgY29uc3QgY2hlY2tzID0gYXN5bmMgKHJlcSwgcmVzLCBuZXh0KSA9PiB7XG4gIGNvbnN0IHsgcm91dGVDYXRlZ29yeSB9ID0gcmVxLnJvdXRlT2JqO1xuICBpZiAocm91dGVDYXRlZ29yeSA9PT0gXCJvdGhlcnNcIikge1xuICAgIGNvbnN0IGVycm9yID0gRXJyb3JVdGlscy5JbnZhbGlkUmVxdWVzdCgpO1xuICAgIG5leHQoZXJyb3IpO1xuICB9IGVsc2UgaWYgKHJvdXRlQ2F0ZWdvcnkgPT09IFwiaGVhbHRoQ2hlY2tSb3V0ZXNcIikge1xuICAgIG5leHQoKTtcbiAgfSBlbHNlIGlmIChyb3V0ZUNhdGVnb3J5ID09PSBcIm5vQVBJS2V5Um91dGVzXCIpIHtcbiAgICBuZXh0KCk7XG4gIH0gZWxzZSBpZiAoXG4gICAgcm91dGVDYXRlZ29yeSA9PT0gXCJub1Nlc3Npb25Sb3V0ZXNcIlxuICAgIHx8IHJvdXRlQ2F0ZWdvcnkgPT09IFwibmV3U2Vzc2lvblJvdXRlc1wiXG4gICkge1xuICAgIGNvbnN0IGlzVmFsaWRBUElLZXkgPSBhd2FpdCBjaGVja0FwaUtleVZhbGlkaXR5KHJlcSk7XG4gICAgaWYgKCFpc1ZhbGlkQVBJS2V5KSB7XG4gICAgICBjb25zdCBlcnJvciA9IEVycm9yVXRpbHMuSW52YWxpZEFQSUtleSgpO1xuICAgICAgbmV4dChlcnJvcik7XG4gICAgfSBlbHNlIHtcbiAgICAgIG5leHQoKTtcbiAgICB9XG4gIH0gZWxzZSBpZiAocm91dGVDYXRlZ29yeSA9PT0gXCJhdXRoZW50aWNhdGVkUm91dGVzXCIpIHtcbiAgICAvLyAxLmFwaSBrZXkgY2hlY2sgMi5zZXNzaW9uIHRva2VuIGNoZWNrIDMuYXV0b3JpemF0aW9uIGNoZWNrIDQuYmxvY2tsaXN0ZWQgdXNlciBjaGVja1xuICAgIGNvbnN0IGlzVmFsaWRBUElLZXkgPSBhd2FpdCBjaGVja0FwaUtleVZhbGlkaXR5KHJlcSk7XG4gICAgY29uc3Qgc2Vzc2lvbiA9IGF3YWl0IGdldFNlc3Npb25PYmoocmVxKTtcbiAgICBpZiAoIXNlc3Npb24pIHtcbiAgICAgIGNvbnN0IGVycm9yID0gRXJyb3JVdGlscy5JbnZhbGlkU2Vzc2lvblRva2VuKCk7XG4gICAgICBuZXh0KGVycm9yKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgaXNBdXRob3JpemVkVG9BY2Nlc3NSb3V0ZSA9IGF3YWl0IGNoZWNrQXV0b3JpemF0aW9uKHJlcSk7XG4gICAgICBjb25zdCBpc0Jsb2NrTGlzdGVkdXNlciA9IGF3YWl0IGNoZWNrQmxvY2tMaXN0ZWRVc2VyKCk7XG4gICAgICBpZiAoIWlzVmFsaWRBUElLZXkpIHtcbiAgICAgICAgY29uc3QgZXJyb3IgPSBFcnJvclV0aWxzLkludmFsaWRBUElLZXkoKTtcbiAgICAgICAgbmV4dChlcnJvcik7XG4gICAgICB9IGVsc2UgaWYgKGlzQmxvY2tMaXN0ZWR1c2VyKSB7XG4gICAgICAgIGNvbnN0IGVycm9yID0gRXJyb3JVdGlscy5CbG9ja0xpc3RlZFVzZXIoKTtcbiAgICAgICAgbmV4dChlcnJvcik7XG4gICAgICB9IGVsc2UgaWYgKCFpc0F1dGhvcml6ZWRUb0FjY2Vzc1JvdXRlKSB7XG4gICAgICAgIGNvbnN0IGVycm9yID0gRXJyb3JVdGlscy5JbnZhbGlkQXV0aG9yaXphdGlvbigpO1xuICAgICAgICBuZXh0KGVycm9yKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlcS5zZXNzc2lvbiA9IHNlc3Npb247XG4gICAgICAgIG5leHQoKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn07XG5cbmV4cG9ydCBjb25zdCBzZXRNZXRyaWNzID0gKHJlcSwgcmVzKSA9PiB7XG4gIGNvbnN0IHsgb3JpZ2luYWxVcmwgfSA9IHJlcTtcbiAgY29uc3QgaHR0cE1ldGhvZCA9IHJlcS5tZXRob2Q7XG4gIGNvbnN0IHJvdXRlT2JqID0gZ2V0Um91dGVPYmoob3JpZ2luYWxVcmwsIGh0dHBNZXRob2QpO1xuICByb3V0ZU9iai5zdGFydFRpbWUgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcblxuICBsZXQgY29ycmVsYXRpb25JZCA9IHJlcS5nZXQoQ29uc3RhbnRzLkxPR0dFUl9DT1JSRUxBVElPTklEKTtcbiAgaWYgKCFjb3JyZWxhdGlvbklkKSB7XG4gICAgLy8gZ2VuZXJhdGUgYW5kIHNldCB1dWlkIHY0IHZlcnNpb25cbiAgICBjb3JyZWxhdGlvbklkID0gdXVpZC52NCgpO1xuICAgIGh0dHBDb250ZXh0LnNldChDb25zdGFudHMuTE9HR0VSX0NPUlJFTEFUSU9OSUQsIGNvcnJlbGF0aW9uSWQpO1xuICAgIC8vIGluamVjdCBjb3JyZWxhdGlvbklkIGluIGhlYWRlcnNcbiAgICByZXEuaGVhZGVycy5jb3JyZWxhdGlvbklkID0gaHR0cENvbnRleHQuZ2V0KENvbnN0YW50cy5MT0dHRVJfQ09SUkVMQVRJT05JRCk7XG4gICAgcmVzLnNldChcIkNvcnJlbGF0aW9uSWRcIiwgaHR0cENvbnRleHQuZ2V0KENvbnN0YW50cy5MT0dHRVJfQ09SUkVMQVRJT05JRCkpO1xuICB9XG5cbiAgcmV0dXJuIHJvdXRlT2JqO1xufTtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUVBOztBQUNBOztBQUNBOztBQUVBOztBQUVBOztBQUlBOzs7Ozs7OztBQUlBLE1BQU1BLFdBQVcsR0FBR0MsT0FBTyxDQUFDLHNCQUFELENBQTNCLEMsQ0FFQTs7O0FBQ0EsSUFBSUMsZ0JBQWdCLEdBQUdDLFlBQUdDLFlBQUgsQ0FDckJDLGNBQUtDLE9BQUws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","map":{"version":3,"names":["httpContext","require","newSessionRoutes","fs","readFileSync","path","resolve","__dirname","JSON","parse","authenticatedRoutes","uuid","healthCheckRoutes","noAPIKeyRoutes","noSessionRoutes","routeMaps","getRouteCategory","routeMapsIndex","routeCategory","checkApiKeyValidity","req","apiKey","header","HEADER_API_KEY","selectCondition","metro_auth_key","projectCondition","_id","isValidAPIKey","AbstractModels","mongoFindOne","Clients","getRedisSession","sessionId","redisSession","RedisClient","get","error","log","ErrorUtils","redisConnectionError","decrypt","text","resultChiper","decipher","crypto","createDecipher","ALGORITHM","PASSWORD","update","final","getSessionObj","sessiontoken","HEADER_SESSION_TOKEN","InvalidSessionToken","session","getRouteObj","originalUrl","httpMethod","routeObj","normalizedURL","toLowerCase","split","index","lastIndexOf","baseURL","substring","isRouteObjFound","i","length","routeMap","getUserRoles","users_business_portal_role","userRoles","concat","map","value","toUpperCase","checkAutorization","isAuthorizedToAccessRoute","routeAutorizedRoles","roles","filter","includes","checkBlockListedUser","isBlockedUser","createSessionObj","data","jwt","sign","SECREAT","expiresIn","checks","res","next","InvalidRequest","InvalidAPIKey","isBlockListeduser","BlockListedUser","InvalidAuthorization","sesssion","setMetrics","method","startTime","Date","getTime","correlationId","Constants","LOGGER_CORRELATIONID","v4","set","headers"],"sourceRoot":"/Users/ramireddycharitha/microservices/sample-micro-service/middlewares/","sources":["Auth.js"],"sourcesContent":["import path from \"path\";\nimport jwt from \"jsonwebtoken\";\nimport fs from \"fs\";\nimport crypto from \"crypto\";\nimport * as Constants from \"../constants/Constants\";\n\nimport * as ErrorUtils from \"../errors/ErrorUtils\";\nimport * as AbstractModels from \"../models/AbstractModels\";\nimport { Clients } from \"../models/mainDbSchema/index\";\n\nimport { RedisClient } from \"../connections/RedisClient\";\n\nimport {\n  SECREAT, ALGORITHM, PASSWORD,\n} from \"../constants/Credentials\";\n\nimport {\n  HEADER_API_KEY, HEADER_SESSION_TOKEN,\n} from \"../constants/Keys\";\n\nconst httpContext = require(\"express-http-context\");\n\n// Static data can be read using require or fs\nlet newSessionRoutes = fs.readFileSync(\n  path.resolve(__dirname, \"NewSessionRoutes.json\"),\n  \"utf8\",\n);\nnewSessionRoutes = JSON.parse(newSessionRoutes);\n\nlet authenticatedRoutes = fs.readFileSync(\n  path.resolve(__dirname, \"./AuthenticatedRoutes.json\"),\n  \"utf8\",\n);\nauthenticatedRoutes = JSON.parse(authenticatedRoutes);\n\nconst uuid = require(\"uuid\");\nconst healthCheckRoutes = require(\"./HealthCheckRoutes.json\");\nconst noAPIKeyRoutes = require(\"./NoClientIdRoutes.json\");\nconst noSessionRoutes = require(\"./NoSessionRoutes.json\");\n\nconst routeMaps = [\n  newSessionRoutes,\n  authenticatedRoutes,\n  noSessionRoutes,\n  noAPIKeyRoutes,\n  healthCheckRoutes,\n];\n\nconst getRouteCategory = (routeMapsIndex) => {\n  let routeCategory = \"others\";\n  if (routeMapsIndex === 0) {\n    routeCategory = \"newSessionRoutes\";\n  } else if (routeMapsIndex === 1) {\n    routeCategory = \"authenticatedRoutes\";\n  } else if (routeMapsIndex === 2) {\n    routeCategory = \"noSessionRoutes\";\n  } else if (routeMapsIndex === 3) {\n    routeCategory = \"noAPIKeyRoutes\";\n  } else if (routeMapsIndex === 4) {\n    routeCategory = \"healthCheckRoutes\";\n  }\n  return routeCategory;\n};\n\nconst checkApiKeyValidity = async (req) => {\n  const apiKey = req.header(HEADER_API_KEY);\n  const selectCondition = {\n    metro_auth_key: apiKey,\n  };\n  const projectCondition = {\n    metro_auth_key: 1,\n    _id: 0,\n  };\n  const isValidAPIKey = await AbstractModels.mongoFindOne(\n    Clients,\n    selectCondition,\n    projectCondition,\n  );\n  return isValidAPIKey;\n};\n\nconst getRedisSession = async (sessionId) => {\n  try {\n    // @hotfix: For backward compatibility preprending \"sess:\" to sessionId\n    const redisSession = await RedisClient.get(`sess:${sessionId}`);\n    return redisSession;\n  } catch (error) {\n    log(\"error\", { error });\n    throw ErrorUtils.redisConnectionError();\n  }\n};\n\nconst decrypt = (text) => {\n  let resultChiper = \"\";\n  // eslint-disable-next-line\n  const decipher = crypto.createDecipher(ALGORITHM, PASSWORD);\n  resultChiper = decipher.update(text, \"hex\", \"utf8\");\n  resultChiper += decipher.final(\"utf8\");\n  return resultChiper;\n};\n\nexport const getSessionObj = async (req) => {\n  const sessiontoken = req.header(HEADER_SESSION_TOKEN);\n  if (!sessiontoken) throw ErrorUtils.InvalidSessionToken();\n  // const session = jwt.verify(sessiontoken, SECREAT);\n\n  const sessionId = decrypt(sessiontoken);\n  let session = await getRedisSession(sessionId);\n  log(\"info\", { session, sessionId, sessiontoken });\n\n  if (!session) {\n    throw ErrorUtils.InvalidSessionToken();\n  }\n  try {\n    session = JSON.parse(session);\n  } catch (error) {\n    throw ErrorUtils.InvalidSessionToken();\n  }\n  return session;\n};\nconst getRouteObj = (originalUrl, httpMethod) => {\n  let routeObj = {};\n  const normalizedURL = originalUrl.toLowerCase().split(\"?\")[0];\n  const index = normalizedURL.lastIndexOf(\"/\");\n  const baseURL = normalizedURL.substring(0, index);\n  let isRouteObjFound = false;\n  for (let i = 0; i < routeMaps.length; i++) {\n    const routeMap = routeMaps[i];\n    if (routeMap && routeMap[httpMethod]) {\n      if (routeMap[httpMethod][normalizedURL]) {\n        routeObj = routeMap[httpMethod][normalizedURL];\n        isRouteObjFound = true;\n      } else if (\n        routeMap[httpMethod][`${baseURL}/:param`]\n        && index !== normalizedURL.length - 1\n      ) {\n        routeObj = routeMap[httpMethod][`${baseURL}/:param`];\n        isRouteObjFound = true;\n      }\n      if (isRouteObjFound) {\n        routeObj.httpMethod = httpMethod;\n        routeObj.baseURL = baseURL;\n        routeObj.normalizedURL = normalizedURL;\n        routeObj.routeCategory = getRouteCategory(i);\n        break;\n      }\n    }\n  }\n  // If route is not found from RoutesMap it shoud be treated as others\n  if (!isRouteObjFound) {\n    routeObj.httpMethod = httpMethod;\n    routeObj.baseURL = baseURL;\n    routeObj.normalizedURL = normalizedURL;\n    routeObj.routeCategory = \"others\";\n  }\n  return routeObj;\n};\n\n// @hotfix: For backward compatibility\n// Business & consumer user roles are stored in different keys in session\n// Possible values for users_business_portal_role are \"admin\" & \"user\"\nasync function getUserRoles(req) {\n  const session = await getSessionObj(req);\n  const { users_business_portal_role: userRoles } = session;\n  return [].concat(userRoles).map((value) => value.toUpperCase());\n}\n\nconst checkAutorization = async (req) => {\n  let isAuthorizedToAccessRoute = false;\n  const userRoles = await getUserRoles(req);\n  const routeAutorizedRoles = req.routeObj?.roles || [];\n  if (routeAutorizedRoles?.filter((value) => userRoles.includes(value.toUpperCase()))?.length > 0) {\n    isAuthorizedToAccessRoute = true;\n  }\n  return isAuthorizedToAccessRoute;\n};\n\nconst checkBlockListedUser = async () => {\n  // @hotfix: Rewrite this logic according to service need\n  const isBlockedUser = false;\n  return isBlockedUser;\n  // let isBlockedUser = false;\n  // const session = await getSessionObj(req);\n  // const { mobileNo } = session;\n  // const selectCondition = {\n  //   mobileNo,\n  //   isBlockedUser: true,\n  // };\n  // const projectCondition = {\n  //   mobileNo: 1,\n  //   _id: 0,\n  // };\n  // const userObj = await AbstractModels.mongoFindOne(\n  //   Users,\n  //   selectCondition,\n  //   projectCondition,\n  // );\n  // if (userObj) {\n  //   isBlockedUser = true;\n  // }\n  // return isBlockedUser;\n};\n\nexport const createSessionObj = (data) => {\n  const session = jwt.sign(data, SECREAT, { expiresIn: 60 * 60 * 24 * 30 }); // default is in sec\n  return session;\n};\n\n/*\n1.newSessionRoutes\n2.authenticatedRoutes(api key check,sessoin token check,Authorize check,blocklist users check)\n3.noSessionRoutes(api key check)\n4.noAPIKeyRoutes\n5.healthCheckRoutes(Dont' store Audits)\n6.others\n\nFor each req store req, res audits\n*/\n\nexport const checks = async (req, res, next) => {\n  const { routeCategory } = req.routeObj;\n  if (routeCategory === \"others\") {\n    const error = ErrorUtils.InvalidRequest();\n    next(error);\n  } else if (routeCategory === \"healthCheckRoutes\") {\n    next();\n  } else if (routeCategory === \"noAPIKeyRoutes\") {\n    next();\n  } else if (\n    routeCategory === \"noSessionRoutes\"\n    || routeCategory === \"newSessionRoutes\"\n  ) {\n    const isValidAPIKey = await checkApiKeyValidity(req);\n    if (!isValidAPIKey) {\n      const error = ErrorUtils.InvalidAPIKey();\n      next(error);\n    } else {\n      next();\n    }\n  } else if (routeCategory === \"authenticatedRoutes\") {\n    // 1.api key check 2.session token check 3.autorization check 4.blocklisted user check\n    const isValidAPIKey = await checkApiKeyValidity(req);\n    const session = await getSessionObj(req);\n    if (!session) {\n      const error = ErrorUtils.InvalidSessionToken();\n      next(error);\n    } else {\n      const isAuthorizedToAccessRoute = await checkAutorization(req);\n      const isBlockListeduser = await checkBlockListedUser();\n      if (!isValidAPIKey) {\n        const error = ErrorUtils.InvalidAPIKey();\n        next(error);\n      } else if (isBlockListeduser) {\n        const error = ErrorUtils.BlockListedUser();\n        next(error);\n      } else if (!isAuthorizedToAccessRoute) {\n        const error = ErrorUtils.InvalidAuthorization();\n        next(error);\n      } else {\n        req.sesssion = session;\n        next();\n      }\n    }\n  }\n};\n\nexport const setMetrics = (req, res) => {\n  const { originalUrl } = req;\n  const httpMethod = req.method;\n  const routeObj = getRouteObj(originalUrl, httpMethod);\n  routeObj.startTime = new Date().getTime();\n\n  let correlationId = req.get(Constants.LOGGER_CORRELATIONID);\n  if (!correlationId) {\n    // generate and set uuid v4 version\n    correlationId = uuid.v4();\n    httpContext.set(Constants.LOGGER_CORRELATIONID, correlationId);\n    // inject correlationId in headers\n    req.headers.correlationId = httpContext.get(Constants.LOGGER_CORRELATIONID);\n    res.set(\"CorrelationId\", httpContext.get(Constants.LOGGER_CORRELATIONID));\n  }\n\n  return routeObj;\n};\n"],"mappings":"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"}},"mtime":1653643634181},"{\"assumptions\":{},\"sourceRoot\":\"/Users/ramireddycharitha/microservices/sample-micro-service/errors/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/ramireddycharitha/microservices/sample-micro-service\",\"filename\":\"/Users/ramireddycharitha/microservices/sample-micro-service/errors/ErrorUtils.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"default\",\"root\":\"/Users/ramireddycharitha/microservices/sample-micro-service\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.17.10:default":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.BlockListedUser = BlockListedUser;\nexports.DataAlreadyExists = DataAlreadyExists;\nexports.DataNotFound = DataNotFound;\nexports.ExpiredUser = ExpiredUser;\nexports.IncorrectOTP = IncorrectOTP;\nexports.InternalServerError = InternalServerError;\nexports.InvalidAPIKey = InvalidAPIKey;\nexports.InvalidAuthorization = InvalidAuthorization;\nexports.InvalidPasswordError = InvalidPasswordError;\nexports.InvalidRequest = InvalidRequest;\nexports.InvalidSchemaError = InvalidSchemaError;\nexports.InvalidSessionToken = InvalidSessionToken;\nexports.InvalidUserError = InvalidUserError;\nexports.MongoError = MongoError;\nexports.NotRegisteredUser = NotRegisteredUser;\nexports.UserNotFoundError = UserNotFoundError;\nexports.redisConnectionError = redisConnectionError;\n\nvar ErrorType = _interopRequireWildcard(require(\"../constants/ErrorConstants\"));\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nconst RESPONSE_STATUS_400_BAD_REQUEST = 400;\nconst RESPONSE_STATUS_401_UNAUTHORIZED = 401;\nconst RESPONSE_STATUS_403_FORBIDDEN = 403;\nconst RESPONSE_STATUS_404_NOT_FOUND = 404;\nconst RESPONSE_STATUS_409_CONFLICT = 409;\nconst RESPONSE_STATUS_500_INTERNAL_SERVER_ERROR = 500;\n\nfunction ErrorUtils(functionName, customMessage, httpResponseStatusCode) {\n  Error.captureStackTrace(this, functionName || ErrorUtils);\n  this.name = this.constructor.name;\n  this.message = customMessage?.message;\n  this.code = customMessage?.code;\n  this.statusCode = httpResponseStatusCode;\n}\n\nfunction InvalidRequest() {\n  return new ErrorUtils(InvalidRequest, ErrorType.INVALID_REQUEST, RESPONSE_STATUS_400_BAD_REQUEST);\n}\n\nfunction InvalidAPIKey() {\n  return new ErrorUtils(InvalidAPIKey, ErrorType.INVALID_API_KEY, RESPONSE_STATUS_400_BAD_REQUEST);\n}\n\nfunction InvalidSessionToken() {\n  return new ErrorUtils(InvalidSessionToken, ErrorType.INVALID_SESSION_TOKEN, RESPONSE_STATUS_400_BAD_REQUEST);\n}\n\nfunction InvalidAuthorization() {\n  return new ErrorUtils(InvalidAuthorization, ErrorType.INVALID_AUTHORIZATION, RESPONSE_STATUS_401_UNAUTHORIZED);\n}\n\nfunction BlockListedUser() {\n  return new ErrorUtils(BlockListedUser, ErrorType.BLOCK_LISTED_USER, RESPONSE_STATUS_403_FORBIDDEN);\n}\n\nfunction UserNotFoundError() {\n  return new ErrorUtils(UserNotFoundError, ErrorType.USER_DOES_NOT_EXIST, RESPONSE_STATUS_404_NOT_FOUND);\n}\n\nfunction InvalidPasswordError() {\n  return new ErrorUtils(InvalidPasswordError, ErrorType.INVALID_PASSWORD, RESPONSE_STATUS_401_UNAUTHORIZED);\n}\n\nfunction InvalidSchemaError() {\n  return new ErrorUtils(InvalidSchemaError, ErrorType.INVALID_SCHEMA.code, RESPONSE_STATUS_500_INTERNAL_SERVER_ERROR);\n}\n\nfunction InternalServerError() {\n  return new ErrorUtils(InternalServerError, ErrorType.INTERNAL_SERVER_ERR, RESPONSE_STATUS_500_INTERNAL_SERVER_ERROR);\n}\n\nfunction DataNotFound() {\n  return new ErrorUtils(DataNotFound, ErrorType.DATA_NOT_FOUND, RESPONSE_STATUS_404_NOT_FOUND);\n}\n\nfunction MongoError() {\n  return new ErrorUtils(MongoError, ErrorType.MONGO_ERROR, RESPONSE_STATUS_500_INTERNAL_SERVER_ERROR);\n}\n\nfunction DataAlreadyExists() {\n  return new ErrorUtils(DataAlreadyExists, ErrorType.DATA_ALREADY_EXISTS, RESPONSE_STATUS_409_CONFLICT);\n}\n\nfunction IncorrectOTP() {\n  return new ErrorUtils(IncorrectOTP, ErrorType.INCORRECT_OTP, RESPONSE_STATUS_401_UNAUTHORIZED);\n}\n\nfunction InvalidUserError() {\n  return new ErrorUtils(InvalidUserError, ErrorType.INVALID_USER, RESPONSE_STATUS_401_UNAUTHORIZED);\n}\n\nfunction ExpiredUser() {\n  return new ErrorUtils(ExpiredUser, ErrorType.EXPIRED_USER, RESPONSE_STATUS_403_FORBIDDEN);\n}\n\nfunction NotRegisteredUser() {\n  return new ErrorUtils(NotRegisteredUser, ErrorType.NOT_REGISTERED_USER, RESPONSE_STATUS_404_NOT_FOUND);\n}\n\nfunction redisConnectionError() {\n  return new ErrorUtils(redisConnectionError, ErrorType.REDIS_CONNECTION_ERROR, RESPONSE_STATUS_500_INTERNAL_SERVER_ERROR);\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJSRVNQT05TRV9TVEFUVVNfNDAwX0JBRF9SRVFVRVNUIiwiUkVTUE9OU0VfU1RBVFVTXzQwMV9VTkFVVEhPUklaRUQiLCJSRVNQT05TRV9TVEFUVVNfNDAzX0ZPUkJJRERFTiIsIlJFU1BPTlNFX1NUQVRVU180MDRfTk9UX0ZPVU5EIiwiUkVTUE9OU0VfU1RBVFVTXzQwOV9DT05GTElDVCIsIlJFU1BPTlNFX1NUQVRVU181MDBfSU5URVJOQUxfU0VSVkVSX0VSUk9SIiwiRXJyb3JVdGlscyIsImZ1bmN0aW9uTmFtZSIsImN1c3RvbU1lc3NhZ2UiLCJodHRwUmVzcG9uc2VTdGF0dXNDb2RlIiwiRXJyb3IiLCJjYXB0dXJlU3RhY2tUcmFjZSIsIm5hbWUiLCJjb25zdHJ1Y3RvciIsIm1lc3NhZ2UiLCJjb2RlIiwic3RhdHVzQ29kZSIsIkludmFsaWRSZXF1ZXN0IiwiRXJyb3JUeXBlIiwiSU5WQUxJRF9SRVFVRVNUIiwiSW52YWxpZEFQSUtleSIsIklOVkFMSURfQVBJX0tFWSIsIkludmFsaWRTZXNzaW9uVG9rZW4iLCJJTlZBTElEX1NFU1NJT05fVE9LRU4iLCJJbnZhbGlkQXV0aG9yaXphdGlvbiIsIklOVkFMSURfQVVUSE9SSVpBVElPTiIsIkJsb2NrTGlzdGVkVXNlciIsIkJMT0NLX0xJU1RFRF9VU0VSIiwiVXNlck5vdEZvdW5kRXJyb3IiLCJVU0VSX0RPRVNfTk9UX0VYSVNUIiwiSW52YWxpZFBhc3N3b3JkRXJyb3IiLCJJTlZBTElEX1BBU1NXT1JEIiwiSW52YWxpZFNjaGVtYUVycm9yIiwiSU5WQUxJRF9TQ0hFTUEiLCJJbnRlcm5hbFNlcnZlckVycm9yIiwiSU5URVJOQUxfU0VSVkVSX0VSUiIsIkRhdGFOb3RGb3VuZCIsIkRBVEFfTk9UX0ZPVU5EIiwiTW9uZ29FcnJvciIsIk1PTkdPX0VSUk9SIiwiRGF0YUFscmVhZHlFeGlzdHMiLCJEQVRBX0FMUkVBRFlfRVhJU1RTIiwiSW5jb3JyZWN0T1RQIiwiSU5DT1JSRUNUX09UUCIsIkludmFsaWRVc2VyRXJyb3IiLCJJTlZBTElEX1VTRVIiLCJFeHBpcmVkVXNlciIsIkVYUElSRURfVVNFUiIsIk5vdFJlZ2lzdGVyZWRVc2VyIiwiTk9UX1JFR0lTVEVSRURfVVNFUiIsInJlZGlzQ29ubmVjdGlvbkVycm9yIiwiUkVESVNfQ09OTkVDVElPTl9FUlJPUiJdLCJzb3VyY2VSb290IjoiL1VzZXJzL3JhbWlyZWRkeWNoYXJpdGhhL21pY3Jvc2VydmljZXMvc2FtcGxlLW1pY3JvLXNlcnZpY2UvZXJyb3JzLyIsInNvdXJjZXMiOlsiRXJyb3JVdGlscy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyBFcnJvclR5cGUgZnJvbSBcIi4uL2NvbnN0YW50cy9FcnJvckNvbnN0YW50c1wiO1xuXG5jb25zdCBSRVNQT05TRV9TVEFUVVNfNDAwX0JBRF9SRVFVRVNUID0gNDAwO1xuY29uc3QgUkVTUE9OU0VfU1RBVFVTXzQwMV9VTkFVVEhPUklaRUQgPSA0MDE7XG5jb25zdCBSRVNQT05TRV9TVEFUVVNfNDAzX0ZPUkJJRERFTiA9IDQwMztcbmNvbnN0IFJFU1BPTlNFX1NUQVRVU180MDRfTk9UX0ZPVU5EID0gNDA0O1xuY29uc3QgUkVTUE9OU0VfU1RBVFVTXzQwOV9DT05GTElDVCA9IDQwOTtcblxuY29uc3QgUkVTUE9OU0VfU1RBVFVTXzUwMF9JTlRFUk5BTF9TRVJWRVJfRVJST1IgPSA1MDA7XG5cbmZ1bmN0aW9uIEVycm9yVXRpbHMoZnVuY3Rpb25OYW1lLCBjdXN0b21NZXNzYWdlLCBodHRwUmVzcG9uc2VTdGF0dXNDb2RlKSB7XG4gIEVycm9yLmNhcHR1cmVTdGFja1RyYWNlKHRoaXMsIGZ1bmN0aW9uTmFtZSB8fCBFcnJvclV0aWxzKTtcbiAgdGhpcy5uYW1lID0gdGhpcy5jb25zdHJ1Y3Rvci5uYW1lO1xuICB0aGlzLm1lc3NhZ2UgPSBjdXN0b21NZXNzYWdlPy5tZXNzYWdlO1xuICB0aGlzLmNvZGUgPSBjdXN0b21NZXNzYWdlPy5jb2RlO1xuICB0aGlzLnN0YXR1c0NvZGUgPSBodHRwUmVzcG9uc2VTdGF0dXNDb2RlO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gSW52YWxpZFJlcXVlc3QoKSB7XG4gIHJldHVybiBuZXcgRXJyb3JVdGlscyhcbiAgICBJbnZhbGlkUmVxdWVzdCxcbiAgICBFcnJvclR5cGUuSU5WQUxJRF9SRVFVRVNULFxuICAgIFJFU1BPTlNFX1NUQVRVU180MDBfQkFEX1JFUVVFU1QsXG4gICk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBJbnZhbGlkQVBJS2V5KCkge1xuICByZXR1cm4gbmV3IEVycm9yVXRpbHMoXG4gICAgSW52YWxpZEFQSUtleSxcbiAgICBFcnJvclR5cGUuSU5WQUxJRF9BUElfS0VZLFxuICAgIFJFU1BPTlNFX1NUQVRVU180MDBfQkFEX1JFUVVFU1QsXG4gICk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBJbnZhbGlkU2Vzc2lvblRva2VuKCkge1xuICByZXR1cm4gbmV3IEVycm9yVXRpbHMoXG4gICAgSW52YWxpZFNlc3Npb25Ub2tlbixcbiAgICBFcnJvclR5cGUuSU5WQUxJRF9TRVNTSU9OX1RPS0VOLFxuICAgIFJFU1BPTlNFX1NUQVRVU180MDBfQkFEX1JFUVVFU1QsXG4gICk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBJbnZhbGlkQXV0aG9yaXphdGlvbigpIHtcbiAgcmV0dXJuIG5ldyBFcnJvclV0aWxzKFxuICAgIEludmFsaWRBdXRob3JpemF0aW9uLFxuICAgIEVycm9yVHlwZS5JTlZBTElEX0FVVEhPUklaQVRJT04sXG4gICAgUkVTUE9OU0VfU1RBVFVTXzQwMV9VTkFVVEhPUklaRUQsXG4gICk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBCbG9ja0xpc3RlZFVzZXIoKSB7XG4gIHJldHVybiBuZXcgRXJyb3JVdGlscyhcbiAgICBCbG9ja0xpc3RlZFVzZXIsXG4gICAgRXJyb3JUeXBlLkJMT0NLX0xJU1RFRF9VU0VSLFxuICAgIFJFU1BPTlNFX1NUQVRVU180MDNfRk9SQklEREVOLFxuICApO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gVXNlck5vdEZvdW5kRXJyb3IoKSB7XG4gIHJldHVybiBuZXcgRXJyb3JVdGlscyhcbiAgICBVc2VyTm90Rm91bmRFcnJvcixcbiAgICBFcnJvclR5cGUuVVNFUl9ET0VTX05PVF9FWElTVCxcbiAgICBSRVNQT05TRV9TVEFUVVNfNDA0X05PVF9GT1VORCxcbiAgKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIEludmFsaWRQYXNzd29yZEVycm9yKCkge1xuICByZXR1cm4gbmV3IEVycm9yVXRpbHMoXG4gICAgSW52YWxpZFBhc3N3b3JkRXJyb3IsXG4gICAgRXJyb3JUeXBlLklOVkFMSURfUEFTU1dPUkQsXG4gICAgUkVTUE9OU0VfU1RBVFVTXzQwMV9VTkFVVEhPUklaRUQsXG4gICk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBJbnZhbGlkU2NoZW1hRXJyb3IoKSB7XG4gIHJldHVybiBuZXcgRXJyb3JVdGlscyhcbiAgICBJbnZhbGlkU2NoZW1hRXJyb3IsXG4gICAgRXJyb3JUeXBlLklOVkFMSURfU0NIRU1BLmNvZGUsXG4gICAgUkVTUE9OU0VfU1RBVFVTXzUwMF9JTlRFUk5BTF9TRVJWRVJfRVJST1IsXG4gICk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBJbnRlcm5hbFNlcnZlckVycm9yKCkge1xuICByZXR1cm4gbmV3IEVycm9yVXRpbHMoXG4gICAgSW50ZXJuYWxTZXJ2ZXJFcnJvcixcbiAgICBFcnJvclR5cGUuSU5URVJOQUxfU0VSVkVSX0VSUixcbiAgICBSRVNQT05TRV9TVEFUVVNfNTAwX0lOVEVSTkFMX1NFUlZFUl9FUlJPUixcbiAgKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIERhdGFOb3RGb3VuZCgpIHtcbiAgcmV0dXJuIG5ldyBFcnJvclV0aWxzKFxuICAgIERhdGFOb3RGb3VuZCxcbiAgICBFcnJvclR5cGUuREFUQV9OT1RfRk9VTkQsXG4gICAgUkVTUE9OU0VfU1RBVFVTXzQwNF9OT1RfRk9VTkQsXG4gICk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBNb25nb0Vycm9yKCkge1xuICByZXR1cm4gbmV3IEVycm9yVXRpbHMoXG4gICAgTW9uZ29FcnJvcixcbiAgICBFcnJvclR5cGUuTU9OR09fRVJST1IsXG4gICAgUkVTUE9OU0VfU1RBVFVTXzUwMF9JTlRFUk5BTF9TRVJWRVJfRVJST1IsXG4gICk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBEYXRhQWxyZWFkeUV4aXN0cygpIHtcbiAgcmV0dXJuIG5ldyBFcnJvclV0aWxzKFxuICAgIERhdGFBbHJlYWR5RXhpc3RzLFxuICAgIEVycm9yVHlwZS5EQVRBX0FMUkVBRFlfRVhJU1RTLFxuICAgIFJFU1BPTlNFX1NUQVRVU180MDlfQ09ORkxJQ1QsXG4gICk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBJbmNvcnJlY3RPVFAoKSB7XG4gIHJldHVybiBuZXcgRXJyb3JVdGlscyhcbiAgICBJbmNvcnJlY3RPVFAsXG4gICAgRXJyb3JUeXBlLklOQ09SUkVDVF9PVFAsXG4gICAgUkVTUE9OU0VfU1RBVFVTXzQwMV9VTkFVVEhPUklaRUQsXG4gICk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBJbnZhbGlkVXNlckVycm9yKCkge1xuICByZXR1cm4gbmV3IEVycm9yVXRpbHMoXG4gICAgSW52YWxpZFVzZXJFcnJvcixcbiAgICBFcnJvclR5cGUuSU5WQUxJRF9VU0VSLFxuICAgIFJFU1BPTlNFX1NUQVRVU180MDFfVU5BVVRIT1JJWkVELFxuICApO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gRXhwaXJlZFVzZXIoKSB7XG4gIHJldHVybiBuZXcgRXJyb3JVdGlscyhcbiAgICBFeHBpcmVkVXNlcixcbiAgICBFcnJvclR5cGUuRVhQSVJFRF9VU0VSLFxuICAgIFJFU1BPTlNFX1NUQVRVU180MDNfRk9SQklEREVOLFxuICApO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gTm90UmVnaXN0ZXJlZFVzZXIoKSB7XG4gIHJldHVybiBuZXcgRXJyb3JVdGlscyhcbiAgICBOb3RSZWdpc3RlcmVkVXNlcixcbiAgICBFcnJvclR5cGUuTk9UX1JFR0lTVEVSRURfVVNFUixcbiAgICBSRVNQT05TRV9TVEFUVVNfNDA0X05PVF9GT1VORCxcbiAgKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJlZGlzQ29ubmVjdGlvbkVycm9yKCkge1xuICByZXR1cm4gbmV3IEVycm9yVXRpbHMoXG4gICAgcmVkaXNDb25uZWN0aW9uRXJyb3IsXG4gICAgRXJyb3JUeXBlLlJFRElTX0NPTk5FQ1RJT05fRVJST1IsXG4gICAgUkVTUE9OU0VfU1RBVFVTXzUwMF9JTlRFUk5BTF9TRVJWRVJfRVJST1IsXG4gICk7XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7Ozs7OztBQUVBLE1BQU1BLCtCQUErQixHQUFHLEdBQXhDO0FBQ0EsTUFBTUMsZ0NBQWdDLEdBQUcsR0FBekM7QUFDQSxNQUFNQyw2QkFBNkIsR0FBRyxHQUF0QztBQUNBLE1BQU1DLDZCQUE2QixHQUFHLEdBQXRDO0FBQ0EsTUFBTUMsNEJBQTRCLEdBQUcsR0FBckM7QUFFQSxNQUFNQyx5Q0FBeUMsR0FBRyxHQUFsRDs7QUFFQSxTQUFTQyxVQUFULENBQW9CQyxZQUFwQixFQUFrQ0MsYUFBbEMsRUFBaURDLHNCQUFqRCxFQUF5RTtFQUN2RUMsS0FBSyxDQUFDQyxpQkFBTixDQUF3QixJQUF4QixFQUE4QkosWUFBWSxJQUFJRCxVQUE5QztFQUNBLEtBQUtNLElBQUwsR0FBWSxLQUFLQyxXQUFMLENBQWlCRCxJQUE3QjtFQUNBLEtBQUtFLE9BQUwsR0FBZU4sYUFBYSxFQUFFTSxPQUE5QjtFQUNBLEtBQUtDLElBQUwsR0FBWVAsYUFBYSxFQUFFTyxJQUEzQjtFQUNBLEtBQUtDLFVBQUwsR0FBa0JQLHNCQUFsQjtBQUNEOztBQUVNLFNBQVNRLGNBQVQsR0FBMEI7RUFDL0IsT0FBTyxJQUFJWCxVQUFKLENBQ0xXLGNBREssRUFFTEMsU0FBUyxDQUFDQyxlQUZMLEVBR0xuQiwrQkFISyxDQUFQO0FBS0Q7O0FBRU0sU0FBU29CLGFBQVQsR0FBeUI7RUFDOUIsT0FBTyxJQUFJZCxVQUFKLENBQ0xjLGFBREssRUFFTEYs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","map":{"version":3,"names":["RESPONSE_STATUS_400_BAD_REQUEST","RESPONSE_STATUS_401_UNAUTHORIZED","RESPONSE_STATUS_403_FORBIDDEN","RESPONSE_STATUS_404_NOT_FOUND","RESPONSE_STATUS_409_CONFLICT","RESPONSE_STATUS_500_INTERNAL_SERVER_ERROR","ErrorUtils","functionName","customMessage","httpResponseStatusCode","Error","captureStackTrace","name","constructor","message","code","statusCode","InvalidRequest","ErrorType","INVALID_REQUEST","InvalidAPIKey","INVALID_API_KEY","InvalidSessionToken","INVALID_SESSION_TOKEN","InvalidAuthorization","INVALID_AUTHORIZATION","BlockListedUser","BLOCK_LISTED_USER","UserNotFoundError","USER_DOES_NOT_EXIST","InvalidPasswordError","INVALID_PASSWORD","InvalidSchemaError","INVALID_SCHEMA","InternalServerError","INTERNAL_SERVER_ERR","DataNotFound","DATA_NOT_FOUND","MongoError","MONGO_ERROR","DataAlreadyExists","DATA_ALREADY_EXISTS","IncorrectOTP","INCORRECT_OTP","InvalidUserError","INVALID_USER","ExpiredUser","EXPIRED_USER","NotRegisteredUser","NOT_REGISTERED_USER","redisConnectionError","REDIS_CONNECTION_ERROR"],"sourceRoot":"/Users/ramireddycharitha/microservices/sample-micro-service/errors/","sources":["ErrorUtils.js"],"sourcesContent":["import * as ErrorType from \"../constants/ErrorConstants\";\n\nconst RESPONSE_STATUS_400_BAD_REQUEST = 400;\nconst RESPONSE_STATUS_401_UNAUTHORIZED = 401;\nconst RESPONSE_STATUS_403_FORBIDDEN = 403;\nconst RESPONSE_STATUS_404_NOT_FOUND = 404;\nconst RESPONSE_STATUS_409_CONFLICT = 409;\n\nconst RESPONSE_STATUS_500_INTERNAL_SERVER_ERROR = 500;\n\nfunction ErrorUtils(functionName, customMessage, httpResponseStatusCode) {\n  Error.captureStackTrace(this, functionName || ErrorUtils);\n  this.name = this.constructor.name;\n  this.message = customMessage?.message;\n  this.code = customMessage?.code;\n  this.statusCode = httpResponseStatusCode;\n}\n\nexport function InvalidRequest() {\n  return new ErrorUtils(\n    InvalidRequest,\n    ErrorType.INVALID_REQUEST,\n    RESPONSE_STATUS_400_BAD_REQUEST,\n  );\n}\n\nexport function InvalidAPIKey() {\n  return new ErrorUtils(\n    InvalidAPIKey,\n    ErrorType.INVALID_API_KEY,\n    RESPONSE_STATUS_400_BAD_REQUEST,\n  );\n}\n\nexport function InvalidSessionToken() {\n  return new ErrorUtils(\n    InvalidSessionToken,\n    ErrorType.INVALID_SESSION_TOKEN,\n    RESPONSE_STATUS_400_BAD_REQUEST,\n  );\n}\n\nexport function InvalidAuthorization() {\n  return new ErrorUtils(\n    InvalidAuthorization,\n    ErrorType.INVALID_AUTHORIZATION,\n    RESPONSE_STATUS_401_UNAUTHORIZED,\n  );\n}\n\nexport function BlockListedUser() {\n  return new ErrorUtils(\n    BlockListedUser,\n    ErrorType.BLOCK_LISTED_USER,\n    RESPONSE_STATUS_403_FORBIDDEN,\n  );\n}\n\nexport function UserNotFoundError() {\n  return new ErrorUtils(\n    UserNotFoundError,\n    ErrorType.USER_DOES_NOT_EXIST,\n    RESPONSE_STATUS_404_NOT_FOUND,\n  );\n}\n\nexport function InvalidPasswordError() {\n  return new ErrorUtils(\n    InvalidPasswordError,\n    ErrorType.INVALID_PASSWORD,\n    RESPONSE_STATUS_401_UNAUTHORIZED,\n  );\n}\n\nexport function InvalidSchemaError() {\n  return new ErrorUtils(\n    InvalidSchemaError,\n    ErrorType.INVALID_SCHEMA.code,\n    RESPONSE_STATUS_500_INTERNAL_SERVER_ERROR,\n  );\n}\n\nexport function InternalServerError() {\n  return new ErrorUtils(\n    InternalServerError,\n    ErrorType.INTERNAL_SERVER_ERR,\n    RESPONSE_STATUS_500_INTERNAL_SERVER_ERROR,\n  );\n}\n\nexport function DataNotFound() {\n  return new ErrorUtils(\n    DataNotFound,\n    ErrorType.DATA_NOT_FOUND,\n    RESPONSE_STATUS_404_NOT_FOUND,\n  );\n}\n\nexport function MongoError() {\n  return new ErrorUtils(\n    MongoError,\n    ErrorType.MONGO_ERROR,\n    RESPONSE_STATUS_500_INTERNAL_SERVER_ERROR,\n  );\n}\n\nexport function DataAlreadyExists() {\n  return new ErrorUtils(\n    DataAlreadyExists,\n    ErrorType.DATA_ALREADY_EXISTS,\n    RESPONSE_STATUS_409_CONFLICT,\n  );\n}\n\nexport function IncorrectOTP() {\n  return new ErrorUtils(\n    IncorrectOTP,\n    ErrorType.INCORRECT_OTP,\n    RESPONSE_STATUS_401_UNAUTHORIZED,\n  );\n}\n\nexport function InvalidUserError() {\n  return new ErrorUtils(\n    InvalidUserError,\n    ErrorType.INVALID_USER,\n    RESPONSE_STATUS_401_UNAUTHORIZED,\n  );\n}\n\nexport function ExpiredUser() {\n  return new ErrorUtils(\n    ExpiredUser,\n    ErrorType.EXPIRED_USER,\n    RESPONSE_STATUS_403_FORBIDDEN,\n  );\n}\n\nexport function NotRegisteredUser() {\n  return new ErrorUtils(\n    NotRegisteredUser,\n    ErrorType.NOT_REGISTERED_USER,\n    RESPONSE_STATUS_404_NOT_FOUND,\n  );\n}\n\nexport function redisConnectionError() {\n  return new ErrorUtils(\n    redisConnectionError,\n    ErrorType.REDIS_CONNECTION_ERROR,\n    RESPONSE_STATUS_500_INTERNAL_SERVER_ERROR,\n  );\n}\n"],"mappings":"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"}},"mtime":1653643634180},"{\"assumptions\":{},\"sourceRoot\":\"/Users/ramireddycharitha/microservices/sample-micro-service/constants/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/ramireddycharitha/microservices/sample-micro-service\",\"filename\":\"/Users/ramireddycharitha/microservices/sample-micro-service/constants/ErrorConstants.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"default\",\"root\":\"/Users/ramireddycharitha/microservices/sample-micro-service\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.17.10:default":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.USER_DOES_NOT_EXIST = exports.REDIS_CONNECTION_ERROR = exports.NOT_REGISTERED_USER = exports.MONGO_ERROR = exports.INVALID_SESSION_TOKEN = exports.INVALID_SCHEMA = exports.INVALID_REQUEST = exports.INVALID_PASSWORD = exports.INVALID_AUTHORIZATION = exports.INVALID_API_KEY = exports.INTERNAL_SERVER_ERR = exports.INCORRECT_OTP = exports.EXPIRED_USER = exports.DATA_NOT_FOUND = exports.DATA_ALREADY_EXISTS = exports.BLOCK_LISTED_USER = void 0;\nconst INTERNAL_SERVER_ERR = {\n  code: 1000,\n  message: \"Internal Server Error. Something went wrong!\"\n};\nexports.INTERNAL_SERVER_ERR = INTERNAL_SERVER_ERR;\nconst INVALID_REQUEST = {\n  code: 1001,\n  message: \"invalid request\"\n};\nexports.INVALID_REQUEST = INVALID_REQUEST;\nconst INVALID_API_KEY = {\n  code: 1002,\n  message: \"invalid api key id\"\n};\nexports.INVALID_API_KEY = INVALID_API_KEY;\nconst INVALID_SESSION_TOKEN = {\n  code: 1003,\n  message: \"invalid session token\"\n};\nexports.INVALID_SESSION_TOKEN = INVALID_SESSION_TOKEN;\nconst INVALID_AUTHORIZATION = {\n  code: 1004,\n  message: \"invalid authorization\"\n};\nexports.INVALID_AUTHORIZATION = INVALID_AUTHORIZATION;\nconst BLOCK_LISTED_USER = {\n  code: 1005,\n  message: \"invalid authorization\"\n};\nexports.BLOCK_LISTED_USER = BLOCK_LISTED_USER;\nconst USER_DOES_NOT_EXIST = {\n  code: 1006,\n  message: \"User does not exist\"\n};\nexports.USER_DOES_NOT_EXIST = USER_DOES_NOT_EXIST;\nconst INCORRECT_OTP = {\n  code: 1007,\n  message: \"Incorrect OTP\"\n};\nexports.INCORRECT_OTP = INCORRECT_OTP;\nconst INVALID_PASSWORD = {\n  code: 1008,\n  message: \"Invalid Password\"\n};\nexports.INVALID_PASSWORD = INVALID_PASSWORD;\nconst INVALID_SCHEMA = {\n  code: 1009,\n  message: \"Invalid schema or Missing Data sent\"\n};\nexports.INVALID_SCHEMA = INVALID_SCHEMA;\nconst DATA_NOT_FOUND = {\n  code: 1010,\n  message: \"Data not found\"\n};\nexports.DATA_NOT_FOUND = DATA_NOT_FOUND;\nconst MONGO_ERROR = {\n  code: 1011,\n  message: \"Error in Mongo Query\"\n};\nexports.MONGO_ERROR = MONGO_ERROR;\nconst DATA_ALREADY_EXISTS = {\n  code: 1012,\n  message: \"Data already exist\"\n};\nexports.DATA_ALREADY_EXISTS = DATA_ALREADY_EXISTS;\nconst EXPIRED_USER = {\n  code: 1016,\n  message: \"Expired user\"\n};\nexports.EXPIRED_USER = EXPIRED_USER;\nconst NOT_REGISTERED_USER = {\n  code: 1017,\n  message: \"Not registered user\"\n};\nexports.NOT_REGISTERED_USER = NOT_REGISTERED_USER;\nconst REDIS_CONNECTION_ERROR = {\n  code: 1018,\n  message: \"Redis connection error\"\n};\nexports.REDIS_CONNECTION_ERROR = REDIS_CONNECTION_ERROR;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJJTlRFUk5BTF9TRVJWRVJfRVJSIiwiY29kZSIsIm1lc3NhZ2UiLCJJTlZBTElEX1JFUVVFU1QiLCJJTlZBTElEX0FQSV9LRVkiLCJJTlZBTElEX1NFU1NJT05fVE9LRU4iLCJJTlZBTElEX0FVVEhPUklaQVRJT04iLCJCTE9DS19MSVNURURfVVNFUiIsIlVTRVJfRE9FU19OT1RfRVhJU1QiLCJJTkNPUlJFQ1RfT1RQIiwiSU5WQUxJRF9QQVNTV09SRCIsIklOVkFMSURfU0NIRU1BIiwiREFUQV9OT1RfRk9VTkQiLCJNT05HT19FUlJPUiIsIkRBVEFfQUxSRUFEWV9FWElTVFMiLCJFWFBJUkVEX1VTRVIiLCJOT1RfUkVHSVNURVJFRF9VU0VSIiwiUkVESVNfQ09OTkVDVElPTl9FUlJPUiJdLCJzb3VyY2VSb290IjoiL1VzZXJzL3JhbWlyZWRkeWNoYXJpdGhhL21pY3Jvc2VydmljZXMvc2FtcGxlLW1pY3JvLXNlcnZpY2UvY29uc3RhbnRzLyIsInNvdXJjZXMiOlsiRXJyb3JDb25zdGFudHMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNvbnN0IElOVEVSTkFMX1NFUlZFUl9FUlIgPSB7XG4gIGNvZGU6IDEwMDAsXG4gIG1lc3NhZ2U6IFwiSW50ZXJuYWwgU2VydmVyIEVycm9yLiBTb21ldGhpbmcgd2VudCB3cm9uZyFcIixcbn07XG5cbmV4cG9ydCBjb25zdCBJTlZBTElEX1JFUVVFU1QgPSB7XG4gIGNvZGU6IDEwMDEsXG4gIG1lc3NhZ2U6IFwiaW52YWxpZCByZXF1ZXN0XCIsXG59O1xuXG5leHBvcnQgY29uc3QgSU5WQUxJRF9BUElfS0VZID0ge1xuICBjb2RlOiAxMDAyLFxuICBtZXNzYWdlOiBcImludmFsaWQgYXBpIGtleSBpZFwiLFxufTtcblxuZXhwb3J0IGNvbnN0IElOVkFMSURfU0VTU0lPTl9UT0tFTiA9IHtcbiAgY29kZTogMTAwMyxcbiAgbWVzc2FnZTogXCJpbnZhbGlkIHNlc3Npb24gdG9rZW5cIixcbn07XG5cbmV4cG9ydCBjb25zdCBJTlZBTElEX0FVVEhPUklaQVRJT04gPSB7XG4gIGNvZGU6IDEwMDQsXG4gIG1lc3NhZ2U6IFwiaW52YWxpZCBhdXRob3JpemF0aW9uXCIsXG59O1xuXG5leHBvcnQgY29uc3QgQkxPQ0tfTElTVEVEX1VTRVIgPSB7XG4gIGNvZGU6IDEwMDUsXG4gIG1lc3NhZ2U6IFwiaW52YWxpZCBhdXRob3JpemF0aW9uXCIsXG59O1xuXG5leHBvcnQgY29uc3QgVVNFUl9ET0VTX05PVF9FWElTVCA9IHtcbiAgY29kZTogMTAwNixcbiAgbWVzc2FnZTogXCJVc2VyIGRvZXMgbm90IGV4aXN0XCIsXG59O1xuXG5leHBvcnQgY29uc3QgSU5DT1JSRUNUX09UUCA9IHtcbiAgY29kZTogMTAwNyxcbiAgbWVzc2FnZTogXCJJbmNvcnJlY3QgT1RQXCIsXG59O1xuXG5leHBvcnQgY29uc3QgSU5WQUxJRF9QQVNTV09SRCA9IHtcbiAgY29kZTogMTAwOCxcbiAgbWVzc2FnZTogXCJJbnZhbGlkIFBhc3N3b3JkXCIsXG59O1xuXG5leHBvcnQgY29uc3QgSU5WQUxJRF9TQ0hFTUEgPSB7XG4gIGNvZGU6IDEwMDksXG4gIG1lc3NhZ2U6IFwiSW52YWxpZCBzY2hlbWEgb3IgTWlzc2luZyBEYXRhIHNlbnRcIixcbn07XG5cbmV4cG9ydCBjb25zdCBEQVRBX05PVF9GT1VORCA9IHtcbiAgY29kZTogMTAxMCxcbiAgbWVzc2FnZTogXCJEYXRhIG5vdCBmb3VuZFwiLFxufTtcblxuZXhwb3J0IGNvbnN0IE1PTkdPX0VSUk9SID0ge1xuICBjb2RlOiAxMDExLFxuICBtZXNzYWdlOiBcIkVycm9yIGluIE1vbmdvIFF1ZXJ5XCIsXG59O1xuXG5leHBvcnQgY29uc3QgREFUQV9BTFJFQURZX0VYSVNUUyA9IHtcbiAgY29kZTogMTAxMixcbiAgbWVzc2FnZTogXCJEYXRhIGFscmVhZHkgZXhpc3RcIixcbn07XG5cbmV4cG9ydCBjb25zdCBFWFBJUkVEX1VTRVIgPSB7XG4gIGNvZGU6IDEwMTYsXG4gIG1lc3NhZ2U6IFwiRXhwaXJlZCB1c2VyXCIsXG59O1xuXG5leHBvcnQgY29uc3QgTk9UX1JFR0lTVEVSRURfVVNFUiA9IHtcbiAgY29kZTogMTAxNyxcbiAgbWVzc2FnZTogXCJOb3QgcmVnaXN0ZXJlZCB1c2VyXCIsXG59O1xuXG5leHBvcnQgY29uc3QgUkVESVNfQ09OTkVDVElPTl9FUlJPUiA9IHtcbiAgY29kZTogMTAxOCxcbiAgbWVzc2FnZTogXCJSZWRpcyBjb25uZWN0aW9uIGVycm9yXCIsXG59O1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBTyxNQUFNQSxtQkFBbUIsR0FBRztFQUNqQ0MsSUFBSSxFQUFFLElBRDJCO0VBRWpDQyxPQUFPLEVBQUU7QUFGd0IsQ0FBNUI7O0FBS0EsTUFBTUMsZUFBZSxHQUFHO0VBQzdCRixJQUFJLEVBQUUsSUFEdUI7RUFFN0JDLE9BQU8sRUFBRTtBQUZvQixDQUF4Qjs7QUFLQSxNQUFNRSxlQUFlLEdBQUc7RUFDN0JILElBQUksRUFBRSxJQUR1QjtFQUU3QkMsT0FBTyxFQUFFO0FBRm9CLENBQXhCOztBQUtBLE1BQU1HLHFCQUFxQixHQUFHO0VBQ25DSixJQUFJLEVBQUUsSUFENkI7RUFFbkNDLE9BQU8sRUFBRTtBQUYwQixDQUE5Qjs7QUFLQSxNQUFNSSxxQkFBcUIsR0FBRztFQUNuQ0wsSUFBSSxFQUFFLElBRDZCO0VBRW5DQyxPQUFPLEVBQUU7QUFGMEIsQ0FBOUI7O0FBS0EsTUFBTUssaUJBQWlCLEdBQUc7RUFDL0JOLElBQUksRUFBRSxJQUR5QjtFQUUvQkMsT0FBTyxFQUFFO0FBRnNCLENBQTFCOztBQUtBLE1BQU1NLG1CQUFtQixHQUFHO0VBQ2pDUCxJQUFJLEVBQUUsSUFEMkI7RUFFakNDLE9BQU8sRUFBRTtBQUZ3QixDQUE1Qjs7QUFLQSxNQUFNTyxhQUFhLEdBQUc7RUFDM0JSLElBQUksRUFBRSxJQURxQjtFQUUzQkMsT0FBTyxFQUFFO0FBRmtCLENBQXRCOztBQUtBLE1BQU1RLGdCQUFnQixHQUFHO0VBQzlCVCxJQUFJLEVBQUUsSUFEd0I7RUFFOUJDLE9BQU8sRUFBRTtBQUZxQixDQUF6Qjs7QUFLQSxNQUFNUyxjQUFjLEdBQUc7RUFDNUJWLElBQUksRUFBRSxJQURzQjtFQUU1QkMsT0FBTyxFQUFFO0FBRm1CLENBQXZCOztBQUtBLE1BQU1VLGNBQWMsR0FBRztFQUM1QlgsSUFBSSxFQUFFLElBRHNCO0VBRTVCQyxPQUFPLEVBQUU7QUFGbUIsQ0FBdkI7O0FBS0EsTUFBTVcsV0FBVyxHQUFHO0VBQ3pCWixJQUFJLEVBQUUsSUFEbUI7RUFFekJDLE9BQU8sRUFBRTtBQUZnQixDQUFwQjs7QUFLQSxNQUFNWSxtQkFBbUIsR0FBRztFQUNqQ2IsSUFBSSxFQUFFLElBRDJCO0VBRWpDQyxPQUFPLEVBQUU7QUFGd0IsQ0FBNUI7O0FBS0EsTUFBTWEsWUFBWSxHQUFHO0VBQzFCZCxJQUFJLEVBQUUsSUFEb0I7RUFFMUJDLE9BQU8sRUFBRTtBQUZpQixDQUFyQjs7QUFLQSxNQUFNYyxtQkFBbUIsR0FBRztFQUNqQ2YsSUFBSSxFQUFFLElBRDJCO0VBRWpDQyxPQUFPLEVBQUU7QUFGd0IsQ0FBNUI7O0FBS0EsTUFBTWUsc0JBQXNCLEdBQUc7RUFDcENoQixJQUFJLEVBQUUsSUFEOEI7RUFFcENDLE9BQU8sRUFBRTtBQUYyQixDQUEvQiJ9","map":{"version":3,"names":["INTERNAL_SERVER_ERR","code","message","INVALID_REQUEST","INVALID_API_KEY","INVALID_SESSION_TOKEN","INVALID_AUTHORIZATION","BLOCK_LISTED_USER","USER_DOES_NOT_EXIST","INCORRECT_OTP","INVALID_PASSWORD","INVALID_SCHEMA","DATA_NOT_FOUND","MONGO_ERROR","DATA_ALREADY_EXISTS","EXPIRED_USER","NOT_REGISTERED_USER","REDIS_CONNECTION_ERROR"],"sourceRoot":"/Users/ramireddycharitha/microservices/sample-micro-service/constants/","sources":["ErrorConstants.js"],"sourcesContent":["export const INTERNAL_SERVER_ERR = {\n  code: 1000,\n  message: \"Internal Server Error. Something went wrong!\",\n};\n\nexport const INVALID_REQUEST = {\n  code: 1001,\n  message: \"invalid request\",\n};\n\nexport const INVALID_API_KEY = {\n  code: 1002,\n  message: \"invalid api key id\",\n};\n\nexport const INVALID_SESSION_TOKEN = {\n  code: 1003,\n  message: \"invalid session token\",\n};\n\nexport const INVALID_AUTHORIZATION = {\n  code: 1004,\n  message: \"invalid authorization\",\n};\n\nexport const BLOCK_LISTED_USER = {\n  code: 1005,\n  message: \"invalid authorization\",\n};\n\nexport const USER_DOES_NOT_EXIST = {\n  code: 1006,\n  message: \"User does not exist\",\n};\n\nexport const INCORRECT_OTP = {\n  code: 1007,\n  message: \"Incorrect OTP\",\n};\n\nexport const INVALID_PASSWORD = {\n  code: 1008,\n  message: \"Invalid Password\",\n};\n\nexport const INVALID_SCHEMA = {\n  code: 1009,\n  message: \"Invalid schema or Missing Data sent\",\n};\n\nexport const DATA_NOT_FOUND = {\n  code: 1010,\n  message: \"Data not found\",\n};\n\nexport const MONGO_ERROR = {\n  code: 1011,\n  message: \"Error in Mongo Query\",\n};\n\nexport const DATA_ALREADY_EXISTS = {\n  code: 1012,\n  message: \"Data already exist\",\n};\n\nexport const EXPIRED_USER = {\n  code: 1016,\n  message: \"Expired user\",\n};\n\nexport const NOT_REGISTERED_USER = {\n  code: 1017,\n  message: \"Not registered user\",\n};\n\nexport const REDIS_CONNECTION_ERROR = {\n  code: 1018,\n  message: \"Redis connection error\",\n};\n"],"mappings":";;;;;;AAAO,MAAMA,mBAAmB,GAAG;EACjCC,IAAI,EAAE,IAD2B;EAEjCC,OAAO,EAAE;AAFwB,CAA5B;;AAKA,MAAMC,eAAe,GAAG;EAC7BF,IAAI,EAAE,IADuB;EAE7BC,OAAO,EAAE;AAFoB,CAAxB;;AAKA,MAAME,eAAe,GAAG;EAC7BH,IAAI,EAAE,IADuB;EAE7BC,OAAO,EAAE;AAFoB,CAAxB;;AAKA,MAAMG,qBAAqB,GAAG;EACnCJ,IAAI,EAAE,IAD6B;EAEnCC,OAAO,EAAE;AAF0B,CAA9B;;AAKA,MAAMI,qBAAqB,GAAG;EACnCL,IAAI,EAAE,IAD6B;EAEnCC,OAAO,EAAE;AAF0B,CAA9B;;AAKA,MAAMK,iBAAiB,GAAG;EAC/BN,IAAI,EAAE,IADyB;EAE/BC,OAAO,EAAE;AAFsB,CAA1B;;AAKA,MAAMM,mBAAmB,GAAG;EACjCP,IAAI,EAAE,IAD2B;EAEjCC,OAAO,EAAE;AAFwB,CAA5B;;AAKA,MAAMO,aAAa,GAAG;EAC3BR,IAAI,EAAE,IADqB;EAE3BC,OAAO,EAAE;AAFkB,CAAtB;;AAKA,MAAMQ,gBAAgB,GAAG;EAC9BT,IAAI,EAAE,IADwB;EAE9BC,OAAO,EAAE;AAFqB,CAAzB;;AAKA,MAAMS,cAAc,GAAG;EAC5BV,IAAI,EAAE,IADsB;EAE5BC,OAAO,EAAE;AAFmB,CAAvB;;AAKA,MAAMU,cAAc,GAAG;EAC5BX,IAAI,EAAE,IADsB;EAE5BC,OAAO,EAAE;AAFmB,CAAvB;;AAKA,MAAMW,WAAW,GAAG;EACzBZ,IAAI,EAAE,IADmB;EAEzBC,OAAO,EAAE;AAFgB,CAApB;;AAKA,MAAMY,mBAAmB,GAAG;EACjCb,IAAI,EAAE,IAD2B;EAEjCC,OAAO,EAAE;AAFwB,CAA5B;;AAKA,MAAMa,YAAY,GAAG;EAC1Bd,IAAI,EAAE,IADoB;EAE1BC,OAAO,EAAE;AAFiB,CAArB;;AAKA,MAAMc,mBAAmB,GAAG;EACjCf,IAAI,EAAE,IAD2B;EAEjCC,OAAO,EAAE;AAFwB,CAA5B;;AAKA,MAAMe,sBAAsB,GAAG;EACpChB,IAAI,EAAE,IAD8B;EAEpCC,OAAO,EAAE;AAF2B,CAA/B"}},"mtime":1653643634179},"{\"assumptions\":{},\"sourceRoot\":\"/Users/ramireddycharitha/microservices/sample-micro-service/models/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/ramireddycharitha/microservices/sample-micro-service\",\"filename\":\"/Users/ramireddycharitha/microservices/sample-micro-service/models/AbstractModels.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"default\",\"root\":\"/Users/ramireddycharitha/microservices/sample-micro-service\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.17.10:default":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.mongoUpsertOne = exports.mongoUpdateOne = exports.mongoUpdateMany = exports.mongoInsertOne = exports.mongoInsertMany = exports.mongoFindWithSort = exports.mongoFindOneWithOutLean = exports.mongoFindOneAndUpdate = exports.mongoFindOneAndRemove = exports.mongoFindOne = exports.mongoFindMany = exports.mongoFindCursor = exports.mongoDistinct = exports.mongoDeleteOne = exports.mongoDeleteMany = exports.mongoCount = exports.mongoAggregate = void 0;\n\nconst mongoFindOne = async (col, findCondition, selectCondition = {}) => {\n  const result = await col.findOne(findCondition).select(selectCondition).lean().exec();\n  return result;\n};\n\nexports.mongoFindOne = mongoFindOne;\n\nconst mongoFindOneWithOutLean = async (col, findCondition, selectCondition = {}) => {\n  const result = await col.findOne(findCondition).select(selectCondition).exec();\n  return result;\n};\n\nexports.mongoFindOneWithOutLean = mongoFindOneWithOutLean;\n\nconst mongoFindWithSort = async (col, findCondition, selectCondition = {}, limit = 0, sortCondition = {\n  _id: -1\n}) => {\n  const result = await col.find(findCondition).select(selectCondition).sort(sortCondition).limit(limit).lean().exec();\n  return result;\n};\n\nexports.mongoFindWithSort = mongoFindWithSort;\n\nconst mongoFindMany = async (col, findCondition, selectCondition = {}, limit = 0) => {\n  const result = await col.find(findCondition).select(selectCondition).limit(limit).lean().exec();\n  return result;\n};\n\nexports.mongoFindMany = mongoFindMany;\n\nconst mongoFindCursor = async (col, findCondition, selectCondition = {}, limit = 0) => {\n  const cursor = await col.find(findCondition).select(selectCondition).limit(limit).lean().cursor();\n  return cursor;\n};\n\nexports.mongoFindCursor = mongoFindCursor;\n\nconst mongoCount = async (col, findCondition) => {\n  const count = await col.count(findCondition);\n  return count;\n};\n\nexports.mongoCount = mongoCount;\n\nconst mongoUpdateOne = async (col, findCondition, updateCondition) => {\n  await col.updateOne(findCondition, updateCondition);\n};\n\nexports.mongoUpdateOne = mongoUpdateOne;\n\nconst mongoUpsertOne = async (col, findCondition, updateCondition) => {\n  await col.updateOne(findCondition, updateCondition, {\n    upsert: true\n  });\n};\n\nexports.mongoUpsertOne = mongoUpsertOne;\n\nconst mongoUpdateMany = async (col, findCondition, updateCondition) => {\n  await col.updateOne(findCondition, updateCondition, {\n    multi: true\n  });\n};\n\nexports.mongoUpdateMany = mongoUpdateMany;\n\nconst mongoAggregate = async (col, aggregateCondition) => {\n  const result = col.aggregate(aggregateCondition);\n  return result;\n};\n\nexports.mongoAggregate = mongoAggregate;\n\nconst mongoDeleteOne = async (col, findCondition) => {\n  await col.deleteOne(findCondition);\n};\n\nexports.mongoDeleteOne = mongoDeleteOne;\n\nconst mongoDeleteMany = async (col, findCondition) => {\n  await col.deleteMany(findCondition);\n};\n\nexports.mongoDeleteMany = mongoDeleteMany;\n\nconst mongoInsertOne = async (col, doc) => {\n  const moongooseDoc = col(doc);\n  await moongooseDoc.save();\n};\n\nexports.mongoInsertOne = mongoInsertOne;\n\nconst mongoInsertMany = async (col, docs) => {\n  await col.insertMany(docs);\n};\n\nexports.mongoInsertMany = mongoInsertMany;\n\nconst mongoDistinct = async (col, string, findCondition) => {\n  const result = await col.distinct(string, findCondition);\n  return result;\n};\n\nexports.mongoDistinct = mongoDistinct;\n\nconst mongoFindOneAndUpdate = async (col, findCondition, updateCondition, returnCondition) => {\n  const result = await col.findOneAndUpdate(findCondition, updateCondition, returnCondition);\n  return result;\n};\n\nexports.mongoFindOneAndUpdate = mongoFindOneAndUpdate;\n\nconst mongoFindOneAndRemove = async (col, findCondition) => {\n  const result = await col.findOneAndRemove(findCondition);\n  return result;\n};\n\nexports.mongoFindOneAndRemove = mongoFindOneAndRemove;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJtb25nb0ZpbmRPbmUiLCJjb2wiLCJmaW5kQ29uZGl0aW9uIiwic2VsZWN0Q29uZGl0aW9uIiwicmVzdWx0IiwiZmluZE9uZSIsInNlbGVjdCIsImxlYW4iLCJleGVjIiwibW9uZ29GaW5kT25lV2l0aE91dExlYW4iLCJtb25nb0ZpbmRXaXRoU29ydCIsImxpbWl0Iiwic29ydENvbmRpdGlvbiIsIl9pZCIsImZpbmQiLCJzb3J0IiwibW9uZ29GaW5kTWFueSIsIm1vbmdvRmluZEN1cnNvciIsImN1cnNvciIsIm1vbmdvQ291bnQiLCJjb3VudCIsIm1vbmdvVXBkYXRlT25lIiwidXBkYXRlQ29uZGl0aW9uIiwidXBkYXRlT25lIiwibW9uZ29VcHNlcnRPbmUiLCJ1cHNlcnQiLCJtb25nb1VwZGF0ZU1hbnkiLCJtdWx0aSIsIm1vbmdvQWdncmVnYXRlIiwiYWdncmVnYXRlQ29uZGl0aW9uIiwiYWdncmVnYXRlIiwibW9uZ29EZWxldGVPbmUiLCJkZWxldGVPbmUiLCJtb25nb0RlbGV0ZU1hbnkiLCJkZWxldGVNYW55IiwibW9uZ29JbnNlcnRPbmUiLCJkb2MiLCJtb29uZ29vc2VEb2MiLCJzYXZlIiwibW9uZ29JbnNlcnRNYW55IiwiZG9jcyIsImluc2VydE1hbnkiLCJtb25nb0Rpc3RpbmN0Iiwic3RyaW5nIiwiZGlzdGluY3QiLCJtb25nb0ZpbmRPbmVBbmRVcGRhdGUiLCJyZXR1cm5Db25kaXRpb24iLCJmaW5kT25lQW5kVXBkYXRlIiwibW9uZ29GaW5kT25lQW5kUmVtb3ZlIiwiZmluZE9uZUFuZFJlbW92ZSJdLCJzb3VyY2VSb290IjoiL1VzZXJzL3JhbWlyZWRkeWNoYXJpdGhhL21pY3Jvc2VydmljZXMvc2FtcGxlLW1pY3JvLXNlcnZpY2UvbW9kZWxzLyIsInNvdXJjZXMiOlsiQWJzdHJhY3RNb2RlbHMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNvbnN0IG1vbmdvRmluZE9uZSA9IGFzeW5jIChcbiAgY29sLFxuICBmaW5kQ29uZGl0aW9uLFxuICBzZWxlY3RDb25kaXRpb24gPSB7fSxcbikgPT4ge1xuICBjb25zdCByZXN1bHQgPSBhd2FpdCBjb2xcbiAgICAuZmluZE9uZShmaW5kQ29uZGl0aW9uKVxuICAgIC5zZWxlY3Qoc2VsZWN0Q29uZGl0aW9uKVxuICAgIC5sZWFuKClcbiAgICAuZXhlYygpO1xuICByZXR1cm4gcmVzdWx0O1xufTtcblxuZXhwb3J0IGNvbnN0IG1vbmdvRmluZE9uZVdpdGhPdXRMZWFuID0gYXN5bmMgKFxuICBjb2wsXG4gIGZpbmRDb25kaXRpb24sXG4gIHNlbGVjdENvbmRpdGlvbiA9IHt9LFxuKSA9PiB7XG4gIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGNvbFxuICAgIC5maW5kT25lKGZpbmRDb25kaXRpb24pXG4gICAgLnNlbGVjdChzZWxlY3RDb25kaXRpb24pXG4gICAgLmV4ZWMoKTtcbiAgcmV0dXJuIHJlc3VsdDtcbn07XG5cbmV4cG9ydCBjb25zdCBtb25nb0ZpbmRXaXRoU29ydCA9IGFzeW5jIChcbiAgY29sLFxuICBmaW5kQ29uZGl0aW9uLFxuICBzZWxlY3RDb25kaXRpb24gPSB7fSxcbiAgbGltaXQgPSAwLFxuICBzb3J0Q29uZGl0aW9uID0geyBfaWQ6IC0xIH0sXG4pID0+IHtcbiAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY29sXG4gICAgLmZpbmQoZmluZENvbmRpdGlvbilcbiAgICAuc2VsZWN0KHNlbGVjdENvbmRpdGlvbilcbiAgICAuc29ydChzb3J0Q29uZGl0aW9uKVxuICAgIC5saW1pdChsaW1pdClcbiAgICAubGVhbigpXG4gICAgLmV4ZWMoKTtcbiAgcmV0dXJuIHJlc3VsdDtcbn07XG5cbmV4cG9ydCBjb25zdCBtb25nb0ZpbmRNYW55ID0gYXN5bmMgKFxuICBjb2wsXG4gIGZpbmRDb25kaXRpb24sXG4gIHNlbGVjdENvbmRpdGlvbiA9IHt9LFxuICBsaW1pdCA9IDAsXG4pID0+IHtcbiAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY29sXG4gICAgLmZpbmQoZmluZENvbmRpdGlvbilcbiAgICAuc2VsZWN0KHNlbGVjdENvbmRpdGlvbilcbiAgICAubGltaXQobGltaXQpXG4gICAgLmxlYW4oKVxuICAgIC5leGVjKCk7XG4gIHJldHVybiByZXN1bHQ7XG59O1xuXG5leHBvcnQgY29uc3QgbW9uZ29GaW5kQ3Vyc29yID0gYXN5bmMgKFxuICBjb2wsXG4gIGZpbmRDb25kaXRpb24sXG4gIHNlbGVjdENvbmRpdGlvbiA9IHt9LFxuICBsaW1pdCA9IDAsXG4pID0+IHtcbiAgY29uc3QgY3Vyc29yID0gYXdhaXQgY29sXG4gICAgLmZpbmQoZmluZENvbmRpdGlvbilcbiAgICAuc2VsZWN0KHNlbGVjdENvbmRpdGlvbilcbiAgICAubGltaXQobGltaXQpXG4gICAgLmxlYW4oKVxuICAgIC5jdXJzb3IoKTtcbiAgcmV0dXJuIGN1cnNvcjtcbn07XG5cbmV4cG9ydCBjb25zdCBtb25nb0NvdW50ID0gYXN5bmMgKGNvbCwgZmluZENvbmRpdGlvbikgPT4ge1xuICBjb25zdCBjb3VudCA9IGF3YWl0IGNvbC5jb3VudChmaW5kQ29uZGl0aW9uKTtcbiAgcmV0dXJuIGNvdW50O1xufTtcblxuZXhwb3J0IGNvbnN0IG1vbmdvVXBkYXRlT25lID0gYXN5bmMgKGNvbCwgZmluZENvbmRpdGlvbiwgdXBkYXRlQ29uZGl0aW9uKSA9PiB7XG4gIGF3YWl0IGNvbC51cGRhdGVPbmUoZmluZENvbmRpdGlvbiwgdXBkYXRlQ29uZGl0aW9uKTtcbn07XG5cbmV4cG9ydCBjb25zdCBtb25nb1Vwc2VydE9uZSA9IGFzeW5jIChjb2wsIGZpbmRDb25kaXRpb24sIHVwZGF0ZUNvbmRpdGlvbikgPT4ge1xuICBhd2FpdCBjb2wudXBkYXRlT25lKGZpbmRDb25kaXRpb24sIHVwZGF0ZUNvbmRpdGlvbiwgeyB1cHNlcnQ6IHRydWUgfSk7XG59O1xuXG5leHBvcnQgY29uc3QgbW9uZ29VcGRhdGVNYW55ID0gYXN5bmMgKGNvbCwgZmluZENvbmRpdGlvbiwgdXBkYXRlQ29uZGl0aW9uKSA9PiB7XG4gIGF3YWl0IGNvbC51cGRhdGVPbmUoZmluZENvbmRpdGlvbiwgdXBkYXRlQ29uZGl0aW9uLCB7IG11bHRpOiB0cnVlIH0pO1xufTtcblxuZXhwb3J0IGNvbnN0IG1vbmdvQWdncmVnYXRlID0gYXN5bmMgKGNvbCwgYWdncmVnYXRlQ29uZGl0aW9uKSA9PiB7XG4gIGNvbnN0IHJlc3VsdCA9IGNvbC5hZ2dyZWdhdGUoYWdncmVnYXRlQ29uZGl0aW9uKTtcbiAgcmV0dXJuIHJlc3VsdDtcbn07XG5cbmV4cG9ydCBjb25zdCBtb25nb0RlbGV0ZU9uZSA9IGFzeW5jIChjb2wsIGZpbmRDb25kaXRpb24pID0+IHtcbiAgYXdhaXQgY29sLmRlbGV0ZU9uZShmaW5kQ29uZGl0aW9uKTtcbn07XG5cbmV4cG9ydCBjb25zdCBtb25nb0RlbGV0ZU1hbnkgPSBhc3luYyAoY29sLCBmaW5kQ29uZGl0aW9uKSA9PiB7XG4gIGF3YWl0IGNvbC5kZWxldGVNYW55KGZpbmRDb25kaXRpb24pO1xufTtcblxuZXhwb3J0IGNvbnN0IG1vbmdvSW5zZXJ0T25lID0gYXN5bmMgKGNvbCwgZG9jKSA9PiB7XG4gIGNvbnN0IG1vb25nb29zZURvYyA9IGNvbChkb2MpO1xuICBhd2FpdCBtb29uZ29vc2VEb2Muc2F2ZSgpO1xufTtcblxuZXhwb3J0IGNvbnN0IG1vbmdvSW5zZXJ0TWFueSA9IGFzeW5jIChjb2wsIGRvY3MpID0+IHtcbiAgYXdhaXQgY29sLmluc2VydE1hbnkoZG9jcyk7XG59O1xuXG5leHBvcnQgY29uc3QgbW9uZ29EaXN0aW5jdCA9IGFzeW5jIChjb2wsIHN0cmluZywgZmluZENvbmRpdGlvbikgPT4ge1xuICBjb25zdCByZXN1bHQgPSBhd2FpdCBjb2wuZGlzdGluY3Qoc3RyaW5nLCBmaW5kQ29uZGl0aW9uKTtcbiAgcmV0dXJuIHJlc3VsdDtcbn07XG5cbmV4cG9ydCBjb25zdCBtb25nb0ZpbmRPbmVBbmRVcGRhdGUgPSBhc3luYyAoXG4gIGNvbCxcbiAgZmluZENvbmRpdGlvbixcbiAgdXBkYXRlQ29uZGl0aW9uLFxuICByZXR1cm5Db25kaXRpb24sXG4pID0+IHtcbiAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY29sLmZpbmRPbmVBbmRVcGRhdGUoXG4gICAgZmluZENvbmRpdGlvbixcbiAgICB1cGRhdGVDb25kaXRpb24sXG4gICAgcmV0dXJuQ29uZGl0aW9uLFxuICApO1xuICByZXR1cm4gcmVzdWx0O1xufTtcblxuZXhwb3J0IGNvbnN0IG1vbmdvRmluZE9uZUFuZFJlbW92ZSA9IGFzeW5jIChjb2wsIGZpbmRDb25kaXRpb24pID0+IHtcbiAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY29sLmZpbmRPbmVBbmRSZW1vdmUoZmluZENvbmRpdGlvbik7XG4gIHJldHVybiByZXN1bHQ7XG59O1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQU8sTUFBTUEsWUFBWSxHQUFHLE9BQzFCQyxHQUQwQixFQUUxQkMsYUFGMEIsRUFHMUJDLGVBQWUsR0FBRyxFQUhRLEtBSXZCO0VBQ0gsTUFBTUMsTUFBTSxHQUFHLE1BQU1ILEdBQUcsQ0FDckJJLE9BRGtCLENBQ1ZILGFBRFUsRUFFbEJJLE1BRmtCLENBRVhILGVBRlcsRUFHbEJJLElBSGtCLEdBSWxCQyxJQUprQixFQUFyQjtFQUtBLE9BQU9KLE1BQVA7QUFDRCxDQVhNOzs7O0FBYUEsTUFBTUssdUJBQXVCLEdBQUcsT0FDckNSLEdBRHFDLEVBRXJDQyxhQUZxQyxFQUdyQ0MsZUFBZSxHQUFHLEVBSG1CLEtBSWxDO0VBQ0gsTUFBTUMsTUFBTSxHQUFHLE1BQU1ILEdBQUcsQ0FDckJJLE9BRGtCLENBQ1ZILGFBRFUsRUFFbEJJLE1BRmtCLENBRVhILGVBRlcsRUFHbEJLLElBSGtCLEVBQXJCO0VBSUEsT0FBT0osTUFBUDtBQUNELENBVk07Ozs7QUFZQSxNQUFNTSxpQkFBaUIsR0FBRyxPQUMvQlQsR0FEK0IsRUFFL0JDLGFBRitCLEVBRy9CQyxlQUFlLEdBQUcsRUFIYSxFQUkvQlEsS0FBSyxHQUFHLENBSnVCLEVBSy9CQyxhQUFhLEdBQUc7RUFBRUMsR0FBRyxFQUFFLENBQUM7QUFBUixDQUxlLEtBTTVCO0VB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","map":{"version":3,"names":["mongoFindOne","col","findCondition","selectCondition","result","findOne","select","lean","exec","mongoFindOneWithOutLean","mongoFindWithSort","limit","sortCondition","_id","find","sort","mongoFindMany","mongoFindCursor","cursor","mongoCount","count","mongoUpdateOne","updateCondition","updateOne","mongoUpsertOne","upsert","mongoUpdateMany","multi","mongoAggregate","aggregateCondition","aggregate","mongoDeleteOne","deleteOne","mongoDeleteMany","deleteMany","mongoInsertOne","doc","moongooseDoc","save","mongoInsertMany","docs","insertMany","mongoDistinct","string","distinct","mongoFindOneAndUpdate","returnCondition","findOneAndUpdate","mongoFindOneAndRemove","findOneAndRemove"],"sourceRoot":"/Users/ramireddycharitha/microservices/sample-micro-service/models/","sources":["AbstractModels.js"],"sourcesContent":["export const mongoFindOne = async (\n  col,\n  findCondition,\n  selectCondition = {},\n) => {\n  const result = await col\n    .findOne(findCondition)\n    .select(selectCondition)\n    .lean()\n    .exec();\n  return result;\n};\n\nexport const mongoFindOneWithOutLean = async (\n  col,\n  findCondition,\n  selectCondition = {},\n) => {\n  const result = await col\n    .findOne(findCondition)\n    .select(selectCondition)\n    .exec();\n  return result;\n};\n\nexport const mongoFindWithSort = async (\n  col,\n  findCondition,\n  selectCondition = {},\n  limit = 0,\n  sortCondition = { _id: -1 },\n) => {\n  const result = await col\n    .find(findCondition)\n    .select(selectCondition)\n    .sort(sortCondition)\n    .limit(limit)\n    .lean()\n    .exec();\n  return result;\n};\n\nexport const mongoFindMany = async (\n  col,\n  findCondition,\n  selectCondition = {},\n  limit = 0,\n) => {\n  const result = await col\n    .find(findCondition)\n    .select(selectCondition)\n    .limit(limit)\n    .lean()\n    .exec();\n  return result;\n};\n\nexport const mongoFindCursor = async (\n  col,\n  findCondition,\n  selectCondition = {},\n  limit = 0,\n) => {\n  const cursor = await col\n    .find(findCondition)\n    .select(selectCondition)\n    .limit(limit)\n    .lean()\n    .cursor();\n  return cursor;\n};\n\nexport const mongoCount = async (col, findCondition) => {\n  const count = await col.count(findCondition);\n  return count;\n};\n\nexport const mongoUpdateOne = async (col, findCondition, updateCondition) => {\n  await col.updateOne(findCondition, updateCondition);\n};\n\nexport const mongoUpsertOne = async (col, findCondition, updateCondition) => {\n  await col.updateOne(findCondition, updateCondition, { upsert: true });\n};\n\nexport const mongoUpdateMany = async (col, findCondition, updateCondition) => {\n  await col.updateOne(findCondition, updateCondition, { multi: true });\n};\n\nexport const mongoAggregate = async (col, aggregateCondition) => {\n  const result = col.aggregate(aggregateCondition);\n  return result;\n};\n\nexport const mongoDeleteOne = async (col, findCondition) => {\n  await col.deleteOne(findCondition);\n};\n\nexport const mongoDeleteMany = async (col, findCondition) => {\n  await col.deleteMany(findCondition);\n};\n\nexport const mongoInsertOne = async (col, doc) => {\n  const moongooseDoc = col(doc);\n  await moongooseDoc.save();\n};\n\nexport const mongoInsertMany = async (col, docs) => {\n  await col.insertMany(docs);\n};\n\nexport const mongoDistinct = async (col, string, findCondition) => {\n  const result = await col.distinct(string, findCondition);\n  return result;\n};\n\nexport const mongoFindOneAndUpdate = async (\n  col,\n  findCondition,\n  updateCondition,\n  returnCondition,\n) => {\n  const result = await col.findOneAndUpdate(\n    findCondition,\n    updateCondition,\n    returnCondition,\n  );\n  return result;\n};\n\nexport const mongoFindOneAndRemove = async (col, findCondition) => {\n  const result = await col.findOneAndRemove(findCondition);\n  return result;\n};\n"],"mappings":"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"}},"mtime":1653643634185},"{\"assumptions\":{},\"sourceRoot\":\"/Users/ramireddycharitha/microservices/sample-micro-service/models/mainDbSchema/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/ramireddycharitha/microservices/sample-micro-service\",\"filename\":\"/Users/ramireddycharitha/microservices/sample-micro-service/models/mainDbSchema/index.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"default\",\"root\":\"/Users/ramireddycharitha/microservices/sample-micro-service\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.17.10:default":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Users = exports.Clients = void 0;\n\nvar mainDbConnection = _interopRequireWildcard(require(\"../../connections/MainDb\"));\n\nvar _ClientsSchema = _interopRequireDefault(require(\"./ClientsSchema\"));\n\nvar _UsersSchema = _interopRequireDefault(require(\"./UsersSchema\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nconst conn = mainDbConnection.getDbInstance();\nconst Users = conn.model(\"Users\", _UsersSchema.default, \"Users\"); // @hotfix: Collection name is Client (singular)\n// We can use plural name through out the code (Collection name can be changed while migrating)\n\nexports.Users = Users;\nconst Clients = conn.model(\"Clients\", _ClientsSchema.default, \"Client\");\nexports.Clients = Clients;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb25uIiwibWFpbkRiQ29ubmVjdGlvbiIsImdldERiSW5zdGFuY2UiLCJVc2VycyIsIm1vZGVsIiwiVXNlcnNTY2hlbWEiLCJDbGllbnRzIiwiQ2xpZW50c1NjaGVtYSJdLCJzb3VyY2VSb290IjoiL1VzZXJzL3JhbWlyZWRkeWNoYXJpdGhhL21pY3Jvc2VydmljZXMvc2FtcGxlLW1pY3JvLXNlcnZpY2UvbW9kZWxzL21haW5EYlNjaGVtYS8iLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIG1haW5EYkNvbm5lY3Rpb24gZnJvbSBcIi4uLy4uL2Nvbm5lY3Rpb25zL01haW5EYlwiO1xuaW1wb3J0IENsaWVudHNTY2hlbWEgZnJvbSBcIi4vQ2xpZW50c1NjaGVtYVwiO1xuaW1wb3J0IFVzZXJzU2NoZW1hIGZyb20gXCIuL1VzZXJzU2NoZW1hXCI7XG5cbmNvbnN0IGNvbm4gPSBtYWluRGJDb25uZWN0aW9uLmdldERiSW5zdGFuY2UoKTtcbmV4cG9ydCBjb25zdCBVc2VycyA9IGNvbm4ubW9kZWwoXCJVc2Vyc1wiLCBVc2Vyc1NjaGVtYSwgXCJVc2Vyc1wiKTtcbi8vIEBob3RmaXg6IENvbGxlY3Rpb24gbmFtZSBpcyBDbGllbnQgKHNpbmd1bGFyKVxuLy8gV2UgY2FuIHVzZSBwbHVyYWwgbmFtZSB0aHJvdWdoIG91dCB0aGUgY29kZSAoQ29sbGVjdGlvbiBuYW1lIGNhbiBiZSBjaGFuZ2VkIHdoaWxlIG1pZ3JhdGluZylcbmV4cG9ydCBjb25zdCBDbGllbnRzID0gY29ubi5tb2RlbChcIkNsaWVudHNcIiwgQ2xpZW50c1NjaGVtYSwgXCJDbGllbnRcIik7XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTs7QUFDQTs7QUFDQTs7Ozs7Ozs7QUFFQSxNQUFNQSxJQUFJLEdBQUdDLGdCQUFnQixDQUFDQyxhQUFqQixFQUFiO0FBQ08sTUFBTUMsS0FBSyxHQUFHSCxJQUFJLENBQUNJLEtBQUwsQ0FBVyxPQUFYLEVBQW9CQyxvQkFBcEIsRUFBaUMsT0FBakMsQ0FBZCxDLENBQ1A7QUFDQTs7O0FBQ08sTUFBTUMsT0FBTyxHQUFHTixJQUFJLENBQUNJLEtBQUwsQ0FBVyxTQUFYLEVBQXNCRyxzQkFBdEIsRUFBcUMsUUFBckMsQ0FBaEIifQ==","map":{"version":3,"names":["conn","mainDbConnection","getDbInstance","Users","model","UsersSchema","Clients","ClientsSchema"],"sourceRoot":"/Users/ramireddycharitha/microservices/sample-micro-service/models/mainDbSchema/","sources":["index.js"],"sourcesContent":["import * as mainDbConnection from \"../../connections/MainDb\";\nimport ClientsSchema from \"./ClientsSchema\";\nimport UsersSchema from \"./UsersSchema\";\n\nconst conn = mainDbConnection.getDbInstance();\nexport const Users = conn.model(\"Users\", UsersSchema, \"Users\");\n// @hotfix: Collection name is Client (singular)\n// We can use plural name through out the code (Collection name can be changed while migrating)\nexport const Clients = conn.model(\"Clients\", ClientsSchema, \"Client\");\n"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;;;;;;;AAEA,MAAMA,IAAI,GAAGC,gBAAgB,CAACC,aAAjB,EAAb;AACO,MAAMC,KAAK,GAAGH,IAAI,CAACI,KAAL,CAAW,OAAX,EAAoBC,oBAApB,EAAiC,OAAjC,CAAd,C,CACP;AACA;;;AACO,MAAMC,OAAO,GAAGN,IAAI,CAACI,KAAL,CAAW,SAAX,EAAsBG,sBAAtB,EAAqC,QAArC,CAAhB"}},"mtime":1653643634186},"{\"assumptions\":{},\"sourceRoot\":\"/Users/ramireddycharitha/microservices/sample-micro-service/models/mainDbSchema/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/ramireddycharitha/microservices/sample-micro-service\",\"filename\":\"/Users/ramireddycharitha/microservices/sample-micro-service/models/mainDbSchema/ClientsSchema.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"default\",\"root\":\"/Users/ramireddycharitha/microservices/sample-micro-service\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.17.10:default":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _mongoose = require(\"mongoose\");\n\nconst ClientsSchema = new _mongoose.Schema({\n  metro_auth_key: {\n    type: String\n  }\n});\nvar _default = ClientsSchema;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJDbGllbnRzU2NoZW1hIiwiU2NoZW1hIiwibWV0cm9fYXV0aF9rZXkiLCJ0eXBlIiwiU3RyaW5nIl0sInNvdXJjZVJvb3QiOiIvVXNlcnMvcmFtaXJlZGR5Y2hhcml0aGEvbWljcm9zZXJ2aWNlcy9zYW1wbGUtbWljcm8tc2VydmljZS9tb2RlbHMvbWFpbkRiU2NoZW1hLyIsInNvdXJjZXMiOlsiQ2xpZW50c1NjaGVtYS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBTY2hlbWEgfSBmcm9tIFwibW9uZ29vc2VcIjtcblxuY29uc3QgQ2xpZW50c1NjaGVtYSA9IG5ldyBTY2hlbWEoe1xuICBtZXRyb19hdXRoX2tleToge1xuICAgIHR5cGU6IFN0cmluZyxcbiAgfSxcbn0pO1xuXG5leHBvcnQgZGVmYXVsdCBDbGllbnRzU2NoZW1hO1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7O0FBRUEsTUFBTUEsYUFBYSxHQUFHLElBQUlDLGdCQUFKLENBQVc7RUFDL0JDLGNBQWMsRUFBRTtJQUNkQyxJQUFJLEVBQUVDO0VBRFE7QUFEZSxDQUFYLENBQXRCO2VBTWVKLGEifQ==","map":{"version":3,"names":["ClientsSchema","Schema","metro_auth_key","type","String"],"sourceRoot":"/Users/ramireddycharitha/microservices/sample-micro-service/models/mainDbSchema/","sources":["ClientsSchema.js"],"sourcesContent":["import { Schema } from \"mongoose\";\n\nconst ClientsSchema = new Schema({\n  metro_auth_key: {\n    type: String,\n  },\n});\n\nexport default ClientsSchema;\n"],"mappings":";;;;;;;AAAA;;AAEA,MAAMA,aAAa,GAAG,IAAIC,gBAAJ,CAAW;EAC/BC,cAAc,EAAE;IACdC,IAAI,EAAEC;EADQ;AADe,CAAX,CAAtB;eAMeJ,a"}},"mtime":1653643634186},"{\"assumptions\":{},\"sourceRoot\":\"/Users/ramireddycharitha/microservices/sample-micro-service/models/mainDbSchema/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/ramireddycharitha/microservices/sample-micro-service\",\"filename\":\"/Users/ramireddycharitha/microservices/sample-micro-service/models/mainDbSchema/UsersSchema.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"default\",\"root\":\"/Users/ramireddycharitha/microservices/sample-micro-service\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.17.10:default":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _mongoose = require(\"mongoose\");\n\nconst UsersSchema = new _mongoose.Schema({\n  password: {\n    type: String\n  },\n  firstName: {\n    type: String\n  },\n  lastName: {\n    required: false,\n    type: String\n  },\n  mobileNo: {\n    type: String\n  },\n  alternateMobileNo: {\n    type: String\n  },\n  email: {\n    type: String\n  },\n  clientId: {\n    required: true,\n    type: String\n  },\n  userType: {\n    type: Array,\n    required: true\n  },\n  sessionToken: {\n    type: String\n  },\n  isBlockedUser: {\n    type: Boolean\n  },\n  createdAt: {\n    type: Date,\n    default: Date.now\n  },\n  updatedAt: {\n    type: Date,\n    default: Date.now\n  }\n});\nvar _default = UsersSchema;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJVc2Vyc1NjaGVtYSIsIlNjaGVtYSIsInBhc3N3b3JkIiwidHlwZSIsIlN0cmluZyIsImZpcnN0TmFtZSIsImxhc3ROYW1lIiwicmVxdWlyZWQiLCJtb2JpbGVObyIsImFsdGVybmF0ZU1vYmlsZU5vIiwiZW1haWwiLCJjbGllbnRJZCIsInVzZXJUeXBlIiwiQXJyYXkiLCJzZXNzaW9uVG9rZW4iLCJpc0Jsb2NrZWRVc2VyIiwiQm9vbGVhbiIsImNyZWF0ZWRBdCIsIkRhdGUiLCJkZWZhdWx0Iiwibm93IiwidXBkYXRlZEF0Il0sInNvdXJjZVJvb3QiOiIvVXNlcnMvcmFtaXJlZGR5Y2hhcml0aGEvbWljcm9zZXJ2aWNlcy9zYW1wbGUtbWljcm8tc2VydmljZS9tb2RlbHMvbWFpbkRiU2NoZW1hLyIsInNvdXJjZXMiOlsiVXNlcnNTY2hlbWEuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgU2NoZW1hIH0gZnJvbSBcIm1vbmdvb3NlXCI7XG5cbmNvbnN0IFVzZXJzU2NoZW1hID0gbmV3IFNjaGVtYSh7XG4gIHBhc3N3b3JkOiB7XG4gICAgdHlwZTogU3RyaW5nLFxuICB9LFxuICBmaXJzdE5hbWU6IHtcbiAgICB0eXBlOiBTdHJpbmcsXG4gIH0sXG4gIGxhc3ROYW1lOiB7XG4gICAgcmVxdWlyZWQ6IGZhbHNlLFxuICAgIHR5cGU6IFN0cmluZyxcbiAgfSxcbiAgbW9iaWxlTm86IHtcbiAgICB0eXBlOiBTdHJpbmcsXG4gIH0sXG4gIGFsdGVybmF0ZU1vYmlsZU5vOiB7XG4gICAgdHlwZTogU3RyaW5nLFxuICB9LFxuICBlbWFpbDoge1xuICAgIHR5cGU6IFN0cmluZyxcbiAgfSxcbiAgY2xpZW50SWQ6IHtcbiAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICB0eXBlOiBTdHJpbmcsXG4gIH0sXG4gIHVzZXJUeXBlOiB7XG4gICAgdHlwZTogQXJyYXksXG4gICAgcmVxdWlyZWQ6IHRydWUsXG4gIH0sXG4gIHNlc3Npb25Ub2tlbjoge1xuICAgIHR5cGU6IFN0cmluZyxcbiAgfSxcbiAgaXNCbG9ja2VkVXNlcjoge1xuICAgIHR5cGU6IEJvb2xlYW4sXG4gIH0sXG4gIGNyZWF0ZWRBdDoge1xuICAgIHR5cGU6IERhdGUsXG4gICAgZGVmYXVsdDogRGF0ZS5ub3csXG4gIH0sXG4gIHVwZGF0ZWRBdDoge1xuICAgIHR5cGU6IERhdGUsXG4gICAgZGVmYXVsdDogRGF0ZS5ub3csXG4gIH0sXG59KTtcblxuZXhwb3J0IGRlZmF1bHQgVXNlcnNTY2hlbWE7XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTs7QUFFQSxNQUFNQSxXQUFXLEdBQUcsSUFBSUMsZ0JBQUosQ0FBVztFQUM3QkMsUUFBUSxFQUFFO0lBQ1JDLElBQUksRUFBRUM7RUFERSxDQURtQjtFQUk3QkMsU0FBUyxFQUFFO0lBQ1RGLElBQUksRUFBRUM7RUFERyxDQUprQjtFQU83QkUsUUFBUSxFQUFFO0lBQ1JDLFFBQVEsRUFBRSxLQURGO0lBRVJKLElBQUksRUFBRUM7RUFGRSxDQVBtQjtFQVc3QkksUUFBUSxFQUFFO0lBQ1JMLElBQUksRUFBRUM7RUFERSxDQVhtQjtFQWM3QkssaUJBQWlCLEVBQUU7SUFDakJOLElBQUksRUFBRUM7RUFEVyxDQWRVO0VBaUI3Qk0sS0FBSyxFQUFFO0lBQ0xQLElBQUksRUFBRUM7RUFERCxDQWpCc0I7RUFvQjdCTyxRQUFRLEVBQUU7SUFDUkosUUFBUSxFQUFFLElBREY7SUFFUkosSUFBSSxFQUFFQztFQUZFLENBcEJtQjtFQXdCN0JRLFFBQVEsRUFBRTtJQUNSVCxJQUFJLEVBQUVVLEtBREU7SUFFUk4sUUFBUSxFQUFFO0VBRkYsQ0F4Qm1CO0VBNEI3Qk8sWUFBWSxFQUFFO0lBQ1pYLElBQUksRUFBRUM7RUFETSxDQTVCZTtFQStCN0JXLGFBQWEsRUFBRTtJQUNiWixJQUFJLEVBQUVhO0VBRE8sQ0EvQmM7RUFrQzdCQyxTQUFTLEVBQUU7SUFDVGQsSUFBSSxFQUFFZSxJQURHO0lBRVRDLE9BQU8sRUFBRUQsSUFBSSxDQUFDRTtFQUZMLENBbENrQjtFQXNDN0JDLFNBQVMsRUFBRTtJQUNUbEIsSUFBSSxFQUFFZSxJQURHO0lBRVRDLE9BQU8sRUFBRUQsSUFBSSxDQUFDRTtFQUZMO0FBdENrQixDQUFYLENBQXBCO2VBNENlcEIsVyJ9","map":{"version":3,"names":["UsersSchema","Schema","password","type","String","firstName","lastName","required","mobileNo","alternateMobileNo","email","clientId","userType","Array","sessionToken","isBlockedUser","Boolean","createdAt","Date","default","now","updatedAt"],"sourceRoot":"/Users/ramireddycharitha/microservices/sample-micro-service/models/mainDbSchema/","sources":["UsersSchema.js"],"sourcesContent":["import { Schema } from \"mongoose\";\n\nconst UsersSchema = new Schema({\n  password: {\n    type: String,\n  },\n  firstName: {\n    type: String,\n  },\n  lastName: {\n    required: false,\n    type: String,\n  },\n  mobileNo: {\n    type: String,\n  },\n  alternateMobileNo: {\n    type: String,\n  },\n  email: {\n    type: String,\n  },\n  clientId: {\n    required: true,\n    type: String,\n  },\n  userType: {\n    type: Array,\n    required: true,\n  },\n  sessionToken: {\n    type: String,\n  },\n  isBlockedUser: {\n    type: Boolean,\n  },\n  createdAt: {\n    type: Date,\n    default: Date.now,\n  },\n  updatedAt: {\n    type: Date,\n    default: Date.now,\n  },\n});\n\nexport default UsersSchema;\n"],"mappings":";;;;;;;AAAA;;AAEA,MAAMA,WAAW,GAAG,IAAIC,gBAAJ,CAAW;EAC7BC,QAAQ,EAAE;IACRC,IAAI,EAAEC;EADE,CADmB;EAI7BC,SAAS,EAAE;IACTF,IAAI,EAAEC;EADG,CAJkB;EAO7BE,QAAQ,EAAE;IACRC,QAAQ,EAAE,KADF;IAERJ,IAAI,EAAEC;EAFE,CAPmB;EAW7BI,QAAQ,EAAE;IACRL,IAAI,EAAEC;EADE,CAXmB;EAc7BK,iBAAiB,EAAE;IACjBN,IAAI,EAAEC;EADW,CAdU;EAiB7BM,KAAK,EAAE;IACLP,IAAI,EAAEC;EADD,CAjBsB;EAoB7BO,QAAQ,EAAE;IACRJ,QAAQ,EAAE,IADF;IAERJ,IAAI,EAAEC;EAFE,CApBmB;EAwB7BQ,QAAQ,EAAE;IACRT,IAAI,EAAEU,KADE;IAERN,QAAQ,EAAE;EAFF,CAxBmB;EA4B7BO,YAAY,EAAE;IACZX,IAAI,EAAEC;EADM,CA5Be;EA+B7BW,aAAa,EAAE;IACbZ,IAAI,EAAEa;EADO,CA/Bc;EAkC7BC,SAAS,EAAE;IACTd,IAAI,EAAEe,IADG;IAETC,OAAO,EAAED,IAAI,CAACE;EAFL,CAlCkB;EAsC7BC,SAAS,EAAE;IACTlB,IAAI,EAAEe,IADG;IAETC,OAAO,EAAED,IAAI,CAACE;EAFL;AAtCkB,CAAX,CAApB;eA4CepB,W"}},"mtime":1653643634186},"{\"assumptions\":{},\"sourceRoot\":\"/Users/ramireddycharitha/microservices/sample-micro-service/constants/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/ramireddycharitha/microservices/sample-micro-service\",\"filename\":\"/Users/ramireddycharitha/microservices/sample-micro-service/constants/Credentials.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"default\",\"root\":\"/Users/ramireddycharitha/microservices/sample-micro-service\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.17.10:default":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.SECREAT = exports.PASSWORD = exports.ALGORITHM = void 0;\nconst SECREAT = \"UxZAXfGONYXkvATj552wBQ\";\nexports.SECREAT = SECREAT;\nconst ALGORITHM = \"aes-256-ctr\";\nexports.ALGORITHM = ALGORITHM;\nconst PASSWORD = \"meTro729@wes0K5\";\nexports.PASSWORD = PASSWORD;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJTRUNSRUFUIiwiQUxHT1JJVEhNIiwiUEFTU1dPUkQiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy9yYW1pcmVkZHljaGFyaXRoYS9taWNyb3NlcnZpY2VzL3NhbXBsZS1taWNyby1zZXJ2aWNlL2NvbnN0YW50cy8iLCJzb3VyY2VzIjpbIkNyZWRlbnRpYWxzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjb25zdCBTRUNSRUFUID0gXCJVeFpBWGZHT05ZWGt2QVRqNTUyd0JRXCI7XG5leHBvcnQgY29uc3QgQUxHT1JJVEhNID0gXCJhZXMtMjU2LWN0clwiO1xuZXhwb3J0IGNvbnN0IFBBU1NXT1JEID0gXCJtZVRybzcyOUB3ZXMwSzVcIjtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQU8sTUFBTUEsT0FBTyxHQUFHLHdCQUFoQjs7QUFDQSxNQUFNQyxTQUFTLEdBQUcsYUFBbEI7O0FBQ0EsTUFBTUMsUUFBUSxHQUFHLGlCQUFqQiJ9","map":{"version":3,"names":["SECREAT","ALGORITHM","PASSWORD"],"sourceRoot":"/Users/ramireddycharitha/microservices/sample-micro-service/constants/","sources":["Credentials.js"],"sourcesContent":["export const SECREAT = \"UxZAXfGONYXkvATj552wBQ\";\nexport const ALGORITHM = \"aes-256-ctr\";\nexport const PASSWORD = \"meTro729@wes0K5\";\n"],"mappings":";;;;;;AAAO,MAAMA,OAAO,GAAG,wBAAhB;;AACA,MAAMC,SAAS,GAAG,aAAlB;;AACA,MAAMC,QAAQ,GAAG,iBAAjB"}},"mtime":1653643634178},"{\"assumptions\":{},\"sourceRoot\":\"/Users/ramireddycharitha/microservices/sample-micro-service/constants/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/ramireddycharitha/microservices/sample-micro-service\",\"filename\":\"/Users/ramireddycharitha/microservices/sample-micro-service/constants/Keys.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"default\",\"root\":\"/Users/ramireddycharitha/microservices/sample-micro-service\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.17.10:default":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.HEADER_SESSION_TOKEN = exports.HEADER_API_KEY = void 0;\nconst HEADER_API_KEY = \"x-metro-api-key\";\nexports.HEADER_API_KEY = HEADER_API_KEY;\nconst HEADER_SESSION_TOKEN = \"x-metro-sessiontoken\";\nexports.HEADER_SESSION_TOKEN = HEADER_SESSION_TOKEN;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJIRUFERVJfQVBJX0tFWSIsIkhFQURFUl9TRVNTSU9OX1RPS0VOIl0sInNvdXJjZVJvb3QiOiIvVXNlcnMvcmFtaXJlZGR5Y2hhcml0aGEvbWljcm9zZXJ2aWNlcy9zYW1wbGUtbWljcm8tc2VydmljZS9jb25zdGFudHMvIiwic291cmNlcyI6WyJLZXlzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjb25zdCBIRUFERVJfQVBJX0tFWSA9IFwieC1tZXRyby1hcGkta2V5XCI7XG5leHBvcnQgY29uc3QgSEVBREVSX1NFU1NJT05fVE9LRU4gPSBcIngtbWV0cm8tc2Vzc2lvbnRva2VuXCI7XG4iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFPLE1BQU1BLGNBQWMsR0FBRyxpQkFBdkI7O0FBQ0EsTUFBTUMsb0JBQW9CLEdBQUcsc0JBQTdCIn0=","map":{"version":3,"names":["HEADER_API_KEY","HEADER_SESSION_TOKEN"],"sourceRoot":"/Users/ramireddycharitha/microservices/sample-micro-service/constants/","sources":["Keys.js"],"sourcesContent":["export const HEADER_API_KEY = \"x-metro-api-key\";\nexport const HEADER_SESSION_TOKEN = \"x-metro-sessiontoken\";\n"],"mappings":";;;;;;AAAO,MAAMA,cAAc,GAAG,iBAAvB;;AACA,MAAMC,oBAAoB,GAAG,sBAA7B"}},"mtime":1653643634179},"{\"assumptions\":{},\"sourceRoot\":\"/Users/ramireddycharitha/microservices/sample-micro-service/services/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/ramireddycharitha/microservices/sample-micro-service\",\"filename\":\"/Users/ramireddycharitha/microservices/sample-micro-service/services/UserService.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"default\",\"root\":\"/Users/ramireddycharitha/microservices/sample-micro-service\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.17.10:default":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.updateUserDetails = exports.registerUser = exports.getUserDetails = void 0;\n\nvar ErrorUtils = _interopRequireWildcard(require(\"../errors/ErrorUtils\"));\n\nvar AbstractModels = _interopRequireWildcard(require(\"../models/AbstractModels\"));\n\nvar EncryptionService = _interopRequireWildcard(require(\"./EncryptionService\"));\n\nvar _index = require(\"../models/mainDbSchema/index\");\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nasync function getClientIdFromApiKey(apiKey) {\n  const findCondition = {\n    metro_auth_key: apiKey\n  };\n  const clientObj = await AbstractModels.mongoFindOne(_index.Clients, findCondition);\n  const clientId = clientObj._id;\n  return clientId;\n}\n\nconst registerUser = async (userDetails, clientDetails) => {\n  const {\n    mobileNo,\n    password,\n    firstName,\n    lastName\n  } = userDetails;\n  const findCondition = {\n    mobileNo\n  };\n  let userObj = await AbstractModels.mongoFindOne(_index.Users, findCondition);\n\n  if (userObj) {\n    throw ErrorUtils.DataAlreadyExists();\n  } else {\n    const bcryptedPassword = EncryptionService.generateBcryptPassword(password);\n    const clientId = await getClientIdFromApiKey(clientDetails.apiKey);\n    userObj = {\n      mobileNo,\n      firstName,\n      lastName,\n      password: bcryptedPassword,\n      clientId,\n      userType: \"user\"\n    };\n    await AbstractModels.mongoInsertOne(_index.Users, userObj);\n    delete userObj.password;\n    return userObj;\n  }\n};\n\nexports.registerUser = registerUser;\n\nconst getUserDetails = async mobileNo => {\n  const selectCondition = {\n    mobileNo\n  };\n  const projectCondition = {\n    _id: 0,\n    mobileNo: 1,\n    firstName: 1,\n    lastName: 1,\n    alternateMobileNo: 1,\n    email: 1\n  };\n  const userObj = await AbstractModels.mongoFindOne(_index.Users, selectCondition, projectCondition);\n  return userObj;\n};\n\nexports.getUserDetails = getUserDetails;\n\nconst updateUserDetails = async userDetails => {\n  const {\n    firstName,\n    lastName,\n    alternateMobileNo,\n    email,\n    mobileNo\n  } = userDetails;\n  const selectCondition = {\n    mobileNo\n  };\n  const updateCondition = {\n    $set: {\n      firstName,\n      lastName,\n      alternateMobileNo,\n      email\n    }\n  };\n  await AbstractModels.mongoUpdateOne(_index.Users, selectCondition, updateCondition);\n};\n\nexports.updateUserDetails = updateUserDetails;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJnZXRDbGllbnRJZEZyb21BcGlLZXkiLCJhcGlLZXkiLCJmaW5kQ29uZGl0aW9uIiwibWV0cm9fYXV0aF9rZXkiLCJjbGllbnRPYmoiLCJBYnN0cmFjdE1vZGVscyIsIm1vbmdvRmluZE9uZSIsIkNsaWVudHMiLCJjbGllbnRJZCIsIl9pZCIsInJlZ2lzdGVyVXNlciIsInVzZXJEZXRhaWxzIiwiY2xpZW50RGV0YWlscyIsIm1vYmlsZU5vIiwicGFzc3dvcmQiLCJmaXJzdE5hbWUiLCJsYXN0TmFtZSIsInVzZXJPYmoiLCJVc2VycyIsIkVycm9yVXRpbHMiLCJEYXRhQWxyZWFkeUV4aXN0cyIsImJjcnlwdGVkUGFzc3dvcmQiLCJFbmNyeXB0aW9uU2VydmljZSIsImdlbmVyYXRlQmNyeXB0UGFzc3dvcmQiLCJ1c2VyVHlwZSIsIm1vbmdvSW5zZXJ0T25lIiwiZ2V0VXNlckRldGFpbHMiLCJzZWxlY3RDb25kaXRpb24iLCJwcm9qZWN0Q29uZGl0aW9uIiwiYWx0ZXJuYXRlTW9iaWxlTm8iLCJlbWFpbCIsInVwZGF0ZVVzZXJEZXRhaWxzIiwidXBkYXRlQ29uZGl0aW9uIiwiJHNldCIsIm1vbmdvVXBkYXRlT25lIl0sInNvdXJjZVJvb3QiOiIvVXNlcnMvcmFtaXJlZGR5Y2hhcml0aGEvbWljcm9zZXJ2aWNlcy9zYW1wbGUtbWljcm8tc2VydmljZS9zZXJ2aWNlcy8iLCJzb3VyY2VzIjpbIlVzZXJTZXJ2aWNlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIEVycm9yVXRpbHMgZnJvbSBcIi4uL2Vycm9ycy9FcnJvclV0aWxzXCI7XG5pbXBvcnQgKiBhcyBBYnN0cmFjdE1vZGVscyBmcm9tIFwiLi4vbW9kZWxzL0Fic3RyYWN0TW9kZWxzXCI7XG5pbXBvcnQgKiBhcyBFbmNyeXB0aW9uU2VydmljZSBmcm9tIFwiLi9FbmNyeXB0aW9uU2VydmljZVwiO1xuXG5pbXBvcnQgeyBVc2VycywgQ2xpZW50cyB9IGZyb20gXCIuLi9tb2RlbHMvbWFpbkRiU2NoZW1hL2luZGV4XCI7XG5cbmFzeW5jIGZ1bmN0aW9uIGdldENsaWVudElkRnJvbUFwaUtleShhcGlLZXkpIHtcbiAgY29uc3QgZmluZENvbmRpdGlvbiA9IHtcbiAgICBtZXRyb19hdXRoX2tleTogYXBpS2V5LFxuICB9O1xuICBjb25zdCBjbGllbnRPYmogPSBhd2FpdCBBYnN0cmFjdE1vZGVscy5tb25nb0ZpbmRPbmUoQ2xpZW50cywgZmluZENvbmRpdGlvbik7XG4gIGNvbnN0IGNsaWVudElkID0gY2xpZW50T2JqLl9pZDtcbiAgcmV0dXJuIGNsaWVudElkO1xufVxuXG5leHBvcnQgY29uc3QgcmVnaXN0ZXJVc2VyID0gYXN5bmMgKHVzZXJEZXRhaWxzLCBjbGllbnREZXRhaWxzKSA9PiB7XG4gIGNvbnN0IHtcbiAgICBtb2JpbGVObywgcGFzc3dvcmQsIGZpcnN0TmFtZSwgbGFzdE5hbWUsXG4gIH0gPSB1c2VyRGV0YWlscztcbiAgY29uc3QgZmluZENvbmRpdGlvbiA9IHtcbiAgICBtb2JpbGVObyxcbiAgfTtcbiAgbGV0IHVzZXJPYmogPSBhd2FpdCBBYnN0cmFjdE1vZGVscy5tb25nb0ZpbmRPbmUoVXNlcnMsIGZpbmRDb25kaXRpb24pO1xuICBpZiAodXNlck9iaikge1xuICAgIHRocm93IEVycm9yVXRpbHMuRGF0YUFscmVhZHlFeGlzdHMoKTtcbiAgfSBlbHNlIHtcbiAgICBjb25zdCBiY3J5cHRlZFBhc3N3b3JkID0gRW5jcnlwdGlvblNlcnZpY2UuZ2VuZXJhdGVCY3J5cHRQYXNzd29yZChwYXNzd29yZCk7XG4gICAgY29uc3QgY2xpZW50SWQgPSBhd2FpdCBnZXRDbGllbnRJZEZyb21BcGlLZXkoY2xpZW50RGV0YWlscy5hcGlLZXkpO1xuICAgIHVzZXJPYmogPSB7XG4gICAgICBtb2JpbGVObyxcbiAgICAgIGZpcnN0TmFtZSxcbiAgICAgIGxhc3ROYW1lLFxuICAgICAgcGFzc3dvcmQ6IGJjcnlwdGVkUGFzc3dvcmQsXG4gICAgICBjbGllbnRJZCxcbiAgICAgIHVzZXJUeXBlOiBcInVzZXJcIixcbiAgICB9O1xuICAgIGF3YWl0IEFic3RyYWN0TW9kZWxzLm1vbmdvSW5zZXJ0T25lKFVzZXJzLCB1c2VyT2JqKTtcbiAgICBkZWxldGUgdXNlck9iai5wYXNzd29yZDtcbiAgICByZXR1cm4gdXNlck9iajtcbiAgfVxufTtcblxuZXhwb3J0IGNvbnN0IGdldFVzZXJEZXRhaWxzID0gYXN5bmMgKG1vYmlsZU5vKSA9PiB7XG4gIGNvbnN0IHNlbGVjdENvbmRpdGlvbiA9IHtcbiAgICBtb2JpbGVObyxcbiAgfTtcbiAgY29uc3QgcHJvamVjdENvbmRpdGlvbiA9IHtcbiAgICBfaWQ6IDAsXG4gICAgbW9iaWxlTm86IDEsXG4gICAgZmlyc3ROYW1lOiAxLFxuICAgIGxhc3ROYW1lOiAxLFxuICAgIGFsdGVybmF0ZU1vYmlsZU5vOiAxLFxuICAgIGVtYWlsOiAxLFxuICB9O1xuICBjb25zdCB1c2VyT2JqID0gYXdhaXQgQWJzdHJhY3RNb2RlbHMubW9uZ29GaW5kT25lKFxuICAgIFVzZXJzLFxuICAgIHNlbGVjdENvbmRpdGlvbixcbiAgICBwcm9qZWN0Q29uZGl0aW9uLFxuICApO1xuICByZXR1cm4gdXNlck9iajtcbn07XG5cbmV4cG9ydCBjb25zdCB1cGRhdGVVc2VyRGV0YWlscyA9IGFzeW5jICh1c2VyRGV0YWlscykgPT4ge1xuICBjb25zdCB7XG4gICAgZmlyc3ROYW1lLCBsYXN0TmFtZSwgYWx0ZXJuYXRlTW9iaWxlTm8sIGVtYWlsLCBtb2JpbGVObyxcbiAgfSA9IHVzZXJEZXRhaWxzO1xuICBjb25zdCBzZWxlY3RDb25kaXRpb24gPSB7XG4gICAgbW9iaWxlTm8sXG4gIH07XG4gIGNvbnN0IHVwZGF0ZUNvbmRpdGlvbiA9IHtcbiAgICAkc2V0OiB7XG4gICAgICBmaXJzdE5hbWUsXG4gICAgICBsYXN0TmFtZSxcbiAgICAgIGFsdGVybmF0ZU1vYmlsZU5vLFxuICAgICAgZW1haWwsXG4gICAgfSxcbiAgfTtcbiAgYXdhaXQgQWJzdHJhY3RNb2RlbHMubW9uZ29VcGRhdGVP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","map":{"version":3,"names":["getClientIdFromApiKey","apiKey","findCondition","metro_auth_key","clientObj","AbstractModels","mongoFindOne","Clients","clientId","_id","registerUser","userDetails","clientDetails","mobileNo","password","firstName","lastName","userObj","Users","ErrorUtils","DataAlreadyExists","bcryptedPassword","EncryptionService","generateBcryptPassword","userType","mongoInsertOne","getUserDetails","selectCondition","projectCondition","alternateMobileNo","email","updateUserDetails","updateCondition","$set","mongoUpdateOne"],"sourceRoot":"/Users/ramireddycharitha/microservices/sample-micro-service/services/","sources":["UserService.js"],"sourcesContent":["import * as ErrorUtils from \"../errors/ErrorUtils\";\nimport * as AbstractModels from \"../models/AbstractModels\";\nimport * as EncryptionService from \"./EncryptionService\";\n\nimport { Users, Clients } from \"../models/mainDbSchema/index\";\n\nasync function getClientIdFromApiKey(apiKey) {\n  const findCondition = {\n    metro_auth_key: apiKey,\n  };\n  const clientObj = await AbstractModels.mongoFindOne(Clients, findCondition);\n  const clientId = clientObj._id;\n  return clientId;\n}\n\nexport const registerUser = async (userDetails, clientDetails) => {\n  const {\n    mobileNo, password, firstName, lastName,\n  } = userDetails;\n  const findCondition = {\n    mobileNo,\n  };\n  let userObj = await AbstractModels.mongoFindOne(Users, findCondition);\n  if (userObj) {\n    throw ErrorUtils.DataAlreadyExists();\n  } else {\n    const bcryptedPassword = EncryptionService.generateBcryptPassword(password);\n    const clientId = await getClientIdFromApiKey(clientDetails.apiKey);\n    userObj = {\n      mobileNo,\n      firstName,\n      lastName,\n      password: bcryptedPassword,\n      clientId,\n      userType: \"user\",\n    };\n    await AbstractModels.mongoInsertOne(Users, userObj);\n    delete userObj.password;\n    return userObj;\n  }\n};\n\nexport const getUserDetails = async (mobileNo) => {\n  const selectCondition = {\n    mobileNo,\n  };\n  const projectCondition = {\n    _id: 0,\n    mobileNo: 1,\n    firstName: 1,\n    lastName: 1,\n    alternateMobileNo: 1,\n    email: 1,\n  };\n  const userObj = await AbstractModels.mongoFindOne(\n    Users,\n    selectCondition,\n    projectCondition,\n  );\n  return userObj;\n};\n\nexport const updateUserDetails = async (userDetails) => {\n  const {\n    firstName, lastName, alternateMobileNo, email, mobileNo,\n  } = userDetails;\n  const selectCondition = {\n    mobileNo,\n  };\n  const updateCondition = {\n    $set: {\n      firstName,\n      lastName,\n      alternateMobileNo,\n      email,\n    },\n  };\n  await AbstractModels.mongoUpdateOne(Users, selectCondition, updateCondition);\n};\n"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;AAEA;;;;;;AAEA,eAAeA,qBAAf,CAAqCC,MAArC,EAA6C;EAC3C,MAAMC,aAAa,GAAG;IACpBC,cAAc,EAAEF;EADI,CAAtB;EAGA,MAAMG,SAAS,GAAG,MAAMC,cAAc,CAACC,YAAf,CAA4BC,cAA5B,EAAqCL,aAArC,CAAxB;EACA,MAAMM,QAAQ,GAAGJ,SAAS,CAACK,GAA3B;EACA,OAAOD,QAAP;AACD;;AAEM,MAAME,YAAY,GAAG,OAAOC,WAAP,EAAoBC,aAApB,KAAsC;EAChE,MAAM;IACJC,QADI;IACMC,QADN;IACgBC,SADhB;IAC2BC;EAD3B,IAEFL,WAFJ;EAGA,MAAMT,aAAa,GAAG;IACpBW;EADoB,CAAtB;EAGA,IAAII,OAAO,GAAG,MAAMZ,cAAc,CAACC,YAAf,CAA4BY,YAA5B,EAAmChB,aAAnC,CAApB;;EACA,IAAIe,OAAJ,EAAa;IACX,MAAME,UAAU,CAACC,iBAAX,EAAN;EACD,CAFD,MAEO;IACL,MAAMC,gBAAgB,GAAGC,iBAAiB,CAACC,sBAAlB,CAAyCT,QAAzC,CAAzB;IACA,MAAMN,QAAQ,GAAG,MAAMR,qBAAqB,CAACY,aAAa,CAACX,MAAf,CAA5C;IACAgB,OAAO,GAAG;MACRJ,QADQ;MAERE,SAFQ;MAGRC,QAHQ;MAIRF,QAAQ,EAAEO,gBAJF;MAKRb,QALQ;MAMRgB,QAAQ,EAAE;IANF,CAAV;IAQA,MAAMnB,cAAc,CAACoB,cAAf,CAA8BP,YAA9B,EAAqCD,OAArC,CAAN;IACA,OAAOA,OAAO,CAACH,QAAf;IACA,OAAOG,OAAP;EACD;AACF,CAzBM;;;;AA2BA,MAAMS,cAAc,GAAG,MAAOb,QAAP,IAAoB;EAChD,MAAMc,eAAe,GAAG;IACtBd;EADsB,CAAxB;EAGA,MAAMe,gBAAgB,GAAG;IACvBnB,GAAG,EAAE,CADkB;IAEvBI,QAAQ,EAAE,CAFa;IAGvBE,SAAS,EAAE,CAHY;IAIvBC,QAAQ,EAAE,CAJa;IAKvBa,iBAAiB,EAAE,CALI;IAMvBC,KAAK,EAAE;EANgB,CAAzB;EAQA,MAAMb,OAAO,GAAG,MAAMZ,cAAc,CAACC,YAAf,CACpBY,YADoB,EAEpBS,eAFoB,EAGpBC,gBAHoB,CAAtB;EAKA,OAAOX,OAAP;AACD,CAlBM;;;;AAoBA,MAAMc,iBAAiB,GAAG,MAAOpB,WAAP,IAAuB;EACtD,MAAM;IACJI,SADI;IACOC,QADP;IACiBa,iBADjB;IACoCC,KADpC;IAC2CjB;EAD3C,IAEFF,WAFJ;EAGA,MAAMgB,eAAe,GAAG;IACtBd;EADsB,CAAxB;EAGA,MAAMmB,eAAe,GAAG;IACtBC,IAAI,EAAE;MACJlB,SADI;MAEJC,QAFI;MAGJa,iBAHI;MAIJC;IAJI;EADgB,CAAxB;EAQA,MAAMzB,cAAc,CAAC6B,cAAf,CAA8BhB,YAA9B,EAAqCS,eAArC,EAAsDK,eAAtD,CAAN;AACD,CAhBM"}},"mtime":1653643634188},"{\"assumptions\":{},\"sourceRoot\":\"/Users/ramireddycharitha/microservices/sample-micro-service/services/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/ramireddycharitha/microservices/sample-micro-service\",\"filename\":\"/Users/ramireddycharitha/microservices/sample-micro-service/services/EncryptionService.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"default\",\"root\":\"/Users/ramireddycharitha/microservices/sample-micro-service\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.17.10:default":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.generateBcryptPassword = exports.compareBcryptPassword = void 0;\n\nvar _bcryptjs = _interopRequireDefault(require(\"bcryptjs\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst generateBcryptPassword = password => {\n  const salt = _bcryptjs.default.genSaltSync(10);\n\n  const hash = _bcryptjs.default.hashSync(password, salt);\n\n  return hash;\n};\n\nexports.generateBcryptPassword = generateBcryptPassword;\n\nconst compareBcryptPassword = (password, bcryptedPassword) => {\n  const isValid = _bcryptjs.default.compareSync(password, bcryptedPassword);\n\n  return isValid;\n};\n\nexports.compareBcryptPassword = compareBcryptPassword;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJnZW5lcmF0ZUJjcnlwdFBhc3N3b3JkIiwicGFzc3dvcmQiLCJzYWx0IiwiYmNyeXB0IiwiZ2VuU2FsdFN5bmMiLCJoYXNoIiwiaGFzaFN5bmMiLCJjb21wYXJlQmNyeXB0UGFzc3dvcmQiLCJiY3J5cHRlZFBhc3N3b3JkIiwiaXNWYWxpZCIsImNvbXBhcmVTeW5jIl0sInNvdXJjZVJvb3QiOiIvVXNlcnMvcmFtaXJlZGR5Y2hhcml0aGEvbWljcm9zZXJ2aWNlcy9zYW1wbGUtbWljcm8tc2VydmljZS9zZXJ2aWNlcy8iLCJzb3VyY2VzIjpbIkVuY3J5cHRpb25TZXJ2aWNlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBiY3J5cHQgZnJvbSBcImJjcnlwdGpzXCI7XG5cbmV4cG9ydCBjb25zdCBnZW5lcmF0ZUJjcnlwdFBhc3N3b3JkID0gKHBhc3N3b3JkKSA9PiB7XG4gIGNvbnN0IHNhbHQgPSBiY3J5cHQuZ2VuU2FsdFN5bmMoMTApO1xuICBjb25zdCBoYXNoID0gYmNyeXB0Lmhhc2hTeW5jKHBhc3N3b3JkLCBzYWx0KTtcbiAgcmV0dXJuIGhhc2g7XG59O1xuXG5leHBvcnQgY29uc3QgY29tcGFyZUJjcnlwdFBhc3N3b3JkID0gKHBhc3N3b3JkLCBiY3J5cHRlZFBhc3N3b3JkKSA9PiB7XG4gIGNvbnN0IGlzVmFsaWQgPSBiY3J5cHQuY29tcGFyZVN5bmMocGFzc3dvcmQsIGJjcnlwdGVkUGFzc3dvcmQpO1xuICByZXR1cm4gaXNWYWxpZDtcbn07XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTs7OztBQUVPLE1BQU1BLHNCQUFzQixHQUFJQyxRQUFELElBQWM7RUFDbEQsTUFBTUMsSUFBSSxHQUFHQyxrQkFBT0MsV0FBUCxDQUFtQixFQUFuQixDQUFiOztFQUNBLE1BQU1DLElBQUksR0FBR0Ysa0JBQU9HLFFBQVAsQ0FBZ0JMLFFBQWhCLEVBQTBCQyxJQUExQixDQUFiOztFQUNBLE9BQU9HLElBQVA7QUFDRCxDQUpNOzs7O0FBTUEsTUFBTUUscUJBQXFCLEdBQUcsQ0FBQ04sUUFBRCxFQUFXTyxnQkFBWCxLQUFnQztFQUNuRSxNQUFNQyxPQUFPLEdBQUdOLGtCQUFPTyxXQUFQLENBQW1CVCxRQUFuQixFQUE2Qk8sZ0JBQTdCLENBQWhCOztFQUNBLE9BQU9DLE9BQVA7QUFDRCxDQUhNIn0=","map":{"version":3,"names":["generateBcryptPassword","password","salt","bcrypt","genSaltSync","hash","hashSync","compareBcryptPassword","bcryptedPassword","isValid","compareSync"],"sourceRoot":"/Users/ramireddycharitha/microservices/sample-micro-service/services/","sources":["EncryptionService.js"],"sourcesContent":["import bcrypt from \"bcryptjs\";\n\nexport const generateBcryptPassword = (password) => {\n  const salt = bcrypt.genSaltSync(10);\n  const hash = bcrypt.hashSync(password, salt);\n  return hash;\n};\n\nexport const compareBcryptPassword = (password, bcryptedPassword) => {\n  const isValid = bcrypt.compareSync(password, bcryptedPassword);\n  return isValid;\n};\n"],"mappings":";;;;;;;AAAA;;;;AAEO,MAAMA,sBAAsB,GAAIC,QAAD,IAAc;EAClD,MAAMC,IAAI,GAAGC,kBAAOC,WAAP,CAAmB,EAAnB,CAAb;;EACA,MAAMC,IAAI,GAAGF,kBAAOG,QAAP,CAAgBL,QAAhB,EAA0BC,IAA1B,CAAb;;EACA,OAAOG,IAAP;AACD,CAJM;;;;AAMA,MAAME,qBAAqB,GAAG,CAACN,QAAD,EAAWO,gBAAX,KAAgC;EACnE,MAAMC,OAAO,GAAGN,kBAAOO,WAAP,CAAmBT,QAAnB,EAA6BO,gBAA7B,CAAhB;;EACA,OAAOC,OAAP;AACD,CAHM"}},"mtime":1653643634188},"{\"assumptions\":{},\"sourceRoot\":\"/Users/ramireddycharitha/microservices/sample-micro-service/routes/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/ramireddycharitha/microservices/sample-micro-service\",\"filename\":\"/Users/ramireddycharitha/microservices/sample-micro-service/routes/Health.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"default\",\"root\":\"/Users/ramireddycharitha/microservices/sample-micro-service\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.17.10:default":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _express = require(\"express\");\n\nvar _HealthController = _interopRequireDefault(require(\"../controllers/HealthController\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst router = (0, _express.Router)();\nrouter.get(\"/health-check\", _HealthController.default);\nvar _default = router;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJyb3V0ZXIiLCJnZXQiLCJoZWFsdGhDaGVjayJdLCJzb3VyY2VSb290IjoiL1VzZXJzL3JhbWlyZWRkeWNoYXJpdGhhL21pY3Jvc2VydmljZXMvc2FtcGxlLW1pY3JvLXNlcnZpY2Uvcm91dGVzLyIsInNvdXJjZXMiOlsiSGVhbHRoLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFJvdXRlciB9IGZyb20gXCJleHByZXNzXCI7XG5pbXBvcnQgaGVhbHRoQ2hlY2sgZnJvbSBcIi4uL2NvbnRyb2xsZXJzL0hlYWx0aENvbnRyb2xsZXJcIjtcblxuY29uc3Qgcm91dGVyID0gUm91dGVyKCk7XG5cbnJvdXRlci5nZXQoXCIvaGVhbHRoLWNoZWNrXCIsIGhlYWx0aENoZWNrKTtcbmV4cG9ydCBkZWZhdWx0IHJvdXRlcjtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOztBQUNBOzs7O0FBRUEsTUFBTUEsTUFBTSxHQUFHLHNCQUFmO0FBRUFBLE1BQU0sQ0FBQ0MsR0FBUCxDQUFXLGVBQVgsRUFBNEJDLHlCQUE1QjtlQUNlRixNIn0=","map":{"version":3,"names":["router","get","healthCheck"],"sourceRoot":"/Users/ramireddycharitha/microservices/sample-micro-service/routes/","sources":["Health.js"],"sourcesContent":["import { Router } from \"express\";\nimport healthCheck from \"../controllers/HealthController\";\n\nconst router = Router();\n\nrouter.get(\"/health-check\", healthCheck);\nexport default router;\n"],"mappings":";;;;;;;AAAA;;AACA;;;;AAEA,MAAMA,MAAM,GAAG,sBAAf;AAEAA,MAAM,CAACC,GAAP,CAAW,eAAX,EAA4BC,yBAA5B;eACeF,M"}},"mtime":1653643634187},"{\"assumptions\":{},\"sourceRoot\":\"/Users/ramireddycharitha/microservices/sample-micro-service/controllers/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/ramireddycharitha/microservices/sample-micro-service\",\"filename\":\"/Users/ramireddycharitha/microservices/sample-micro-service/controllers/HealthController.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"default\",\"root\":\"/Users/ramireddycharitha/microservices/sample-micro-service\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.17.10:default":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nconst healthCheck = async (req, res, next) => {\n  res.data = {};\n  log(\"info\", \"health check\");\n  next();\n};\n\nvar _default = healthCheck;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJoZWFsdGhDaGVjayIsInJlcSIsInJlcyIsIm5leHQiLCJkYXRhIiwibG9nIl0sInNvdXJjZVJvb3QiOiIvVXNlcnMvcmFtaXJlZGR5Y2hhcml0aGEvbWljcm9zZXJ2aWNlcy9zYW1wbGUtbWljcm8tc2VydmljZS9jb250cm9sbGVycy8iLCJzb3VyY2VzIjpbIkhlYWx0aENvbnRyb2xsZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgaGVhbHRoQ2hlY2sgPSBhc3luYyAocmVxLCByZXMsIG5leHQpID0+IHtcbiAgcmVzLmRhdGEgPSB7fTtcbiAgbG9nKFwiaW5mb1wiLCBcImhlYWx0aCBjaGVja1wiKTtcbiAgbmV4dCgpO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgaGVhbHRoQ2hlY2s7XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQSxNQUFNQSxXQUFXLEdBQUcsT0FBT0MsR0FBUCxFQUFZQyxHQUFaLEVBQWlCQyxJQUFqQixLQUEwQjtFQUM1Q0QsR0FBRyxDQUFDRSxJQUFKLEdBQVcsRUFBWDtFQUNBQyxHQUFHLENBQUMsTUFBRCxFQUFTLGNBQVQsQ0FBSDtFQUNBRixJQUFJO0FBQ0wsQ0FKRDs7ZUFNZUgsVyJ9","map":{"version":3,"names":["healthCheck","req","res","next","data","log"],"sourceRoot":"/Users/ramireddycharitha/microservices/sample-micro-service/controllers/","sources":["HealthController.js"],"sourcesContent":["const healthCheck = async (req, res, next) => {\n  res.data = {};\n  log(\"info\", \"health check\");\n  next();\n};\n\nexport default healthCheck;\n"],"mappings":";;;;;;;AAAA,MAAMA,WAAW,GAAG,OAAOC,GAAP,EAAYC,GAAZ,EAAiBC,IAAjB,KAA0B;EAC5CD,GAAG,CAACE,IAAJ,GAAW,EAAX;EACAC,GAAG,CAAC,MAAD,EAAS,cAAT,CAAH;EACAF,IAAI;AACL,CAJD;;eAMeH,W"}},"mtime":1653643634179},"{\"assumptions\":{},\"sourceRoot\":\"/Users/ramireddycharitha/microservices/sample-micro-service/middlewares/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/ramireddycharitha/microservices/sample-micro-service\",\"filename\":\"/Users/ramireddycharitha/microservices/sample-micro-service/middlewares/RequestLogger.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"default\",\"root\":\"/Users/ramireddycharitha/microservices/sample-micro-service\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.17.10:default":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = exports.auditLogRequest = void 0;\n\nvar AbstractModels = _interopRequireWildcard(require(\"../models/AbstractModels\"));\n\nvar Auth = _interopRequireWildcard(require(\"./Auth\"));\n\nvar _index = require(\"../models/analyticsDbSchema/index\");\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nconst auditLogRequest = req => {\n  const doc = {\n    originalUrl: req.originalUrl,\n    method: req.method,\n    userAgent: req.headers[\"user-agent\"],\n    ipAddress: req.headers[\"x-forwarded-for\"] || req.connection.remoteAddress,\n    correlationId: req.headers.correlationId,\n    eventType: req.routeObj.eventType,\n    requestBody: req.body\n  };\n  const apiKey = req.header(\"api-key\");\n\n  if (apiKey) {\n    doc.apiKey = apiKey;\n  }\n\n  AbstractModels.mongoInsertOne(_index.AuditLogs, doc);\n};\n\nexports.auditLogRequest = auditLogRequest;\n\nconst reqLog = (req, res, next) => {\n  const routeObj = Auth.setMetrics(req, res);\n  req.routeObj = routeObj;\n\n  if (routeObj.routeCategory !== \"healthCheckRoutes\") {\n    next();\n  } else {\n    next();\n  }\n};\n\nvar _default = reqLog;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJhdWRpdExvZ1JlcXVlc3QiLCJyZXEiLCJkb2MiLCJvcmlnaW5hbFVybCIsIm1ldGhvZCIsInVzZXJBZ2VudCIsImhlYWRlcnMiLCJpcEFkZHJlc3MiLCJjb25uZWN0aW9uIiwicmVtb3RlQWRkcmVzcyIsImNvcnJlbGF0aW9uSWQiLCJldmVudFR5cGUiLCJyb3V0ZU9iaiIsInJlcXVlc3RCb2R5IiwiYm9keSIsImFwaUtleSIsImhlYWRlciIsIkFic3RyYWN0TW9kZWxzIiwibW9uZ29JbnNlcnRPbmUiLCJBdWRpdExvZ3MiLCJyZXFMb2ciLCJyZXMiLCJuZXh0IiwiQXV0aCIsInNldE1ldHJpY3MiLCJyb3V0ZUNhdGVnb3J5Il0sInNvdXJjZVJvb3QiOiIvVXNlcnMvcmFtaXJlZGR5Y2hhcml0aGEvbWljcm9zZXJ2aWNlcy9zYW1wbGUtbWljcm8tc2VydmljZS9taWRkbGV3YXJlcy8iLCJzb3VyY2VzIjpbIlJlcXVlc3RMb2dnZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgQWJzdHJhY3RNb2RlbHMgZnJvbSBcIi4uL21vZGVscy9BYnN0cmFjdE1vZGVsc1wiO1xuaW1wb3J0ICogYXMgQXV0aCBmcm9tIFwiLi9BdXRoXCI7XG5cbmltcG9ydCB7IEF1ZGl0TG9ncyB9IGZyb20gXCIuLi9tb2RlbHMvYW5hbHl0aWNzRGJTY2hlbWEvaW5kZXhcIjtcblxuZXhwb3J0IGNvbnN0IGF1ZGl0TG9nUmVxdWVzdCA9IChyZXEpID0+IHtcbiAgY29uc3QgZG9jID0ge1xuICAgIG9yaWdpbmFsVXJsOiByZXEub3JpZ2luYWxVcmwsXG4gICAgbWV0aG9kOiByZXEubWV0aG9kLFxuICAgIHVzZXJBZ2VudDogcmVxLmhlYWRlcnNbXCJ1c2VyLWFnZW50XCJdLFxuICAgIGlwQWRkcmVzczogcmVxLmhlYWRlcnNbXCJ4LWZvcndhcmRlZC1mb3JcIl0gfHwgcmVxLmNvbm5lY3Rpb24ucmVtb3RlQWRkcmVzcyxcbiAgICBjb3JyZWxhdGlvbklkOiByZXEuaGVhZGVycy5jb3JyZWxhdGlvbklkLFxuICAgIGV2ZW50VHlwZTogcmVxLnJvdXRlT2JqLmV2ZW50VHlwZSxcbiAgICByZXF1ZXN0Qm9keTogcmVxLmJvZHksXG4gIH07XG4gIGNvbnN0IGFwaUtleSA9IHJlcS5oZWFkZXIoXCJhcGkta2V5XCIpO1xuICBpZiAoYXBpS2V5KSB7XG4gICAgZG9jLmFwaUtleSA9IGFwaUtleTtcbiAgfVxuICBBYnN0cmFjdE1vZGVscy5tb25nb0luc2VydE9uZShBdWRpdExvZ3MsIGRvYyk7XG59O1xuXG5jb25zdCByZXFMb2cgPSAocmVxLCByZXMsIG5leHQpID0+IHtcbiAgY29uc3Qgcm91dGVPYmogPSBBdXRoLnNldE1ldHJpY3MocmVxLCByZXMpO1xuICByZXEucm91dGVPYmogPSByb3V0ZU9iajtcbiAgaWYgKHJvdXRlT2JqLnJvdXRlQ2F0ZWdvcnkgIT09IFwiaGVhbHRoQ2hlY2tSb3V0ZXNcIikge1xuICAgIG5leHQoKTtcbiAgfSBlbHNlIHtcbiAgICBuZXh0KCk7XG4gIH1cbn07XG5cbmV4cG9ydCBkZWZhdWx0IHJlcUxvZztcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOztBQUNBOztBQUVBOzs7Ozs7QUFFTyxNQUFNQSxlQUFlLEdBQUlDLEdBQUQsSUFBUztFQUN0QyxNQUFNQyxHQUFHLEdBQUc7SUFDVkMsV0FBVyxFQUFFRixHQUFHLENBQUNFLFdBRFA7SUFFVkMsTUFBTSxFQUFFSCxHQUFHLENBQUNHLE1BRkY7SUFHVkMsU0FBUyxFQUFFSixHQUFHLENBQUNLLE9BQUosQ0FBWSxZQUFaLENBSEQ7SUFJVkMsU0FBUyxFQUFFTixHQUFHLENBQUNLLE9BQUosQ0FBWSxpQkFBWixLQUFrQ0wsR0FBRyxDQUFDTyxVQUFKLENBQWVDLGFBSmxEO0lBS1ZDLGFBQWEsRUFBRVQsR0FBRyxDQUFDSyxPQUFKLENBQVlJLGFBTGpCO0lBTVZDLFNBQVMsRUFBRVYsR0FBRyxDQUFDVyxRQUFKLENBQWFELFNBTmQ7SUFPVkUsV0FBVyxFQUFFWixHQUFHLENBQUNhO0VBUFAsQ0FBWjtFQVNBLE1BQU1DLE1BQU0sR0FBR2QsR0FBRyxDQUFDZSxNQUFKLENBQVcsU0FBWCxDQUFmOztFQUNBLElBQUlELE1BQUosRUFBWTtJQUNWYixHQUFHLENBQUNhLE1BQUosR0FBYUEsTUFBYjtFQUNEOztFQUNERSxjQUFjLENBQUNDLGNBQWYsQ0FBOEJDLGdCQUE5QixFQUF5Q2pCLEdBQXpDO0FBQ0QsQ0FmTTs7OztBQWlCUCxNQUFNa0IsTUFBTSxHQUFHLENBQUNuQixHQUFELEVBQU1vQixHQUFOLEVBQVdDLElBQVgsS0FBb0I7RUFDakMsTUFBTVYsUUFBUSxHQUFHVyxJQUFJLENBQUNDLFVBQUwsQ0FBZ0J2QixHQUFoQixFQUFxQm9CLEdBQXJCLENBQWpCO0VBQ0FwQixHQUFHLENBQUNXLFFBQUosR0FBZUEsUUFBZjs7RUFDQSxJQUFJQSxRQUFRLENBQUNhLGFBQVQsS0FBMkIsbUJBQS9CLEVBQW9EO0lBQ2xESCxJQUFJO0VBQ0wsQ0FGRCxNQUVPO0lBQ0xBLElBQUk7RUFDTDtBQUNGLENBUkQ7O2VBVWVGLE0ifQ==","map":{"version":3,"names":["auditLogRequest","req","doc","originalUrl","method","userAgent","headers","ipAddress","connection","remoteAddress","correlationId","eventType","routeObj","requestBody","body","apiKey","header","AbstractModels","mongoInsertOne","AuditLogs","reqLog","res","next","Auth","setMetrics","routeCategory"],"sourceRoot":"/Users/ramireddycharitha/microservices/sample-micro-service/middlewares/","sources":["RequestLogger.js"],"sourcesContent":["import * as AbstractModels from \"../models/AbstractModels\";\nimport * as Auth from \"./Auth\";\n\nimport { AuditLogs } from \"../models/analyticsDbSchema/index\";\n\nexport const auditLogRequest = (req) => {\n  const doc = {\n    originalUrl: req.originalUrl,\n    method: req.method,\n    userAgent: req.headers[\"user-agent\"],\n    ipAddress: req.headers[\"x-forwarded-for\"] || req.connection.remoteAddress,\n    correlationId: req.headers.correlationId,\n    eventType: req.routeObj.eventType,\n    requestBody: req.body,\n  };\n  const apiKey = req.header(\"api-key\");\n  if (apiKey) {\n    doc.apiKey = apiKey;\n  }\n  AbstractModels.mongoInsertOne(AuditLogs, doc);\n};\n\nconst reqLog = (req, res, next) => {\n  const routeObj = Auth.setMetrics(req, res);\n  req.routeObj = routeObj;\n  if (routeObj.routeCategory !== \"healthCheckRoutes\") {\n    next();\n  } else {\n    next();\n  }\n};\n\nexport default reqLog;\n"],"mappings":";;;;;;;AAAA;;AACA;;AAEA;;;;;;AAEO,MAAMA,eAAe,GAAIC,GAAD,IAAS;EACtC,MAAMC,GAAG,GAAG;IACVC,WAAW,EAAEF,GAAG,CAACE,WADP;IAEVC,MAAM,EAAEH,GAAG,CAACG,MAFF;IAGVC,SAAS,EAAEJ,GAAG,CAACK,OAAJ,CAAY,YAAZ,CAHD;IAIVC,SAAS,EAAEN,GAAG,CAACK,OAAJ,CAAY,iBAAZ,KAAkCL,GAAG,CAACO,UAAJ,CAAeC,aAJlD;IAKVC,aAAa,EAAET,GAAG,CAACK,OAAJ,CAAYI,aALjB;IAMVC,SAAS,EAAEV,GAAG,CAACW,QAAJ,CAAaD,SANd;IAOVE,WAAW,EAAEZ,GAAG,CAACa;EAPP,CAAZ;EASA,MAAMC,MAAM,GAAGd,GAAG,CAACe,MAAJ,CAAW,SAAX,CAAf;;EACA,IAAID,MAAJ,EAAY;IACVb,GAAG,CAACa,MAAJ,GAAaA,MAAb;EACD;;EACDE,cAAc,CAACC,cAAf,CAA8BC,gBAA9B,EAAyCjB,GAAzC;AACD,CAfM;;;;AAiBP,MAAMkB,MAAM,GAAG,CAACnB,GAAD,EAAMoB,GAAN,EAAWC,IAAX,KAAoB;EACjC,MAAMV,QAAQ,GAAGW,IAAI,CAACC,UAAL,CAAgBvB,GAAhB,EAAqBoB,GAArB,CAAjB;EACApB,GAAG,CAACW,QAAJ,GAAeA,QAAf;;EACA,IAAIA,QAAQ,CAACa,aAAT,KAA2B,mBAA/B,EAAoD;IAClDH,IAAI;EACL,CAFD,MAEO;IACLA,IAAI;EACL;AACF,CARD;;eAUeF,M"}},"mtime":1653643634183},"{\"assumptions\":{},\"sourceRoot\":\"/Users/ramireddycharitha/microservices/sample-micro-service/models/analyticsDbSchema/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/ramireddycharitha/microservices/sample-micro-service\",\"filename\":\"/Users/ramireddycharitha/microservices/sample-micro-service/models/analyticsDbSchema/index.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"default\",\"root\":\"/Users/ramireddycharitha/microservices/sample-micro-service\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.17.10:default":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.conn = exports.AuditLogs = void 0;\n\nvar analyticsDbConnection = _interopRequireWildcard(require(\"../../connections/AnalyticsDb\"));\n\nvar _AuditLogsSchema = _interopRequireDefault(require(\"./AuditLogsSchema\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\n// load schemas\nconst conn = analyticsDbConnection.getDbInstance();\nexports.conn = conn;\nconst AuditLogs = conn.model(\"AuditLogs\", _AuditLogsSchema.default, \"AuditLogs\");\nexports.AuditLogs = AuditLogs;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb25uIiwiYW5hbHl0aWNzRGJDb25uZWN0aW9uIiwiZ2V0RGJJbnN0YW5jZSIsIkF1ZGl0TG9ncyIsIm1vZGVsIiwiQXVkaXRMb2dzU2NoZW1hIl0sInNvdXJjZVJvb3QiOiIvVXNlcnMvcmFtaXJlZGR5Y2hhcml0aGEvbWljcm9zZXJ2aWNlcy9zYW1wbGUtbWljcm8tc2VydmljZS9tb2RlbHMvYW5hbHl0aWNzRGJTY2hlbWEvIiwic291cmNlcyI6WyJpbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyBhbmFseXRpY3NEYkNvbm5lY3Rpb24gZnJvbSBcIi4uLy4uL2Nvbm5lY3Rpb25zL0FuYWx5dGljc0RiXCI7XG4vLyBsb2FkIHNjaGVtYXNcbmltcG9ydCBBdWRpdExvZ3NTY2hlbWEgZnJvbSBcIi4vQXVkaXRMb2dzU2NoZW1hXCI7XG5cbmV4cG9ydCBjb25zdCBjb25uID0gYW5hbHl0aWNzRGJDb25uZWN0aW9uLmdldERiSW5zdGFuY2UoKTtcbmV4cG9ydCBjb25zdCBBdWRpdExvZ3MgPSBjb25uLm1vZGVsKFwiQXVkaXRMb2dzXCIsIEF1ZGl0TG9nc1NjaGVtYSwgXCJBdWRpdExvZ3NcIik7XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTs7QUFFQTs7Ozs7Ozs7QUFEQTtBQUdPLE1BQU1BLElBQUksR0FBR0MscUJBQXFCLENBQUNDLGFBQXRCLEVBQWI7O0FBQ0EsTUFBTUMsU0FBUyxHQUFHSCxJQUFJLENBQUNJLEtBQUwsQ0FBVyxXQUFYLEVBQXdCQyx3QkFBeEIsRUFBeUMsV0FBekMsQ0FBbEIifQ==","map":{"version":3,"names":["conn","analyticsDbConnection","getDbInstance","AuditLogs","model","AuditLogsSchema"],"sourceRoot":"/Users/ramireddycharitha/microservices/sample-micro-service/models/analyticsDbSchema/","sources":["index.js"],"sourcesContent":["import * as analyticsDbConnection from \"../../connections/AnalyticsDb\";\n// load schemas\nimport AuditLogsSchema from \"./AuditLogsSchema\";\n\nexport const conn = analyticsDbConnection.getDbInstance();\nexport const AuditLogs = conn.model(\"AuditLogs\", AuditLogsSchema, \"AuditLogs\");\n"],"mappings":";;;;;;;AAAA;;AAEA;;;;;;;;AADA;AAGO,MAAMA,IAAI,GAAGC,qBAAqB,CAACC,aAAtB,EAAb;;AACA,MAAMC,SAAS,GAAGH,IAAI,CAACI,KAAL,CAAW,WAAX,EAAwBC,wBAAxB,EAAyC,WAAzC,CAAlB"}},"mtime":1653643634185},"{\"assumptions\":{},\"sourceRoot\":\"/Users/ramireddycharitha/microservices/sample-micro-service/models/analyticsDbSchema/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/ramireddycharitha/microservices/sample-micro-service\",\"filename\":\"/Users/ramireddycharitha/microservices/sample-micro-service/models/analyticsDbSchema/AuditLogsSchema.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"default\",\"root\":\"/Users/ramireddycharitha/microservices/sample-micro-service\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.17.10:default":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _mongoose = require(\"mongoose\");\n\nconst AuditLogsSchema = new _mongoose.Schema({\n  originalUrl: {\n    type: String,\n    required: true\n  },\n  method: {\n    type: String,\n    required: true\n  },\n  userAgent: {\n    type: String,\n    required: true\n  },\n  ipAddress: {\n    type: String,\n    required: true\n  },\n  correlationId: {\n    type: String,\n    required: true\n  },\n  status: {\n    type: String\n  },\n  responseTime: {\n    type: Number\n  },\n  username: {\n    type: String\n  },\n  apiKey: {\n    type: String\n  },\n  clientId: {\n    type: String\n  },\n  eventType: {\n    type: String\n  },\n  requestBody: {\n    type: Object\n  },\n  response: {\n    type: Object\n  },\n  createdAt: {\n    type: Date,\n    default: Date.now\n  },\n  updatedAt: {\n    type: Date,\n    default: Date.now\n  }\n});\nvar _default = AuditLogsSchema;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJBdWRpdExvZ3NTY2hlbWEiLCJTY2hlbWEiLCJvcmlnaW5hbFVybCIsInR5cGUiLCJTdHJpbmciLCJyZXF1aXJlZCIsIm1ldGhvZCIsInVzZXJBZ2VudCIsImlwQWRkcmVzcyIsImNvcnJlbGF0aW9uSWQiLCJzdGF0dXMiLCJyZXNwb25zZVRpbWUiLCJOdW1iZXIiLCJ1c2VybmFtZSIsImFwaUtleSIsImNsaWVudElkIiwiZXZlbnRUeXBlIiwicmVxdWVzdEJvZHkiLCJPYmplY3QiLCJyZXNwb25zZSIsImNyZWF0ZWRBdCIsIkRhdGUiLCJkZWZhdWx0Iiwibm93IiwidXBkYXRlZEF0Il0sInNvdXJjZVJvb3QiOiIvVXNlcnMvcmFtaXJlZGR5Y2hhcml0aGEvbWljcm9zZXJ2aWNlcy9zYW1wbGUtbWljcm8tc2VydmljZS9tb2RlbHMvYW5hbHl0aWNzRGJTY2hlbWEvIiwic291cmNlcyI6WyJBdWRpdExvZ3NTY2hlbWEuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgU2NoZW1hIH0gZnJvbSBcIm1vbmdvb3NlXCI7XG5cbmNvbnN0IEF1ZGl0TG9nc1NjaGVtYSA9IG5ldyBTY2hlbWEoe1xuICBvcmlnaW5hbFVybDoge1xuICAgIHR5cGU6IFN0cmluZyxcbiAgICByZXF1aXJlZDogdHJ1ZSxcbiAgfSxcbiAgbWV0aG9kOiB7XG4gICAgdHlwZTogU3RyaW5nLFxuICAgIHJlcXVpcmVkOiB0cnVlLFxuICB9LFxuICB1c2VyQWdlbnQ6IHtcbiAgICB0eXBlOiBTdHJpbmcsXG4gICAgcmVxdWlyZWQ6IHRydWUsXG4gIH0sXG4gIGlwQWRkcmVzczoge1xuICAgIHR5cGU6IFN0cmluZyxcbiAgICByZXF1aXJlZDogdHJ1ZSxcbiAgfSxcbiAgY29ycmVsYXRpb25JZDoge1xuICAgIHR5cGU6IFN0cmluZyxcbiAgICByZXF1aXJlZDogdHJ1ZSxcbiAgfSxcbiAgc3RhdHVzOiB7XG4gICAgdHlwZTogU3RyaW5nLFxuICB9LFxuICByZXNwb25zZVRpbWU6IHtcbiAgICB0eXBlOiBOdW1iZXIsXG4gIH0sXG4gIHVzZXJuYW1lOiB7XG4gICAgdHlwZTogU3RyaW5nLFxuICB9LFxuICBhcGlLZXk6IHtcbiAgICB0eXBlOiBTdHJpbmcsXG4gIH0sXG4gIGNsaWVudElkOiB7XG4gICAgdHlwZTogU3RyaW5nLFxuICB9LFxuICBldmVudFR5cGU6IHtcbiAgICB0eXBlOiBTdHJpbmcsXG4gIH0sXG4gIHJlcXVlc3RCb2R5OiB7XG4gICAgdHlwZTogT2JqZWN0LFxuICB9LFxuICByZXNwb25zZToge1xuICAgIHR5cGU6IE9iamVjdCxcbiAgfSxcbiAgY3JlYXRlZEF0OiB7XG4gICAgdHlwZTogRGF0ZSxcbiAgICBkZWZhdWx0OiBEYXRlLm5vdyxcbiAgfSxcbiAgdXBkYXRlZEF0OiB7XG4gICAgdHlwZTogRGF0ZSxcbiAgICBkZWZhdWx0OiBEYXRlLm5vdyxcbiAgfSxcbn0pO1xuXG5leHBvcnQgZGVmYXVsdCBBdWRpdExvZ3NTY2hlbWE7XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTs7QUFFQSxNQUFNQSxlQUFlLEdBQUcsSUFBSUMsZ0JBQUosQ0FBVztFQUNqQ0MsV0FBVyxFQUFFO0lBQ1hDLElBQUksRUFBRUMsTUFESztJQUVYQyxRQUFRLEVBQUU7RUFGQyxDQURvQjtFQUtqQ0MsTUFBTSxFQUFFO0lBQ05ILElBQUksRUFBRUMsTUFEQTtJQUVOQyxRQUFRLEVBQUU7RUFGSixDQUx5QjtFQVNqQ0UsU0FBUyxFQUFFO0lBQ1RKLElBQUksRUFBRUMsTUFERztJQUVUQyxRQUFRLEVBQUU7RUFGRCxDQVRzQjtFQWFqQ0csU0FBUyxFQUFFO0lBQ1RMLElBQUksRUFBRUMsTUFERztJQUVUQyxRQUFRLEVBQUU7RUFGRCxDQWJzQjtFQWlCakNJLGFBQWEsRUFBRTtJQUNiTixJQUFJLEVBQUVDLE1BRE87SUFFYkMsUUFBUSxFQUFFO0VBRkcsQ0FqQmtCO0VBcUJqQ0ssTUFBTSxFQUFFO0lBQ05QLElBQUksRUFBRUM7RUFEQSxDQXJCeUI7RUF3QmpDTyxZQUFZLEVBQUU7SUFDWlIsSUFBSSxFQUFFUztFQURNLENBeEJtQjtFQTJCakNDLFFBQVEsRUFBRTtJQUNSVixJQUFJLEVBQUVDO0VBREUsQ0EzQnVCO0VBOEJqQ1UsTUFBTSxFQUFFO0lBQ05YLElBQUksRUFBRUM7RUFEQSxDQTlCeUI7RUFpQ2pDVyxRQUFRLEVBQUU7SUFDUlosSUFBSSxFQUFFQztFQURFLENBakN1QjtFQW9DakNZLFNBQVMsRUFBRTtJQUNUYixJQUFJLEVBQUVDO0VBREcsQ0FwQ3NCO0VBdUNqQ2EsV0FBVyxFQUFFO0lBQ1hkLElBQUksRUFBRWU7RUFESyxDQXZDb0I7RUEwQ2pDQyxRQUFRLEVBQUU7SUFDUmhCLElBQUksRUFBRWU7RUFERSxDQTFDdUI7RUE2Q2pDRSxTQUFTLEVBQUU7SUFDVGpCLElBQUksRUFBRWtCLElBREc7SUFFVEMsT0FBTyxFQUFFRCxJQUFJLENBQUNFO0VBRkwsQ0E3Q3NCO0VBaURqQ0MsU0FBUyxFQUFFO0lBQ1RyQixJQUFJLEVBQUVrQixJQURHO0lBRVRDLE9BQU8sRUFBRUQsSUFBSSxDQUFDRTtFQUZMO0FBakRzQixDQUFYLENBQXhCO2VBdURldkIsZSJ9","map":{"version":3,"names":["AuditLogsSchema","Schema","originalUrl","type","String","required","method","userAgent","ipAddress","correlationId","status","responseTime","Number","username","apiKey","clientId","eventType","requestBody","Object","response","createdAt","Date","default","now","updatedAt"],"sourceRoot":"/Users/ramireddycharitha/microservices/sample-micro-service/models/analyticsDbSchema/","sources":["AuditLogsSchema.js"],"sourcesContent":["import { Schema } from \"mongoose\";\n\nconst AuditLogsSchema = new Schema({\n  originalUrl: {\n    type: String,\n    required: true,\n  },\n  method: {\n    type: String,\n    required: true,\n  },\n  userAgent: {\n    type: String,\n    required: true,\n  },\n  ipAddress: {\n    type: String,\n    required: true,\n  },\n  correlationId: {\n    type: String,\n    required: true,\n  },\n  status: {\n    type: String,\n  },\n  responseTime: {\n    type: Number,\n  },\n  username: {\n    type: String,\n  },\n  apiKey: {\n    type: String,\n  },\n  clientId: {\n    type: String,\n  },\n  eventType: {\n    type: String,\n  },\n  requestBody: {\n    type: Object,\n  },\n  response: {\n    type: Object,\n  },\n  createdAt: {\n    type: Date,\n    default: Date.now,\n  },\n  updatedAt: {\n    type: Date,\n    default: Date.now,\n  },\n});\n\nexport default AuditLogsSchema;\n"],"mappings":";;;;;;;AAAA;;AAEA,MAAMA,eAAe,GAAG,IAAIC,gBAAJ,CAAW;EACjCC,WAAW,EAAE;IACXC,IAAI,EAAEC,MADK;IAEXC,QAAQ,EAAE;EAFC,CADoB;EAKjCC,MAAM,EAAE;IACNH,IAAI,EAAEC,MADA;IAENC,QAAQ,EAAE;EAFJ,CALyB;EASjCE,SAAS,EAAE;IACTJ,IAAI,EAAEC,MADG;IAETC,QAAQ,EAAE;EAFD,CATsB;EAajCG,SAAS,EAAE;IACTL,IAAI,EAAEC,MADG;IAETC,QAAQ,EAAE;EAFD,CAbsB;EAiBjCI,aAAa,EAAE;IACbN,IAAI,EAAEC,MADO;IAEbC,QAAQ,EAAE;EAFG,CAjBkB;EAqBjCK,MAAM,EAAE;IACNP,IAAI,EAAEC;EADA,CArByB;EAwBjCO,YAAY,EAAE;IACZR,IAAI,EAAES;EADM,CAxBmB;EA2BjCC,QAAQ,EAAE;IACRV,IAAI,EAAEC;EADE,CA3BuB;EA8BjCU,MAAM,EAAE;IACNX,IAAI,EAAEC;EADA,CA9ByB;EAiCjCW,QAAQ,EAAE;IACRZ,IAAI,EAAEC;EADE,CAjCuB;EAoCjCY,SAAS,EAAE;IACTb,IAAI,EAAEC;EADG,CApCsB;EAuCjCa,WAAW,EAAE;IACXd,IAAI,EAAEe;EADK,CAvCoB;EA0CjCC,QAAQ,EAAE;IACRhB,IAAI,EAAEe;EADE,CA1CuB;EA6CjCE,SAAS,EAAE;IACTjB,IAAI,EAAEkB,IADG;IAETC,OAAO,EAAED,IAAI,CAACE;EAFL,CA7CsB;EAiDjCC,SAAS,EAAE;IACTrB,IAAI,EAAEkB,IADG;IAETC,OAAO,EAAED,IAAI,CAACE;EAFL;AAjDsB,CAAX,CAAxB;eAuDevB,e"}},"mtime":1653643634185},"{\"assumptions\":{},\"sourceRoot\":\"/Users/ramireddycharitha/microservices/sample-micro-service/middlewares/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/ramireddycharitha/microservices/sample-micro-service\",\"filename\":\"/Users/ramireddycharitha/microservices/sample-micro-service/middlewares/ResponseLogger.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"default\",\"root\":\"/Users/ramireddycharitha/microservices/sample-micro-service\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.17.10:default":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.resSuccessLog = exports.resErrorLog = void 0;\n\nvar AbstractModels = _interopRequireWildcard(require(\"../models/AbstractModels\"));\n\nvar _index = require(\"../models/analyticsDbSchema/index\");\n\nvar ErrorUtils = _interopRequireWildcard(require(\"../errors/ErrorUtils\"));\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nconst auditLogResponse = (error, req, res) => {\n  const doc = {\n    originalUrl: req.originalUrl,\n    method: req.method,\n    userAgent: req.headers[\"user-agent\"],\n    ipAddress: req.headers[\"x-forwarded-for\"] || req.connection.remoteAddress,\n    correlationId: req.headers.correlationId,\n    eventType: req.routeObj.eventType,\n    requestBody: req.body,\n    responseTime: new Date().getTime() - req.routeObj.startTime,\n    status: true\n  };\n  const apiKey = req.header(\"api-key\");\n\n  if (apiKey) {\n    doc.apiKey = apiKey;\n  }\n\n  if (req.session) {\n    doc.mobileNumber = req.session.mobileNumber;\n    doc.clientId = req.session.clientId;\n    doc.apiKey = req.session.apiKey;\n  }\n\n  if (req.routeObj) {\n    doc.routeCategory = req.routeObj.routeCategory;\n  }\n\n  if (error) {\n    doc.response = {\n      code: error.code || 1000,\n      reason: error.message,\n      stack: error.stack\n    };\n    doc.status = false;\n  } else {\n    doc.response = res.data;\n  }\n\n  AbstractModels.mongoInsertOne(_index.AuditLogs, doc);\n};\n\nconst resSuccessLog = (req, res) => {\n  let routeCategory;\n\n  if (req.routeObj && req.routeObj.routeCategory) {\n    routeCategory = req.routeObj.routeCategory;\n  }\n\n  if (routeCategory !== \"healthCheckRoutes\") {\n    auditLogResponse(null, req, res);\n  }\n\n  res.status(res.statusCode || 200).send({\n    status: true,\n    response: res.data\n  });\n};\n/**\n * Check if not custom error, creates internal error and returns\n * @param {*} error\n * @returns\n */\n\n\nexports.resSuccessLog = resSuccessLog;\n\nfunction maskSystemError(error) {\n  if (error.name !== \"ErrorUtils\") {\n    return ErrorUtils.InternalServerError();\n  }\n\n  return error;\n}\n\nconst resErrorLog = (error, req, res, next) => {\n  log(\"error\", error.stack);\n  auditLogResponse(error, req, res); // eslint-disable-next-line\n\n  error = maskSystemError(error);\n\n  if (res.headersSent) {\n    return next(error);\n  }\n\n  res.status(error.statusCode || 200);\n  return res.send({\n    status: false,\n    response: {\n      code: error.code || 1000,\n      reason: error.message\n    }\n  });\n};\n\nexports.resErrorLog = resErrorLog;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJhdWRpdExvZ1Jlc3BvbnNlIiwiZXJyb3IiLCJyZXEiLCJyZXMiLCJkb2MiLCJvcmlnaW5hbFVybCIsIm1ldGhvZCIsInVzZXJBZ2VudCIsImhlYWRlcnMiLCJpcEFkZHJlc3MiLCJjb25uZWN0aW9uIiwicmVtb3RlQWRkcmVzcyIsImNvcnJlbGF0aW9uSWQiLCJldmVudFR5cGUiLCJyb3V0ZU9iaiIsInJlcXVlc3RCb2R5IiwiYm9keSIsInJlc3BvbnNlVGltZSIsIkRhdGUiLCJnZXRUaW1lIiwic3RhcnRUaW1lIiwic3RhdHVzIiwiYXBpS2V5IiwiaGVhZGVyIiwic2Vzc2lvbiIsIm1vYmlsZU51bWJlciIsImNsaWVudElkIiwicm91dGVDYXRlZ29yeSIsInJlc3BvbnNlIiwiY29kZSIsInJlYXNvbiIsIm1lc3NhZ2UiLCJzdGFjayIsImRhdGEiLCJBYnN0cmFjdE1vZGVscyIsIm1vbmdvSW5zZXJ0T25lIiwiQXVkaXRMb2dzIiwicmVzU3VjY2Vzc0xvZyIsInN0YXR1c0NvZGUiLCJzZW5kIiwibWFza1N5c3RlbUVycm9yIiwibmFtZSIsIkVycm9yVXRpbHMiLCJJbnRlcm5hbFNlcnZlckVycm9yIiwicmVzRXJyb3JMb2ciLCJuZXh0IiwibG9nIiwiaGVhZGVyc1NlbnQiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy9yYW1pcmVkZHljaGFyaXRoYS9taWNyb3NlcnZpY2VzL3NhbXBsZS1taWNyby1zZXJ2aWNlL21pZGRsZXdhcmVzLyIsInNvdXJjZXMiOlsiUmVzcG9uc2VMb2dnZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgQWJzdHJhY3RNb2RlbHMgZnJvbSBcIi4uL21vZGVscy9BYnN0cmFjdE1vZGVsc1wiO1xuaW1wb3J0IHsgQXVkaXRMb2dzIH0gZnJvbSBcIi4uL21vZGVscy9hbmFseXRpY3NEYlNjaGVtYS9pbmRleFwiO1xuaW1wb3J0ICogYXMgRXJyb3JVdGlscyBmcm9tIFwiLi4vZXJyb3JzL0Vycm9yVXRpbHNcIjtcblxuY29uc3QgYXVkaXRMb2dSZXNwb25zZSA9IChlcnJvciwgcmVxLCByZXMpID0+IHtcbiAgY29uc3QgZG9jID0ge1xuICAgIG9yaWdpbmFsVXJsOiByZXEub3JpZ2luYWxVcmwsXG4gICAgbWV0aG9kOiByZXEubWV0aG9kLFxuICAgIHVzZXJBZ2VudDogcmVxLmhlYWRlcnNbXCJ1c2VyLWFnZW50XCJdLFxuICAgIGlwQWRkcmVzczogcmVxLmhlYWRlcnNbXCJ4LWZvcndhcmRlZC1mb3JcIl0gfHwgcmVxLmNvbm5lY3Rpb24ucmVtb3RlQWRkcmVzcyxcbiAgICBjb3JyZWxhdGlvbklkOiByZXEuaGVhZGVycy5jb3JyZWxhdGlvbklkLFxuICAgIGV2ZW50VHlwZTogcmVxLnJvdXRlT2JqLmV2ZW50VHlwZSxcbiAgICByZXF1ZXN0Qm9keTogcmVxLmJvZHksXG4gICAgcmVzcG9uc2VUaW1lOiBuZXcgRGF0ZSgpLmdldFRpbWUoKSAtIHJlcS5yb3V0ZU9iai5zdGFydFRpbWUsXG4gICAgc3RhdHVzOiB0cnVlLFxuICB9O1xuICBjb25zdCBhcGlLZXkgPSByZXEuaGVhZGVyKFwiYXBpLWtleVwiKTtcbiAgaWYgKGFwaUtleSkge1xuICAgIGRvYy5hcGlLZXkgPSBhcGlLZXk7XG4gIH1cbiAgaWYgKHJlcS5zZXNzaW9uKSB7XG4gICAgZG9jLm1vYmlsZU51bWJlciA9IHJlcS5zZXNzaW9uLm1vYmlsZU51bWJlcjtcbiAgICBkb2MuY2xpZW50SWQgPSByZXEuc2Vzc2lvbi5jbGllbnRJZDtcbiAgICBkb2MuYXBpS2V5ID0gcmVxLnNlc3Npb24uYXBpS2V5O1xuICB9XG4gIGlmIChyZXEucm91dGVPYmopIHtcbiAgICBkb2Mucm91dGVDYXRlZ29yeSA9IHJlcS5yb3V0ZU9iai5yb3V0ZUNhdGVnb3J5O1xuICB9XG5cbiAgaWYgKGVycm9yKSB7XG4gICAgZG9jLnJlc3BvbnNlID0ge1xuICAgICAgY29kZTogZXJyb3IuY29kZSB8fCAxMDAwLFxuICAgICAgcmVhc29uOiBlcnJvci5tZXNzYWdlLFxuICAgICAgc3RhY2s6IGVycm9yLnN0YWNrLFxuICAgIH07XG4gICAgZG9jLnN0YXR1cyA9IGZhbHNlO1xuICB9IGVsc2Uge1xuICAgIGRvYy5yZXNwb25zZSA9IHJlcy5kYXRhO1xuICB9XG4gIEFic3RyYWN0TW9kZWxzLm1vbmdvSW5zZXJ0T25lKEF1ZGl0TG9ncywgZG9jKTtcbn07XG5cbmV4cG9ydCBjb25zdCByZXNTdWNjZXNzTG9nID0gKHJlcSwgcmVzKSA9PiB7XG4gIGxldCByb3V0ZUNhdGVnb3J5O1xuICBpZiAocmVxLnJvdXRlT2JqICYmIHJlcS5yb3V0ZU9iai5yb3V0ZUNhdGVnb3J5KSB7XG4gICAgcm91dGVDYXRlZ29yeSA9IHJlcS5yb3V0ZU9iai5yb3V0ZUNhdGVnb3J5O1xuICB9XG4gIGlmIChyb3V0ZUNhdGVnb3J5ICE9PSBcImhlYWx0aENoZWNrUm91dGVzXCIpIHtcbiAgICBhdWRpdExvZ1Jlc3BvbnNlKG51bGwsIHJlcSwgcmVzKTtcbiAgfVxuICByZXMuc3RhdHVzKHJlcy5zdGF0dXNDb2RlIHx8IDIwMCkuc2VuZCh7IHN0YXR1czogdHJ1ZSwgcmVzcG9uc2U6IHJlcy5kYXRhIH0pO1xufTtcblxuLyoqXG4gKiBDaGVjayBpZiBub3QgY3VzdG9tIGVycm9yLCBjcmVhdGVzIGludGVybmFsIGVycm9yIGFuZCByZXR1cm5zXG4gKiBAcGFyYW0geyp9IGVycm9yXG4gKiBAcmV0dXJuc1xuICovXG5mdW5jdGlvbiBtYXNrU3lzdGVtRXJyb3IoZXJyb3IpIHtcbiAgaWYgKGVycm9yLm5hbWUgIT09IFwiRXJyb3JVdGlsc1wiKSB7XG4gICAgcmV0dXJuIEVycm9yVXRpbHMuSW50ZXJuYWxTZXJ2ZXJFcnJvcigpO1xuICB9XG4gIHJldHVybiBlcnJvcjtcbn1cblxuZXhwb3J0IGNvbnN0IHJlc0Vycm9yTG9nID0gKGVycm9yLCByZXEsIHJlcywgbmV4dCkgPT4ge1xuICBsb2coXCJlcnJvclwiLCBlcnJvci5zdGFjayk7XG4gIGF1ZGl0TG9nUmVzcG9uc2UoZXJyb3IsIHJlcSwgcmVzKTtcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lXG4gIGVycm9yID0gbWFza1N5c3RlbUVycm9yKGVycm9yKTtcbiAgaWYgKHJlcy5oZWFkZXJzU2VudCkge1xuICAgIHJldHVybiBuZXh0KGVycm9yKTtcbiAgfVxuICByZXMuc3RhdHVzKGVycm9yLnN0YXR1c0NvZGUgfHwgMjAwKTtcbiAgcmV0dXJuIHJlcy5zZW5kKHtcbiAgICBzdGF0dXM6IGZhbHNlLFxuICAgIHJlc3BvbnNlOiB7XG4gICAgICBjb2RlOiBlcnJvci5jb2RlIHx8IDEwMDAsXG4gICAgICByZWFzb246IGVycm9yLm1lc3NhZ2UsXG4gICAgfSxcbiAgfSk7XG59O1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7O0FBQ0E7O0FBQ0E7Ozs7OztBQUVBLE1BQU1BLGdCQUFnQixHQUFHLENBQUNDLEtBQUQsRUFBUUMsR0FBUixFQUFhQyxHQUFiLEtBQXFCO0VBQzVDLE1BQU1DLEdBQUcsR0FBRztJQUNWQyxXQUFXLEVBQUVILEdBQUcsQ0FBQ0csV0FEUDtJQUVWQyxNQUFNLEVBQUVKLEdBQUcsQ0FBQ0ksTUFGRjtJQUdWQyxTQUFTLEVBQUVMLEdBQUcsQ0FBQ00sT0FBSixDQUFZLFlBQVosQ0FIRDtJQUlWQyxTQUFTLEVBQUVQLEdBQUcsQ0FBQ00sT0FBSixDQUFZLGlCQUFaLEtBQWtDTixHQUFHLENBQUNRLFVBQUosQ0FBZUMsYUFKbEQ7SUFLVkMsYUFBYSxFQUFFVixHQUFHLENBQUNNLE9BQUosQ0FBWUksYUFMakI7SUFNVkMsU0FBUyxFQUFFWCxHQUFHLENBQUNZLFFBQUosQ0FBYUQsU0FOZDtJQU9WRSxXQUFXLEVBQUViLEdBQUcsQ0FBQ2MsSUFQUDtJQVFWQyxZQUFZLEVBQUUsSUFBSUMsSUFBSixHQUFXQyxPQUFYLEtBQXVCakIsR0FBRyxDQUFDWSxRQUFKLENBQWFNLFNBUnhDO0lBU1ZDLE1BQU0sRUFBRTtFQVRFLENBQVo7RUFXQSxNQUFNQyxNQUFNLEdBQUdwQixHQUFHLENBQUNxQixNQUFKLENBQVcsU0FBWCxDQUFmOztFQUNBLElB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","map":{"version":3,"names":["auditLogResponse","error","req","res","doc","originalUrl","method","userAgent","headers","ipAddress","connection","remoteAddress","correlationId","eventType","routeObj","requestBody","body","responseTime","Date","getTime","startTime","status","apiKey","header","session","mobileNumber","clientId","routeCategory","response","code","reason","message","stack","data","AbstractModels","mongoInsertOne","AuditLogs","resSuccessLog","statusCode","send","maskSystemError","name","ErrorUtils","InternalServerError","resErrorLog","next","log","headersSent"],"sourceRoot":"/Users/ramireddycharitha/microservices/sample-micro-service/middlewares/","sources":["ResponseLogger.js"],"sourcesContent":["import * as AbstractModels from \"../models/AbstractModels\";\nimport { AuditLogs } from \"../models/analyticsDbSchema/index\";\nimport * as ErrorUtils from \"../errors/ErrorUtils\";\n\nconst auditLogResponse = (error, req, res) => {\n  const doc = {\n    originalUrl: req.originalUrl,\n    method: req.method,\n    userAgent: req.headers[\"user-agent\"],\n    ipAddress: req.headers[\"x-forwarded-for\"] || req.connection.remoteAddress,\n    correlationId: req.headers.correlationId,\n    eventType: req.routeObj.eventType,\n    requestBody: req.body,\n    responseTime: new Date().getTime() - req.routeObj.startTime,\n    status: true,\n  };\n  const apiKey = req.header(\"api-key\");\n  if (apiKey) {\n    doc.apiKey = apiKey;\n  }\n  if (req.session) {\n    doc.mobileNumber = req.session.mobileNumber;\n    doc.clientId = req.session.clientId;\n    doc.apiKey = req.session.apiKey;\n  }\n  if (req.routeObj) {\n    doc.routeCategory = req.routeObj.routeCategory;\n  }\n\n  if (error) {\n    doc.response = {\n      code: error.code || 1000,\n      reason: error.message,\n      stack: error.stack,\n    };\n    doc.status = false;\n  } else {\n    doc.response = res.data;\n  }\n  AbstractModels.mongoInsertOne(AuditLogs, doc);\n};\n\nexport const resSuccessLog = (req, res) => {\n  let routeCategory;\n  if (req.routeObj && req.routeObj.routeCategory) {\n    routeCategory = req.routeObj.routeCategory;\n  }\n  if (routeCategory !== \"healthCheckRoutes\") {\n    auditLogResponse(null, req, res);\n  }\n  res.status(res.statusCode || 200).send({ status: true, response: res.data });\n};\n\n/**\n * Check if not custom error, creates internal error and returns\n * @param {*} error\n * @returns\n */\nfunction maskSystemError(error) {\n  if (error.name !== \"ErrorUtils\") {\n    return ErrorUtils.InternalServerError();\n  }\n  return error;\n}\n\nexport const resErrorLog = (error, req, res, next) => {\n  log(\"error\", error.stack);\n  auditLogResponse(error, req, res);\n  // eslint-disable-next-line\n  error = maskSystemError(error);\n  if (res.headersSent) {\n    return next(error);\n  }\n  res.status(error.statusCode || 200);\n  return res.send({\n    status: false,\n    response: {\n      code: error.code || 1000,\n      reason: error.message,\n    },\n  });\n};\n"],"mappings":"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"}},"mtime":1653643634184},"{\"assumptions\":{},\"sourceRoot\":\"/Users/ramireddycharitha/microservices/sample-micro-service/middlewares/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/ramireddycharitha/microservices/sample-micro-service\",\"filename\":\"/Users/ramireddycharitha/microservices/sample-micro-service/middlewares/SchemaValidator.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"default\",\"root\":\"/Users/ramireddycharitha/microservices/sample-micro-service\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.17.10:default":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.validate = exports.default = void 0;\n\nvar jsValidator = _interopRequireWildcard(require(\"json-schema\"));\n\nvar ErrorUtils = _interopRequireWildcard(require(\"../errors/ErrorUtils\"));\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\n// event type and schema type should be same, its a assumption\nconst validate = (req, res, next) => {\n  const {\n    query,\n    body,\n    routeObj\n  } = req;\n  const querySchema = routeObj.schema?.query;\n  const bodySchema = routeObj.schema?.body;\n  const isValidReqQuery = jsValidator.validate(query, querySchema);\n  const isValidReqBody = jsValidator.validate(body, bodySchema);\n\n  if (!isValidReqQuery.valid) {\n    next(ErrorUtils.InvalidSchemaError(JSON.stringify(isValidReqQuery.errors)));\n  } else if (!isValidReqBody.valid) {\n    next(ErrorUtils.InvalidSchemaError(JSON.stringify(isValidReqBody.errors)));\n  } else {\n    next();\n  }\n};\n\nexports.validate = validate;\nvar _default = validate;\nexports.default = _default;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJ2YWxpZGF0ZSIsInJlcSIsInJlcyIsIm5leHQiLCJxdWVyeSIsImJvZHkiLCJyb3V0ZU9iaiIsInF1ZXJ5U2NoZW1hIiwic2NoZW1hIiwiYm9keVNjaGVtYSIsImlzVmFsaWRSZXFRdWVyeSIsImpzVmFsaWRhdG9yIiwiaXNWYWxpZFJlcUJvZHkiLCJ2YWxpZCIsIkVycm9yVXRpbHMiLCJJbnZhbGlkU2NoZW1hRXJyb3IiLCJKU09OIiwic3RyaW5naWZ5IiwiZXJyb3JzIl0sInNvdXJjZVJvb3QiOiIvVXNlcnMvcmFtaXJlZGR5Y2hhcml0aGEvbWljcm9zZXJ2aWNlcy9zYW1wbGUtbWljcm8tc2VydmljZS9taWRkbGV3YXJlcy8iLCJzb3VyY2VzIjpbIlNjaGVtYVZhbGlkYXRvci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyBqc1ZhbGlkYXRvciBmcm9tIFwianNvbi1zY2hlbWFcIjtcbmltcG9ydCAqIGFzIEVycm9yVXRpbHMgZnJvbSBcIi4uL2Vycm9ycy9FcnJvclV0aWxzXCI7XG5cbi8vIGV2ZW50IHR5cGUgYW5kIHNjaGVtYSB0eXBlIHNob3VsZCBiZSBzYW1lLCBpdHMgYSBhc3N1bXB0aW9uXG5leHBvcnQgY29uc3QgdmFsaWRhdGUgPSAocmVxLCByZXMsIG5leHQpID0+IHtcbiAgY29uc3QgeyBxdWVyeSwgYm9keSwgcm91dGVPYmogfSA9IHJlcTtcbiAgY29uc3QgcXVlcnlTY2hlbWEgPSByb3V0ZU9iai5zY2hlbWE/LnF1ZXJ5O1xuICBjb25zdCBib2R5U2NoZW1hID0gcm91dGVPYmouc2NoZW1hPy5ib2R5O1xuXG4gIGNvbnN0IGlzVmFsaWRSZXFRdWVyeSA9IGpzVmFsaWRhdG9yLnZhbGlkYXRlKHF1ZXJ5LCBxdWVyeVNjaGVtYSk7XG4gIGNvbnN0IGlzVmFsaWRSZXFCb2R5ID0ganNWYWxpZGF0b3IudmFsaWRhdGUoYm9keSwgYm9keVNjaGVtYSk7XG4gIGlmICghaXNWYWxpZFJlcVF1ZXJ5LnZhbGlkKSB7XG4gICAgbmV4dChFcnJvclV0aWxzLkludmFsaWRTY2hlbWFFcnJvcihKU09OLnN0cmluZ2lmeShpc1ZhbGlkUmVxUXVlcnkuZXJyb3JzKSkpO1xuICB9IGVsc2UgaWYgKCFpc1ZhbGlkUmVxQm9keS52YWxpZCkge1xuICAgIG5leHQoRXJyb3JVdGlscy5JbnZhbGlkU2NoZW1hRXJyb3IoSlNPTi5zdHJpbmdpZnkoaXNWYWxpZFJlcUJvZHkuZXJyb3JzKSkpO1xuICB9IGVsc2Uge1xuICAgIG5leHQoKTtcbiAgfVxufTtcblxuZXhwb3J0IGRlZmF1bHQgdmFsaWRhdGU7XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTs7QUFDQTs7Ozs7O0FBRUE7QUFDTyxNQUFNQSxRQUFRLEdBQUcsQ0FBQ0MsR0FBRCxFQUFNQyxHQUFOLEVBQVdDLElBQVgsS0FBb0I7RUFDMUMsTUFBTTtJQUFFQyxLQUFGO0lBQVNDLElBQVQ7SUFBZUM7RUFBZixJQUE0QkwsR0FBbEM7RUFDQSxNQUFNTSxXQUFXLEdBQUdELFFBQVEsQ0FBQ0UsTUFBVCxFQUFpQkosS0FBckM7RUFDQSxNQUFNSyxVQUFVLEdBQUdILFFBQVEsQ0FBQ0UsTUFBVCxFQUFpQkgsSUFBcEM7RUFFQSxNQUFNSyxlQUFlLEdBQUdDLFdBQVcsQ0FBQ1gsUUFBWixDQUFxQkksS0FBckIsRUFBNEJHLFdBQTVCLENBQXhCO0VBQ0EsTUFBTUssY0FBYyxHQUFHRCxXQUFXLENBQUNYLFFBQVosQ0FBcUJLLElBQXJCLEVBQTJCSSxVQUEzQixDQUF2Qjs7RUFDQSxJQUFJLENBQUNDLGVBQWUsQ0FBQ0csS0FBckIsRUFBNEI7SUFDMUJWLElBQUksQ0FBQ1csVUFBVSxDQUFDQyxrQkFBWCxDQUE4QkMsSUFBSSxDQUFDQyxTQUFMLENBQWVQLGVBQWUsQ0FBQ1EsTUFBL0IsQ0FBOUIsQ0FBRCxDQUFKO0VBQ0QsQ0FGRCxNQUVPLElBQUksQ0FBQ04sY0FBYyxDQUFDQyxLQUFwQixFQUEyQjtJQUNoQ1YsSUFBSSxDQUFDVyxVQUFVLENBQUNDLGtCQUFYLENBQThCQyxJQUFJLENBQUNDLFNBQUwsQ0FBZUwsY0FBYyxDQUFDTSxNQUE5QixDQUE5QixDQUFELENBQUo7RUFDRCxDQUZNLE1BRUE7SUFDTGYsSUFBSTtFQUNMO0FBQ0YsQ0FkTTs7O2VBZ0JRSCxRIn0=","map":{"version":3,"names":["validate","req","res","next","query","body","routeObj","querySchema","schema","bodySchema","isValidReqQuery","jsValidator","isValidReqBody","valid","ErrorUtils","InvalidSchemaError","JSON","stringify","errors"],"sourceRoot":"/Users/ramireddycharitha/microservices/sample-micro-service/middlewares/","sources":["SchemaValidator.js"],"sourcesContent":["import * as jsValidator from \"json-schema\";\nimport * as ErrorUtils from \"../errors/ErrorUtils\";\n\n// event type and schema type should be same, its a assumption\nexport const validate = (req, res, next) => {\n  const { query, body, routeObj } = req;\n  const querySchema = routeObj.schema?.query;\n  const bodySchema = routeObj.schema?.body;\n\n  const isValidReqQuery = jsValidator.validate(query, querySchema);\n  const isValidReqBody = jsValidator.validate(body, bodySchema);\n  if (!isValidReqQuery.valid) {\n    next(ErrorUtils.InvalidSchemaError(JSON.stringify(isValidReqQuery.errors)));\n  } else if (!isValidReqBody.valid) {\n    next(ErrorUtils.InvalidSchemaError(JSON.stringify(isValidReqBody.errors)));\n  } else {\n    next();\n  }\n};\n\nexport default validate;\n"],"mappings":";;;;;;;AAAA;;AACA;;;;;;AAEA;AACO,MAAMA,QAAQ,GAAG,CAACC,GAAD,EAAMC,GAAN,EAAWC,IAAX,KAAoB;EAC1C,MAAM;IAAEC,KAAF;IAASC,IAAT;IAAeC;EAAf,IAA4BL,GAAlC;EACA,MAAMM,WAAW,GAAGD,QAAQ,CAACE,MAAT,EAAiBJ,KAArC;EACA,MAAMK,UAAU,GAAGH,QAAQ,CAACE,MAAT,EAAiBH,IAApC;EAEA,MAAMK,eAAe,GAAGC,WAAW,CAACX,QAAZ,CAAqBI,KAArB,EAA4BG,WAA5B,CAAxB;EACA,MAAMK,cAAc,GAAGD,WAAW,CAACX,QAAZ,CAAqBK,IAArB,EAA2BI,UAA3B,CAAvB;;EACA,IAAI,CAACC,eAAe,CAACG,KAArB,EAA4B;IAC1BV,IAAI,CAACW,UAAU,CAACC,kBAAX,CAA8BC,IAAI,CAACC,SAAL,CAAeP,eAAe,CAACQ,MAA/B,CAA9B,CAAD,CAAJ;EACD,CAFD,MAEO,IAAI,CAACN,cAAc,CAACC,KAApB,EAA2B;IAChCV,IAAI,CAACW,UAAU,CAACC,kBAAX,CAA8BC,IAAI,CAACC,SAAL,CAAeL,cAAc,CAACM,MAA9B,CAA9B,CAAD,CAAJ;EACD,CAFM,MAEA;IACLf,IAAI;EACL;AACF,CAdM;;;eAgBQH,Q"}},"mtime":1653643634184},"{\"assumptions\":{},\"sourceRoot\":\"/Users/ramireddycharitha/microservices/sample-micro-service/middlewares/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/ramireddycharitha/microservices/sample-micro-service\",\"filename\":\"/Users/ramireddycharitha/microservices/sample-micro-service/middlewares/HttpContextMiddleware.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"default\",\"root\":\"/Users/ramireddycharitha/microservices/sample-micro-service\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.17.10:default":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.setHttpContextErrorResponsePayload = setHttpContextErrorResponsePayload;\nexports.setHttpContextMetrics = setHttpContextMetrics;\nexports.setHttpContextRequestPayload = setHttpContextRequestPayload;\nexports.setHttpContextResponsePayload = setHttpContextResponsePayload;\nexports.setHttpContextUserDetails = setHttpContextUserDetails;\n\nvar Constants = _interopRequireWildcard(require(\"../constants/Constants\"));\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nconst httpContext = require(\"express-http-context\");\n\nconst _ = require(\"lodash\");\n\nfunction setHttpContextMetrics(req, res, next) {\n  httpContext.set(Constants.LOGGER_REQUEST_START_TIME, process.hrtime.bigint());\n  httpContext.set(Constants.LOGGER_API_ROUTE, req.path);\n  httpContext.set(Constants.LOGGER_USER_IP_ADDRESS, req.headers[\"x-forwarded-for\"] || req.connection.remoteAddress);\n  next();\n}\n\nfunction setHttpContextUserDetails(req, res, next) {\n  // set session payload for metroauth initi\n  if (req.session) {\n    httpContext.set(Constants.LOGGER_USER_DETAILS, {\n      userId: req.session.user_id || \"\",\n      primaryNumber: req.session.zvr_mobile_no || \"\",\n      doosraNumber: req.session.v_mobile_no || \"\"\n    });\n  }\n\n  next();\n} // unable to capture dynamic url path in request middleware\n// req.route.path is populated when it hits matched route only\n// is captured in response middleware\n// http://expressjs.com/en/api.html#req.route\n\n\nfunction setHttpContextRequestPayload(req, res, next) {\n  httpContext.set(Constants.LOGGER_REQUEST_PAYLOAD, {\n    // clone\n    urlDetails: _.cloneDeep({\n      path: req.path,\n      baseUrl: req.baseUrl,\n      host: req.hostname,\n      httpVersion: req.httpVersion,\n      method: req.method,\n      originalUrl: req.originalUrl,\n      protocol: req.protocol,\n      url: req.url\n    }),\n    headers: _.cloneDeep(req.headers),\n    params: _.cloneDeep(req.params),\n    body: _.cloneDeep(req.body),\n    query: _.cloneDeep(req.query)\n  });\n  next();\n}\n/**\n *\n * @param {*} req\n *\n * https://expressjs.com/en/api.html#req.route\n * Contains the currently-matched route, a string.\n * req.route.path is update on matched route and available in response middleware.\n */\n\n\nfunction setHttpContextDynamicRoutePath(req) {\n  const requestPayload = httpContext.get(Constants.LOGGER_REQUEST_PAYLOAD);\n\n  if (requestPayload && requestPayload.urlDetails) {\n    requestPayload.urlDetails.dynamicRoutePath = req.route?.path;\n    httpContext.set(Constants.LOGGER_REQUEST_PAYLOAD, _.cloneDeep(requestPayload));\n  }\n}\n\nfunction getResponseTime() {\n  let timeDiff = \"-\";\n  const nanoToMilli = BigInt(1e6);\n  const startTime = httpContext.get(Constants.LOGGER_REQUEST_START_TIME);\n  const endTime = process.hrtime.bigint();\n\n  try {\n    if (typeof startTime === \"bigint\" && typeof endTime === \"bigint\") {\n      timeDiff = (endTime - startTime) / nanoToMilli;\n    }\n  } catch (error) {\n    log(\"error\", {\n      error\n    });\n  }\n\n  return `${timeDiff}ms`;\n}\n\nfunction setHttpContextResponsePayload(req, res, next) {\n  const out = {\n    headers: res.getHeaders(),\n    data: res.data\n  };\n  setHttpContextDynamicRoutePath(req);\n  httpContext.set(Constants.LOGGER_RESPONSE_PAYLOAD, _.cloneDeep(out));\n  httpContext.set(Constants.LOGGER_RESPONSE_TIME, getResponseTime());\n  next();\n}\n\nfunction setHttpContextErrorResponsePayload(error, req, res, next) {\n  const out = {\n    headers: res.getHeaders(),\n    error\n  };\n  setHttpContextDynamicRoutePath(req);\n  httpContext.set(Constants.LOGGER_RESPONSE_PAYLOAD, _.cloneDeep(out));\n  httpContext.set(Constants.LOGGER_RESPONSE_TIME, getResponseTime());\n  next(error);\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJodHRwQ29udGV4dCIsInJlcXVpcmUiLCJfIiwic2V0SHR0cENvbnRleHRNZXRyaWNzIiwicmVxIiwicmVzIiwibmV4dCIsInNldCIsIkNvbnN0YW50cyIsIkxPR0dFUl9SRVFVRVNUX1NUQVJUX1RJTUUiLCJwcm9jZXNzIiwiaHJ0aW1lIiwiYmlnaW50IiwiTE9HR0VSX0FQSV9ST1VURSIsInBhdGgiLCJMT0dHRVJfVVNFUl9JUF9BRERSRVNTIiwiaGVhZGVycyIsImNvbm5lY3Rpb24iLCJyZW1vdGVBZGRyZXNzIiwic2V0SHR0cENvbnRleHRVc2VyRGV0YWlscyIsInNlc3Npb24iLCJMT0dHRVJfVVNFUl9ERVRBSUxTIiwidXNlcklkIiwidXNlcl9pZCIsInByaW1hcnlOdW1iZXIiLCJ6dnJfbW9iaWxlX25vIiwiZG9vc3JhTnVtYmVyIiwidl9tb2JpbGVfbm8iLCJzZXRIdHRwQ29udGV4dFJlcXVlc3RQYXlsb2FkIiwiTE9HR0VSX1JFUVVFU1RfUEFZTE9BRCIsInVybERldGFpbHMiLCJjbG9uZURlZXAiLCJiYXNlVXJsIiwiaG9zdCIsImhvc3RuYW1lIiwiaHR0cFZlcnNpb24iLCJtZXRob2QiLCJvcmlnaW5hbFVybCIsInByb3RvY29sIiwidXJsIiwicGFyYW1zIiwiYm9keSIsInF1ZXJ5Iiwic2V0SHR0cENvbnRleHREeW5hbWljUm91dGVQYXRoIiwicmVxdWVzdFBheWxvYWQiLCJnZXQiLCJkeW5hbWljUm91dGVQYXRoIiwicm91dGUiLCJnZXRSZXNwb25zZVRpbWUiLCJ0aW1lRGlmZiIsIm5hbm9Ub01pbGxpIiwiQmlnSW50Iiwic3RhcnRUaW1lIiwiZW5kVGltZSIsImVycm9yIiwibG9nIiwic2V0SHR0cENvbnRleHRSZXNwb25zZVBheWxvYWQiLCJvdXQiLCJnZXRIZWFkZXJzIiwiZGF0YSIsIkxPR0dFUl9SRVNQT05TRV9QQVlMT0FEIiwiTE9HR0VSX1JFU1BPTlNFX1RJTUUiLCJzZXRIdHRwQ29udGV4dEVycm9yUmVzcG9uc2VQYXlsb2FkIl0sInNvdXJjZVJvb3QiOiIvVXNlcnMvcmFtaXJlZGR5Y2hhcml0aGEvbWljcm9zZXJ2aWNlcy9zYW1wbGUtbWljcm8tc2VydmljZS9taWRkbGV3YXJlcy8iLCJzb3VyY2VzIjpbIkh0dHBDb250ZXh0TWlkZGxld2FyZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyBDb25zdGFudHMgZnJvbSBcIi4uL2NvbnN0YW50cy9Db25zdGFudHNcIjtcblxuY29uc3QgaHR0cENvbnRleHQgPSByZXF1aXJlKFwiZXhwcmVzcy1odHRwLWNvbnRleHRcIik7XG5jb25zdCBfID0gcmVxdWlyZShcImxvZGFzaFwiKTtcblxuZXhwb3J0IGZ1bmN0aW9uIHNldEh0dHBDb250ZXh0TWV0cmljcyhyZXEsIHJlcywgbmV4dCkge1xuICBodHRwQ29udGV4dC5zZXQoQ29uc3RhbnRzLkxPR0dFUl9SRVFVRVNUX1NUQVJUX1RJTUUsIHByb2Nlc3MuaHJ0aW1lLmJpZ2ludCgpKTtcbiAgaHR0cENvbnRleHQuc2V0KENvbnN0YW50cy5MT0dHRVJfQVBJX1JPVVRFLCByZXEucGF0aCk7XG4gIGh0dHBDb250ZXh0LnNldChDb25zdGFudHMuTE9HR0VSX1VTRVJfSVBfQUREUkVTUywgcmVxLmhlYWRlcnNbXCJ4LWZvcndhcmRlZC1mb3JcIl0gfHwgcmVxLmNvbm5lY3Rpb24ucmVtb3RlQWRkcmVzcyk7XG4gIG5leHQoKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNldEh0dHBDb250ZXh0VXNlckRldGFpbHMocmVxLCByZXMsIG5leHQpIHtcbiAgLy8gc2V0IHNlc3Npb24gcGF5bG9hZCBmb3IgbWV0cm9hdXRoIGluaXRpXG4gIGlmIChyZXEuc2Vzc2lvbikge1xuICAgIGh0dHBDb250ZXh0LnNldChDb25zdGFudHMuTE9HR0VSX1VTRVJfREVUQUlMUywge1xuICAgICAgdXNlcklkOiByZXEuc2Vzc2lvbi51c2VyX2lkIHx8IFwiXCIsXG4gICAgICBwcmltYXJ5TnVtYmVyOiByZXEuc2Vzc2lvbi56dnJfbW9iaWxlX25vIHx8IFwiXCIsXG4gICAgICBkb29zcmFOdW1iZXI6IHJlcS5zZXNzaW9uLnZfbW9iaWxlX25vIHx8IFwiXCIsXG4gICAgfSk7XG4gIH1cbiAgbmV4dCgpO1xufVxuXG4vLyB1bmFibGUgdG8gY2FwdHVyZSBkeW5hbWljIHVybCBwYXRoIGluIHJlcXVlc3QgbWlkZGxld2FyZVxuLy8gcmVxLnJvdXRlLnBhdGggaXMgcG9wdWxhdGVkIHdoZW4gaXQgaGl0cyBtYXRjaGVkIHJvdXRlIG9ubHlcbi8vIGlzIGNhcHR1cmVkIGluIHJlc3BvbnNlIG1pZGRsZXdhcmVcbi8vIGh0dHA6Ly9leHByZXNzanMuY29tL2VuL2FwaS5odG1sI3JlcS5yb3V0ZVxuZXhwb3J0IGZ1bmN0aW9uIHNldEh0dHBDb250ZXh0UmVxdWVzdFBheWxvYWQocmVxLCByZXMsIG5leHQpIHtcbiAgaHR0cENvbnRleHQuc2V0KENvbnN0YW50cy5MT0dHRVJfUkVRVUVTVF9QQVlMT0FELCB7XG4gICAgLy8gY2xvbmVcbiAgICB1cmxEZXRhaWxzOiBfLmNsb25lRGVlcCh7XG4gICAgICBwYXRoOiByZXEucGF0aCxcbiAgICAgIGJhc2VVcmw6IHJlcS5iYXNlVXJsLFxuICAgICAgaG9zdDogcmVxLmhvc3RuYW1lLFxuICAgICAgaHR0cFZlcnNpb246IHJlcS5odHRwVmVyc2lvbixcbiAgICAgIG1ldGhvZDogcmVxLm1ldGhvZCxcbiAgICAgIG9yaWdpbmFsVXJsOiByZXEub3JpZ2luYWxVcmwsXG4gICAgICBwcm90b2NvbDogcmVxLnByb3RvY29sLFxuICAgICAgdXJsOiByZXEudXJsLFxuICAgIH0pLFxuICAgIGhlYWRlcnM6IF8uY2xvbmVEZWVwKHJlcS5oZWFkZXJzKSxcbiAgICBwYXJhbXM6IF8uY2xvbmVEZWVwKHJlcS5wYXJhbXMpLFxuICAgIGJvZHk6IF8uY2xvbmVEZWVwKHJlcS5ib2R5KSxcbiAgICBxdWVyeTogXy5jbG9uZURlZXAocmVxLnF1ZXJ5KSxcbiAgfSk7XG4gIG5leHQoKTtcbn1cblxuLyoqXG4gKlxuICogQHBhcmFtIHsqfSByZXFcbiAqXG4gKiBodHRwczovL2V4cHJlc3Nqcy5jb20vZW4vYXBpLmh0bWwjcmVxLnJvdXRlXG4gKiBDb250YWlucyB0aGUgY3VycmVudGx5LW1hdGNoZWQgcm91dGUsIGEgc3RyaW5nLlxuICogcmVxLnJvdXRlLnBhdGggaXMgdXBkYXRlIG9uIG1hdGNoZWQgcm91dGUgYW5kIGF2YWlsYWJsZSBpbiByZXNwb25zZSBtaWRkbGV3YXJlLlxuICovXG5mdW5jdGlvbiBzZXRIdHRwQ29udGV4dER5bmFtaWNSb3V0ZVBhdGgocmVxKSB7XG4gIGNvbnN0IHJlcXVlc3RQYXlsb2FkID0gaHR0cENvbnRleHQuZ2V0KENvbnN0YW50cy5MT0dHRVJfUkVRVUVTVF9QQVlMT0FEKTtcbiAgaWYgKHJlcXVlc3RQYXlsb2FkICYmIHJlcXVlc3RQYXlsb2FkLnVybERldGFpbHMpIHtcbiAgICByZXF1ZXN0UGF5bG9hZC51cmxEZXRhaWxzLmR5bmFtaWNSb3V0ZVBhdGggPSByZXEucm91dGU/LnBhdGg7XG4gICAgaHR0cENvbnRleHQuc2V0KENvbnN0YW50cy5MT0dHRVJfUkVRVUVTVF9QQVlMT0FELCBfLmNsb25lRGVlcChyZXF1ZXN0UGF5bG9hZCkpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGdldFJlc3BvbnNlVGltZSgpIHtcbiAgbGV0IHRpbWVEaWZmID0gXCItXCI7XG4gIGNvbnN0IG5hbm9Ub01pbGxpID0gQmlnSW50KDFlNik7XG4gIGNvbnN0IHN0YXJ0VGltZSA9IGh0dHBDb250ZXh0LmdldChDb25zdGFudHMuTE9HR0VSX1JFUVVFU1RfU1RBUlRfVElNRSk7XG4gIGNvbnN0IGVuZFRpbWUgPSBwcm9jZXNzLmhydGltZS5iaWdpbnQoKTtcbiAgdHJ5IHtcbiAgICBpZiAodHlwZW9mIHN0YXJ0VGltZSA9PT0gXCJiaWdpbnRcIiAmJiB0eXBlb2YgZW5kVGltZSA9PT0gXCJiaWdpbnRcIikge1xuICAgICAgdGltZURpZmYgPSAoZW5kVGltZSAtIHN0YXJ0VGltZSkgLyBuYW5vVG9NaWxsaTtcbiAgICB9XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgbG9nKFwiZXJyb3JcIiwgeyBlcnJvciB9KTtcbiAgfVxuICByZXR1cm4gYCR7dGltZURpZmZ9bXNgO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc2V0SHR0cENvbnRleHRSZXNwb25zZVBheWxvYWQocmVxLCByZXMsIG5leHQpIHtcbiAgY29uc3Qgb3V0ID0ge1xuICAgIGhlYWRlcnM6IHJlcy5nZXRIZWFkZXJzKCksXG4gICAgZGF0YTogcmVzLmRhdGEsXG4gIH07XG4gIHNldEh0dHBDb250ZXh0RHluYW1pY1JvdXRlUGF0aChyZXEpO1xuICBodHRwQ29udGV4dC5zZXQoQ29uc3RhbnRzLkxPR0dFUl9SRVNQT05TRV9QQVlMT0FELCBfLmNsb25lRGVlcChvdXQpKTtcbiAgaHR0cENvbnRleHQuc2V0KENvbnN0YW50cy5MT0dHRVJfUkVTUE9OU0VfVElNRSwgZ2V0UmVzcG9uc2VUaW1lKCkpO1xuICBuZXh0KCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzZXRIdHRwQ29udGV4dEVycm9yUmVzcG9uc2VQYXlsb2FkKGVycm9yLCByZXEsIHJlcywgbmV4dCkge1xuICBjb25zdCBvdXQgPSB7XG4gICAgaGVhZGVyczogcmVzLmdldEhlYWRlcnMoKSxcbiAgICBlcnJvcixcbiAgfTtcbiAgc2V0SHR0cENvbnRleHREeW5hbWljUm91dGVQYXRoKHJlcSk7XG4gIGh0dHBDb250ZXh0LnNldChDb25zdGFudHMuTE9HR0VSX1JFU1BPTlNFX1BBWUxPQUQsIF8uY2xvbmVEZWVwKG91dCkpO1xuICBodHRwQ29udGV4dC5zZXQoQ29uc3RhbnRzLkxPR0dFUl9SRVNQT05TRV9USU1FLCBnZXRSZXNwb25zZVRpbWUoKSk7XG4gIG5leHQoZXJyb3IpO1xufVxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFBOzs7Ozs7QUFFQSxNQUFNQSxXQUFXLEdBQUdDLE9BQU8sQ0FBQyxzQkFBRCxDQUEzQjs7QUFDQSxNQUFNQyxDQUFDLEdBQUdELE9BQU8sQ0FBQyxRQUFELENB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","map":{"version":3,"names":["httpContext","require","_","setHttpContextMetrics","req","res","next","set","Constants","LOGGER_REQUEST_START_TIME","process","hrtime","bigint","LOGGER_API_ROUTE","path","LOGGER_USER_IP_ADDRESS","headers","connection","remoteAddress","setHttpContextUserDetails","session","LOGGER_USER_DETAILS","userId","user_id","primaryNumber","zvr_mobile_no","doosraNumber","v_mobile_no","setHttpContextRequestPayload","LOGGER_REQUEST_PAYLOAD","urlDetails","cloneDeep","baseUrl","host","hostname","httpVersion","method","originalUrl","protocol","url","params","body","query","setHttpContextDynamicRoutePath","requestPayload","get","dynamicRoutePath","route","getResponseTime","timeDiff","nanoToMilli","BigInt","startTime","endTime","error","log","setHttpContextResponsePayload","out","getHeaders","data","LOGGER_RESPONSE_PAYLOAD","LOGGER_RESPONSE_TIME","setHttpContextErrorResponsePayload"],"sourceRoot":"/Users/ramireddycharitha/microservices/sample-micro-service/middlewares/","sources":["HttpContextMiddleware.js"],"sourcesContent":["import * as Constants from \"../constants/Constants\";\n\nconst httpContext = require(\"express-http-context\");\nconst _ = require(\"lodash\");\n\nexport function setHttpContextMetrics(req, res, next) {\n  httpContext.set(Constants.LOGGER_REQUEST_START_TIME, process.hrtime.bigint());\n  httpContext.set(Constants.LOGGER_API_ROUTE, req.path);\n  httpContext.set(Constants.LOGGER_USER_IP_ADDRESS, req.headers[\"x-forwarded-for\"] || req.connection.remoteAddress);\n  next();\n}\n\nexport function setHttpContextUserDetails(req, res, next) {\n  // set session payload for metroauth initi\n  if (req.session) {\n    httpContext.set(Constants.LOGGER_USER_DETAILS, {\n      userId: req.session.user_id || \"\",\n      primaryNumber: req.session.zvr_mobile_no || \"\",\n      doosraNumber: req.session.v_mobile_no || \"\",\n    });\n  }\n  next();\n}\n\n// unable to capture dynamic url path in request middleware\n// req.route.path is populated when it hits matched route only\n// is captured in response middleware\n// http://expressjs.com/en/api.html#req.route\nexport function setHttpContextRequestPayload(req, res, next) {\n  httpContext.set(Constants.LOGGER_REQUEST_PAYLOAD, {\n    // clone\n    urlDetails: _.cloneDeep({\n      path: req.path,\n      baseUrl: req.baseUrl,\n      host: req.hostname,\n      httpVersion: req.httpVersion,\n      method: req.method,\n      originalUrl: req.originalUrl,\n      protocol: req.protocol,\n      url: req.url,\n    }),\n    headers: _.cloneDeep(req.headers),\n    params: _.cloneDeep(req.params),\n    body: _.cloneDeep(req.body),\n    query: _.cloneDeep(req.query),\n  });\n  next();\n}\n\n/**\n *\n * @param {*} req\n *\n * https://expressjs.com/en/api.html#req.route\n * Contains the currently-matched route, a string.\n * req.route.path is update on matched route and available in response middleware.\n */\nfunction setHttpContextDynamicRoutePath(req) {\n  const requestPayload = httpContext.get(Constants.LOGGER_REQUEST_PAYLOAD);\n  if (requestPayload && requestPayload.urlDetails) {\n    requestPayload.urlDetails.dynamicRoutePath = req.route?.path;\n    httpContext.set(Constants.LOGGER_REQUEST_PAYLOAD, _.cloneDeep(requestPayload));\n  }\n}\n\nfunction getResponseTime() {\n  let timeDiff = \"-\";\n  const nanoToMilli = BigInt(1e6);\n  const startTime = httpContext.get(Constants.LOGGER_REQUEST_START_TIME);\n  const endTime = process.hrtime.bigint();\n  try {\n    if (typeof startTime === \"bigint\" && typeof endTime === \"bigint\") {\n      timeDiff = (endTime - startTime) / nanoToMilli;\n    }\n  } catch (error) {\n    log(\"error\", { error });\n  }\n  return `${timeDiff}ms`;\n}\n\nexport function setHttpContextResponsePayload(req, res, next) {\n  const out = {\n    headers: res.getHeaders(),\n    data: res.data,\n  };\n  setHttpContextDynamicRoutePath(req);\n  httpContext.set(Constants.LOGGER_RESPONSE_PAYLOAD, _.cloneDeep(out));\n  httpContext.set(Constants.LOGGER_RESPONSE_TIME, getResponseTime());\n  next();\n}\n\nexport function setHttpContextErrorResponsePayload(error, req, res, next) {\n  const out = {\n    headers: res.getHeaders(),\n    error,\n  };\n  setHttpContextDynamicRoutePath(req);\n  httpContext.set(Constants.LOGGER_RESPONSE_PAYLOAD, _.cloneDeep(out));\n  httpContext.set(Constants.LOGGER_RESPONSE_TIME, getResponseTime());\n  next(error);\n}\n"],"mappings":"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"}},"mtime":1653643634181},"{\"assumptions\":{},\"sourceRoot\":\"/Users/ramireddycharitha/microservices/sample-micro-service/constants/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/ramireddycharitha/microservices/sample-micro-service\",\"filename\":\"/Users/ramireddycharitha/microservices/sample-micro-service/constants/Constants.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"default\",\"root\":\"/Users/ramireddycharitha/microservices/sample-micro-service\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.17.10:default":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.LOGGER_USER_IP_ADDRESS = exports.LOGGER_USER_DETAILS = exports.LOGGER_URL_REDIRECTION_OBJ = exports.LOGGER_RESPONSE_TIME = exports.LOGGER_RESPONSE_PAYLOAD = exports.LOGGER_REQUEST_START_TIME = exports.LOGGER_REQUEST_PAYLOAD = exports.LOGGER_CORRELATIONID = exports.LOGGER_API_ROUTE = void 0;\nconst LOGGER_USER_DETAILS = \"loggerUserDetails\";\nexports.LOGGER_USER_DETAILS = LOGGER_USER_DETAILS;\nconst LOGGER_REQUEST_PAYLOAD = \"loggerRequestPayload\";\nexports.LOGGER_REQUEST_PAYLOAD = LOGGER_REQUEST_PAYLOAD;\nconst LOGGER_RESPONSE_PAYLOAD = \"loggerResponsePayload\";\nexports.LOGGER_RESPONSE_PAYLOAD = LOGGER_RESPONSE_PAYLOAD;\nconst LOGGER_REQUEST_START_TIME = \"loggerRequestStartTime\";\nexports.LOGGER_REQUEST_START_TIME = LOGGER_REQUEST_START_TIME;\nconst LOGGER_API_ROUTE = \"loggerRoute\";\nexports.LOGGER_API_ROUTE = LOGGER_API_ROUTE;\nconst LOGGER_USER_IP_ADDRESS = \"loggerUserIpAddress\";\nexports.LOGGER_USER_IP_ADDRESS = LOGGER_USER_IP_ADDRESS;\nconst LOGGER_CORRELATIONID = \"loggerCorrelationId\";\nexports.LOGGER_CORRELATIONID = LOGGER_CORRELATIONID;\nconst LOGGER_RESPONSE_TIME = \"loggerResponseTime\";\nexports.LOGGER_RESPONSE_TIME = LOGGER_RESPONSE_TIME;\nconst LOGGER_URL_REDIRECTION_OBJ = \"loggerUrlRedirectionObj\";\nexports.LOGGER_URL_REDIRECTION_OBJ = LOGGER_URL_REDIRECTION_OBJ;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJMT0dHRVJfVVNFUl9ERVRBSUxTIiwiTE9HR0VSX1JFUVVFU1RfUEFZTE9BRCIsIkxPR0dFUl9SRVNQT05TRV9QQVlMT0FEIiwiTE9HR0VSX1JFUVVFU1RfU1RBUlRfVElNRSIsIkxPR0dFUl9BUElfUk9VVEUiLCJMT0dHRVJfVVNFUl9JUF9BRERSRVNTIiwiTE9HR0VSX0NPUlJFTEFUSU9OSUQiLCJMT0dHRVJfUkVTUE9OU0VfVElNRSIsIkxPR0dFUl9VUkxfUkVESVJFQ1RJT05fT0JKIl0sInNvdXJjZVJvb3QiOiIvVXNlcnMvcmFtaXJlZGR5Y2hhcml0aGEvbWljcm9zZXJ2aWNlcy9zYW1wbGUtbWljcm8tc2VydmljZS9jb25zdGFudHMvIiwic291cmNlcyI6WyJDb25zdGFudHMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNvbnN0IExPR0dFUl9VU0VSX0RFVEFJTFMgPSBcImxvZ2dlclVzZXJEZXRhaWxzXCI7XG5leHBvcnQgY29uc3QgTE9HR0VSX1JFUVVFU1RfUEFZTE9BRCA9IFwibG9nZ2VyUmVxdWVzdFBheWxvYWRcIjtcbmV4cG9ydCBjb25zdCBMT0dHRVJfUkVTUE9OU0VfUEFZTE9BRCA9IFwibG9nZ2VyUmVzcG9uc2VQYXlsb2FkXCI7XG5leHBvcnQgY29uc3QgTE9HR0VSX1JFUVVFU1RfU1RBUlRfVElNRSA9IFwibG9nZ2VyUmVxdWVzdFN0YXJ0VGltZVwiO1xuZXhwb3J0IGNvbnN0IExPR0dFUl9BUElfUk9VVEUgPSBcImxvZ2dlclJvdXRlXCI7XG5leHBvcnQgY29uc3QgTE9HR0VSX1VTRVJfSVBfQUREUkVTUyA9IFwibG9nZ2VyVXNlcklwQWRkcmVzc1wiO1xuZXhwb3J0IGNvbnN0IExPR0dFUl9DT1JSRUxBVElPTklEID0gXCJsb2dnZXJDb3JyZWxhdGlvbklkXCI7XG5leHBvcnQgY29uc3QgTE9HR0VSX1JFU1BPTlNFX1RJTUUgPSBcImxvZ2dlclJlc3BvbnNlVGltZVwiO1xuZXhwb3J0IGNvbnN0IExPR0dFUl9VUkxfUkVESVJFQ1RJT05fT0JKID0gXCJsb2dnZXJVcmxSZWRpcmVjdGlvbk9ialwiO1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBTyxNQUFNQSxtQkFBbUIsR0FBRyxtQkFBNUI7O0FBQ0EsTUFBTUMsc0JBQXNCLEdBQUcsc0JBQS9COztBQUNBLE1BQU1DLHVCQUF1QixHQUFHLHVCQUFoQzs7QUFDQSxNQUFNQyx5QkFBeUIsR0FBRyx3QkFBbEM7O0FBQ0EsTUFBTUMsZ0JBQWdCLEdBQUcsYUFBekI7O0FBQ0EsTUFBTUMsc0JBQXNCLEdBQUcscUJBQS9COztBQUNBLE1BQU1DLG9CQUFvQixHQUFHLHFCQUE3Qjs7QUFDQSxNQUFNQyxvQkFBb0IsR0FBRyxvQkFBN0I7O0FBQ0EsTUFBTUMsMEJBQTBCLEdBQUcseUJBQW5DIn0=","map":{"version":3,"names":["LOGGER_USER_DETAILS","LOGGER_REQUEST_PAYLOAD","LOGGER_RESPONSE_PAYLOAD","LOGGER_REQUEST_START_TIME","LOGGER_API_ROUTE","LOGGER_USER_IP_ADDRESS","LOGGER_CORRELATIONID","LOGGER_RESPONSE_TIME","LOGGER_URL_REDIRECTION_OBJ"],"sourceRoot":"/Users/ramireddycharitha/microservices/sample-micro-service/constants/","sources":["Constants.js"],"sourcesContent":["export const LOGGER_USER_DETAILS = \"loggerUserDetails\";\nexport const LOGGER_REQUEST_PAYLOAD = \"loggerRequestPayload\";\nexport const LOGGER_RESPONSE_PAYLOAD = \"loggerResponsePayload\";\nexport const LOGGER_REQUEST_START_TIME = \"loggerRequestStartTime\";\nexport const LOGGER_API_ROUTE = \"loggerRoute\";\nexport const LOGGER_USER_IP_ADDRESS = \"loggerUserIpAddress\";\nexport const LOGGER_CORRELATIONID = \"loggerCorrelationId\";\nexport const LOGGER_RESPONSE_TIME = \"loggerResponseTime\";\nexport const LOGGER_URL_REDIRECTION_OBJ = \"loggerUrlRedirectionObj\";\n"],"mappings":";;;;;;AAAO,MAAMA,mBAAmB,GAAG,mBAA5B;;AACA,MAAMC,sBAAsB,GAAG,sBAA/B;;AACA,MAAMC,uBAAuB,GAAG,uBAAhC;;AACA,MAAMC,yBAAyB,GAAG,wBAAlC;;AACA,MAAMC,gBAAgB,GAAG,aAAzB;;AACA,MAAMC,sBAAsB,GAAG,qBAA/B;;AACA,MAAMC,oBAAoB,GAAG,qBAA7B;;AACA,MAAMC,oBAAoB,GAAG,oBAA7B;;AACA,MAAMC,0BAA0B,GAAG,yBAAnC"}},"mtime":1653643634178},"{\"assumptions\":{},\"sourceRoot\":\"/Users/ramireddycharitha/microservices/sample-micro-service/connections/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/ramireddycharitha/microservices/sample-micro-service\",\"filename\":\"/Users/ramireddycharitha/microservices/sample-micro-service/connections/MainDb.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"default\",\"root\":\"/Users/ramireddycharitha/microservices/sample-micro-service\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"syntax-class-static-block\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-private-property-in-object\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-class-properties\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-numeric-separator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-nullish-coalescing-operator\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-chaining\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-json-strings\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-optional-catch-binding\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-async-generators\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"syntax-object-rest-spread\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"proposal-export-namespace-from\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"ExportNamedDeclaration\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.17.10:default":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getDbInstance = getDbInstance;\nexports.init = init;\n\nvar _mongoose = _interopRequireDefault(require(\"mongoose\"));\n\nvar _index = _interopRequireDefault(require(\"../config/index\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/* eslint-disable import/no-import-module-exports */\nlet conn;\n\nfunction init() {\n  const RECONNECT_TIME = 5000;\n  const CONN_URL = _index.default.mainDbconfig.connString;\n\n  if (conn) {\n    return conn;\n  }\n\n  _mongoose.default.set(\"debug\", (collectionName, methodName, ...methodArgs) => {\n    // use custom function to log collection methods + arguments\n    log(\"info\", `Mongoose: ${collectionName}.${methodName}(${methodArgs.join(\", \")})`);\n  });\n\n  log(\"info\", `CONN_URL to connect to main database ${CONN_URL}`);\n  conn = _mongoose.default.createConnection(CONN_URL); //  Mongoose Connection Events\n\n  conn.on(\"error\", error => {\n    log(\"error\", {\n      error\n    });\n  });\n  conn.once(\"open\", () => {\n    log(\"info\", {\n      dBConnectionStatus: \"open\"\n    });\n  });\n  conn.on(\"connected\", () => {\n    log(\"info\", {\n      dBConnectionStatus: \"connected\"\n    });\n  });\n  conn.on(\"connecting\", () => {\n    log(\"info\", {\n      dBConnectionStatus: \"connecting\"\n    });\n  });\n  conn.on(\"reconnected\", () => {\n    log(\"info\", {\n      dBConnectionStatus: \"reconnected\"\n    });\n  });\n  conn.on(\"disconnected\", () => {\n    log(\"error\", {\n      dBConnectionStatus: `disconnected Reconnecting in ${RECONNECT_TIME / 1000}s...`\n    }); // https://github.com/automattic/mongoose/issues/5169#issuecomment-314983113\n\n    setTimeout(() => {\n      conn.openUri(CONN_URL).catch(() => {});\n    }, RECONNECT_TIME);\n  });\n  return conn;\n}\n\nfunction getDbInstance() {\n  return conn;\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb25uIiwiaW5pdCIsIlJFQ09OTkVDVF9USU1FIiwiQ09OTl9VUkwiLCJjb25maWciLCJtYWluRGJjb25maWciLCJjb25uU3RyaW5nIiwibW9uZ29vc2UiLCJzZXQiLCJjb2xsZWN0aW9uTmFtZSIsIm1ldGhvZE5hbWUiLCJtZXRob2RBcmdzIiwibG9nIiwiam9pbiIsImNyZWF0ZUNvbm5lY3Rpb24iLCJvbiIsImVycm9yIiwib25jZSIsImRCQ29ubmVjdGlvblN0YXR1cyIsInNldFRpbWVvdXQiLCJvcGVuVXJpIiwiY2F0Y2giLCJnZXREYkluc3RhbmNlIl0sInNvdXJjZVJvb3QiOiIvVXNlcnMvcmFtaXJlZGR5Y2hhcml0aGEvbWljcm9zZXJ2aWNlcy9zYW1wbGUtbWljcm8tc2VydmljZS9jb25uZWN0aW9ucy8iLCJzb3VyY2VzIjpbIk1haW5EYi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiBlc2xpbnQtZGlzYWJsZSBpbXBvcnQvbm8taW1wb3J0LW1vZHVsZS1leHBvcnRzICovXG5cbmltcG9ydCBtb25nb29zZSBmcm9tIFwibW9uZ29vc2VcIjtcbmltcG9ydCBjb25maWcgZnJvbSBcIi4uL2NvbmZpZy9pbmRleFwiO1xuXG5sZXQgY29ubjtcblxuZXhwb3J0IGZ1bmN0aW9uIGluaXQoKSB7XG4gIGNvbnN0IFJFQ09OTkVDVF9USU1FID0gNTAwMDtcbiAgY29uc3QgQ09OTl9VUkwgPSBjb25maWcubWFpbkRiY29uZmlnLmNvbm5TdHJpbmc7XG5cbiAgaWYgKGNvbm4pIHtcbiAgICByZXR1cm4gY29ubjtcbiAgfVxuXG4gIG1vbmdvb3NlLnNldChcImRlYnVnXCIsIChjb2xsZWN0aW9uTmFtZSwgbWV0aG9kTmFtZSwgLi4ubWV0aG9kQXJncykgPT4ge1xuICAgIC8vIHVzZSBjdXN0b20gZnVuY3Rpb24gdG8gbG9nIGNvbGxlY3Rpb24gbWV0aG9kcyArIGFyZ3VtZW50c1xuICAgIGxvZyhcImluZm9cIiwgYE1vbmdvb3NlOiAke2NvbGxlY3Rpb25OYW1lfS4ke21ldGhvZE5hbWV9KCR7bWV0aG9kQXJncy5qb2luKFwiLCBcIil9KWApO1xuICB9KTtcblxuICBsb2coXCJpbmZvXCIsIGBDT05OX1VSTCB0byBjb25uZWN0IHRvIG1haW4gZGF0YWJhc2UgJHtDT05OX1VSTH1gKTtcbiAgY29ubiA9IG1vbmdvb3NlLmNyZWF0ZUNvbm5lY3Rpb24oQ09OTl9VUkwpO1xuXG4gIC8vICBNb25nb29zZSBDb25uZWN0aW9uIEV2ZW50c1xuICBjb25uLm9uKFwiZXJyb3JcIiwgKGVycm9yKSA9PiB7XG4gICAgbG9nKFwiZXJyb3JcIiwgeyBlcnJvciB9KTtcbiAgfSk7XG5cbiAgY29ubi5vbmNlKFwib3BlblwiLCAoKSA9PiB7XG4gICAgbG9nKFwiaW5mb1wiLCB7IGRCQ29ubmVjdGlvblN0YXR1czogXCJvcGVuXCIgfSk7XG4gIH0pO1xuXG4gIGNvbm4ub24oXCJjb25uZWN0ZWRcIiwgKCkgPT4ge1xuICAgIGxvZyhcImluZm9cIiwgeyBkQkNvbm5lY3Rpb25TdGF0dXM6IFwiY29ubmVjdGVkXCIgfSk7XG4gIH0pO1xuXG4gIGNvbm4ub24oXCJjb25uZWN0aW5nXCIsICgpID0+IHtcbiAgICBsb2coXCJpbmZvXCIsIHsgZEJDb25uZWN0aW9uU3RhdHVzOiBcImNvbm5lY3RpbmdcIiB9KTtcbiAgfSk7XG5cbiAgY29ubi5vbihcInJlY29ubmVjdGVkXCIsICgpID0+IHtcbiAgICBsb2coXCJpbmZvXCIsIHsgZEJDb25uZWN0aW9uU3RhdHVzOiBcInJlY29ubmVjdGVkXCIgfSk7XG4gIH0pO1xuXG4gIGNvbm4ub24oXCJkaXNjb25uZWN0ZWRcIiwgKCkgPT4ge1xuICAgIGxvZyhcImVycm9yXCIsIHsgZEJDb25uZWN0aW9uU3RhdHVzOiBgZGlzY29ubmVjdGVkIFJlY29ubmVjdGluZyBpbiAke1JFQ09OTkVDVF9USU1FIC8gMTAwMH1zLi4uYCB9KTtcbiAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vYXV0b21hdHRpYy9tb25nb29zZS9pc3N1ZXMvNTE2OSNpc3N1ZWNvbW1lbnQtMzE0OTgzMTEzXG4gICAgc2V0VGltZW91dCgoKSA9PiB7IGNvbm4ub3BlblVyaShDT05OX1VSTCkuY2F0Y2goKCkgPT4geyB9KTsgfSwgUkVDT05ORUNUX1RJTUUpO1xuICB9KTtcblxuICByZXR1cm4gY29ubjtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldERiSW5zdGFuY2UoKSB7XG4gIHJldHVybiBjb25uO1xufVxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUVBOztBQUNBOzs7O0FBSEE7QUFLQSxJQUFJQSxJQUFKOztBQUVPLFNBQVNDLElBQVQsR0FBZ0I7RUFDckIsTUFBTUMsY0FBYyxHQUFHLElBQXZCO0VBQ0EsTUFBTUMsUUFBUSxHQUFHQyxlQUFPQyxZQUFQLENBQW9CQyxVQUFyQzs7RUFFQSxJQUFJTixJQUFKLEVBQVU7SUFDUixPQUFPQSxJQUFQO0VBQ0Q7O0VBRURPLGtCQUFTQyxHQUFULENBQWEsT0FBYixFQUFzQixDQUFDQyxjQUFELEVBQWlCQyxVQUFqQixFQUE2QixHQUFHQyxVQUFoQyxLQUErQztJQUNuRTtJQUNBQyxHQUFHLENBQUMsTUFBRCxFQUFVLGFBQVlILGNBQWUsSUFBR0MsVUFBVyxJQUFHQyxVQUFVLENBQUNFLElBQVgsQ0FBZ0IsSUFBaEIsQ0FBc0IsR0FBNUUsQ0FBSDtFQUNELENBSEQ7O0VBS0FELEdBQUcsQ0FBQyxNQUFELEVBQVUsd0NBQXVDVCxRQUFTLEVBQTFELENBQUg7RUFDQUgsSUFBSSxHQUFHTyxrQkFBU08sZ0JBQVQsQ0FBMEJYLFFBQTFCLENBQVAsQ0FkcUIsQ0FnQnJCOztFQUNBSCxJQUFJLENBQUNlLEVBQUwsQ0FBUSxPQUFSLEVBQWtCQyxLQUFELElBQVc7SUFDMUJKLEdBQUcsQ0FBQyxPQUFELEVBQVU7TUFBRUk7SUFBRixDQUFWLENBQUg7RUFDRCxDQUZEO0VBSUFoQixJQUFJLENBQUNpQixJQUFMLENBQVUsTUFBVixFQUFrQixNQUFNO0lBQ3RCTCxHQUFHLENBQUMsTUFBRCxFQUFTO01BQUVNLGtCQUFrQixFQUFFO0lBQXRCLENBQVQsQ0FBSDtFQUNELENBRkQ7RUFJQWxCLElBQUksQ0FBQ2UsRUFBTCxDQUFRLFdBQVIsRUFBcUIsTUFBTTtJQUN6QkgsR0FBRyxDQUFDLE1BQUQsRUFBUztNQUFFTSxrQkFBa0IsRUFBRTtJQUF0QixDQUFULENBQUg7RUFDRCxDQUZEO0VBSUFsQixJQUFJLENBQUNlLEVBQUwsQ0FBUSxZQUFSLEVBQXNCLE1BQU07SUFDMUJILEdBQUcsQ0FBQyxNQUFELEVBQVM7TUFBRU0sa0JBQWtCLEVBQUU7SUFBdEIsQ0FBVCxDQUFIO0VBQ0QsQ0FGRDtFQUlBbEIsSUFBSSxDQUFDZSxFQUFMLENBQVEsYUFBUixFQUF1QixNQUFNO0lBQzNCSCxHQUFHLENBQUMsTUFBRCxFQUFTO01BQUVNLGtCQUFrQixFQUFFO0lBQXRCLENBQVQsQ0FBSDtFQUNELENBRkQ7RUFJQWxCLElBQUksQ0FBQ2UsRUFBTCxDQUFRLGNBQVIsRUFBd0IsTUFBTTtJQUM1QkgsR0FBRyxDQUFDLE9BQUQsRUFBVTtNQUFFTSxrQkFBa0IsRUFBRyxnQ0FBK0JoQixjQUFjLEdBQUcsSUFBSztJQUE1RSxDQUFWLENBQUgsQ0FENEIsQ0FFNUI7O0lBQ0FpQixVQUFVLENBQUMsTUFBTTtNQUFFbkIsSUFBSSxDQUFDb0IsT0FBTCxDQUFhakIsUUFBYixFQUF1QmtCLEtBQXZCLENBQTZCLE1BQU0sQ0FBRyxDQUF0QztJQUEwQyxDQUFuRCxFQUFxRG5CLGNBQXJELENBQVY7RUFDRCxDQUpEO0VBTUEsT0FBT0YsSUFBUDtBQUNEOztBQUVNLFNBQVNzQixhQUFULEdBQXlCO0VBQzlCLE9BQU90QixJQUFQO0FBQ0QifQ==","map":{"version":3,"names":["conn","init","RECONNECT_TIME","CONN_URL","config","mainDbconfig","connString","mongoose","set","collectionName","methodName","methodArgs","log","join","createConnection","on","error","once","dBConnectionStatus","setTimeout","openUri","catch","getDbInstance"],"sourceRoot":"/Users/ramireddycharitha/microservices/sample-micro-service/connections/","sources":["MainDb.js"],"sourcesContent":["/* eslint-disable import/no-import-module-exports */\n\nimport mongoose from \"mongoose\";\nimport config from \"../config/index\";\n\nlet conn;\n\nexport function init() {\n  const RECONNECT_TIME = 5000;\n  const CONN_URL = config.mainDbconfig.connString;\n\n  if (conn) {\n    return conn;\n  }\n\n  mongoose.set(\"debug\", (collectionName, methodName, ...methodArgs) => {\n    // use custom function to log collection methods + arguments\n    log(\"info\", `Mongoose: ${collectionName}.${methodName}(${methodArgs.join(\", \")})`);\n  });\n\n  log(\"info\", `CONN_URL to connect to main database ${CONN_URL}`);\n  conn = mongoose.createConnection(CONN_URL);\n\n  //  Mongoose Connection Events\n  conn.on(\"error\", (error) => {\n    log(\"error\", { error });\n  });\n\n  conn.once(\"open\", () => {\n    log(\"info\", { dBConnectionStatus: \"open\" });\n  });\n\n  conn.on(\"connected\", () => {\n    log(\"info\", { dBConnectionStatus: \"connected\" });\n  });\n\n  conn.on(\"connecting\", () => {\n    log(\"info\", { dBConnectionStatus: \"connecting\" });\n  });\n\n  conn.on(\"reconnected\", () => {\n    log(\"info\", { dBConnectionStatus: \"reconnected\" });\n  });\n\n  conn.on(\"disconnected\", () => {\n    log(\"error\", { dBConnectionStatus: `disconnected Reconnecting in ${RECONNECT_TIME / 1000}s...` });\n    // https://github.com/automattic/mongoose/issues/5169#issuecomment-314983113\n    setTimeout(() => { conn.openUri(CONN_URL).catch(() => { }); }, RECONNECT_TIME);\n  });\n\n  return conn;\n}\n\nexport function getDbInstance() {\n  return conn;\n}\n"],"mappings":";;;;;;;;AAEA;;AACA;;;;AAHA;AAKA,IAAIA,IAAJ;;AAEO,SAASC,IAAT,GAAgB;EACrB,MAAMC,cAAc,GAAG,IAAvB;EACA,MAAMC,QAAQ,GAAGC,eAAOC,YAAP,CAAoBC,UAArC;;EAEA,IAAIN,IAAJ,EAAU;IACR,OAAOA,IAAP;EACD;;EAEDO,kBAASC,GAAT,CAAa,OAAb,EAAsB,CAACC,cAAD,EAAiBC,UAAjB,EAA6B,GAAGC,UAAhC,KAA+C;IACnE;IACAC,GAAG,CAAC,MAAD,EAAU,aAAYH,cAAe,IAAGC,UAAW,IAAGC,UAAU,CAACE,IAAX,CAAgB,IAAhB,CAAsB,GAA5E,CAAH;EACD,CAHD;;EAKAD,GAAG,CAAC,MAAD,EAAU,wCAAuCT,QAAS,EAA1D,CAAH;EACAH,IAAI,GAAGO,kBAASO,gBAAT,CAA0BX,QAA1B,CAAP,CAdqB,CAgBrB;;EACAH,IAAI,CAACe,EAAL,CAAQ,OAAR,EAAkBC,KAAD,IAAW;IAC1BJ,GAAG,CAAC,OAAD,EAAU;MAAEI;IAAF,CAAV,CAAH;EACD,CAFD;EAIAhB,IAAI,CAACiB,IAAL,CAAU,MAAV,EAAkB,MAAM;IACtBL,GAAG,CAAC,MAAD,EAAS;MAAEM,kBAAkB,EAAE;IAAtB,CAAT,CAAH;EACD,CAFD;EAIAlB,IAAI,CAACe,EAAL,CAAQ,WAAR,EAAqB,MAAM;IACzBH,GAAG,CAAC,MAAD,EAAS;MAAEM,kBAAkB,EAAE;IAAtB,CAAT,CAAH;EACD,CAFD;EAIAlB,IAAI,CAACe,EAAL,CAAQ,YAAR,EAAsB,MAAM;IAC1BH,GAAG,CAAC,MAAD,EAAS;MAAEM,kBAAkB,EAAE;IAAtB,CAAT,CAAH;EACD,CAFD;EAIAlB,IAAI,CAACe,EAAL,CAAQ,aAAR,EAAuB,MAAM;IAC3BH,GAAG,CAAC,MAAD,EAAS;MAAEM,kBAAkB,EAAE;IAAtB,CAAT,CAAH;EACD,CAFD;EAIAlB,IAAI,CAACe,EAAL,CAAQ,cAAR,EAAwB,MAAM;IAC5BH,GAAG,CAAC,OAAD,EAAU;MAAEM,kBAAkB,EAAG,gCAA+BhB,cAAc,GAAG,IAAK;IAA5E,CAAV,CAAH,CAD4B,CAE5B;;IACAiB,UAAU,CAAC,MAAM;MAAEnB,IAAI,CAACoB,OAAL,CAAajB,QAAb,EAAuBkB,KAAvB,CAA6B,MAAM,CAAG,CAAtC;IAA0C,CAAnD,EAAqDnB,cAArD,CAAV;EACD,CAJD;EAMA,OAAOF,IAAP;AACD;;AAEM,SAASsB,aAAT,GAAyB;EAC9B,OAAOtB,IAAP;AACD"}},"mtime":1653643634177}}